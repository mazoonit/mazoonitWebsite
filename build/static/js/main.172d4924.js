/*! For license information please see main.172d4924.js.LICENSE.txt */
!function(){var e={5345:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,a=e[i];if(!(0<l(a,t)))break e;e[i]=t,e[n]=a,n=i}}function i(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,a=e.length,r=a>>>1;i<r;){var o=2*(i+1)-1,g=e[o],s=o+1,u=e[s];if(0>l(g,n))s<a&&0>l(u,g)?(e[i]=u,e[s]=n,i=s):(e[i]=g,e[o]=n,i=o);else{if(!(s<a&&0>l(u,n)))break e;e[i]=u,e[s]=n,i=s}}}return t}function l(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,g=o.now();t.unstable_now=function(){return o.now()-g}}var s=[],u=[],c=1,I=null,C=3,d=!1,h=!1,A=!1,m="function"===typeof setTimeout?setTimeout:null,p="function"===typeof clearTimeout?clearTimeout:null,f="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(s,t)}t=i(u)}}function v(e){if(A=!1,b(e),!h)if(null!==i(s))h=!0,X(y);else{var t=i(u);null!==t&&k(v,t.startTime-e)}}function y(e,n){h=!1,A&&(A=!1,p(x),x=-1),d=!0;var l=C;try{for(b(n),I=i(s);null!==I&&(!(I.expirationTime>n)||e&&!W());){var r=I.callback;if("function"===typeof r){I.callback=null,C=I.priorityLevel;var o=r(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?I.callback=o:I===i(s)&&a(s),b(n)}else a(s);I=i(s)}if(null!==I)var g=!0;else{var c=i(u);null!==c&&k(v,c.startTime-n),g=!1}return g}finally{I=null,C=l,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,B=!1,Z=null,x=-1,w=5,q=-1;function W(){return!(t.unstable_now()-q<w)}function S(){if(null!==Z){var e=t.unstable_now();q=e;var n=!0;try{n=Z(!0,e)}finally{n?G():(B=!1,Z=null)}}else B=!1}if("function"===typeof f)G=function(){f(S)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,V=R.port2;R.port1.onmessage=S,G=function(){V.postMessage(null)}}else G=function(){m(S,0)};function X(e){Z=e,B||(B=!0,G())}function k(e,n){x=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||d||(h=!0,X(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return i(s)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,a,l){var r=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?r+l:r:l=r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:c++,callback:a,priorityLevel:e,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>r?(e.sortIndex=l,n(u,e),null===i(s)&&e===i(u)&&(A?(p(x),x=-1):A=!0,k(v,l-r))):(e.sortIndex=o,n(s,e),h||d||(h=!0,X(y))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},4545:function(e,t,n){"use strict";e.exports=n(5345)},4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var i=n(3589),a=n(7297),l=n(9301),r=n(9774),o=n(1804),g=n(9145),s=n(5411),u=n(6789),c=n(4531),I=n(6569),C=n(6261);e.exports=function(e){return new Promise((function(t,n){var d,h=e.data,A=e.headers,m=e.responseType;function p(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}i.isFormData(h)&&i.isStandardBrowserEnv()&&delete A["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";A.Authorization="Basic "+btoa(b+":"+v)}var y=o(e.baseURL,e.url);function G(){if(f){var i="getAllResponseHeaders"in f?g(f.getAllResponseHeaders()):null,l={data:m&&"text"!==m&&"json"!==m?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:i,config:e,request:f};a((function(e){t(e),p()}),(function(e){n(e),p()}),l),f=null}}if(f.open(e.method.toUpperCase(),r(y,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,"onloadend"in f?f.onloadend=G:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(G)},f.onabort=function(){f&&(n(new c("Request aborted",c.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new c("Network Error",c.ERR_NETWORK,e,f,f)),f=null},f.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",i=e.transitional||u;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new c(t,i.clarifyTimeoutError?c.ETIMEDOUT:c.ECONNABORTED,e,f)),f=null},i.isStandardBrowserEnv()){var B=(e.withCredentials||s(y))&&e.xsrfCookieName?l.read(e.xsrfCookieName):void 0;B&&(A[e.xsrfHeaderName]=B)}"setRequestHeader"in f&&i.forEach(A,(function(e,t){"undefined"===typeof h&&"content-type"===t.toLowerCase()?delete A[t]:f.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),m&&"json"!==m&&(f.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){f&&(n(!e||e&&e.type?new I:e),f.abort(),f=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),h||(h=null);var Z=C(y);Z&&-1===["http","https","file"].indexOf(Z)?n(new c("Unsupported protocol "+Z+":",c.ERR_BAD_REQUEST,e)):f.send(h)}))}},8036:function(e,t,n){"use strict";var i=n(3589),a=n(4049),l=n(3773),r=n(777);var o=function e(t){var n=new l(t),o=a(l.prototype.request,n);return i.extend(o,l.prototype,n),i.extend(o,n),o.create=function(n){return e(r(t,n))},o}(n(1709));o.Axios=l,o.CanceledError=n(6569),o.CancelToken=n(6857),o.isCancel=n(5517),o.VERSION=n(7600).version,o.toFormData=n(1397),o.AxiosError=n(4531),o.Cancel=o.CanceledError,o.all=function(e){return Promise.all(e)},o.spread=n(8089),o.isAxiosError=n(9580),e.exports=o,e.exports.default=o},6857:function(e,t,n){"use strict";var i=n(6569);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,i=n._listeners.length;for(t=0;t<i;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,i=new Promise((function(e){n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},6569:function(e,t,n){"use strict";var i=n(4531);function a(e){i.call(this,null==e?"canceled":e,i.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(a,i,{__CANCEL__:!0}),e.exports=a},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var i=n(3589),a=n(9774),l=n(7470),r=n(2733),o=n(777),g=n(1804),s=n(7835),u=s.validators;function c(e){this.defaults=e,this.interceptors={request:new l,response:new l}}c.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=o(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&s.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));var l,g=[];if(this.interceptors.response.forEach((function(e){g.push(e.fulfilled,e.rejected)})),!a){var c=[r,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(g),l=Promise.resolve(t);c.length;)l=l.then(c.shift(),c.shift());return l}for(var I=t;i.length;){var C=i.shift(),d=i.shift();try{I=C(I)}catch(h){d(h);break}}try{l=r(I)}catch(h){return Promise.reject(h)}for(;g.length;)l=l.then(g.shift(),g.shift());return l},c.prototype.getUri=function(e){e=o(this.defaults,e);var t=g(e.baseURL,e.url);return a(t,e.params,e.paramsSerializer)},i.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(o(n||{},{method:e,url:t,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,a){return this.request(o(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}c.prototype[e]=t(),c.prototype[e+"Form"]=t(!0)})),e.exports=c},4531:function(e,t,n){"use strict";var i=n(3589);function a(e,t,n,i,a){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),a&&(this.response=a)}i.inherits(a,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var l=a.prototype,r={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){r[e]={value:e}})),Object.defineProperties(a,r),Object.defineProperty(l,"isAxiosError",{value:!0}),a.from=function(e,t,n,r,o,g){var s=Object.create(l);return i.toFlatObject(e,s,(function(e){return e!==Error.prototype})),a.call(s,e.message,t,n,r,o),s.name=e.name,g&&Object.assign(s,g),s},e.exports=a},7470:function(e,t,n){"use strict";var i=n(3589);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},1804:function(e,t,n){"use strict";var i=n(4044),a=n(9549);e.exports=function(e,t){return e&&!i(t)?a(e,t):t}},2733:function(e,t,n){"use strict";var i=n(3589),a=n(2693),l=n(5517),r=n(1709),o=n(6569);function g(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new o}e.exports=function(e){return g(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||r.adapter)(e).then((function(t){return g(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return l(t)||(g(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},777:function(e,t,n){"use strict";var i=n(3589);e.exports=function(e,t){t=t||{};var n={};function a(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function l(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:a(void 0,e[n]):a(e[n],t[n])}function r(e){if(!i.isUndefined(t[e]))return a(void 0,t[e])}function o(n){return i.isUndefined(t[n])?i.isUndefined(e[n])?void 0:a(void 0,e[n]):a(void 0,t[n])}function g(n){return n in t?a(e[n],t[n]):n in e?a(void 0,e[n]):void 0}var s={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:g};return i.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=s[e]||l,a=t(e);i.isUndefined(a)&&t!==g||(n[e]=a)})),n}},7297:function(e,t,n){"use strict";var i=n(4531);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(new i("Request failed with status code "+n.status,[i.ERR_BAD_REQUEST,i.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var i=n(3589),a=n(1709);e.exports=function(e,t,n){var l=this||a;return i.forEach(n,(function(n){e=n.call(l,e,t)})),e}},1709:function(e,t,n){"use strict";var i=n(3589),a=n(4341),l=n(4531),r=n(6789),o=n(1397),g={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u={transitional:r,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){if(a(t,"Accept"),a(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e))return e;if(i.isArrayBufferView(e))return e.buffer;if(i.isURLSearchParams(e))return s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,l=i.isObject(e),r=t&&t["Content-Type"];if((n=i.isFileList(e))||l&&"multipart/form-data"===r){var g=this.env&&this.env.FormData;return o(n?{"files[]":e}:e,g&&new g)}return l||"application/json"===r?(s(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||u.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,r=!n&&"json"===this.responseType;if(r||a&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(r){if("SyntaxError"===o.name)throw l.from(o,l.ERR_BAD_RESPONSE,this,null,this.response);throw o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){u.headers[e]=i.merge(g)})),e.exports=u},6789:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:function(e){e.exports={version:"0.27.2"}},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var i=n(3589);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var l;if(n)l=n(t);else if(i.isURLSearchParams(t))l=t.toString();else{var r=[];i.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),r.push(a(t)+"="+a(e))})))})),l=r.join("&")}if(l){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+l}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var i=n(3589);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,a,l,r){var o=[];o.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),i.isString(a)&&o.push("path="+a),i.isString(l)&&o.push("domain="+l),!0===r&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:function(e,t,n){"use strict";var i=n(3589);e.exports=function(e){return i.isObject(e)&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var i=n(3589);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=i.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var i=n(3589);e.exports=function(e,t){i.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},3035:function(e){e.exports=null},9145:function(e,t,n){"use strict";var i=n(3589),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,l,r={};return e?(i.forEach(e.split("\n"),(function(e){if(l=e.indexOf(":"),t=i.trim(e.substr(0,l)).toLowerCase(),n=i.trim(e.substr(l+1)),t){if(r[t]&&a.indexOf(t)>=0)return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([n]):r[t]?r[t]+", "+n:n}})),r):r}},6261:function(e){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1397:function(e,t,n){"use strict";var i=n(3589);e.exports=function(e,t){t=t||new FormData;var n=[];function a(e){return null===e?"":i.isDate(e)?e.toISOString():i.isArrayBuffer(e)||i.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(l,r){if(i.isPlainObject(l)||i.isArray(l)){if(-1!==n.indexOf(l))throw Error("Circular reference detected in "+r);n.push(l),i.forEach(l,(function(n,l){if(!i.isUndefined(n)){var o,g=r?r+"."+l:l;if(n&&!r&&"object"===typeof n)if(i.endsWith(l,"{}"))n=JSON.stringify(n);else if(i.endsWith(l,"[]")&&(o=i.toArray(n)))return void o.forEach((function(e){!i.isUndefined(e)&&t.append(g,a(e))}));e(n,g)}})),n.pop()}else t.append(r,a(l))}(e),t}},7835:function(e,t,n){"use strict";var i=n(7600).version,a=n(4531),l={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){l[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var r={};l.transitional=function(e,t,n){function l(e,t){return"[Axios v"+i+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,o){if(!1===e)throw new a(l(i," has been removed"+(t?" in "+t:"")),a.ERR_DEPRECATED);return t&&!r[i]&&(r[i]=!0,console.warn(l(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new a("options must be an object",a.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),l=i.length;l-- >0;){var r=i[l],o=t[r];if(o){var g=e[r],s=void 0===g||o(g,r,e);if(!0!==s)throw new a("option "+r+" must be "+s,a.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new a("Unknown option "+r,a.ERR_BAD_OPTION)}},validators:l}},3589:function(e,t,n){"use strict";var i,a=n(4049),l=Object.prototype.toString,r=(i=Object.create(null),function(e){var t=l.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())});function o(e){return e=e.toLowerCase(),function(t){return r(t)===e}}function g(e){return Array.isArray(e)}function s(e){return"undefined"===typeof e}var u=o("ArrayBuffer");function c(e){return null!==e&&"object"===typeof e}function I(e){if("object"!==r(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var C=o("Date"),d=o("File"),h=o("Blob"),A=o("FileList");function m(e){return"[object Function]"===l.call(e)}var p=o("URLSearchParams");function f(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),g(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}var b,v=(b="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return b&&e instanceof b});e.exports={isArray:g,isArrayBuffer:u,isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||l.call(e)===t||m(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:c,isPlainObject:I,isUndefined:s,isDate:C,isFile:d,isBlob:h,isFunction:m,isStream:function(e){return c(e)&&m(e.pipe)},isURLSearchParams:p,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:f,merge:function e(){var t={};function n(n,i){I(t[i])&&I(n)?t[i]=e(t[i],n):I(n)?t[i]=e({},n):g(n)?t[i]=n.slice():t[i]=n}for(var i=0,a=arguments.length;i<a;i++)f(arguments[i],n);return t},extend:function(e,t,n){return f(t,(function(t,i){e[i]=n&&"function"===typeof t?a(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var i,a,l,r={};t=t||{};do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)r[l=i[a]]||(t[l]=e[l],r[l]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:r,kindOfTest:o,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var i=e.indexOf(t,n);return-1!==i&&i===n},toArray:function(e){if(!e)return null;var t=e.length;if(s(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:v,isFileList:A}},7494:function(e){function t(e,t,n){var i,a,l,r,o;function g(){var s=Date.now()-r;s<t&&s>=0?i=setTimeout(g,t-s):(i=null,n||(o=e.apply(l,a),l=a=null))}null==t&&(t=100);var s=function(){l=this,a=arguments,r=Date.now();var s=n&&!i;return i||(i=setTimeout(g,t)),s&&(o=e.apply(l,a),l=a=null),o};return s.clear=function(){i&&(clearTimeout(i),i=null)},s.flush=function(){i&&(o=e.apply(l,a),l=a=null,clearTimeout(i),i=null)},s}t.debounce=t,e.exports=t},2110:function(e,t,n){"use strict";var i=n(8309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},l={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function g(e){return i.isMemo(e)?r:o[e.$$typeof]||a}o[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[i.Memo]=r;var s=Object.defineProperty,u=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,I=Object.getOwnPropertyDescriptor,C=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(d){var a=C(n);a&&a!==d&&e(t,a,i)}var r=u(n);c&&(r=r.concat(c(n)));for(var o=g(t),h=g(n),A=0;A<r.length;++A){var m=r[A];if(!l[m]&&(!i||!i[m])&&(!h||!h[m])&&(!o||!o[m])){var p=I(n,m);try{s(t,m,p)}catch(f){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,l=n?Symbol.for("react.fragment"):60107,r=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,g=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,c=n?Symbol.for("react.concurrent_mode"):60111,I=n?Symbol.for("react.forward_ref"):60112,C=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,h=n?Symbol.for("react.memo"):60115,A=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,p=n?Symbol.for("react.fundamental"):60117,f=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case c:case l:case o:case r:case C:return e;default:switch(e=e&&e.$$typeof){case s:case I:case A:case h:case g:return e;default:return t}}case a:return t}}}function y(e){return v(e)===c}t.AsyncMode=u,t.ConcurrentMode=c,t.ContextConsumer=s,t.ContextProvider=g,t.Element=i,t.ForwardRef=I,t.Fragment=l,t.Lazy=A,t.Memo=h,t.Portal=a,t.Profiler=o,t.StrictMode=r,t.Suspense=C,t.isAsyncMode=function(e){return y(e)||v(e)===u},t.isConcurrentMode=y,t.isContextConsumer=function(e){return v(e)===s},t.isContextProvider=function(e){return v(e)===g},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return v(e)===I},t.isFragment=function(e){return v(e)===l},t.isLazy=function(e){return v(e)===A},t.isMemo=function(e){return v(e)===h},t.isPortal=function(e){return v(e)===a},t.isProfiler=function(e){return v(e)===o},t.isStrictMode=function(e){return v(e)===r},t.isSuspense=function(e){return v(e)===C},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===l||e===c||e===o||e===r||e===C||e===d||"object"===typeof e&&null!==e&&(e.$$typeof===A||e.$$typeof===h||e.$$typeof===g||e.$$typeof===s||e.$$typeof===I||e.$$typeof===p||e.$$typeof===f||e.$$typeof===b||e.$$typeof===m)},t.typeOf=v},8309:function(e,t,n){"use strict";e.exports=n(746)},4463:function(e,t,n){"use strict";var i=n(2791),a=n(5296);function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function g(e,t){s(e,t),s(e+"Capture",t)}function s(e,t){for(o[e]=t,e=0;e<t.length;e++)r.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),c=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C={},d={};function h(e,t,n,i,a,l,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=r}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){A[e]=new h(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];A[t]=new h(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){A[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){A[e]=new h(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){A[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){A[e]=new h(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){A[e]=new h(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){A[e]=new h(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){A[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}function f(e,t,n,i){var a=A.hasOwnProperty(t)?A[t]:null;(null!==a?0!==a.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,i)&&(n=null),i||null===a?function(e){return!!c.call(d,e)||!c.call(C,e)&&(I.test(e)?d[e]=!0:(C[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,i=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,p);A[t]=new h(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,p);A[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,p);A[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){A[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)})),A.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){A[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v=Symbol.for("react.element"),y=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),w=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),V=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var X=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var k=Symbol.iterator;function Y(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=k&&e[k]||e["@@iterator"])?e:null}var z,K=Object.assign;function N(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var H=!1;function M(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var i=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){i=s}e.call(t.prototype)}else{try{throw Error()}catch(s){i=s}e()}}catch(s){if(s&&i&&"string"===typeof s.stack){for(var a=s.stack.split("\n"),l=i.stack.split("\n"),r=a.length-1,o=l.length-1;1<=r&&0<=o&&a[r]!==l[o];)o--;for(;1<=r&&0<=o;r--,o--)if(a[r]!==l[o]){if(1!==r||1!==o)do{if(r--,0>--o||a[r]!==l[o]){var g="\n"+a[r].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}}while(1<=r&&0<=o);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function F(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1);case 11:return e=M(e.type.render,!1);case 1:return e=M(e.type,!0);default:return""}}function L(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case G:return"Fragment";case y:return"Portal";case Z:return"Profiler";case B:return"StrictMode";case W:return"Suspense";case S:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case w:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case q:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}function _(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(t);case 8:return t===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function T(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function E(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=E(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){i=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function U(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=E(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function D(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function P(e,t){var n=t.checked;return K({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=T(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function O(e,t){null!=(t=t.checked)&&f(e,"checked",t,!1)}function j(e,t){O(e,t);var n=T(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,T(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&D(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+T(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(i&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(l(91));return K({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(l(92));if(te(n)){if(1<n.length)throw Error(l(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:T(n)}}function le(e,t){var n=T(t.value),i=T(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ge(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var se,ue,ce=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((se=se||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=se.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function Ie(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ce={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function he(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Ce.hasOwnProperty(e)&&Ce[e]?(""+t).trim():t+"px"}function Ae(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),a=he(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}Object.keys(Ce).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ce[t]=Ce[e]}))}));var me=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pe(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(l(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(l(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(l(62))}}function fe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ye=null,Ge=null,Be=null;function Ze(e){if(e=fa(e)){if("function"!==typeof ye)throw Error(l(280));var t=e.stateNode;t&&(t=va(t),ye(e.stateNode,e.type,t))}}function xe(e){Ge?Be?Be.push(e):Be=[e]:Ge=e}function we(){if(Ge){var e=Ge,t=Be;if(Be=Ge=null,Ze(e),t)for(e=0;e<t.length;e++)Ze(t[e])}}function qe(e,t){return e(t)}function We(){}var Se=!1;function Re(e,t,n){if(Se)return e(t,n);Se=!0;try{return qe(e,t,n)}finally{Se=!1,(null!==Ge||null!==Be)&&(We(),we())}}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var i=va(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(l(231,t,typeof n));return n}var Xe=!1;if(u)try{var ke={};Object.defineProperty(ke,"passive",{get:function(){Xe=!0}}),window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch(ue){Xe=!1}function Ye(e,t,n,i,a,l,r,o,g){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(u){this.onError(u)}}var ze=!1,Ke=null,Ne=!1,He=null,Me={onError:function(e){ze=!0,Ke=e}};function Fe(e,t,n,i,a,l,r,o,g){ze=!1,Ke=null,Ye.apply(Me,arguments)}function Le(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function _e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Te(e){if(Le(e)!==e)throw Error(l(188))}function Ee(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Le(e)))throw Error(l(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(null===a)break;var r=a.alternate;if(null===r){if(null!==(i=a.return)){n=i;continue}break}if(a.child===r.child){for(r=a.child;r;){if(r===n)return Te(a),e;if(r===i)return Te(a),t;r=r.sibling}throw Error(l(188))}if(n.return!==i.return)n=a,i=r;else{for(var o=!1,g=a.child;g;){if(g===n){o=!0,n=a,i=r;break}if(g===i){o=!0,i=a,n=r;break}g=g.sibling}if(!o){for(g=r.child;g;){if(g===n){o=!0,n=r,i=a;break}if(g===i){o=!0,i=r,n=a;break}g=g.sibling}if(!o)throw Error(l(189))}}if(n.alternate!==i)throw Error(l(190))}if(3!==n.tag)throw Error(l(188));return n.stateNode.current===n?e:t}(e))?Je(e):null}function Je(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Je(e);if(null!==t)return t;e=e.sibling}return null}var Ue=a.unstable_scheduleCallback,De=a.unstable_cancelCallback,Pe=a.unstable_shouldYield,Qe=a.unstable_requestPaint,Oe=a.unstable_now,je=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,it=a.unstable_IdlePriority,at=null,lt=null;var rt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/gt|0)|0},ot=Math.log,gt=Math.LN2;var st=64,ut=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function It(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,a=e.suspendedLanes,l=e.pingedLanes,r=268435455&n;if(0!==r){var o=r&~a;0!==o?i=ct(o):0!==(l&=r)&&(i=ct(l))}else 0!==(r=n&~a)?i=ct(r):0!==l&&(i=ct(l));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&a)&&((a=i&-i)>=(l=t&-t)||16===a&&0!==(4194240&l)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)a=1<<(n=31-rt(t)),i|=e[n],t&=~a;return i}function Ct(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=st;return 0===(4194240&(st<<=1))&&(st=64),e}function At(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=n}function pt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-rt(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var ft=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var vt,yt,Gt,Bt,Zt,xt=!1,wt=[],qt=null,Wt=null,St=null,Rt=new Map,Vt=new Map,Xt=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yt(e,t){switch(e){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vt.delete(t.pointerId)}}function zt(e,t,n,i,a,l){return null===e||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[a]},null!==t&&(null!==(t=fa(t))&&yt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Kt(e){var t=pa(e.target);if(null!==t){var n=Le(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=_e(n)))return e.blockedOn=t,void Zt(e.priority,(function(){Gt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Pt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=fa(n))&&yt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Ht(e,t,n){Nt(e)&&n.delete(t)}function Mt(){xt=!1,null!==qt&&Nt(qt)&&(qt=null),null!==Wt&&Nt(Wt)&&(Wt=null),null!==St&&Nt(St)&&(St=null),Rt.forEach(Ht),Vt.forEach(Ht)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Mt)))}function Lt(e){function t(t){return Ft(t,e)}if(0<wt.length){Ft(wt[0],e);for(var n=1;n<wt.length;n++){var i=wt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==qt&&Ft(qt,e),null!==Wt&&Ft(Wt,e),null!==St&&Ft(St,e),Rt.forEach(t),Vt.forEach(t),n=0;n<Xt.length;n++)(i=Xt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Xt.length&&null===(n=Xt[0]).blockedOn;)Kt(n),null===n.blockedOn&&Xt.shift()}var _t=b.ReactCurrentBatchConfig,Tt=!0;function Et(e,t,n,i){var a=ft,l=_t.transition;_t.transition=null;try{ft=1,Ut(e,t,n,i)}finally{ft=a,_t.transition=l}}function Jt(e,t,n,i){var a=ft,l=_t.transition;_t.transition=null;try{ft=4,Ut(e,t,n,i)}finally{ft=a,_t.transition=l}}function Ut(e,t,n,i){if(Tt){var a=Pt(e,t,n,i);if(null===a)Ti(e,t,i,Dt,n),Yt(e,i);else if(function(e,t,n,i,a){switch(t){case"focusin":return qt=zt(qt,e,t,n,i,a),!0;case"dragenter":return Wt=zt(Wt,e,t,n,i,a),!0;case"mouseover":return St=zt(St,e,t,n,i,a),!0;case"pointerover":var l=a.pointerId;return Rt.set(l,zt(Rt.get(l)||null,e,t,n,i,a)),!0;case"gotpointercapture":return l=a.pointerId,Vt.set(l,zt(Vt.get(l)||null,e,t,n,i,a)),!0}return!1}(a,e,t,n,i))i.stopPropagation();else if(Yt(e,i),4&t&&-1<kt.indexOf(e)){for(;null!==a;){var l=fa(a);if(null!==l&&vt(l),null===(l=Pt(e,t,n,i))&&Ti(e,t,i,Dt,n),l===a)break;a=l}null!==a&&i.stopPropagation()}else Ti(e,t,i,null,n)}}var Dt=null;function Pt(e,t,n,i){if(Dt=null,null!==(e=pa(e=ve(i))))if(null===(t=Le(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=_e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Ot=null,jt=null,$t=null;function en(){if($t)return $t;var e,t,n=jt,i=n.length,a="value"in Ot?Ot.value:Ot.textContent,l=a.length;for(e=0;e<i&&n[e]===a[e];e++);var r=i-e;for(t=1;t<=r&&n[i-t]===a[l-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function ln(e){function t(t,n,i,a,l){for(var r in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(a):a[r]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:an,this.isPropagationStopped=an,this}return K(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var rn,on,gn,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=ln(sn),cn=K({},sn,{view:0,detail:0}),In=ln(cn),Cn=K({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gn&&(gn&&"mousemove"===e.type?(rn=e.screenX-gn.screenX,on=e.screenY-gn.screenY):on=rn=0,gn=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),dn=ln(Cn),hn=ln(K({},Cn,{dataTransfer:0})),An=ln(K({},cn,{relatedTarget:0})),mn=ln(K({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),pn=K({},sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),fn=ln(pn),bn=ln(K({},sn,{data:0})),vn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Gn[e])&&!!t[e]}function Zn(){return Bn}var xn=K({},cn,{key:function(e){if(e.key){var t=vn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),wn=ln(xn),qn=ln(K({},Cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Wn=ln(K({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn})),Sn=ln(K({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=K({},Cn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vn=ln(Rn),Xn=[9,13,27,32],kn=u&&"CompositionEvent"in window,Yn=null;u&&"documentMode"in document&&(Yn=document.documentMode);var zn=u&&"TextEvent"in window&&!Yn,Kn=u&&(!kn||Yn&&8<Yn&&11>=Yn),Nn=String.fromCharCode(32),Hn=!1;function Mn(e,t){switch(e){case"keyup":return-1!==Xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ln=!1;var _n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!_n[e.type]:"textarea"===t}function En(e,t,n,i){xe(i),0<(t=Ji(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Jn=null,Un=null;function Dn(e){Ni(e,0)}function Pn(e){if(U(ba(e)))return e}function Qn(e,t){if("change"===e)return t}var On=!1;if(u){var jn;if(u){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}jn=$n}else jn=!1;On=jn&&(!document.documentMode||9<document.documentMode)}function ti(){Jn&&(Jn.detachEvent("onpropertychange",ni),Un=Jn=null)}function ni(e){if("value"===e.propertyName&&Pn(Un)){var t=[];En(t,Un,e,ve(e)),Re(Dn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Un=n,(Jn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ai(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Pn(Un)}function li(e,t){if("click"===e)return Pn(t)}function ri(e,t){if("input"===e||"change"===e)return Pn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function gi(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!c.call(t,a)||!oi(e[a],t[a]))return!1}return!0}function si(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=si(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=si(i)}}function ci(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ci(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ii(){for(var e=window,t=D();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=D((e=t.contentWindow).document)}return t}function Ci(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function di(e){var t=Ii(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ci(n.ownerDocument.documentElement,n)){if(null!==i&&Ci(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(i.start,a);i=void 0===i.end?l:Math.min(i.end,a),!e.extend&&l>i&&(a=i,i=l,l=a),a=ui(n,l);var r=ui(n,i);a&&r&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),l>i?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hi=u&&"documentMode"in document&&11>=document.documentMode,Ai=null,mi=null,pi=null,fi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;fi||null==Ai||Ai!==D(i)||("selectionStart"in(i=Ai)&&Ci(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},pi&&gi(pi,i)||(pi=i,0<(i=Ji(mi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ai)))}function vi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yi={animationend:vi("Animation","AnimationEnd"),animationiteration:vi("Animation","AnimationIteration"),animationstart:vi("Animation","AnimationStart"),transitionend:vi("Transition","TransitionEnd")},Gi={},Bi={};function Zi(e){if(Gi[e])return Gi[e];if(!yi[e])return e;var t,n=yi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Bi)return Gi[e]=n[t];return e}u&&(Bi=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);var xi=Zi("animationend"),wi=Zi("animationiteration"),qi=Zi("animationstart"),Wi=Zi("transitionend"),Si=new Map,Ri="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vi(e,t){Si.set(e,t),g(t,[e])}for(var Xi=0;Xi<Ri.length;Xi++){var ki=Ri[Xi];Vi(ki.toLowerCase(),"on"+(ki[0].toUpperCase()+ki.slice(1)))}Vi(xi,"onAnimationEnd"),Vi(wi,"onAnimationIteration"),Vi(qi,"onAnimationStart"),Vi("dblclick","onDoubleClick"),Vi("focusin","onFocus"),Vi("focusout","onBlur"),Vi(Wi,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yi));function Ki(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,a,r,o,g,s){if(Fe.apply(this,arguments),ze){if(!ze)throw Error(l(198));var u=Ke;ze=!1,Ke=null,Ne||(Ne=!0,He=u)}}(i,t,void 0,e),e.currentTarget=null}function Ni(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var r=i.length-1;0<=r;r--){var o=i[r],g=o.instance,s=o.currentTarget;if(o=o.listener,g!==l&&a.isPropagationStopped())break e;Ki(a,o,s),l=g}else for(r=0;r<i.length;r++){if(g=(o=i[r]).instance,s=o.currentTarget,o=o.listener,g!==l&&a.isPropagationStopped())break e;Ki(a,o,s),l=g}}}if(Ne)throw e=He,Ne=!1,He=null,e}function Hi(e,t){var n=t[ha];void 0===n&&(n=t[ha]=new Set);var i=e+"__bubble";n.has(i)||(_i(t,e,2,!1),n.add(i))}function Mi(e,t,n){var i=0;t&&(i|=4),_i(n,e,i,t)}var Fi="_reactListening"+Math.random().toString(36).slice(2);function Li(e){if(!e[Fi]){e[Fi]=!0,r.forEach((function(t){"selectionchange"!==t&&(zi.has(t)||Mi(t,!1,e),Mi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fi]||(t[Fi]=!0,Mi("selectionchange",!1,t))}}function _i(e,t,n,i){switch(Qt(t)){case 1:var a=Et;break;case 4:a=Jt;break;default:a=Ut}n=a.bind(null,t,n,e),a=void 0,!Xe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),i?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ti(e,t,n,i,a){var l=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var r=i.tag;if(3===r||4===r){var o=i.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===r)for(r=i.return;null!==r;){var g=r.tag;if((3===g||4===g)&&((g=r.stateNode.containerInfo)===a||8===g.nodeType&&g.parentNode===a))return;r=r.return}for(;null!==o;){if(null===(r=pa(o)))return;if(5===(g=r.tag)||6===g){i=l=r;continue e}o=o.parentNode}}i=i.return}Re((function(){var i=l,a=ve(n),r=[];e:{var o=Si.get(e);if(void 0!==o){var g=un,s=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":g=wn;break;case"focusin":s="focus",g=An;break;case"focusout":s="blur",g=An;break;case"beforeblur":case"afterblur":g=An;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Wn;break;case xi:case wi:case qi:g=mn;break;case Wi:g=Sn;break;case"scroll":g=In;break;case"wheel":g=Vn;break;case"copy":case"cut":case"paste":g=fn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=qn}var u=0!==(4&t),c=!u&&"scroll"===e,I=u?null!==o?o+"Capture":null:o;u=[];for(var C,d=i;null!==d;){var h=(C=d).stateNode;if(5===C.tag&&null!==h&&(C=h,null!==I&&(null!=(h=Ve(d,I))&&u.push(Ei(d,h,C)))),c)break;d=d.return}0<u.length&&(o=new g(o,s,null,n,a),r.push({event:o,listeners:u}))}}if(0===(7&t)){if(g="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(s=n.relatedTarget||n.fromElement)||!pa(s)&&!s[da])&&(g||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,g?(g=i,null!==(s=(s=n.relatedTarget||n.toElement)?pa(s):null)&&(s!==(c=Le(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(g=null,s=i),g!==s)){if(u=dn,h="onMouseLeave",I="onMouseEnter",d="mouse","pointerout"!==e&&"pointerover"!==e||(u=qn,h="onPointerLeave",I="onPointerEnter",d="pointer"),c=null==g?o:ba(g),C=null==s?o:ba(s),(o=new u(h,d+"leave",g,n,a)).target=c,o.relatedTarget=C,h=null,pa(a)===i&&((u=new u(I,d+"enter",s,n,a)).target=C,u.relatedTarget=c,h=u),c=h,g&&s)e:{for(I=s,d=0,C=u=g;C;C=Ui(C))d++;for(C=0,h=I;h;h=Ui(h))C++;for(;0<d-C;)u=Ui(u),d--;for(;0<C-d;)I=Ui(I),C--;for(;d--;){if(u===I||null!==I&&u===I.alternate)break e;u=Ui(u),I=Ui(I)}u=null}else u=null;null!==g&&Di(r,o,g,u,!1),null!==s&&null!==c&&Di(r,c,s,u,!0)}if("select"===(g=(o=i?ba(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===g&&"file"===o.type)var A=Qn;else if(Tn(o))if(On)A=ri;else{A=ai;var m=ii}else(g=o.nodeName)&&"input"===g.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(A=li);switch(A&&(A=A(e,i))?En(r,A,n,a):(m&&m(e,o,i),"focusout"===e&&(m=o._wrapperState)&&m.controlled&&"number"===o.type&&ee(o,"number",o.value)),m=i?ba(i):window,e){case"focusin":(Tn(m)||"true"===m.contentEditable)&&(Ai=m,mi=i,pi=null);break;case"focusout":pi=mi=Ai=null;break;case"mousedown":fi=!0;break;case"contextmenu":case"mouseup":case"dragend":fi=!1,bi(r,n,a);break;case"selectionchange":if(hi)break;case"keydown":case"keyup":bi(r,n,a)}var p;if(kn)e:{switch(e){case"compositionstart":var f="onCompositionStart";break e;case"compositionend":f="onCompositionEnd";break e;case"compositionupdate":f="onCompositionUpdate";break e}f=void 0}else Ln?Mn(e,n)&&(f="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(f="onCompositionStart");f&&(Kn&&"ko"!==n.locale&&(Ln||"onCompositionStart"!==f?"onCompositionEnd"===f&&Ln&&(p=en()):(jt="value"in(Ot=a)?Ot.value:Ot.textContent,Ln=!0)),0<(m=Ji(i,f)).length&&(f=new bn(f,e,null,n,a),r.push({event:f,listeners:m}),p?f.data=p:null!==(p=Fn(n))&&(f.data=p))),(p=zn?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Hn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Hn?null:e;default:return null}}(e,n):function(e,t){if(Ln)return"compositionend"===e||!kn&&Mn(e,t)?(e=en(),$t=jt=Ot=null,Ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Ji(i,"onBeforeInput")).length&&(a=new bn("onBeforeInput","beforeinput",null,n,a),r.push({event:a,listeners:i}),a.data=p))}Ni(r,t)}))}function Ei(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ji(e,t){for(var n=t+"Capture",i=[];null!==e;){var a=e,l=a.stateNode;5===a.tag&&null!==l&&(a=l,null!=(l=Ve(e,n))&&i.unshift(Ei(e,l,a)),null!=(l=Ve(e,t))&&i.push(Ei(e,l,a))),e=e.return}return i}function Ui(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Di(e,t,n,i,a){for(var l=t._reactName,r=[];null!==n&&n!==i;){var o=n,g=o.alternate,s=o.stateNode;if(null!==g&&g===i)break;5===o.tag&&null!==s&&(o=s,a?null!=(g=Ve(n,l))&&r.unshift(Ei(n,g,o)):a||null!=(g=Ve(n,l))&&r.push(Ei(n,g,o))),n=n.return}0!==r.length&&e.push({event:t,listeners:r})}var Pi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Oi(e){return("string"===typeof e?e:""+e).replace(Pi,"\n").replace(Qi,"")}function ji(e,t,n){if(t=Oi(t),Oi(e)!==t&&n)throw Error(l(425))}function $i(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ia="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,la="function"===typeof Promise?Promise:void 0,ra="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof la?function(e){return la.resolve(null).then(e).catch(oa)}:ia;function oa(e){setTimeout((function(){throw e}))}function ga(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===i)return e.removeChild(a),void Lt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=a}while(n);Lt(t)}function sa(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ca=Math.random().toString(36).slice(2),Ia="__reactFiber$"+ca,Ca="__reactProps$"+ca,da="__reactContainer$"+ca,ha="__reactEvents$"+ca,Aa="__reactListeners$"+ca,ma="__reactHandles$"+ca;function pa(e){var t=e[Ia];if(t)return t;for(var n=e.parentNode;n;){if(t=n[da]||n[Ia]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[Ia])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function fa(e){return!(e=e[Ia]||e[da])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(l(33))}function va(e){return e[Ca]||null}var ya=[],Ga=-1;function Ba(e){return{current:e}}function Za(e){0>Ga||(e.current=ya[Ga],ya[Ga]=null,Ga--)}function xa(e,t){Ga++,ya[Ga]=e.current,e.current=t}var wa={},qa=Ba(wa),Wa=Ba(!1),Sa=wa;function Ra(e,t){var n=e.type.contextTypes;if(!n)return wa;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a,l={};for(a in n)l[a]=t[a];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Va(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Xa(){Za(Wa),Za(qa)}function ka(e,t,n){if(qa.current!==wa)throw Error(l(168));xa(qa,t),xa(Wa,n)}function Ya(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var a in i=i.getChildContext())if(!(a in t))throw Error(l(108,_(e)||"Unknown",a));return K({},n,i)}function za(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wa,Sa=qa.current,xa(qa,e),xa(Wa,Wa.current),!0}function Ka(e,t,n){var i=e.stateNode;if(!i)throw Error(l(169));n?(e=Ya(e,t,Sa),i.__reactInternalMemoizedMergedChildContext=e,Za(Wa),Za(qa),xa(qa,e)):Za(Wa),xa(Wa,n)}var Na=null,Ha=!1,Ma=!1;function Fa(e){null===Na?Na=[e]:Na.push(e)}function La(){if(!Ma&&null!==Na){Ma=!0;var e=0,t=ft;try{var n=Na;for(ft=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Na=null,Ha=!1}catch(a){throw null!==Na&&(Na=Na.slice(e+1)),Ue($e,La),a}finally{ft=t,Ma=!1}}return null}var _a=[],Ta=0,Ea=null,Ja=0,Ua=[],Da=0,Pa=null,Qa=1,Oa="";function ja(e,t){_a[Ta++]=Ja,_a[Ta++]=Ea,Ea=e,Ja=t}function $a(e,t,n){Ua[Da++]=Qa,Ua[Da++]=Oa,Ua[Da++]=Pa,Pa=e;var i=Qa;e=Oa;var a=32-rt(i)-1;i&=~(1<<a),n+=1;var l=32-rt(t)+a;if(30<l){var r=a-a%5;l=(i&(1<<r)-1).toString(32),i>>=r,a-=r,Qa=1<<32-rt(t)+a|n<<a|i,Oa=l+e}else Qa=1<<l|n<<a|i,Oa=e}function el(e){null!==e.return&&(ja(e,1),$a(e,1,0))}function tl(e){for(;e===Ea;)Ea=_a[--Ta],_a[Ta]=null,Ja=_a[--Ta],_a[Ta]=null;for(;e===Pa;)Pa=Ua[--Da],Ua[Da]=null,Oa=Ua[--Da],Ua[Da]=null,Qa=Ua[--Da],Ua[Da]=null}var nl=null,il=null,al=!1,ll=null;function rl(e,t){var n=Rs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ol(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nl=e,il=sa(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nl=e,il=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Pa?{id:Qa,overflow:Oa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rs(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nl=e,il=null,!0);default:return!1}}function gl(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function sl(e){if(al){var t=il;if(t){var n=t;if(!ol(e,t)){if(gl(e))throw Error(l(418));t=sa(n.nextSibling);var i=nl;t&&ol(e,t)?rl(i,n):(e.flags=-4097&e.flags|2,al=!1,nl=e)}}else{if(gl(e))throw Error(l(418));e.flags=-4097&e.flags|2,al=!1,nl=e}}}function ul(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nl=e}function cl(e){if(e!==nl)return!1;if(!al)return ul(e),al=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=il)){if(gl(e))throw Il(),Error(l(418));for(;t;)rl(e,t),t=sa(t.nextSibling)}if(ul(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){il=sa(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}il=null}}else il=nl?sa(e.stateNode.nextSibling):null;return!0}function Il(){for(var e=il;e;)e=sa(e.nextSibling)}function Cl(){il=nl=null,al=!1}function dl(e){null===ll?ll=[e]:ll.push(e)}var hl=b.ReactCurrentBatchConfig;function Al(e,t){if(e&&e.defaultProps){for(var n in t=K({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ml=Ba(null),pl=null,fl=null,bl=null;function vl(){bl=fl=pl=null}function yl(e){var t=ml.current;Za(ml),e._currentValue=t}function Gl(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Bl(e,t){pl=e,bl=fl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Zl(e){var t=e._currentValue;if(bl!==e)if(e={context:e,memoizedValue:t,next:null},null===fl){if(null===pl)throw Error(l(308));fl=e,pl.dependencies={lanes:0,firstContext:e}}else fl=fl.next=e;return t}var xl=null;function wl(e){null===xl?xl=[e]:xl.push(e)}function ql(e,t,n,i){var a=t.interleaved;return null===a?(n.next=n,wl(t)):(n.next=a.next,a.next=n),t.interleaved=n,Wl(e,i)}function Wl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Sl=!1;function Rl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kl(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&qg)){var a=i.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Wl(e,n)}return null===(a=i.interleaved)?(t.next=t,wl(i)):(t.next=a.next,a.next=t),i.interleaved=t,Wl(e,n)}function Yl(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,pt(e,n)}}function zl(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var a=null,l=null;if(null!==(n=n.firstBaseUpdate)){do{var r={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===l?a=l=r:l=l.next=r,n=n.next}while(null!==n);null===l?a=l=t:l=l.next=t}else a=l=t;return n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Kl(e,t,n,i){var a=e.updateQueue;Sl=!1;var l=a.firstBaseUpdate,r=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var g=o,s=g.next;g.next=null,null===r?l=s:r.next=s,r=g;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==r&&(null===o?u.firstBaseUpdate=s:o.next=s,u.lastBaseUpdate=g))}if(null!==l){var c=a.baseState;for(r=0,u=s=g=null,o=l;;){var I=o.lane,C=o.eventTime;if((i&I)===I){null!==u&&(u=u.next={eventTime:C,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var d=e,h=o;switch(I=t,C=n,h.tag){case 1:if("function"===typeof(d=h.payload)){c=d.call(C,c,I);break e}c=d;break e;case 3:d.flags=-65537&d.flags|128;case 0:if(null===(I="function"===typeof(d=h.payload)?d.call(C,c,I):d)||void 0===I)break e;c=K({},c,I);break e;case 2:Sl=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(I=a.effects)?a.effects=[o]:I.push(o))}else C={eventTime:C,lane:I,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(s=u=C,g=c):u=u.next=C,r|=I;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(I=o).next,I.next=null,a.lastBaseUpdate=I,a.shared.pending=null}}if(null===u&&(g=c),a.baseState=g,a.firstBaseUpdate=s,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{r|=a.lane,a=a.next}while(a!==t)}else null===l&&(a.shared.lanes=0);zg|=r,e.lanes=r,e.memoizedState=c}}function Nl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(null!==a){if(i.callback=null,i=n,"function"!==typeof a)throw Error(l(191,a));a.call(i)}}}var Hl=(new i.Component).refs;function Ml(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:K({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Fl={isMounted:function(e){return!!(e=e._reactInternals)&&Le(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=es(),a=ts(e),l=Xl(i,a);l.payload=t,void 0!==n&&null!==n&&(l.callback=n),null!==(t=kl(e,l,a))&&(ns(t,e,a,i),Yl(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=es(),a=ts(e),l=Xl(i,a);l.tag=1,l.payload=t,void 0!==n&&null!==n&&(l.callback=n),null!==(t=kl(e,l,a))&&(ns(t,e,a,i),Yl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=es(),i=ts(e),a=Xl(n,i);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=kl(e,a,i))&&(ns(t,e,i,n),Yl(t,e,i))}};function Ll(e,t,n,i,a,l,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,l,r):!t.prototype||!t.prototype.isPureReactComponent||(!gi(n,i)||!gi(a,l))}function _l(e,t,n){var i=!1,a=wa,l=t.contextType;return"object"===typeof l&&null!==l?l=Zl(l):(a=Va(t)?Sa:qa.current,l=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ra(e,a):wa),t=new t(n,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Fl,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Tl(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Fl.enqueueReplaceState(t,t.state,null)}function El(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Hl,Rl(e);var l=t.contextType;"object"===typeof l&&null!==l?a.context=Zl(l):(l=Va(t)?Sa:qa.current,a.context=Ra(e,l)),a.state=e.memoizedState,"function"===typeof(l=t.getDerivedStateFromProps)&&(Ml(e,t,l,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Fl.enqueueReplaceState(a,a.state,null),Kl(e,n,a,i),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Jl(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(l(309));var i=n.stateNode}if(!i)throw Error(l(147,e));var a=i,r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=a.refs;t===Hl&&(t=a.refs={}),null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(l(284));if(!n._owner)throw Error(l(290,e))}return e}function Ul(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Dl(e){return(0,e._init)(e._payload)}function Pl(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Xs(e,t)).index=0,e.sibling=null,e}function r(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function g(e,t,n,i){return null===t||6!==t.tag?((t=Ks(n,e.mode,i)).return=e,t):((t=a(t,n)).return=e,t)}function s(e,t,n,i){var l=n.type;return l===G?c(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===V&&Dl(l)===t.type)?((i=a(t,n.props)).ref=Jl(e,t,n),i.return=e,i):((i=ks(n.type,n.key,n.props,null,e.mode,i)).ref=Jl(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ns(n,e.mode,i)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function c(e,t,n,i,l){return null===t||7!==t.tag?((t=Ys(n,e.mode,i,l)).return=e,t):((t=a(t,n)).return=e,t)}function I(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ks(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case v:return(n=ks(t.type,t.key,t.props,null,e.mode,n)).ref=Jl(e,null,t),n.return=e,n;case y:return(t=Ns(t,e.mode,n)).return=e,t;case V:return I(e,(0,t._init)(t._payload),n)}if(te(t)||Y(t))return(t=Ys(t,e.mode,n,null)).return=e,t;Ul(e,t)}return null}function C(e,t,n,i){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:g(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case v:return n.key===a?s(e,t,n,i):null;case y:return n.key===a?u(e,t,n,i):null;case V:return C(e,t,(a=n._init)(n._payload),i)}if(te(n)||Y(n))return null!==a?null:c(e,t,n,i,null);Ul(e,n)}return null}function d(e,t,n,i,a){if("string"===typeof i&&""!==i||"number"===typeof i)return g(t,e=e.get(n)||null,""+i,a);if("object"===typeof i&&null!==i){switch(i.$$typeof){case v:return s(t,e=e.get(null===i.key?n:i.key)||null,i,a);case y:return u(t,e=e.get(null===i.key?n:i.key)||null,i,a);case V:return d(e,t,n,(0,i._init)(i._payload),a)}if(te(i)||Y(i))return c(t,e=e.get(n)||null,i,a,null);Ul(t,i)}return null}function h(a,l,o,g){for(var s=null,u=null,c=l,h=l=0,A=null;null!==c&&h<o.length;h++){c.index>h?(A=c,c=null):A=c.sibling;var m=C(a,c,o[h],g);if(null===m){null===c&&(c=A);break}e&&c&&null===m.alternate&&t(a,c),l=r(m,l,h),null===u?s=m:u.sibling=m,u=m,c=A}if(h===o.length)return n(a,c),al&&ja(a,h),s;if(null===c){for(;h<o.length;h++)null!==(c=I(a,o[h],g))&&(l=r(c,l,h),null===u?s=c:u.sibling=c,u=c);return al&&ja(a,h),s}for(c=i(a,c);h<o.length;h++)null!==(A=d(c,a,h,o[h],g))&&(e&&null!==A.alternate&&c.delete(null===A.key?h:A.key),l=r(A,l,h),null===u?s=A:u.sibling=A,u=A);return e&&c.forEach((function(e){return t(a,e)})),al&&ja(a,h),s}function A(a,o,g,s){var u=Y(g);if("function"!==typeof u)throw Error(l(150));if(null==(g=u.call(g)))throw Error(l(151));for(var c=u=null,h=o,A=o=0,m=null,p=g.next();null!==h&&!p.done;A++,p=g.next()){h.index>A?(m=h,h=null):m=h.sibling;var f=C(a,h,p.value,s);if(null===f){null===h&&(h=m);break}e&&h&&null===f.alternate&&t(a,h),o=r(f,o,A),null===c?u=f:c.sibling=f,c=f,h=m}if(p.done)return n(a,h),al&&ja(a,A),u;if(null===h){for(;!p.done;A++,p=g.next())null!==(p=I(a,p.value,s))&&(o=r(p,o,A),null===c?u=p:c.sibling=p,c=p);return al&&ja(a,A),u}for(h=i(a,h);!p.done;A++,p=g.next())null!==(p=d(h,a,A,p.value,s))&&(e&&null!==p.alternate&&h.delete(null===p.key?A:p.key),o=r(p,o,A),null===c?u=p:c.sibling=p,c=p);return e&&h.forEach((function(e){return t(a,e)})),al&&ja(a,A),u}return function e(i,l,r,g){if("object"===typeof r&&null!==r&&r.type===G&&null===r.key&&(r=r.props.children),"object"===typeof r&&null!==r){switch(r.$$typeof){case v:e:{for(var s=r.key,u=l;null!==u;){if(u.key===s){if((s=r.type)===G){if(7===u.tag){n(i,u.sibling),(l=a(u,r.props.children)).return=i,i=l;break e}}else if(u.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===V&&Dl(s)===u.type){n(i,u.sibling),(l=a(u,r.props)).ref=Jl(i,u,r),l.return=i,i=l;break e}n(i,u);break}t(i,u),u=u.sibling}r.type===G?((l=Ys(r.props.children,i.mode,g,r.key)).return=i,i=l):((g=ks(r.type,r.key,r.props,null,i.mode,g)).ref=Jl(i,l,r),g.return=i,i=g)}return o(i);case y:e:{for(u=r.key;null!==l;){if(l.key===u){if(4===l.tag&&l.stateNode.containerInfo===r.containerInfo&&l.stateNode.implementation===r.implementation){n(i,l.sibling),(l=a(l,r.children||[])).return=i,i=l;break e}n(i,l);break}t(i,l),l=l.sibling}(l=Ns(r,i.mode,g)).return=i,i=l}return o(i);case V:return e(i,l,(u=r._init)(r._payload),g)}if(te(r))return h(i,l,r,g);if(Y(r))return A(i,l,r,g);Ul(i,r)}return"string"===typeof r&&""!==r||"number"===typeof r?(r=""+r,null!==l&&6===l.tag?(n(i,l.sibling),(l=a(l,r)).return=i,i=l):(n(i,l),(l=Ks(r,i.mode,g)).return=i,i=l),o(i)):n(i,l)}}var Ql=Pl(!0),Ol=Pl(!1),jl={},$l=Ba(jl),er=Ba(jl),tr=Ba(jl);function nr(e){if(e===jl)throw Error(l(174));return e}function ir(e,t){switch(xa(tr,t),xa(er,e),xa($l,jl),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ge(null,"");break;default:t=ge(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Za($l),xa($l,t)}function ar(){Za($l),Za(er),Za(tr)}function lr(e){nr(tr.current);var t=nr($l.current),n=ge(t,e.type);t!==n&&(xa(er,e),xa($l,n))}function rr(e){er.current===e&&(Za($l),Za(er))}var or=Ba(0);function gr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sr=[];function ur(){for(var e=0;e<sr.length;e++)sr[e]._workInProgressVersionPrimary=null;sr.length=0}var cr=b.ReactCurrentDispatcher,Ir=b.ReactCurrentBatchConfig,Cr=0,dr=null,hr=null,Ar=null,mr=!1,pr=!1,fr=0,br=0;function vr(){throw Error(l(321))}function yr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function Gr(e,t,n,i,a,r){if(Cr=r,dr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cr.current=null===e||null===e.memoizedState?ro:oo,e=n(i,a),pr){r=0;do{if(pr=!1,fr=0,25<=r)throw Error(l(301));r+=1,Ar=hr=null,t.updateQueue=null,cr.current=go,e=n(i,a)}while(pr)}if(cr.current=lo,t=null!==hr&&null!==hr.next,Cr=0,Ar=hr=dr=null,mr=!1,t)throw Error(l(300));return e}function Br(){var e=0!==fr;return fr=0,e}function Zr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ar?dr.memoizedState=Ar=e:Ar=Ar.next=e,Ar}function xr(){if(null===hr){var e=dr.alternate;e=null!==e?e.memoizedState:null}else e=hr.next;var t=null===Ar?dr.memoizedState:Ar.next;if(null!==t)Ar=t,hr=e;else{if(null===e)throw Error(l(310));e={memoizedState:(hr=e).memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},null===Ar?dr.memoizedState=Ar=e:Ar=Ar.next=e}return Ar}function wr(e,t){return"function"===typeof t?t(e):t}function qr(e){var t=xr(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var i=hr,a=i.baseQueue,r=n.pending;if(null!==r){if(null!==a){var o=a.next;a.next=r.next,r.next=o}i.baseQueue=a=r,n.pending=null}if(null!==a){r=a.next,i=i.baseState;var g=o=null,s=null,u=r;do{var c=u.lane;if((Cr&c)===c)null!==s&&(s=s.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var I={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===s?(g=s=I,o=i):s=s.next=I,dr.lanes|=c,zg|=c}u=u.next}while(null!==u&&u!==r);null===s?o=i:s.next=g,oi(i,t.memoizedState)||(bo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=s,n.lastRenderedState=i}if(null!==(e=n.interleaved)){a=e;do{r=a.lane,dr.lanes|=r,zg|=r,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wr(e){var t=xr(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,r=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{r=e(r,o.action),o=o.next}while(o!==a);oi(r,t.memoizedState)||(bo=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function Sr(){}function Rr(e,t){var n=dr,i=xr(),a=t(),r=!oi(i.memoizedState,a);if(r&&(i.memoizedState=a,bo=!0),i=i.queue,_r(kr.bind(null,n,i,e),[e]),i.getSnapshot!==t||r||null!==Ar&&1&Ar.memoizedState.tag){if(n.flags|=2048,Nr(9,Xr.bind(null,n,i,a,t),void 0,null),null===Wg)throw Error(l(349));0!==(30&Cr)||Vr(n,t,a)}return a}function Vr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=dr.updateQueue)?(t={lastEffect:null,stores:null},dr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xr(e,t,n,i){t.value=n,t.getSnapshot=i,Yr(t)&&zr(e)}function kr(e,t,n){return n((function(){Yr(t)&&zr(e)}))}function Yr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function zr(e){var t=Wl(e,1);null!==t&&ns(t,e,1,-1)}function Kr(e){var t=Zr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,dr,e),[t.memoizedState,e]}function Nr(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=dr.updateQueue)?(t={lastEffect:null,stores:null},dr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Hr(){return xr().memoizedState}function Mr(e,t,n,i){var a=Zr();dr.flags|=e,a.memoizedState=Nr(1|t,n,void 0,void 0===i?null:i)}function Fr(e,t,n,i){var a=xr();i=void 0===i?null:i;var l=void 0;if(null!==hr){var r=hr.memoizedState;if(l=r.destroy,null!==i&&yr(i,r.deps))return void(a.memoizedState=Nr(t,n,l,i))}dr.flags|=e,a.memoizedState=Nr(1|t,n,l,i)}function Lr(e,t){return Mr(8390656,8,e,t)}function _r(e,t){return Fr(2048,8,e,t)}function Tr(e,t){return Fr(4,2,e,t)}function Er(e,t){return Fr(4,4,e,t)}function Jr(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ur(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fr(4,4,Jr.bind(null,t,e),n)}function Dr(){}function Pr(e,t){var n=xr();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&yr(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Qr(e,t){var n=xr();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&yr(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Or(e,t,n){return 0===(21&Cr)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(oi(n,t)||(n=ht(),dr.lanes|=n,zg|=n,e.baseState=!0),t)}function jr(e,t){var n=ft;ft=0!==n&&4>n?n:4,e(!0);var i=Ir.transition;Ir.transition={};try{e(!1),t()}finally{ft=n,Ir.transition=i}}function $r(){return xr().memoizedState}function eo(e,t,n){var i=ts(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))io(t,n);else if(null!==(n=ql(e,t,n,i))){ns(n,e,i,es()),ao(n,t,i)}}function to(e,t,n){var i=ts(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))io(t,a);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var r=t.lastRenderedState,o=l(r,n);if(a.hasEagerState=!0,a.eagerState=o,oi(o,r)){var g=t.interleaved;return null===g?(a.next=a,wl(t)):(a.next=g.next,g.next=a),void(t.interleaved=a)}}catch(s){}null!==(n=ql(e,t,a,i))&&(ns(n,e,i,a=es()),ao(n,t,i))}}function no(e){var t=e.alternate;return e===dr||null!==t&&t===dr}function io(e,t){pr=mr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ao(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,pt(e,n)}}var lo={readContext:Zl,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},ro={readContext:Zl,useCallback:function(e,t){return Zr().memoizedState=[e,void 0===t?null:t],e},useContext:Zl,useEffect:Lr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mr(4194308,4,Jr.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mr(4,2,e,t)},useMemo:function(e,t){var n=Zr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Zr();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=eo.bind(null,dr,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Zr().memoizedState=e},useState:Kr,useDebugValue:Dr,useDeferredValue:function(e){return Zr().memoizedState=e},useTransition:function(){var e=Kr(!1),t=e[0];return e=jr.bind(null,e[1]),Zr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=dr,a=Zr();if(al){if(void 0===n)throw Error(l(407));n=n()}else{if(n=t(),null===Wg)throw Error(l(349));0!==(30&Cr)||Vr(i,t,n)}a.memoizedState=n;var r={value:n,getSnapshot:t};return a.queue=r,Lr(kr.bind(null,i,r,e),[e]),i.flags|=2048,Nr(9,Xr.bind(null,i,r,n,t),void 0,null),n},useId:function(){var e=Zr(),t=Wg.identifierPrefix;if(al){var n=Oa;t=":"+t+"R"+(n=(Qa&~(1<<32-rt(Qa)-1)).toString(32)+n),0<(n=fr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=br++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:Zl,useCallback:Pr,useContext:Zl,useEffect:_r,useImperativeHandle:Ur,useInsertionEffect:Tr,useLayoutEffect:Er,useMemo:Qr,useReducer:qr,useRef:Hr,useState:function(){return qr(wr)},useDebugValue:Dr,useDeferredValue:function(e){return Or(xr(),hr.memoizedState,e)},useTransition:function(){return[qr(wr)[0],xr().memoizedState]},useMutableSource:Sr,useSyncExternalStore:Rr,useId:$r,unstable_isNewReconciler:!1},go={readContext:Zl,useCallback:Pr,useContext:Zl,useEffect:_r,useImperativeHandle:Ur,useInsertionEffect:Tr,useLayoutEffect:Er,useMemo:Qr,useReducer:Wr,useRef:Hr,useState:function(){return Wr(wr)},useDebugValue:Dr,useDeferredValue:function(e){var t=xr();return null===hr?t.memoizedState=e:Or(t,hr.memoizedState,e)},useTransition:function(){return[Wr(wr)[0],xr().memoizedState]},useMutableSource:Sr,useSyncExternalStore:Rr,useId:$r,unstable_isNewReconciler:!1};function so(e,t){try{var n="",i=t;do{n+=F(i),i=i.return}while(i);var a=n}catch(l){a="\nError generating stack: "+l.message+"\n"+l.stack}return{value:e,source:t,stack:a,digest:null}}function uo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function co(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var Io="function"===typeof WeakMap?WeakMap:Map;function Co(e,t,n){(n=Xl(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Tg||(Tg=!0,Eg=i),co(0,t)},n}function ho(e,t,n){(n=Xl(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){co(0,t)}}var l=e.stateNode;return null!==l&&"function"===typeof l.componentDidCatch&&(n.callback=function(){co(0,t),"function"!==typeof i&&(null===Jg?Jg=new Set([this]):Jg.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ao(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Io;var a=new Set;i.set(t,a)}else void 0===(a=i.get(t))&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=Zs.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function po(e,t,n,i,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Xl(-1,1)).tag=2,kl(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var fo=b.ReactCurrentOwner,bo=!1;function vo(e,t,n,i){t.child=null===e?Ol(t,null,n,i):Ql(t,e.child,n,i)}function yo(e,t,n,i,a){n=n.render;var l=t.ref;return Bl(t,a),i=Gr(e,t,n,i,l,a),n=Br(),null===e||bo?(al&&n&&el(t),t.flags|=1,vo(e,t,i,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,To(e,t,a))}function Go(e,t,n,i,a){if(null===e){var l=n.type;return"function"!==typeof l||Vs(l)||void 0!==l.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ks(n.type,null,i,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,Bo(e,t,l,i,a))}if(l=e.child,0===(e.lanes&a)){var r=l.memoizedProps;if((n=null!==(n=n.compare)?n:gi)(r,i)&&e.ref===t.ref)return To(e,t,a)}return t.flags|=1,(e=Xs(l,i)).ref=t.ref,e.return=t,t.child=e}function Bo(e,t,n,i,a){if(null!==e){var l=e.memoizedProps;if(gi(l,i)&&e.ref===t.ref){if(bo=!1,t.pendingProps=i=l,0===(e.lanes&a))return t.lanes=e.lanes,To(e,t,a);0!==(131072&e.flags)&&(bo=!0)}}return wo(e,t,n,i,a)}function Zo(e,t,n){var i=t.pendingProps,a=i.children,l=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xa(Xg,Vg),Vg|=n;else{if(0===(1073741824&n))return e=null!==l?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xa(Xg,Vg),Vg|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==l?l.baseLanes:n,xa(Xg,Vg),Vg|=i}else null!==l?(i=l.baseLanes|n,t.memoizedState=null):i=n,xa(Xg,Vg),Vg|=i;return vo(e,t,a,n),t.child}function xo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wo(e,t,n,i,a){var l=Va(n)?Sa:qa.current;return l=Ra(t,l),Bl(t,a),n=Gr(e,t,n,i,l,a),i=Br(),null===e||bo?(al&&i&&el(t),t.flags|=1,vo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,To(e,t,a))}function qo(e,t,n,i,a){if(Va(n)){var l=!0;za(t)}else l=!1;if(Bl(t,a),null===t.stateNode)_o(e,t),_l(t,n,i),El(t,n,i,a),i=!0;else if(null===e){var r=t.stateNode,o=t.memoizedProps;r.props=o;var g=r.context,s=n.contextType;"object"===typeof s&&null!==s?s=Zl(s):s=Ra(t,s=Va(n)?Sa:qa.current);var u=n.getDerivedStateFromProps,c="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate;c||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==i||g!==s)&&Tl(t,r,i,s),Sl=!1;var I=t.memoizedState;r.state=I,Kl(t,i,r,a),g=t.memoizedState,o!==i||I!==g||Wa.current||Sl?("function"===typeof u&&(Ml(t,n,u,i),g=t.memoizedState),(o=Sl||Ll(t,n,o,i,I,g,s))?(c||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=g),r.props=i,r.state=g,r.context=s,i=o):("function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,Vl(e,t),o=t.memoizedProps,s=t.type===t.elementType?o:Al(t.type,o),r.props=s,c=t.pendingProps,I=r.context,"object"===typeof(g=n.contextType)&&null!==g?g=Zl(g):g=Ra(t,g=Va(n)?Sa:qa.current);var C=n.getDerivedStateFromProps;(u="function"===typeof C||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==c||I!==g)&&Tl(t,r,i,g),Sl=!1,I=t.memoizedState,r.state=I,Kl(t,i,r,a);var d=t.memoizedState;o!==c||I!==d||Wa.current||Sl?("function"===typeof C&&(Ml(t,n,C,i),d=t.memoizedState),(s=Sl||Ll(t,n,s,i,I,d,g)||!1)?(u||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(i,d,g),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(i,d,g)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=d),r.props=i,r.state=d,r.context=g,i=s):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),i=!1)}return Wo(e,t,n,i,l,a)}function Wo(e,t,n,i,a,l){xo(e,t);var r=0!==(128&t.flags);if(!i&&!r)return a&&Ka(t,n,!1),To(e,t,l);i=t.stateNode,fo.current=t;var o=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&r?(t.child=Ql(t,e.child,null,l),t.child=Ql(t,null,o,l)):vo(e,t,o,l),t.memoizedState=i.state,a&&Ka(t,n,!0),t.child}function So(e){var t=e.stateNode;t.pendingContext?ka(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ka(0,t.context,!1),ir(e,t.containerInfo)}function Ro(e,t,n,i,a){return Cl(),dl(a),t.flags|=256,vo(e,t,n,i),t.child}var Vo,Xo,ko,Yo={dehydrated:null,treeContext:null,retryLane:0};function zo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ko(e,t,n){var i,a=t.pendingProps,r=or.current,o=!1,g=0!==(128&t.flags);if((i=g)||(i=(null===e||null!==e.memoizedState)&&0!==(2&r)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(r|=1),xa(or,1&r),null===e)return sl(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(g=a.children,e=a.fallback,o?(a=t.mode,o=t.child,g={mode:"hidden",children:g},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=g):o=zs(g,a,0,null),e=Ys(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=zo(n),t.memoizedState=Yo,e):No(t,g));if(null!==(r=e.memoizedState)&&null!==(i=r.dehydrated))return function(e,t,n,i,a,r,o){if(n)return 256&t.flags?(t.flags&=-257,Ho(e,t,o,i=uo(Error(l(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(r=i.fallback,a=t.mode,i=zs({mode:"visible",children:i.children},a,0,null),(r=Ys(r,a,o,null)).flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,0!==(1&t.mode)&&Ql(t,e.child,null,o),t.child.memoizedState=zo(o),t.memoizedState=Yo,r);if(0===(1&t.mode))return Ho(e,t,o,null);if("$!"===a.data){if(i=a.nextSibling&&a.nextSibling.dataset)var g=i.dgst;return i=g,Ho(e,t,o,i=uo(r=Error(l(419)),i,void 0))}if(g=0!==(o&e.childLanes),bo||g){if(null!==(i=Wg)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(i.suspendedLanes|o))?0:a)&&a!==r.retryLane&&(r.retryLane=a,Wl(e,a),ns(i,e,a,-1))}return hs(),Ho(e,t,o,i=uo(Error(l(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=ws.bind(null,e),a._reactRetry=t,null):(e=r.treeContext,il=sa(a.nextSibling),nl=t,al=!0,ll=null,null!==e&&(Ua[Da++]=Qa,Ua[Da++]=Oa,Ua[Da++]=Pa,Qa=e.id,Oa=e.overflow,Pa=t),(t=No(t,i.children)).flags|=4096,t)}(e,t,g,a,i,r,n);if(o){o=a.fallback,g=t.mode,i=(r=e.child).sibling;var s={mode:"hidden",children:a.children};return 0===(1&g)&&t.child!==r?((a=t.child).childLanes=0,a.pendingProps=s,t.deletions=null):(a=Xs(r,s)).subtreeFlags=14680064&r.subtreeFlags,null!==i?o=Xs(i,o):(o=Ys(o,g,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,g=null===(g=e.child.memoizedState)?zo(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},o.memoizedState=g,o.childLanes=e.childLanes&~n,t.memoizedState=Yo,a}return e=(o=e.child).sibling,a=Xs(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function No(e,t){return(t=zs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ho(e,t,n,i){return null!==i&&dl(i),Ql(t,e.child,null,n),(e=No(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Gl(e.return,t,n)}function Fo(e,t,n,i,a){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=a)}function Lo(e,t,n){var i=t.pendingProps,a=i.revealOrder,l=i.tail;if(vo(e,t,i.children,n),0!==(2&(i=or.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mo(e,n,t);else if(19===e.tag)Mo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(xa(or,i),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===gr(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Fo(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===gr(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Fo(t,!0,n,null,l);break;case"together":Fo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _o(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function To(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zg|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(n=Xs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Xs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Eo(e,t){if(!al)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Jo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,i|=14680064&a.subtreeFlags,i|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Uo(e,t,n){var i=t.pendingProps;switch(tl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jo(t),null;case 1:case 17:return Va(t.type)&&Xa(),Jo(t),null;case 3:return i=t.stateNode,ar(),Za(Wa),Za(qa),ur(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(cl(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ll&&(rs(ll),ll=null))),Jo(t),null;case 5:rr(t);var a=nr(tr.current);if(n=t.type,null!==e&&null!=t.stateNode)Xo(e,t,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(l(166));return Jo(t),null}if(e=nr($l.current),cl(t)){i=t.stateNode,n=t.type;var r=t.memoizedProps;switch(i[Ia]=t,i[Ca]=r,e=0!==(1&t.mode),n){case"dialog":Hi("cancel",i),Hi("close",i);break;case"iframe":case"object":case"embed":Hi("load",i);break;case"video":case"audio":for(a=0;a<Yi.length;a++)Hi(Yi[a],i);break;case"source":Hi("error",i);break;case"img":case"image":case"link":Hi("error",i),Hi("load",i);break;case"details":Hi("toggle",i);break;case"input":Q(i,r),Hi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Hi("invalid",i);break;case"textarea":ae(i,r),Hi("invalid",i)}for(var g in pe(n,r),a=null,r)if(r.hasOwnProperty(g)){var s=r[g];"children"===g?"string"===typeof s?i.textContent!==s&&(!0!==r.suppressHydrationWarning&&ji(i.textContent,s,e),a=["children",s]):"number"===typeof s&&i.textContent!==""+s&&(!0!==r.suppressHydrationWarning&&ji(i.textContent,s,e),a=["children",""+s]):o.hasOwnProperty(g)&&null!=s&&"onScroll"===g&&Hi("scroll",i)}switch(n){case"input":J(i),$(i,r,!0);break;case"textarea":J(i),re(i);break;case"select":case"option":break;default:"function"===typeof r.onClick&&(i.onclick=$i)}i=a,t.updateQueue=i,null!==i&&(t.flags|=4)}else{g=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=g.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=g.createElement(n,{is:i.is}):(e=g.createElement(n),"select"===n&&(g=e,i.multiple?g.multiple=!0:i.size&&(g.size=i.size))):e=g.createElementNS(e,n),e[Ia]=t,e[Ca]=i,Vo(e,t),t.stateNode=e;e:{switch(g=fe(n,i),n){case"dialog":Hi("cancel",e),Hi("close",e),a=i;break;case"iframe":case"object":case"embed":Hi("load",e),a=i;break;case"video":case"audio":for(a=0;a<Yi.length;a++)Hi(Yi[a],e);a=i;break;case"source":Hi("error",e),a=i;break;case"img":case"image":case"link":Hi("error",e),Hi("load",e),a=i;break;case"details":Hi("toggle",e),a=i;break;case"input":Q(e,i),a=P(e,i),Hi("invalid",e);break;case"option":default:a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=K({},i,{value:void 0}),Hi("invalid",e);break;case"textarea":ae(e,i),a=ie(e,i),Hi("invalid",e)}for(r in pe(n,a),s=a)if(s.hasOwnProperty(r)){var u=s[r];"style"===r?Ae(e,u):"dangerouslySetInnerHTML"===r?null!=(u=u?u.__html:void 0)&&ce(e,u):"children"===r?"string"===typeof u?("textarea"!==n||""!==u)&&Ie(e,u):"number"===typeof u&&Ie(e,""+u):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(o.hasOwnProperty(r)?null!=u&&"onScroll"===r&&Hi("scroll",e):null!=u&&f(e,r,u,g))}switch(n){case"input":J(e),$(e,i,!1);break;case"textarea":J(e),re(e);break;case"option":null!=i.value&&e.setAttribute("value",""+T(i.value));break;case"select":e.multiple=!!i.multiple,null!=(r=i.value)?ne(e,!!i.multiple,r,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Jo(t),null;case 6:if(e&&null!=t.stateNode)ko(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(l(166));if(n=nr(tr.current),nr($l.current),cl(t)){if(i=t.stateNode,n=t.memoizedProps,i[Ia]=t,(r=i.nodeValue!==n)&&null!==(e=nl))switch(e.tag){case 3:ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ji(i.nodeValue,n,0!==(1&e.mode))}r&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Ia]=t,t.stateNode=i}return Jo(t),null;case 13:if(Za(or),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(al&&null!==il&&0!==(1&t.mode)&&0===(128&t.flags))Il(),Cl(),t.flags|=98560,r=!1;else if(r=cl(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(l(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(l(317));r[Ia]=t}else Cl(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Jo(t),r=!1}else null!==ll&&(rs(ll),ll=null),r=!0;if(!r)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&or.current)?0===kg&&(kg=3):hs())),null!==t.updateQueue&&(t.flags|=4),Jo(t),null);case 4:return ar(),null===e&&Li(t.stateNode.containerInfo),Jo(t),null;case 10:return yl(t.type._context),Jo(t),null;case 19:if(Za(or),null===(r=t.memoizedState))return Jo(t),null;if(i=0!==(128&t.flags),null===(g=r.rendering))if(i)Eo(r,!1);else{if(0!==kg||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(g=gr(e))){for(t.flags|=128,Eo(r,!1),null!==(i=g.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(r=n).flags&=14680066,null===(g=r.alternate)?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=g.childLanes,r.lanes=g.lanes,r.child=g.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=g.memoizedProps,r.memoizedState=g.memoizedState,r.updateQueue=g.updateQueue,r.type=g.type,e=g.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xa(or,1&or.current|2),t.child}e=e.sibling}null!==r.tail&&Oe()>Lg&&(t.flags|=128,i=!0,Eo(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=gr(g))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Eo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!g.alternate&&!al)return Jo(t),null}else 2*Oe()-r.renderingStartTime>Lg&&1073741824!==n&&(t.flags|=128,i=!0,Eo(r,!1),t.lanes=4194304);r.isBackwards?(g.sibling=t.child,t.child=g):(null!==(n=r.last)?n.sibling=g:t.child=g,r.last=g)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Oe(),t.sibling=null,n=or.current,xa(or,i?1&n|2:1&n),t):(Jo(t),null);case 22:case 23:return cs(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Vg)&&(Jo(t),6&t.subtreeFlags&&(t.flags|=8192)):Jo(t),null;case 24:case 25:return null}throw Error(l(156,t.tag))}function Do(e,t){switch(tl(t),t.tag){case 1:return Va(t.type)&&Xa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ar(),Za(Wa),Za(qa),ur(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return rr(t),null;case 13:if(Za(or),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));Cl()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Za(or),null;case 4:return ar(),null;case 10:return yl(t.type._context),null;case 22:case 23:return cs(),null;default:return null}}Vo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xo=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,nr($l.current);var l,r=null;switch(n){case"input":a=P(e,a),i=P(e,i),r=[];break;case"select":a=K({},a,{value:void 0}),i=K({},i,{value:void 0}),r=[];break;case"textarea":a=ie(e,a),i=ie(e,i),r=[];break;default:"function"!==typeof a.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(u in pe(n,i),n=null,a)if(!i.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var g=a[u];for(l in g)g.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var s=i[u];if(g=null!=a?a[u]:void 0,i.hasOwnProperty(u)&&s!==g&&(null!=s||null!=g))if("style"===u)if(g){for(l in g)!g.hasOwnProperty(l)||s&&s.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in s)s.hasOwnProperty(l)&&g[l]!==s[l]&&(n||(n={}),n[l]=s[l])}else n||(r||(r=[]),r.push(u,n)),n=s;else"dangerouslySetInnerHTML"===u?(s=s?s.__html:void 0,g=g?g.__html:void 0,null!=s&&g!==s&&(r=r||[]).push(u,s)):"children"===u?"string"!==typeof s&&"number"!==typeof s||(r=r||[]).push(u,""+s):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=s&&"onScroll"===u&&Hi("scroll",e),r||g===s||(r=[])):(r=r||[]).push(u,s))}n&&(r=r||[]).push("style",n);var u=r;(t.updateQueue=u)&&(t.flags|=4)}},ko=function(e,t,n,i){n!==i&&(t.flags|=4)};var Po=!1,Qo=!1,Oo="function"===typeof WeakSet?WeakSet:Set,jo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Bs(e,t,i)}else n.current=null}function eg(e,t,n){try{n()}catch(i){Bs(e,t,i)}}var tg=!1;function ng(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var a=i=i.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,void 0!==l&&eg(t,n,l)}a=a.next}while(a!==i)}}function ig(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ag(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function lg(e){var t=e.alternate;null!==t&&(e.alternate=null,lg(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[Ia],delete t[Ca],delete t[ha],delete t[Aa],delete t[ma])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rg(e){return 5===e.tag||3===e.tag||4===e.tag}function og(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gg(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(gg(e,t,n),e=e.sibling;null!==e;)gg(e,t,n),e=e.sibling}function sg(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(sg(e,t,n),e=e.sibling;null!==e;)sg(e,t,n),e=e.sibling}var ug=null,cg=!1;function Ig(e,t,n){for(n=n.child;null!==n;)Cg(e,t,n),n=n.sibling}function Cg(e,t,n){if(lt&&"function"===typeof lt.onCommitFiberUnmount)try{lt.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Qo||$o(n,t);case 6:var i=ug,a=cg;ug=null,Ig(e,t,n),cg=a,null!==(ug=i)&&(cg?(e=ug,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ug.removeChild(n.stateNode));break;case 18:null!==ug&&(cg?(e=ug,n=n.stateNode,8===e.nodeType?ga(e.parentNode,n):1===e.nodeType&&ga(e,n),Lt(e)):ga(ug,n.stateNode));break;case 4:i=ug,a=cg,ug=n.stateNode.containerInfo,cg=!0,Ig(e,t,n),ug=i,cg=a;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){a=i=i.next;do{var l=a,r=l.destroy;l=l.tag,void 0!==r&&(0!==(2&l)||0!==(4&l))&&eg(n,t,r),a=a.next}while(a!==i)}Ig(e,t,n);break;case 1:if(!Qo&&($o(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Bs(n,t,o)}Ig(e,t,n);break;case 21:Ig(e,t,n);break;case 22:1&n.mode?(Qo=(i=Qo)||null!==n.memoizedState,Ig(e,t,n),Qo=i):Ig(e,t,n);break;default:Ig(e,t,n)}}function dg(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Oo),t.forEach((function(t){var i=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function hg(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var a=n[i];try{var r=e,o=t,g=o;e:for(;null!==g;){switch(g.tag){case 5:ug=g.stateNode,cg=!1;break e;case 3:case 4:ug=g.stateNode.containerInfo,cg=!0;break e}g=g.return}if(null===ug)throw Error(l(160));Cg(r,o,a),ug=null,cg=!1;var s=a.alternate;null!==s&&(s.return=null),a.return=null}catch(u){Bs(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Ag(t,e),t=t.sibling}function Ag(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hg(t,e),mg(e),4&i){try{ng(3,e,e.return),ig(3,e)}catch(A){Bs(e,e.return,A)}try{ng(5,e,e.return)}catch(A){Bs(e,e.return,A)}}break;case 1:hg(t,e),mg(e),512&i&&null!==n&&$o(n,n.return);break;case 5:if(hg(t,e),mg(e),512&i&&null!==n&&$o(n,n.return),32&e.flags){var a=e.stateNode;try{Ie(a,"")}catch(A){Bs(e,e.return,A)}}if(4&i&&null!=(a=e.stateNode)){var r=e.memoizedProps,o=null!==n?n.memoizedProps:r,g=e.type,s=e.updateQueue;if(e.updateQueue=null,null!==s)try{"input"===g&&"radio"===r.type&&null!=r.name&&O(a,r),fe(g,o);var u=fe(g,r);for(o=0;o<s.length;o+=2){var c=s[o],I=s[o+1];"style"===c?Ae(a,I):"dangerouslySetInnerHTML"===c?ce(a,I):"children"===c?Ie(a,I):f(a,c,I,u)}switch(g){case"input":j(a,r);break;case"textarea":le(a,r);break;case"select":var C=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!r.multiple;var d=r.value;null!=d?ne(a,!!r.multiple,d,!1):C!==!!r.multiple&&(null!=r.defaultValue?ne(a,!!r.multiple,r.defaultValue,!0):ne(a,!!r.multiple,r.multiple?[]:"",!1))}a[Ca]=r}catch(A){Bs(e,e.return,A)}}break;case 6:if(hg(t,e),mg(e),4&i){if(null===e.stateNode)throw Error(l(162));a=e.stateNode,r=e.memoizedProps;try{a.nodeValue=r}catch(A){Bs(e,e.return,A)}}break;case 3:if(hg(t,e),mg(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Lt(t.containerInfo)}catch(A){Bs(e,e.return,A)}break;case 4:default:hg(t,e),mg(e);break;case 13:hg(t,e),mg(e),8192&(a=e.child).flags&&(r=null!==a.memoizedState,a.stateNode.isHidden=r,!r||null!==a.alternate&&null!==a.alternate.memoizedState||(Fg=Oe())),4&i&&dg(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(u=Qo)||c,hg(t,e),Qo=u):hg(t,e),mg(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!c&&0!==(1&e.mode))for(jo=e,c=e.child;null!==c;){for(I=jo=c;null!==jo;){switch(d=(C=jo).child,C.tag){case 0:case 11:case 14:case 15:ng(4,C,C.return);break;case 1:$o(C,C.return);var h=C.stateNode;if("function"===typeof h.componentWillUnmount){i=C,n=C.return;try{t=i,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(A){Bs(i,n,A)}}break;case 5:$o(C,C.return);break;case 22:if(null!==C.memoizedState){vg(I);continue}}null!==d?(d.return=C,jo=d):vg(I)}c=c.sibling}e:for(c=null,I=e;;){if(5===I.tag){if(null===c){c=I;try{a=I.stateNode,u?"function"===typeof(r=a.style).setProperty?r.setProperty("display","none","important"):r.display="none":(g=I.stateNode,o=void 0!==(s=I.memoizedProps.style)&&null!==s&&s.hasOwnProperty("display")?s.display:null,g.style.display=he("display",o))}catch(A){Bs(e,e.return,A)}}}else if(6===I.tag){if(null===c)try{I.stateNode.nodeValue=u?"":I.memoizedProps}catch(A){Bs(e,e.return,A)}}else if((22!==I.tag&&23!==I.tag||null===I.memoizedState||I===e)&&null!==I.child){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;null===I.sibling;){if(null===I.return||I.return===e)break e;c===I&&(c=null),I=I.return}c===I&&(c=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:hg(t,e),mg(e),4&i&&dg(e);case 21:}}function mg(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rg(n)){var i=n;break e}n=n.return}throw Error(l(160))}switch(i.tag){case 5:var a=i.stateNode;32&i.flags&&(Ie(a,""),i.flags&=-33),sg(e,og(e),a);break;case 3:case 4:var r=i.stateNode.containerInfo;gg(e,og(e),r);break;default:throw Error(l(161))}}catch(o){Bs(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function pg(e,t,n){jo=e,fg(e,t,n)}function fg(e,t,n){for(var i=0!==(1&e.mode);null!==jo;){var a=jo,l=a.child;if(22===a.tag&&i){var r=null!==a.memoizedState||Po;if(!r){var o=a.alternate,g=null!==o&&null!==o.memoizedState||Qo;o=Po;var s=Qo;if(Po=r,(Qo=g)&&!s)for(jo=a;null!==jo;)g=(r=jo).child,22===r.tag&&null!==r.memoizedState?yg(a):null!==g?(g.return=r,jo=g):yg(a);for(;null!==l;)jo=l,fg(l,t,n),l=l.sibling;jo=a,Po=o,Qo=s}bg(e)}else 0!==(8772&a.subtreeFlags)&&null!==l?(l.return=a,jo=l):bg(e)}}function bg(e){for(;null!==jo;){var t=jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||ig(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qo)if(null===n)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Al(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;null!==r&&Nl(t,r,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Nl(t,o,n)}break;case 5:var g=t.stateNode;if(null===n&&4&t.flags){n=g;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var I=c.dehydrated;null!==I&&Lt(I)}}}break;default:throw Error(l(163))}Qo||512&t.flags&&ag(t)}catch(C){Bs(t,t.return,C)}}if(t===e){jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,jo=n;break}jo=t.return}}function vg(e){for(;null!==jo;){var t=jo;if(t===e){jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,jo=n;break}jo=t.return}}function yg(e){for(;null!==jo;){var t=jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ig(4,t)}catch(g){Bs(t,n,g)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var a=t.return;try{i.componentDidMount()}catch(g){Bs(t,a,g)}}var l=t.return;try{ag(t)}catch(g){Bs(t,l,g)}break;case 5:var r=t.return;try{ag(t)}catch(g){Bs(t,r,g)}}}catch(g){Bs(t,t.return,g)}if(t===e){jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,jo=o;break}jo=t.return}}var Gg,Bg=Math.ceil,Zg=b.ReactCurrentDispatcher,xg=b.ReactCurrentOwner,wg=b.ReactCurrentBatchConfig,qg=0,Wg=null,Sg=null,Rg=0,Vg=0,Xg=Ba(0),kg=0,Yg=null,zg=0,Kg=0,Ng=0,Hg=null,Mg=null,Fg=0,Lg=1/0,_g=null,Tg=!1,Eg=null,Jg=null,Ug=!1,Dg=null,Pg=0,Qg=0,Og=null,jg=-1,$g=0;function es(){return 0!==(6&qg)?Oe():-1!==jg?jg:jg=Oe()}function ts(e){return 0===(1&e.mode)?1:0!==(2&qg)&&0!==Rg?Rg&-Rg:null!==hl.transition?(0===$g&&($g=ht()),$g):0!==(e=ft)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function ns(e,t,n,i){if(50<Qg)throw Qg=0,Og=null,Error(l(185));mt(e,n,i),0!==(2&qg)&&e===Wg||(e===Wg&&(0===(2&qg)&&(Kg|=n),4===kg&&os(e,Rg)),is(e,i),1===n&&0===qg&&0===(1&t.mode)&&(Lg=Oe()+500,Ha&&La()))}function is(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var r=31-rt(l),o=1<<r,g=a[r];-1===g?0!==(o&n)&&0===(o&i)||(a[r]=Ct(o,t)):g<=t&&(e.expiredLanes|=o),l&=~o}}(e,t);var i=It(e,e===Wg?Rg:0);if(0===i)null!==n&&De(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&De(n),1===t)0===e.tag?function(e){Ha=!0,Fa(e)}(gs.bind(null,e)):Fa(gs.bind(null,e)),ra((function(){0===(6&qg)&&La()})),n=null;else{switch(bt(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Ws(n,as.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function as(e,t){if(jg=-1,$g=0,0!==(6&qg))throw Error(l(327));var n=e.callbackNode;if(ys()&&e.callbackNode!==n)return null;var i=It(e,e===Wg?Rg:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=As(e,i);else{t=i;var a=qg;qg|=2;var r=ds();for(Wg===e&&Rg===t||(_g=null,Lg=Oe()+500,Is(e,t));;)try{ps();break}catch(g){Cs(e,g)}vl(),Zg.current=r,qg=a,null!==Sg?t=0:(Wg=null,Rg=0,t=kg)}if(0!==t){if(2===t&&(0!==(a=dt(e))&&(i=a,t=ls(e,a))),1===t)throw n=Yg,Is(e,0),os(e,i),is(e,Oe()),n;if(6===t)os(e,i);else{if(a=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var a=n[i],l=a.getSnapshot;a=a.value;try{if(!oi(l(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=As(e,i))&&(0!==(r=dt(e))&&(i=r,t=ls(e,r))),1===t))throw n=Yg,Is(e,0),os(e,i),is(e,Oe()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(l(345));case 2:case 5:vs(e,Mg,_g);break;case 3:if(os(e,i),(130023424&i)===i&&10<(t=Fg+500-Oe())){if(0!==It(e,0))break;if(((a=e.suspendedLanes)&i)!==i){es(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ia(vs.bind(null,e,Mg,_g),t);break}vs(e,Mg,_g);break;case 4:if(os(e,i),(4194240&i)===i)break;for(t=e.eventTimes,a=-1;0<i;){var o=31-rt(i);r=1<<o,(o=t[o])>a&&(a=o),i&=~r}if(i=a,10<(i=(120>(i=Oe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Bg(i/1960))-i)){e.timeoutHandle=ia(vs.bind(null,e,Mg,_g),i);break}vs(e,Mg,_g);break;default:throw Error(l(329))}}}return is(e,Oe()),e.callbackNode===n?as.bind(null,e):null}function ls(e,t){var n=Hg;return e.current.memoizedState.isDehydrated&&(Is(e,t).flags|=256),2!==(e=As(e,t))&&(t=Mg,Mg=n,null!==t&&rs(t)),e}function rs(e){null===Mg?Mg=e:Mg.push.apply(Mg,e)}function os(e,t){for(t&=~Ng,t&=~Kg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),i=1<<n;e[n]=-1,t&=~i}}function gs(e){if(0!==(6&qg))throw Error(l(327));ys();var t=It(e,0);if(0===(1&t))return is(e,Oe()),null;var n=As(e,t);if(0!==e.tag&&2===n){var i=dt(e);0!==i&&(t=i,n=ls(e,i))}if(1===n)throw n=Yg,Is(e,0),os(e,t),is(e,Oe()),n;if(6===n)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vs(e,Mg,_g),is(e,Oe()),null}function ss(e,t){var n=qg;qg|=1;try{return e(t)}finally{0===(qg=n)&&(Lg=Oe()+500,Ha&&La())}}function us(e){null!==Dg&&0===Dg.tag&&0===(6&qg)&&ys();var t=qg;qg|=1;var n=wg.transition,i=ft;try{if(wg.transition=null,ft=1,e)return e()}finally{ft=i,wg.transition=n,0===(6&(qg=t))&&La()}}function cs(){Vg=Xg.current,Za(Xg)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Sg)for(n=Sg.return;null!==n;){var i=n;switch(tl(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Xa();break;case 3:ar(),Za(Wa),Za(qa),ur();break;case 5:rr(i);break;case 4:ar();break;case 13:case 19:Za(or);break;case 10:yl(i.type._context);break;case 22:case 23:cs()}n=n.return}if(Wg=e,Sg=e=Xs(e.current,null),Rg=Vg=t,kg=0,Yg=null,Ng=Kg=zg=0,Mg=Hg=null,null!==xl){for(t=0;t<xl.length;t++)if(null!==(i=(n=xl[t]).interleaved)){n.interleaved=null;var a=i.next,l=n.pending;if(null!==l){var r=l.next;l.next=a,i.next=r}n.pending=i}xl=null}return e}function Cs(e,t){for(;;){var n=Sg;try{if(vl(),cr.current=lo,mr){for(var i=dr.memoizedState;null!==i;){var a=i.queue;null!==a&&(a.pending=null),i=i.next}mr=!1}if(Cr=0,Ar=hr=dr=null,pr=!1,fr=0,xg.current=null,null===n||null===n.return){kg=1,Yg=t,Sg=null;break}e:{var r=e,o=n.return,g=n,s=t;if(t=Rg,g.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s,c=g,I=c.tag;if(0===(1&c.mode)&&(0===I||11===I||15===I)){var C=c.alternate;C?(c.updateQueue=C.updateQueue,c.memoizedState=C.memoizedState,c.lanes=C.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=mo(o);if(null!==d){d.flags&=-257,po(d,o,g,0,t),1&d.mode&&Ao(r,u,t),s=u;var h=(t=d).updateQueue;if(null===h){var A=new Set;A.add(s),t.updateQueue=A}else h.add(s);break e}if(0===(1&t)){Ao(r,u,t),hs();break e}s=Error(l(426))}else if(al&&1&g.mode){var m=mo(o);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),po(m,o,g,0,t),dl(so(s,g));break e}}r=s=so(s,g),4!==kg&&(kg=2),null===Hg?Hg=[r]:Hg.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t,zl(r,Co(0,s,t));break e;case 1:g=s;var p=r.type,f=r.stateNode;if(0===(128&r.flags)&&("function"===typeof p.getDerivedStateFromError||null!==f&&"function"===typeof f.componentDidCatch&&(null===Jg||!Jg.has(f)))){r.flags|=65536,t&=-t,r.lanes|=t,zl(r,ho(r,g,t));break e}}r=r.return}while(null!==r)}bs(n)}catch(b){t=b,Sg===n&&null!==n&&(Sg=n=n.return);continue}break}}function ds(){var e=Zg.current;return Zg.current=lo,null===e?lo:e}function hs(){0!==kg&&3!==kg&&2!==kg||(kg=4),null===Wg||0===(268435455&zg)&&0===(268435455&Kg)||os(Wg,Rg)}function As(e,t){var n=qg;qg|=2;var i=ds();for(Wg===e&&Rg===t||(_g=null,Is(e,t));;)try{ms();break}catch(a){Cs(e,a)}if(vl(),qg=n,Zg.current=i,null!==Sg)throw Error(l(261));return Wg=null,Rg=0,kg}function ms(){for(;null!==Sg;)fs(Sg)}function ps(){for(;null!==Sg&&!Pe();)fs(Sg)}function fs(e){var t=Gg(e.alternate,e,Vg);e.memoizedProps=e.pendingProps,null===t?bs(e):Sg=t,xg.current=null}function bs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Uo(n,t,Vg)))return void(Sg=n)}else{if(null!==(n=Do(n,t)))return n.flags&=32767,void(Sg=n);if(null===e)return kg=6,void(Sg=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Sg=t);Sg=t=e}while(null!==t);0===kg&&(kg=5)}function vs(e,t,n){var i=ft,a=wg.transition;try{wg.transition=null,ft=1,function(e,t,n,i){do{ys()}while(null!==Dg);if(0!==(6&qg))throw Error(l(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var r=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-rt(n),l=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~l}}(e,r),e===Wg&&(Sg=Wg=null,Rg=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ug||(Ug=!0,Ws(tt,(function(){return ys(),null}))),r=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||r){r=wg.transition,wg.transition=null;var o=ft;ft=1;var g=qg;qg|=4,xg.current=null,function(e,t){if(ea=Tt,Ci(e=Ii())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var a=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch(v){n=null;break e}var o=0,g=-1,s=-1,u=0,c=0,I=e,C=null;t:for(;;){for(var d;I!==n||0!==a&&3!==I.nodeType||(g=o+a),I!==r||0!==i&&3!==I.nodeType||(s=o+i),3===I.nodeType&&(o+=I.nodeValue.length),null!==(d=I.firstChild);)C=I,I=d;for(;;){if(I===e)break t;if(C===n&&++u===a&&(g=o),C===r&&++c===i&&(s=o),null!==(d=I.nextSibling))break;C=(I=C).parentNode}I=d}n=-1===g||-1===s?null:{start:g,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Tt=!1,jo=t;null!==jo;)if(e=(t=jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,jo=e;else for(;null!==jo;){t=jo;try{var h=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var A=h.memoizedProps,m=h.memoizedState,p=t.stateNode,f=p.getSnapshotBeforeUpdate(t.elementType===t.type?A:Al(t.type,A),m);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(l(163))}}catch(v){Bs(t,t.return,v)}if(null!==(e=t.sibling)){e.return=t.return,jo=e;break}jo=t.return}h=tg,tg=!1}(e,n),Ag(n,e),di(ta),Tt=!!ea,ta=ea=null,e.current=n,pg(n,e,a),Qe(),qg=g,ft=o,wg.transition=r}else e.current=n;if(Ug&&(Ug=!1,Dg=e,Pg=a),0===(r=e.pendingLanes)&&(Jg=null),function(e){if(lt&&"function"===typeof lt.onCommitFiberRoot)try{lt.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),is(e,Oe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)i((a=t[n]).value,{componentStack:a.stack,digest:a.digest});if(Tg)throw Tg=!1,e=Eg,Eg=null,e;0!==(1&Pg)&&0!==e.tag&&ys(),0!==(1&(r=e.pendingLanes))?e===Og?Qg++:(Qg=0,Og=e):Qg=0,La()}(e,t,n,i)}finally{wg.transition=a,ft=i}return null}function ys(){if(null!==Dg){var e=bt(Pg),t=wg.transition,n=ft;try{if(wg.transition=null,ft=16>e?16:e,null===Dg)var i=!1;else{if(e=Dg,Dg=null,Pg=0,0!==(6&qg))throw Error(l(331));var a=qg;for(qg|=4,jo=e.current;null!==jo;){var r=jo,o=r.child;if(0!==(16&jo.flags)){var g=r.deletions;if(null!==g){for(var s=0;s<g.length;s++){var u=g[s];for(jo=u;null!==jo;){var c=jo;switch(c.tag){case 0:case 11:case 15:ng(8,c,r)}var I=c.child;if(null!==I)I.return=c,jo=I;else for(;null!==jo;){var C=(c=jo).sibling,d=c.return;if(lg(c),c===u){jo=null;break}if(null!==C){C.return=d,jo=C;break}jo=d}}}var h=r.alternate;if(null!==h){var A=h.child;if(null!==A){h.child=null;do{var m=A.sibling;A.sibling=null,A=m}while(null!==A)}}jo=r}}if(0!==(2064&r.subtreeFlags)&&null!==o)o.return=r,jo=o;else e:for(;null!==jo;){if(0!==(2048&(r=jo).flags))switch(r.tag){case 0:case 11:case 15:ng(9,r,r.return)}var p=r.sibling;if(null!==p){p.return=r.return,jo=p;break e}jo=r.return}}var f=e.current;for(jo=f;null!==jo;){var b=(o=jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,jo=b;else e:for(o=f;null!==jo;){if(0!==(2048&(g=jo).flags))try{switch(g.tag){case 0:case 11:case 15:ig(9,g)}}catch(y){Bs(g,g.return,y)}if(g===o){jo=null;break e}var v=g.sibling;if(null!==v){v.return=g.return,jo=v;break e}jo=g.return}}if(qg=a,La(),lt&&"function"===typeof lt.onPostCommitFiberRoot)try{lt.onPostCommitFiberRoot(at,e)}catch(y){}i=!0}return i}finally{ft=n,wg.transition=t}}return!1}function Gs(e,t,n){e=kl(e,t=Co(0,t=so(n,t),1),1),t=es(),null!==e&&(mt(e,1,t),is(e,t))}function Bs(e,t,n){if(3===e.tag)Gs(e,e,n);else for(;null!==t;){if(3===t.tag){Gs(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Jg||!Jg.has(i))){t=kl(t,e=ho(t,e=so(n,e),1),1),e=es(),null!==t&&(mt(t,1,e),is(t,e));break}}t=t.return}}function Zs(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=es(),e.pingedLanes|=e.suspendedLanes&n,Wg===e&&(Rg&n)===n&&(4===kg||3===kg&&(130023424&Rg)===Rg&&500>Oe()-Fg?Is(e,0):Ng|=n),is(e,t)}function xs(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=es();null!==(e=Wl(e,t))&&(mt(e,t,n),is(e,n))}function ws(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xs(e,n)}function qs(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(l(314))}null!==i&&i.delete(t),xs(e,n)}function Ws(e,t){return Ue(e,t)}function Ss(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(e,t,n,i){return new Ss(e,t,n,i)}function Vs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Xs(e,t){var n=e.alternate;return null===n?((n=Rs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ks(e,t,n,i,a,r){var o=2;if(i=e,"function"===typeof e)Vs(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case G:return Ys(n.children,a,r,t);case B:o=8,a|=8;break;case Z:return(e=Rs(12,n,t,2|a)).elementType=Z,e.lanes=r,e;case W:return(e=Rs(13,n,t,a)).elementType=W,e.lanes=r,e;case S:return(e=Rs(19,n,t,a)).elementType=S,e.lanes=r,e;case X:return zs(n,a,r,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case w:o=9;break e;case q:o=11;break e;case R:o=14;break e;case V:o=16,i=null;break e}throw Error(l(130,null==e?e:typeof e,""))}return(t=Rs(o,n,t,a)).elementType=e,t.type=i,t.lanes=r,t}function Ys(e,t,n,i){return(e=Rs(7,e,i,t)).lanes=n,e}function zs(e,t,n,i){return(e=Rs(22,e,i,t)).elementType=X,e.lanes=n,e.stateNode={isHidden:!1},e}function Ks(e,t,n){return(e=Rs(6,e,null,t)).lanes=n,e}function Ns(e,t,n){return(t=Rs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hs(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=At(0),this.expirationTimes=At(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ms(e,t,n,i,a,l,r,o,g){return e=new Hs(e,t,n,o,g),1===t?(t=1,!0===l&&(t|=8)):t=0,l=Rs(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rl(l),e}function Fs(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Ls(e){if(!e)return wa;e:{if(Le(e=e._reactInternals)!==e||1!==e.tag)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Va(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(l(171))}if(1===e.tag){var n=e.type;if(Va(n))return Ya(e,n,t)}return t}function _s(e,t,n,i,a,l,r,o,g){return(e=Ms(n,i,!0,e,0,l,0,o,g)).context=Ls(null),n=e.current,(l=Xl(i=es(),a=ts(n))).callback=void 0!==t&&null!==t?t:null,kl(n,l,a),e.current.lanes=a,mt(e,a,i),is(e,i),e}function Ts(e,t,n,i){var a=t.current,l=es(),r=ts(a);return n=Ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=Xl(l,r)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=kl(a,t,r))&&(ns(e,a,r,l),Yl(e,a,r)),r}function Es(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Js(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Us(e,t){Js(e,t),(e=e.alternate)&&Js(e,t)}Gg=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Wa.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:So(t),Cl();break;case 5:lr(t);break;case 1:Va(t.type)&&za(t);break;case 4:ir(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;xa(ml,i._currentValue),i._currentValue=a;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(xa(or,1&or.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ko(e,t,n):(xa(or,1&or.current),null!==(e=To(e,t,n))?e.sibling:null);xa(or,1&or.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Lo(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),xa(or,or.current),i)break;return null;case 22:case 23:return t.lanes=0,Zo(e,t,n)}return To(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,al&&0!==(1048576&t.flags)&&$a(t,Ja,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;_o(e,t),e=t.pendingProps;var a=Ra(t,qa.current);Bl(t,n),a=Gr(null,t,i,e,a,n);var r=Br();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Va(i)?(r=!0,za(t)):r=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Rl(t),a.updater=Fl,t.stateNode=a,a._reactInternals=t,El(t,i,e,n),t=Wo(null,t,i,!0,r,n)):(t.tag=0,al&&r&&el(t),vo(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(_o(e,t),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Vs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===q)return 11;if(e===R)return 14}return 2}(i),e=Al(i,e),a){case 0:t=wo(null,t,i,e,n);break e;case 1:t=qo(null,t,i,e,n);break e;case 11:t=yo(null,t,i,e,n);break e;case 14:t=Go(null,t,i,Al(i.type,e),n);break e}throw Error(l(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,wo(e,t,i,a=t.elementType===i?a:Al(i,a),n);case 1:return i=t.type,a=t.pendingProps,qo(e,t,i,a=t.elementType===i?a:Al(i,a),n);case 3:e:{if(So(t),null===e)throw Error(l(387));i=t.pendingProps,a=(r=t.memoizedState).element,Vl(e,t),Kl(t,i,null,n);var o=t.memoizedState;if(i=o.element,r.isDehydrated){if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Ro(e,t,i,n,a=so(Error(l(423)),t));break e}if(i!==a){t=Ro(e,t,i,n,a=so(Error(l(424)),t));break e}for(il=sa(t.stateNode.containerInfo.firstChild),nl=t,al=!0,ll=null,n=Ol(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Cl(),i===a){t=To(e,t,n);break e}vo(e,t,i,n)}t=t.child}return t;case 5:return lr(t),null===e&&sl(t),i=t.type,a=t.pendingProps,r=null!==e?e.memoizedProps:null,o=a.children,na(i,a)?o=null:null!==r&&na(i,r)&&(t.flags|=32),xo(e,t),vo(e,t,o,n),t.child;case 6:return null===e&&sl(t),null;case 13:return Ko(e,t,n);case 4:return ir(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Ql(t,null,i,n):vo(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,yo(e,t,i,a=t.elementType===i?a:Al(i,a),n);case 7:return vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,r=t.memoizedProps,o=a.value,xa(ml,i._currentValue),i._currentValue=o,null!==r)if(oi(r.value,o)){if(r.children===a.children&&!Wa.current){t=To(e,t,n);break e}}else for(null!==(r=t.child)&&(r.return=t);null!==r;){var g=r.dependencies;if(null!==g){o=r.child;for(var s=g.firstContext;null!==s;){if(s.context===i){if(1===r.tag){(s=Xl(-1,n&-n)).tag=2;var u=r.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?s.next=s:(s.next=c.next,c.next=s),u.pending=s}}r.lanes|=n,null!==(s=r.alternate)&&(s.lanes|=n),Gl(r.return,n,t),g.lanes|=n;break}s=s.next}}else if(10===r.tag)o=r.type===t.type?null:r.child;else if(18===r.tag){if(null===(o=r.return))throw Error(l(341));o.lanes|=n,null!==(g=o.alternate)&&(g.lanes|=n),Gl(o,n,t),o=r.sibling}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===t){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}vo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Bl(t,n),i=i(a=Zl(a)),t.flags|=1,vo(e,t,i,n),t.child;case 14:return a=Al(i=t.type,t.pendingProps),Go(e,t,i,a=Al(i.type,a),n);case 15:return Bo(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Al(i,a),_o(e,t),t.tag=1,Va(i)?(e=!0,za(t)):e=!1,Bl(t,n),_l(t,i,a),El(t,i,a,n),Wo(null,t,i,!0,e,n);case 19:return Lo(e,t,n);case 22:return Zo(e,t,n)}throw Error(l(156,t.tag))};var Ds="function"===typeof reportError?reportError:function(e){console.error(e)};function Ps(e){this._internalRoot=e}function Qs(e){this._internalRoot=e}function Os(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function js(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $s(){}function eu(e,t,n,i,a){var l=n._reactRootContainer;if(l){var r=l;if("function"===typeof a){var o=a;a=function(){var e=Es(r);o.call(e)}}Ts(t,r,e,a)}else r=function(e,t,n,i,a){if(a){if("function"===typeof i){var l=i;i=function(){var e=Es(r);l.call(e)}}var r=_s(t,i,e,0,null,!1,0,"",$s);return e._reactRootContainer=r,e[da]=r.current,Li(8===e.nodeType?e.parentNode:e),us(),r}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof i){var o=i;i=function(){var e=Es(g);o.call(e)}}var g=Ms(e,0,!1,null,0,!1,0,"",$s);return e._reactRootContainer=g,e[da]=g.current,Li(8===e.nodeType?e.parentNode:e),us((function(){Ts(t,g,n,i)})),g}(n,t,e,a,i);return Es(r)}Qs.prototype.render=Ps.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));Ts(e,t,null,null)},Qs.prototype.unmount=Ps.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;us((function(){Ts(null,e,null,null)})),t[da]=null}},Qs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xt.length&&0!==t&&t<Xt[n].priority;n++);Xt.splice(n,0,e),0===n&&Kt(e)}},vt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(pt(t,1|n),is(t,Oe()),0===(6&qg)&&(Lg=Oe()+500,La()))}break;case 13:us((function(){var t=Wl(e,1);if(null!==t){var n=es();ns(t,e,1,n)}})),Us(e,1)}},yt=function(e){if(13===e.tag){var t=Wl(e,134217728);if(null!==t)ns(t,e,134217728,es());Us(e,134217728)}},Gt=function(e){if(13===e.tag){var t=ts(e),n=Wl(e,t);if(null!==n)ns(n,e,t,es());Us(e,t)}},Bt=function(){return ft},Zt=function(e,t){var n=ft;try{return ft=e,t()}finally{ft=n}},ye=function(e,t,n){switch(t){case"input":if(j(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=va(i);if(!a)throw Error(l(90));U(i),j(i,a)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},qe=ss,We=us;var tu={usingClientEntryPoint:!1,Events:[fa,ba,va,xe,we,ss]},nu={findFiberByHostInstance:pa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ee(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{at=au.inject(iu),lt=au}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Os(t))throw Error(l(200));return Fs(e,t,null,n)},t.createRoot=function(e,t){if(!Os(e))throw Error(l(299));var n=!1,i="",a=Ds;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Ms(e,1,!1,null,0,n,0,i,a),e[da]=t.current,Li(8===e.nodeType?e.parentNode:e),new Ps(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=null===(e=Ee(t))?null:e.stateNode},t.flushSync=function(e){return us(e)},t.hydrate=function(e,t,n){if(!js(t))throw Error(l(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Os(e))throw Error(l(405));var i=null!=n&&n.hydratedSources||null,a=!1,r="",o=Ds;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=_s(t,null,e,1,null!=n?n:null,a,0,r,o),e[da]=t.current,Li(e),i)for(e=0;e<i.length;e++)a=(a=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Qs(t)},t.render=function(e,t,n){if(!js(t))throw Error(l(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!js(e))throw Error(l(40));return!!e._reactRootContainer&&(us((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[da]=null}))})),!0)},t.unstable_batchedUpdates=ss,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!js(n))throw Error(l(200));if(null==e||void 0===e._reactInternals)throw Error(l(38));return eu(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var i=n(4164);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},4976:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},3721:function(e,t,n){e.exports=function(e){var t={},i=n(2791),a=n(3100),l=Object.assign;function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),s=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var b=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var v=Symbol.iterator;function y(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=v&&e[v]||e["@@iterator"])?e:null}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case s:return"Portal";case I:return"Profiler";case c:return"StrictMode";case A:return"Suspense";case m:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case d:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case h:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case p:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case f:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function x(e){if(Z(e)!==e)throw Error(r(188))}function w(e){var t=e.alternate;if(!t){if(null===(t=Z(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(null===a)break;var l=a.alternate;if(null===l){if(null!==(i=a.return)){n=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return x(a),e;if(l===i)return x(a),t;l=l.sibling}throw Error(r(188))}if(n.return!==i.return)n=a,i=l;else{for(var o=!1,g=a.child;g;){if(g===n){o=!0,n=a,i=l;break}if(g===i){o=!0,i=a,n=l;break}g=g.sibling}if(!o){for(g=l.child;g;){if(g===n){o=!0,n=l,i=a;break}if(g===i){o=!0,i=l,n=a;break}g=g.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}function q(e){return null!==(e=w(e))?W(e):null}function W(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=W(e);if(null!==t)return t;e=e.sibling}return null}function S(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=S(e);if(null!==t)return t}e=e.sibling}return null}var R,V=Array.isArray,X=e.getPublicInstance,k=e.getRootHostContext,Y=e.getChildHostContext,z=e.prepareForCommit,K=e.resetAfterCommit,N=e.createInstance,H=e.appendInitialChild,M=e.finalizeInitialChildren,F=e.prepareUpdate,L=e.shouldSetTextContent,_=e.createTextInstance,T=e.scheduleTimeout,E=e.cancelTimeout,J=e.noTimeout,U=e.isPrimaryRenderer,D=e.supportsMutation,P=e.supportsPersistence,Q=e.supportsHydration,O=e.getInstanceFromNode,j=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,ie=e.supportsTestSelectors,ae=e.findFiberRoot,le=e.getBoundingRect,re=e.getTextContent,oe=e.isHiddenSubtree,ge=e.matchAccessibilityRole,se=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,ce=e.appendChild,Ie=e.appendChildToContainer,Ce=e.commitTextUpdate,de=e.commitMount,he=e.commitUpdate,Ae=e.insertBefore,me=e.insertInContainerBefore,pe=e.removeChild,fe=e.removeChildFromContainer,be=e.resetTextContent,ve=e.hideInstance,ye=e.hideTextInstance,Ge=e.unhideInstance,Be=e.unhideTextInstance,Ze=e.clearContainer,xe=e.cloneInstance,we=e.createContainerChildSet,qe=e.appendChildToContainerChildSet,We=e.finalizeContainerChildren,Se=e.replaceContainerChildren,Re=e.cloneHiddenInstance,Ve=e.cloneHiddenTextInstance,Xe=e.canHydrateInstance,ke=e.canHydrateTextInstance,Ye=e.canHydrateSuspenseInstance,ze=e.isSuspenseInstancePending,Ke=e.isSuspenseInstanceFallback,Ne=e.registerSuspenseInstanceRetry,He=e.getNextHydratableSibling,Me=e.getFirstHydratableChild,Fe=e.getFirstHydratableChildWithinContainer,Le=e.getFirstHydratableChildWithinSuspenseInstance,_e=e.hydrateInstance,Te=e.hydrateTextInstance,Ee=e.hydrateSuspenseInstance,Je=e.getNextHydratableInstanceAfterSuspenseInstance,Ue=e.commitHydratedContainer,De=e.commitHydratedSuspenseInstance,Pe=e.clearSuspenseBoundary,Qe=e.clearSuspenseBoundaryFromContainer,Oe=e.shouldDeleteUnhydratedTailInstances,je=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var i=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){i=s}e.call(t.prototype)}else{try{throw Error()}catch(s){i=s}e()}}catch(s){if(s&&i&&"string"===typeof s.stack){for(var a=s.stack.split("\n"),l=i.stack.split("\n"),r=a.length-1,o=l.length-1;1<=r&&0<=o&&a[r]!==l[o];)o--;for(;1<=r&&0<=o;r--,o--)if(a[r]!==l[o]){if(1!==r||1!==o)do{if(r--,0>--o||a[r]!==l[o]){var g="\n"+a[r].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}}while(1<=r&&0<=o);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var it=Object.prototype.hasOwnProperty,at=[],lt=-1;function rt(e){return{current:e}}function ot(e){0>lt||(e.current=at[lt],at[lt]=null,lt--)}function gt(e,t){lt++,at[lt]=e.current,e.current=t}var st={},ut=rt(st),ct=rt(!1),It=st;function Ct(e,t){var n=e.type.contextTypes;if(!n)return st;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a,l={};for(a in n)l[a]=t[a];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function dt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ht(){ot(ct),ot(ut)}function At(e,t,n){if(ut.current!==st)throw Error(r(168));gt(ut,t),gt(ct,n)}function mt(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var a in i=i.getChildContext())if(!(a in t))throw Error(r(108,B(e)||"Unknown",a));return l({},n,i)}function pt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||st,It=ut.current,gt(ut,e),gt(ct,ct.current),!0}function ft(e,t,n){var i=e.stateNode;if(!i)throw Error(r(169));n?(e=mt(e,t,It),i.__reactInternalMemoizedMergedChildContext=e,ot(ct),ot(ut),gt(ut,e)):ot(ct),gt(ct,n)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(vt(e)/yt|0)|0},vt=Math.log,yt=Math.LN2;var Gt=64,Bt=4194304;function Zt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,a=e.suspendedLanes,l=e.pingedLanes,r=268435455&n;if(0!==r){var o=r&~a;0!==o?i=Zt(o):0!==(l&=r)&&(i=Zt(l))}else 0!==(r=n&~a)?i=Zt(r):0!==l&&(i=Zt(l));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&a)&&((a=i&-i)>=(l=t&-t)||16===a&&0!==(4194240&l)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)a=1<<(n=31-bt(t)),i|=e[n],t&=~a;return i}function wt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function qt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Wt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function St(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function Rt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-bt(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var Vt=0;function Xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt=a.unstable_scheduleCallback,Yt=a.unstable_cancelCallback,zt=a.unstable_shouldYield,Kt=a.unstable_requestPaint,Nt=a.unstable_now,Ht=a.unstable_ImmediatePriority,Mt=a.unstable_UserBlockingPriority,Ft=a.unstable_NormalPriority,Lt=a.unstable_IdlePriority,_t=null,Tt=null;var Et="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Jt=null,Ut=!1,Dt=!1;function Pt(e){null===Jt?Jt=[e]:Jt.push(e)}function Qt(){if(!Dt&&null!==Jt){Dt=!0;var e=0,t=Vt;try{var n=Jt;for(Vt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Jt=null,Ut=!1}catch(a){throw null!==Jt&&(Jt=Jt.slice(e+1)),kt(Ht,Qt),a}finally{Vt=t,Dt=!1}}return null}var Ot=o.ReactCurrentBatchConfig;function jt(e,t){if(Et(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!it.call(t,a)||!Et(e[a],t[a]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=l({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=rt(null),nn=null,an=null,ln=null;function rn(){ln=an=nn=null}function on(e,t,n){U?(gt(tn,t._currentValue),t._currentValue=n):(gt(tn,t._currentValue2),t._currentValue2=n)}function gn(e){var t=tn.current;ot(tn),U?e._currentValue=t:e._currentValue2=t}function sn(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function un(e,t){nn=e,ln=an=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(za=!0),e.firstContext=null)}function cn(e){var t=U?e._currentValue:e._currentValue2;if(ln!==e)if(e={context:e,memoizedValue:t,next:null},null===an){if(null===nn)throw Error(r(308));an=e,nn.dependencies={lanes:0,firstContext:e}}else an=an.next=e;return t}var In=null,Cn=!1;function dn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Dl&&0!==(1&e.mode)&&0===(2&Ul)?(null===(e=n.interleaved)?(t.next=t,null===In?In=[n]:In.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function pn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Rt(e,n)}}function fn(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var a=null,l=null;if(null!==(n=n.firstBaseUpdate)){do{var r={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===l?a=l=r:l=l.next=r,n=n.next}while(null!==n);null===l?a=l=t:l=l.next=t}else a=l=t;return n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,i){var a=e.updateQueue;Cn=!1;var r=a.firstBaseUpdate,o=a.lastBaseUpdate,g=a.shared.pending;if(null!==g){a.shared.pending=null;var s=g,u=s.next;s.next=null,null===o?r=u:o.next=u,o=s;var c=e.alternate;null!==c&&((g=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===g?c.firstBaseUpdate=u:g.next=u,c.lastBaseUpdate=s))}if(null!==r){var I=a.baseState;for(o=0,c=u=s=null,g=r;;){var C=g.lane,d=g.eventTime;if((i&C)===C){null!==c&&(c=c.next={eventTime:d,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var h=e,A=g;switch(C=t,d=n,A.tag){case 1:if("function"===typeof(h=A.payload)){I=h.call(d,I,C);break e}I=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(C="function"===typeof(h=A.payload)?h.call(d,I,C):h)||void 0===C)break e;I=l({},I,C);break e;case 2:Cn=!0}}null!==g.callback&&0!==g.lane&&(e.flags|=64,null===(C=a.effects)?a.effects=[g]:C.push(g))}else d={eventTime:d,lane:C,tag:g.tag,payload:g.payload,callback:g.callback,next:null},null===c?(u=c=d,s=I):c=c.next=d,o|=C;if(null===(g=g.next)){if(null===(g=a.shared.pending))break;g=(C=g).next,C.next=null,a.lastBaseUpdate=C,a.shared.pending=null}}if(null===c&&(s=I),a.baseState=s,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===r&&(a.shared.lanes=0);tr|=o,e.lanes=o,e.memoizedState=I}}function vn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(null!==a){if(i.callback=null,i=n,"function"!==typeof a)throw Error(r(191,a));a.call(i)}}}var yn=(new i.Component).refs;function Gn(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:l({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bn={isMounted:function(e){return!!(e=e._reactInternals)&&Z(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=br(),a=vr(e),l=An(i,a);l.payload=t,void 0!==n&&null!==n&&(l.callback=n),mn(e,l),null!==(t=yr(e,a,i))&&pn(t,e,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=br(),a=vr(e),l=An(i,a);l.tag=1,l.payload=t,void 0!==n&&null!==n&&(l.callback=n),mn(e,l),null!==(t=yr(e,a,i))&&pn(t,e,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=br(),i=vr(e),a=An(n,i);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),mn(e,a),null!==(t=yr(e,i,n))&&pn(t,e,i)}};function Zn(e,t,n,i,a,l,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,l,r):!t.prototype||!t.prototype.isPureReactComponent||(!jt(n,i)||!jt(a,l))}function xn(e,t,n){var i=!1,a=st,l=t.contextType;return"object"===typeof l&&null!==l?l=cn(l):(a=dt(t)?It:ut.current,l=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ct(e,a):st),t=new t(n,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bn,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function wn(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Bn.enqueueReplaceState(t,t.state,null)}function qn(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=yn,dn(e);var l=t.contextType;"object"===typeof l&&null!==l?a.context=cn(l):(l=dt(t)?It:ut.current,a.context=Ct(e,l)),a.state=e.memoizedState,"function"===typeof(l=t.getDerivedStateFromProps)&&(Gn(e,t,l,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Bn.enqueueReplaceState(a,a.state,null),bn(e,n,a,i),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}var Wn=[],Sn=0,Rn=null,Vn=0,Xn=[],kn=0,Yn=null,zn=1,Kn="";function Nn(e,t){Wn[Sn++]=Vn,Wn[Sn++]=Rn,Rn=e,Vn=t}function Hn(e,t,n){Xn[kn++]=zn,Xn[kn++]=Kn,Xn[kn++]=Yn,Yn=e;var i=zn;e=Kn;var a=32-bt(i)-1;i&=~(1<<a),n+=1;var l=32-bt(t)+a;if(30<l){var r=a-a%5;l=(i&(1<<r)-1).toString(32),i>>=r,a-=r,zn=1<<32-bt(t)+a|n<<a|i,Kn=l+e}else zn=1<<l|n<<a|i,Kn=e}function Mn(e){null!==e.return&&(Nn(e,1),Hn(e,1,0))}function Fn(e){for(;e===Rn;)Rn=Wn[--Sn],Wn[Sn]=null,Vn=Wn[--Sn],Wn[Sn]=null;for(;e===Yn;)Yn=Xn[--kn],Xn[kn]=null,Kn=Xn[--kn],Xn[kn]=null,zn=Xn[--kn],Xn[kn]=null}var Ln=null,_n=null,Tn=!1,En=!1,Jn=null;function Un(e,t){var n=Or(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Dn(e,t){switch(e.tag){case 5:return null!==(t=Xe(t,e.type,e.pendingProps))&&(e.stateNode=t,Ln=e,_n=Me(t),!0);case 6:return null!==(t=ke(t,e.pendingProps))&&(e.stateNode=t,Ln=e,_n=null,!0);case 13:if(null!==(t=Ye(t))){var n=null!==Yn?{id:zn,overflow:Kn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Or(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ln=e,_n=null,!0}return!1;default:return!1}}function Pn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Qn(e){if(Tn){var t=_n;if(t){var n=t;if(!Dn(e,t)){if(Pn(e))throw Error(r(418));t=He(n);var i=Ln;t&&Dn(e,t)?Un(i,n):(e.flags=-4097&e.flags|2,Tn=!1,Ln=e)}}else{if(Pn(e))throw Error(r(418));e.flags=-4097&e.flags|2,Tn=!1,Ln=e}}}function On(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ln=e}function jn(e){if(!Q||e!==Ln)return!1;if(!Tn)return On(e),Tn=!0,!1;if(3!==e.tag&&(5!==e.tag||Oe(e.type)&&!L(e.type,e.memoizedProps))){var t=_n;if(t){if(Pn(e)){for(e=_n;e;)e=He(e);throw Error(r(418))}for(;t;)Un(e,t),t=He(t)}}if(On(e),13===e.tag){if(!Q)throw Error(r(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));_n=Je(e)}else _n=Ln?He(e.stateNode):null;return!0}function $n(){Q&&(_n=Ln=null,En=Tn=!1)}function ei(e){null===Jn?Jn=[e]:Jn.push(e)}function ti(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,e));var a=i,l=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===l?t.ref:(t=function(e){var t=a.refs;t===yn&&(t=a.refs={}),null===e?delete t[l]:t[l]=e},t._stringRef=l,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ii(e){return(0,e._init)(e._payload)}function ai(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=$r(e,t)).index=0,e.sibling=null,e}function l(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,i){return null===t||6!==t.tag?((t=io(n,e.mode,i)).return=e,t):((t=a(t,n)).return=e,t)}function I(e,t,n,i){var l=n.type;return l===u?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===f&&ii(l)===t.type)?((i=a(t,n.props)).ref=ti(e,t,n),i.return=e,i):((i=eo(n.type,n.key,n.props,null,e.mode,i)).ref=ti(e,t,n),i.return=e,i)}function C(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ao(n,e.mode,i)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,i,l){return null===t||7!==t.tag?((t=to(n,e.mode,i,l)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=io(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case g:return(n=eo(t.type,t.key,t.props,null,e.mode,n)).ref=ti(e,null,t),n.return=e,n;case s:return(t=ao(t,e.mode,n)).return=e,t;case f:return h(e,(0,t._init)(t._payload),n)}if(V(t)||y(t))return(t=to(t,e.mode,n,null)).return=e,t;ni(e,t)}return null}function A(e,t,n,i){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:c(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case g:return n.key===a?I(e,t,n,i):null;case s:return n.key===a?C(e,t,n,i):null;case f:return A(e,t,(a=n._init)(n._payload),i)}if(V(n)||y(n))return null!==a?null:d(e,t,n,i,null);ni(e,n)}return null}function m(e,t,n,i,a){if("string"===typeof i&&""!==i||"number"===typeof i)return c(t,e=e.get(n)||null,""+i,a);if("object"===typeof i&&null!==i){switch(i.$$typeof){case g:return I(t,e=e.get(null===i.key?n:i.key)||null,i,a);case s:return C(t,e=e.get(null===i.key?n:i.key)||null,i,a);case f:return m(e,t,n,(0,i._init)(i._payload),a)}if(V(i)||y(i))return d(t,e=e.get(n)||null,i,a,null);ni(t,i)}return null}function p(a,r,o,g){for(var s=null,u=null,c=r,I=r=0,C=null;null!==c&&I<o.length;I++){c.index>I?(C=c,c=null):C=c.sibling;var d=A(a,c,o[I],g);if(null===d){null===c&&(c=C);break}e&&c&&null===d.alternate&&t(a,c),r=l(d,r,I),null===u?s=d:u.sibling=d,u=d,c=C}if(I===o.length)return n(a,c),Tn&&Nn(a,I),s;if(null===c){for(;I<o.length;I++)null!==(c=h(a,o[I],g))&&(r=l(c,r,I),null===u?s=c:u.sibling=c,u=c);return Tn&&Nn(a,I),s}for(c=i(a,c);I<o.length;I++)null!==(C=m(c,a,I,o[I],g))&&(e&&null!==C.alternate&&c.delete(null===C.key?I:C.key),r=l(C,r,I),null===u?s=C:u.sibling=C,u=C);return e&&c.forEach((function(e){return t(a,e)})),Tn&&Nn(a,I),s}function b(a,o,g,s){var u=y(g);if("function"!==typeof u)throw Error(r(150));if(null==(g=u.call(g)))throw Error(r(151));for(var c=u=null,I=o,C=o=0,d=null,p=g.next();null!==I&&!p.done;C++,p=g.next()){I.index>C?(d=I,I=null):d=I.sibling;var f=A(a,I,p.value,s);if(null===f){null===I&&(I=d);break}e&&I&&null===f.alternate&&t(a,I),o=l(f,o,C),null===c?u=f:c.sibling=f,c=f,I=d}if(p.done)return n(a,I),Tn&&Nn(a,C),u;if(null===I){for(;!p.done;C++,p=g.next())null!==(p=h(a,p.value,s))&&(o=l(p,o,C),null===c?u=p:c.sibling=p,c=p);return Tn&&Nn(a,C),u}for(I=i(a,I);!p.done;C++,p=g.next())null!==(p=m(I,a,C,p.value,s))&&(e&&null!==p.alternate&&I.delete(null===p.key?C:p.key),o=l(p,o,C),null===c?u=p:c.sibling=p,c=p);return e&&I.forEach((function(e){return t(a,e)})),Tn&&Nn(a,C),u}return function e(i,l,r,c){if("object"===typeof r&&null!==r&&r.type===u&&null===r.key&&(r=r.props.children),"object"===typeof r&&null!==r){switch(r.$$typeof){case g:e:{for(var I=r.key,C=l;null!==C;){if(C.key===I){if((I=r.type)===u){if(7===C.tag){n(i,C.sibling),(l=a(C,r.props.children)).return=i,i=l;break e}}else if(C.elementType===I||"object"===typeof I&&null!==I&&I.$$typeof===f&&ii(I)===C.type){n(i,C.sibling),(l=a(C,r.props)).ref=ti(i,C,r),l.return=i,i=l;break e}n(i,C);break}t(i,C),C=C.sibling}r.type===u?((l=to(r.props.children,i.mode,c,r.key)).return=i,i=l):((c=eo(r.type,r.key,r.props,null,i.mode,c)).ref=ti(i,l,r),c.return=i,i=c)}return o(i);case s:e:{for(C=r.key;null!==l;){if(l.key===C){if(4===l.tag&&l.stateNode.containerInfo===r.containerInfo&&l.stateNode.implementation===r.implementation){n(i,l.sibling),(l=a(l,r.children||[])).return=i,i=l;break e}n(i,l);break}t(i,l),l=l.sibling}(l=ao(r,i.mode,c)).return=i,i=l}return o(i);case f:return e(i,l,(C=r._init)(r._payload),c)}if(V(r))return p(i,l,r,c);if(y(r))return b(i,l,r,c);ni(i,r)}return"string"===typeof r&&""!==r||"number"===typeof r?(r=""+r,null!==l&&6===l.tag?(n(i,l.sibling),(l=a(l,r)).return=i,i=l):(n(i,l),(l=io(r,i.mode,c)).return=i,i=l),o(i)):n(i,l)}}var li=ai(!0),ri=ai(!1),oi={},gi=rt(oi),si=rt(oi),ui=rt(oi);function ci(e){if(e===oi)throw Error(r(174));return e}function Ii(e,t){gt(ui,t),gt(si,e),gt(gi,oi),e=k(t),ot(gi),gt(gi,e)}function Ci(){ot(gi),ot(si),ot(ui)}function di(e){var t=ci(ui.current),n=ci(gi.current);n!==(t=Y(n,e.type,t))&&(gt(si,e),gt(gi,t))}function hi(e){si.current===e&&(ot(gi),ot(si))}var Ai=rt(0);function mi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||ze(n)||Ke(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pi=[];function fi(){for(var e=0;e<pi.length;e++){var t=pi[e];U?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}pi.length=0}var bi=o.ReactCurrentDispatcher,vi=o.ReactCurrentBatchConfig,yi=0,Gi=null,Bi=null,Zi=null,xi=!1,wi=!1,qi=0,Wi=0;function Si(){throw Error(r(321))}function Ri(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Et(e[n],t[n]))return!1;return!0}function Vi(e,t,n,i,a,l){if(yi=l,Gi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bi.current=null===e||null===e.memoizedState?da:ha,e=n(i,a),wi){l=0;do{if(wi=!1,qi=0,25<=l)throw Error(r(301));l+=1,Zi=Bi=null,t.updateQueue=null,bi.current=Aa,e=n(i,a)}while(wi)}if(bi.current=Ca,t=null!==Bi&&null!==Bi.next,yi=0,Zi=Bi=Gi=null,xi=!1,t)throw Error(r(300));return e}function Xi(){var e=0!==qi;return qi=0,e}function ki(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Zi?Gi.memoizedState=Zi=e:Zi=Zi.next=e,Zi}function Yi(){if(null===Bi){var e=Gi.alternate;e=null!==e?e.memoizedState:null}else e=Bi.next;var t=null===Zi?Gi.memoizedState:Zi.next;if(null!==t)Zi=t,Bi=e;else{if(null===e)throw Error(r(310));e={memoizedState:(Bi=e).memoizedState,baseState:Bi.baseState,baseQueue:Bi.baseQueue,queue:Bi.queue,next:null},null===Zi?Gi.memoizedState=Zi=e:Zi=Zi.next=e}return Zi}function zi(e,t){return"function"===typeof t?t(e):t}function Ki(e){var t=Yi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=Bi,a=i.baseQueue,l=n.pending;if(null!==l){if(null!==a){var o=a.next;a.next=l.next,l.next=o}i.baseQueue=a=l,n.pending=null}if(null!==a){l=a.next,i=i.baseState;var g=o=null,s=null,u=l;do{var c=u.lane;if((yi&c)===c)null!==s&&(s=s.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var I={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===s?(g=s=I,o=i):s=s.next=I,Gi.lanes|=c,tr|=c}u=u.next}while(null!==u&&u!==l);null===s?o=i:s.next=g,Et(i,t.memoizedState)||(za=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=s,n.lastRenderedState=i}if(null!==(e=n.interleaved)){a=e;do{l=a.lane,Gi.lanes|=l,tr|=l,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ni(e){var t=Yi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,l=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{l=e(l,o.action),o=o.next}while(o!==a);Et(l,t.memoizedState)||(za=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),n.lastRenderedState=l}return[l,i]}function Hi(){}function Mi(e,t){var n=Gi,i=Yi(),a=t(),l=!Et(i.memoizedState,a);if(l&&(i.memoizedState=a,za=!0),i=i.queue,Oi(_i.bind(null,n,i,e),[e]),i.getSnapshot!==t||l||null!==Zi&&1&Zi.memoizedState.tag){if(n.flags|=2048,Ji(9,Li.bind(null,n,i,a,t),void 0,null),null===Dl)throw Error(r(349));0!==(30&yi)||Fi(n,t,a)}return a}function Fi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Gi.updateQueue)?(t={lastEffect:null,stores:null},Gi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Li(e,t,n,i){t.value=n,t.getSnapshot=i,Ti(t)&&yr(e,1,-1)}function _i(e,t,n){return n((function(){Ti(t)&&yr(e,1,-1)}))}function Ti(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Et(e,n)}catch(i){return!0}}function Ei(e){var t=ki();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},t.queue=e,e=e.dispatch=ga.bind(null,Gi,e),[t.memoizedState,e]}function Ji(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Gi.updateQueue)?(t={lastEffect:null,stores:null},Gi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ui(){return Yi().memoizedState}function Di(e,t,n,i){var a=ki();Gi.flags|=e,a.memoizedState=Ji(1|t,n,void 0,void 0===i?null:i)}function Pi(e,t,n,i){var a=Yi();i=void 0===i?null:i;var l=void 0;if(null!==Bi){var r=Bi.memoizedState;if(l=r.destroy,null!==i&&Ri(i,r.deps))return void(a.memoizedState=Ji(t,n,l,i))}Gi.flags|=e,a.memoizedState=Ji(1|t,n,l,i)}function Qi(e,t){return Di(8390656,8,e,t)}function Oi(e,t){return Pi(2048,8,e,t)}function ji(e,t){return Pi(4,2,e,t)}function $i(e,t){return Pi(4,4,e,t)}function ea(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ta(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pi(4,4,ea.bind(null,t,e),n)}function na(){}function ia(e,t){var n=Yi();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ri(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function aa(e,t){var n=Yi();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ri(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function la(e,t){var n=Vt;Vt=0!==n&&4>n?n:4,e(!0);var i=vi.transition;vi.transition={};try{e(!1),t()}finally{Vt=n,vi.transition=i}}function ra(){return Yi().memoizedState}function oa(e,t,n){var i=vr(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},sa(e)?ua(t,n):(ca(e,t,n),null!==(e=yr(e,i,n=br()))&&Ia(e,t,i))}function ga(e,t,n){var i=vr(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(sa(e))ua(t,a);else{ca(e,t,a);var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var r=t.lastRenderedState,o=l(r,n);if(a.hasEagerState=!0,a.eagerState=o,Et(o,r))return}catch(g){}null!==(e=yr(e,i,n=br()))&&Ia(e,t,i)}}function sa(e){var t=e.alternate;return e===Gi||null!==t&&t===Gi}function ua(e,t){wi=xi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ca(e,t,n){null!==Dl&&0!==(1&e.mode)&&0===(2&Ul)?(null===(e=t.interleaved)?(n.next=n,null===In?In=[t]:In.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Ia(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Rt(e,n)}}var Ca={readContext:cn,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useInsertionEffect:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useSyncExternalStore:Si,useId:Si,unstable_isNewReconciler:!1},da={readContext:cn,useCallback:function(e,t){return ki().memoizedState=[e,void 0===t?null:t],e},useContext:cn,useEffect:Qi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4194308,4,ea.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var n=ki();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ki();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=oa.bind(null,Gi,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ki().memoizedState=e},useState:Ei,useDebugValue:na,useDeferredValue:function(e){var t=Ei(e),n=t[0],i=t[1];return Qi((function(){var t=vi.transition;vi.transition={};try{i(e)}finally{vi.transition=t}}),[e]),n},useTransition:function(){var e=Ei(!1),t=e[0];return e=la.bind(null,e[1]),ki().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Gi,a=ki();if(Tn){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Dl)throw Error(r(349));0!==(30&yi)||Fi(i,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Qi(_i.bind(null,i,l,e),[e]),i.flags|=2048,Ji(9,Li.bind(null,i,l,n,t),void 0,null),n},useId:function(){var e=ki(),t=Dl.identifierPrefix;if(Tn){var n=Kn;t=":"+t+"R"+(n=(zn&~(1<<32-bt(zn)-1)).toString(32)+n),0<(n=qi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Wi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ha={readContext:cn,useCallback:ia,useContext:cn,useEffect:Oi,useImperativeHandle:ta,useInsertionEffect:ji,useLayoutEffect:$i,useMemo:aa,useReducer:Ki,useRef:Ui,useState:function(){return Ki(zi)},useDebugValue:na,useDeferredValue:function(e){var t=Ki(zi),n=t[0],i=t[1];return Oi((function(){var t=vi.transition;vi.transition={};try{i(e)}finally{vi.transition=t}}),[e]),n},useTransition:function(){return[Ki(zi)[0],Yi().memoizedState]},useMutableSource:Hi,useSyncExternalStore:Mi,useId:ra,unstable_isNewReconciler:!1},Aa={readContext:cn,useCallback:ia,useContext:cn,useEffect:Oi,useImperativeHandle:ta,useInsertionEffect:ji,useLayoutEffect:$i,useMemo:aa,useReducer:Ni,useRef:Ui,useState:function(){return Ni(zi)},useDebugValue:na,useDeferredValue:function(e){var t=Ni(zi),n=t[0],i=t[1];return Oi((function(){var t=vi.transition;vi.transition={};try{i(e)}finally{vi.transition=t}}),[e]),n},useTransition:function(){return[Ni(zi)[0],Yi().memoizedState]},useMutableSource:Hi,useSyncExternalStore:Mi,useId:ra,unstable_isNewReconciler:!1};function ma(e,t){try{var n="",i=t;do{n+=$t(i),i=i.return}while(i);var a=n}catch(l){a="\nError generating stack: "+l.message+"\n"+l.stack}return{value:e,source:t,stack:a}}function pa(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa,ba,va,ya,Ga="function"===typeof WeakMap?WeakMap:Map;function Ba(e,t,n){(n=An(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ur||(ur=!0,cr=i),pa(0,t)},n}function Za(e,t,n){(n=An(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){pa(0,t)}}var l=e.stateNode;return null!==l&&"function"===typeof l.componentDidCatch&&(n.callback=function(){pa(0,t),"function"!==typeof i&&(null===Ir?Ir=new Set([this]):Ir.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function xa(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Ga;var a=new Set;i.set(t,a)}else void 0===(a=i.get(t))&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=Er.bind(null,e,t,n),t.then(e,e))}function wa(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function qa(e,t,n,i,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=An(-1,1)).tag=2,mn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}function Wa(e){e.flags|=4}function Sa(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(D)fa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)H(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ba=function(){},va=function(e,t,n,i,a){if((e=e.memoizedProps)!==i){var l=t.stateNode,r=ci(gi.current);n=F(l,n,e,i,a,r),(t.updateQueue=n)&&Wa(t)}},ya=function(e,t,n,i){n!==i&&Wa(t)};else if(P){fa=function(e,t,n,i){for(var a=t.child;null!==a;){if(5===a.tag){var l=a.stateNode;n&&i&&(l=Re(l,a.type,a.memoizedProps,a)),H(e,l)}else if(6===a.tag)l=a.stateNode,n&&i&&(l=Ve(l,a.memoizedProps,a)),H(e,l);else if(4!==a.tag)if(22===a.tag&&null!==a.memoizedState)null!==(l=a.child)&&(l.return=a),fa(e,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};var Ra=function e(t,n,i,a){for(var l=n.child;null!==l;){if(5===l.tag){var r=l.stateNode;i&&a&&(r=Re(r,l.type,l.memoizedProps,l)),qe(t,r)}else if(6===l.tag)r=l.stateNode,i&&a&&(r=Ve(r,l.memoizedProps,l)),qe(t,r);else if(4!==l.tag)if(22===l.tag&&null!==l.memoizedState)null!==(r=l.child)&&(r.return=l),e(t,l,!0,!0);else if(null!==l.child){l.child.return=l,l=l.child;continue}if(l===n)break;for(;null===l.sibling;){if(null===l.return||l.return===n)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};ba=function(e,t){var n=t.stateNode;if(!Sa(e,t)){e=n.containerInfo;var i=we(e);Ra(i,t,!1,!1),n.pendingChildren=i,Wa(t),We(e,i)}},va=function(e,t,n,i,a){var l=e.stateNode,r=e.memoizedProps;if((e=Sa(e,t))&&r===i)t.stateNode=l;else{var o=t.stateNode,g=ci(gi.current),s=null;r!==i&&(s=F(o,n,r,i,a,g)),e&&null===s?t.stateNode=l:(l=xe(l,s,n,r,i,t,e,o),M(l,n,i,a,g)&&Wa(t),t.stateNode=l,e?Wa(t):fa(l,t,!1,!1))}},ya=function(e,t,n,i){n!==i?(e=ci(ui.current),n=ci(gi.current),t.stateNode=_(i,e,n,t),Wa(t)):t.stateNode=e.stateNode}}else ba=function(){},va=function(){},ya=function(){};function Va(e,t){if(!Tn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,i|=14680064&a.subtreeFlags,i|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function ka(e,t,n){var i=t.pendingProps;switch(Fn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return dt(t.type)&&ht(),Xa(t),null;case 3:return i=t.stateNode,Ci(),ot(ct),ot(ut),fi(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(jn(t)?Wa(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Jn&&(wr(Jn),Jn=null))),ba(e,t),Xa(t),null;case 5:hi(t),n=ci(ui.current);var a=t.type;if(null!==e&&null!=t.stateNode)va(e,t,a,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(r(166));return Xa(t),null}if(e=ci(gi.current),jn(t)){if(!Q)throw Error(r(175));e=_e(t.stateNode,t.type,t.memoizedProps,n,e,t,!En),t.updateQueue=e,null!==e&&Wa(t)}else{var l=N(a,i,n,e,t);fa(l,t,!1,!1),t.stateNode=l,M(l,a,i,n,e)&&Wa(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)ya(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(r(166));if(e=ci(ui.current),n=ci(gi.current),jn(t)){if(!Q)throw Error(r(176));if(e=t.stateNode,i=t.memoizedProps,(n=Te(e,i,t,!En))&&null!==(a=Ln))switch(l=0!==(1&a.mode),a.tag){case 3:je(a.stateNode.containerInfo,e,i,l);break;case 5:$e(a.type,a.memoizedProps,a.stateNode,e,i,l)}n&&Wa(t)}else t.stateNode=_(i,e,n,t)}return Xa(t),null;case 13:if(ot(Ai),i=t.memoizedState,Tn&&null!==_n&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=_n;e;)e=He(e);return $n(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=jn(t),null===e){if(!i)throw Error(r(318));if(!Q)throw Error(r(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(r(317));Ee(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Xa(t),null}return null!==Jn&&(wr(Jn),Jn=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?jn(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Ai.current)?0===$l&&($l=3):Yr())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return Ci(),ba(e,t),null===e&&j(t.stateNode.containerInfo),Xa(t),null;case 10:return gn(t.type._context),Xa(t),null;case 19:if(ot(Ai),null===(a=t.memoizedState))return Xa(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Va(a,!1);else{if(0!==$l||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=mi(e))){for(t.flags|=128,Va(a,!1),null!==(e=l.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;null!==i;)a=e,(n=i).flags&=14680066,null===(l=n.alternate)?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,a=l.dependencies,n.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),i=i.sibling;return gt(Ai,1&Ai.current|2),t.child}e=e.sibling}null!==a.tail&&Nt()>or&&(t.flags|=128,i=!0,Va(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=mi(l))){if(t.flags|=128,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Va(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!Tn)return Xa(t),null}else 2*Nt()-a.renderingStartTime>or&&1073741824!==n&&(t.flags|=128,i=!0,Va(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(e=a.last)?e.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Nt(),t.sibling=null,e=Ai.current,gt(Ai,i?1&e|2:1&e),t):(Xa(t),null);case 22:case 23:return Rr(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Xa(t),D&&6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}var Ya=o.ReactCurrentOwner,za=!1;function Ka(e,t,n,i){t.child=null===e?ri(t,null,n,i):li(t,e.child,n,i)}function Na(e,t,n,i,a){n=n.render;var l=t.ref;return un(t,a),i=Vi(e,t,n,i,l,a),n=Xi(),null===e||za?(Tn&&n&&Mn(t),t.flags|=1,Ka(e,t,i,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,al(e,t,a))}function Ha(e,t,n,i,a){if(null===e){var l=n.type;return"function"!==typeof l||jr(l)||void 0!==l.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=eo(n.type,null,i,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,Ma(e,t,l,i,a))}if(l=e.child,0===(e.lanes&a)){var r=l.memoizedProps;if((n=null!==(n=n.compare)?n:jt)(r,i)&&e.ref===t.ref)return al(e,t,a)}return t.flags|=1,(e=$r(l,i)).ref=t.ref,e.return=t,t.child=e}function Ma(e,t,n,i,a){if(null!==e&&jt(e.memoizedProps,i)&&e.ref===t.ref){if(za=!1,0===(e.lanes&a))return t.lanes=e.lanes,al(e,t,a);0!==(131072&e.flags)&&(za=!0)}return _a(e,t,n,i,a)}function Fa(e,t,n){var i=t.pendingProps,a=i.children,l=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},gt(jl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==l?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,gt(jl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==l?l.baseLanes:n,gt(jl,Ol),Ol|=i}else null!==l?(i=l.baseLanes|n,t.memoizedState=null):i=n,gt(jl,Ol),Ol|=i;return Ka(e,t,a,n),t.child}function La(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _a(e,t,n,i,a){var l=dt(n)?It:ut.current;return l=Ct(t,l),un(t,a),n=Vi(e,t,n,i,l,a),i=Xi(),null===e||za?(Tn&&i&&Mn(t),t.flags|=1,Ka(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,al(e,t,a))}function Ta(e,t,n,i,a){if(dt(n)){var l=!0;pt(t)}else l=!1;if(un(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),xn(t,n,i),qn(t,n,i,a),i=!0;else if(null===e){var r=t.stateNode,o=t.memoizedProps;r.props=o;var g=r.context,s=n.contextType;"object"===typeof s&&null!==s?s=cn(s):s=Ct(t,s=dt(n)?It:ut.current);var u=n.getDerivedStateFromProps,c="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate;c||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==i||g!==s)&&wn(t,r,i,s),Cn=!1;var I=t.memoizedState;r.state=I,bn(t,i,r,a),g=t.memoizedState,o!==i||I!==g||ct.current||Cn?("function"===typeof u&&(Gn(t,n,u,i),g=t.memoizedState),(o=Cn||Zn(t,n,o,i,I,g,s))?(c||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=g),r.props=i,r.state=g,r.context=s,i=o):("function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,hn(e,t),o=t.memoizedProps,s=t.type===t.elementType?o:en(t.type,o),r.props=s,c=t.pendingProps,I=r.context,"object"===typeof(g=n.contextType)&&null!==g?g=cn(g):g=Ct(t,g=dt(n)?It:ut.current);var C=n.getDerivedStateFromProps;(u="function"===typeof C||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==c||I!==g)&&wn(t,r,i,g),Cn=!1,I=t.memoizedState,r.state=I,bn(t,i,r,a);var d=t.memoizedState;o!==c||I!==d||ct.current||Cn?("function"===typeof C&&(Gn(t,n,C,i),d=t.memoizedState),(s=Cn||Zn(t,n,s,i,I,d,g)||!1)?(u||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(i,d,g),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(i,d,g)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=d),r.props=i,r.state=d,r.context=g,i=s):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),i=!1)}return Ea(e,t,n,i,l,a)}function Ea(e,t,n,i,a,l){La(e,t);var r=0!==(128&t.flags);if(!i&&!r)return a&&ft(t,n,!1),al(e,t,l);i=t.stateNode,Ya.current=t;var o=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&r?(t.child=li(t,e.child,null,l),t.child=li(t,null,o,l)):Ka(e,t,o,l),t.memoizedState=i.state,a&&ft(t,n,!0),t.child}function Ja(e){var t=e.stateNode;t.pendingContext?At(0,t.pendingContext,t.pendingContext!==t.context):t.context&&At(0,t.context,!1),Ii(e,t.containerInfo)}function Ua(e,t,n,i,a){return $n(),ei(a),t.flags|=256,Ka(e,t,n,i),t.child}var Da={dehydrated:null,treeContext:null,retryLane:0};function Pa(e){return{baseLanes:e,cachePool:null}}function Qa(e,t,n){var i,a=t.pendingProps,l=Ai.current,o=!1,g=0!==(128&t.flags);if((i=g)||(i=(null===e||null!==e.memoizedState)&&0!==(2&l)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(l|=1),gt(Ai,1&l),null===e)return Qn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Ke(e)?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=no(l,a,0,null),e=to(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Pa(n),t.memoizedState=Da,e):Oa(t,l));if(null!==(l=e.memoizedState)){if(null!==(i=l.dehydrated)){if(g)return 256&t.flags?(t.flags&=-257,el(e,t,n,Error(r(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=a.fallback,l=t.mode,a=no({mode:"visible",children:a.children},l,0,null),(o=to(o,l,n,null)).flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,0!==(1&t.mode)&&li(t,e.child,null,n),t.child.memoizedState=Pa(n),t.memoizedState=Da,o);if(0===(1&t.mode))t=el(e,t,n,null);else if(Ke(i))t=el(e,t,n,Error(r(419)));else if(a=0!==(n&e.childLanes),za||a){if(null!==(a=Dl)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(a=0!==(o&(a.suspendedLanes|n))?0:o)&&a!==l.retryLane&&(l.retryLane=a,yr(e,a,-1))}Yr(),t=el(e,t,n,Error(r(421)))}else ze(i)?(t.flags|=128,t.child=e.child,t=Ur.bind(null,e),Ne(i,t),t=null):(n=l.treeContext,Q&&(_n=Le(i),Ln=t,Tn=!0,Jn=null,En=!1,null!==n&&(Xn[kn++]=zn,Xn[kn++]=Kn,Xn[kn++]=Yn,zn=n.id,Kn=n.overflow,Yn=t)),(t=Oa(t,t.pendingProps.children)).flags|=4096);return t}return o?(a=$a(e,t,a.children,a.fallback,n),o=t.child,l=e.child.memoizedState,o.memoizedState=null===l?Pa(n):{baseLanes:l.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Da,a):(n=ja(e,t,a.children,n),t.memoizedState=null,n)}return o?(a=$a(e,t,a.children,a.fallback,n),o=t.child,l=e.child.memoizedState,o.memoizedState=null===l?Pa(n):{baseLanes:l.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Da,a):(n=ja(e,t,a.children,n),t.memoizedState=null,n)}function Oa(e,t){return(t=no({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,i){var a=e.child;return e=a.sibling,n=$r(a,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function $a(e,t,n,i,a){var l=t.mode,r=(e=e.child).sibling,o={mode:"hidden",children:n};return 0===(1&l)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=o,t.deletions=null):(n=$r(e,o)).subtreeFlags=14680064&e.subtreeFlags,null!==r?i=$r(r,i):(i=to(i,l,a,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function el(e,t,n,i){return null!==i&&ei(i),li(t,e.child,null,n),(e=Oa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),sn(e.return,t,n)}function nl(e,t,n,i,a){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=a)}function il(e,t,n){var i=t.pendingProps,a=i.revealOrder,l=i.tail;if(Ka(e,t,i.children,n),0!==(2&(i=Ai.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(gt(Ai,i),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===mi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),nl(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===mi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}nl(t,!0,n,null,l);break;case"together":nl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function al(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),tr|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=$r(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$r(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ll(e,t){switch(Fn(t),t.tag){case 1:return dt(t.type)&&ht(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ci(),ot(ct),ot(ut),fi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return hi(t),null;case 13:if(ot(Ai),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ot(Ai),null;case 4:return Ci(),null;case 10:return gn(t.type._context),null;case 22:case 23:return Rr(),null;default:return null}}var rl=!1,ol=!1,gl="function"===typeof WeakSet?WeakSet:Set,sl=null;function ul(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Tr(e,t,i)}else n.current=null}function cl(e,t,n){try{n()}catch(i){Tr(e,t,i)}}var Il=!1;function Cl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var a=i=i.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,void 0!==l&&cl(t,n,l)}a=a.next}while(a!==i)}}function dl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function hl(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=X(n);else e=n;"function"===typeof t?t(e):t.current=e}}function Al(e,t,n){if(Tt&&"function"===typeof Tt.onCommitFiberUnmount)try{Tt.onCommitFiberUnmount(_t,t)}catch(r){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var a=i,l=a.destroy;a=a.tag,void 0!==l&&(0!==(2&a)||0!==(4&a))&&cl(t,n,l),i=i.next}while(i!==e)}break;case 1:if(ul(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(r){Tr(t,n,r)}break;case 5:ul(t,n);break;case 4:D?Bl(e,t,n):P&&P&&(t=t.stateNode.containerInfo,n=we(t),Se(t,n))}}function ml(e,t,n){for(var i=t;;)if(Al(e,i,n),null===i.child||D&&4===i.tag){if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function pl(e){var t=e.alternate;null!==t&&(e.alternate=null,pl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fl(e){return 5===e.tag||3===e.tag||4===e.tag}function bl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function vl(e){if(D){e:{for(var t=e.return;null!==t;){if(fl(t))break e;t=t.return}throw Error(r(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(be(t),n.flags&=-33),Gl(e,n=bl(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,yl(e,n=bl(e),t);break;default:throw Error(r(161))}}}function yl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?me(n,e,t):Ie(n,e);else if(4!==i&&null!==(e=e.child))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function Gl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?Ae(n,e,t):ce(n,e);else if(4!==i&&null!==(e=e.child))for(Gl(e,t,n),e=e.sibling;null!==e;)Gl(e,t,n),e=e.sibling}function Bl(e,t,n){for(var i,a,l=t,o=!1;;){if(!o){o=l.return;e:for(;;){if(null===o)throw Error(r(160));switch(i=o.stateNode,o.tag){case 5:a=!1;break e;case 3:case 4:i=i.containerInfo,a=!0;break e}o=o.return}o=!0}if(5===l.tag||6===l.tag)ml(e,l,n),a?fe(i,l.stateNode):pe(i,l.stateNode);else if(18===l.tag)a?Qe(i,l.stateNode):Pe(i,l.stateNode);else if(4===l.tag){if(null!==l.child){i=l.stateNode.containerInfo,a=!0,l.child.return=l,l=l.child;continue}}else if(Al(e,l,n),null!==l.child){l.child.return=l,l=l.child;continue}if(l===t)break;for(;null===l.sibling;){if(null===l.return||l.return===t)return;4===(l=l.return).tag&&(o=!1)}l.sibling.return=l.return,l=l.sibling}}function Zl(e,t){if(D){switch(t.tag){case 0:case 11:case 14:case 15:return Cl(3,t,t.return),dl(3,t),void Cl(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var a=t.type,l=t.updateQueue;t.updateQueue=null,null!==l&&he(n,l,a,e,i,t)}return;case 6:if(null===t.stateNode)throw Error(r(162));return n=t.memoizedProps,void Ce(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(Q&&null!==e&&e.memoizedState.isDehydrated&&Ue(t.stateNode.containerInfo));case 13:case 19:return void xl(t)}throw Error(r(163))}switch(t.tag){case 0:case 11:case 14:case 15:return Cl(3,t,t.return),dl(3,t),void Cl(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void xl(t);case 3:Q&&null!==e&&e.memoizedState.isDehydrated&&Ue(t.stateNode.containerInfo)}e:if(P){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Se(t.containerInfo,t.pendingChildren);break e}throw Error(r(163))}}function xl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new gl),t.forEach((function(t){var i=Dr.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function wl(e,t,n){sl=e,ql(e,t,n)}function ql(e,t,n){for(var i=0!==(1&e.mode);null!==sl;){var a=sl,l=a.child;if(22===a.tag&&i){var r=null!==a.memoizedState||rl;if(!r){var o=a.alternate,g=null!==o&&null!==o.memoizedState||ol;o=rl;var s=ol;if(rl=r,(ol=g)&&!s)for(sl=a;null!==sl;)g=(r=sl).child,22===r.tag&&null!==r.memoizedState?Rl(a):null!==g?(g.return=r,sl=g):Rl(a);for(;null!==l;)sl=l,ql(l,t,n),l=l.sibling;sl=a,rl=o,ol=s}Wl(e)}else 0!==(8772&a.subtreeFlags)&&null!==l?(l.return=a,sl=l):Wl(e)}}function Wl(e){for(;null!==sl;){var t=sl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:ol||dl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!ol)if(null===n)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;null!==l&&vn(t,l,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=X(t.child.stateNode);break;case 1:n=t.child.stateNode}vn(t,o,n)}break;case 5:var g=t.stateNode;null===n&&4&t.flags&&de(g,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Q&&null===t.memoizedState){var s=t.alternate;if(null!==s){var u=s.memoizedState;if(null!==u){var c=u.dehydrated;null!==c&&De(c)}}}break;default:throw Error(r(163))}ol||512&t.flags&&hl(t)}catch(I){Tr(t,t.return,I)}}if(t===e){sl=null;break}if(null!==(n=t.sibling)){n.return=t.return,sl=n;break}sl=t.return}}function Sl(e){for(;null!==sl;){var t=sl;if(t===e){sl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,sl=n;break}sl=t.return}}function Rl(e){for(;null!==sl;){var t=sl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{dl(4,t)}catch(g){Tr(t,n,g)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var a=t.return;try{i.componentDidMount()}catch(g){Tr(t,a,g)}}var l=t.return;try{hl(t)}catch(g){Tr(t,l,g)}break;case 5:var r=t.return;try{hl(t)}catch(g){Tr(t,r,g)}}}catch(g){Tr(t,t.return,g)}if(t===e){sl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,sl=o;break}sl=t.return}}var Vl=0,Xl=1,kl=2,Yl=3,zl=4;if("function"===typeof Symbol&&Symbol.for){var Kl=Symbol.for;Vl=Kl("selector.component"),Xl=Kl("selector.has_pseudo_class"),kl=Kl("selector.role"),Yl=Kl("selector.test_id"),zl=Kl("selector.text")}function Nl(e){var t=O(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(r(364));return t}if(null===(e=ae(e)))throw Error(r(362));return e.stateNode.current}function Hl(e,t){switch(t.$$typeof){case Vl:if(e.type===t.value)return!0;break;case Xl:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],a=e[n++],l=t[a];if(5!==i.tag||!oe(i)){for(;null!=l&&Hl(i,l);)l=t[++a];if(a===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}t=!1}return t;case kl:if(5===e.tag&&ge(e.stateNode,t.value))return!0;break;case zl:if((5===e.tag||6===e.tag)&&(null!==(e=re(e))&&0<=e.indexOf(t.value)))return!0;break;case Yl:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Ml(e){switch(e.$$typeof){case Vl:return"<"+(G(e.value)||"Unknown")+">";case Xl:return":has("+(Ml(e)||"")+")";case kl:return'[role="'+e.value+'"]';case zl:return'"'+e.value+'"';case Yl:return'[data-testname="'+e.value+'"]';default:throw Error(r(365))}}function Fl(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var a=e[i++],l=e[i++],r=t[l];if(5!==a.tag||!oe(a)){for(;null!=r&&Hl(a,r);)r=t[++l];if(l===t.length)n.push(a);else for(a=a.child;null!==a;)e.push(a,l),a=a.sibling}}return n}function Ll(e,t){if(!ie)throw Error(r(363));e=Fl(e=Nl(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(5===i.tag)oe(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}var _l=Math.ceil,Tl=o.ReactCurrentDispatcher,El=o.ReactCurrentOwner,Jl=o.ReactCurrentBatchConfig,Ul=0,Dl=null,Pl=null,Ql=0,Ol=0,jl=rt(0),$l=0,er=null,tr=0,nr=0,ir=0,ar=null,lr=null,rr=0,or=1/0;function gr(){or=Nt()+500}var sr,ur=!1,cr=null,Ir=null,Cr=!1,dr=null,hr=0,Ar=0,mr=null,pr=-1,fr=0;function br(){return 0!==(6&Ul)?Nt():-1!==pr?pr:pr=Nt()}function vr(e){return 0===(1&e.mode)?1:0!==(2&Ul)&&0!==Ql?Ql&-Ql:null!==Ot.transition?(0===fr&&(e=Gt,0===(4194240&(Gt<<=1))&&(Gt=64),fr=e),fr):0!==(e=Vt)?e:$()}function yr(e,t,n){if(50<Ar)throw Ar=0,mr=null,Error(r(185));var i=Gr(e,t);return null===i?null:(St(i,t,n),0!==(2&Ul)&&i===Dl||(i===Dl&&(0===(2&Ul)&&(nr|=t),4===$l&&qr(i,Ql)),Br(i,n),1===t&&0===Ul&&0===(1&e.mode)&&(gr(),Ut&&Qt())),i)}function Gr(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Br(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var r=31-bt(l),o=1<<r,g=a[r];-1===g?0!==(o&n)&&0===(o&i)||(a[r]=wt(o,t)):g<=t&&(e.expiredLanes|=o),l&=~o}}(e,t);var i=xt(e,e===Dl?Ql:0);if(0===i)null!==n&&Yt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Yt(n),1===t)0===e.tag?function(e){Ut=!0,Pt(e)}(Wr.bind(null,e)):Pt(Wr.bind(null,e)),te?ne((function(){0===Ul&&Qt()})):kt(Ht,Qt),n=null;else{switch(Xt(i)){case 1:n=Ht;break;case 4:n=Mt;break;case 16:default:n=Ft;break;case 536870912:n=Lt}n=Pr(n,Zr.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Zr(e,t){if(pr=-1,fr=0,0!==(6&Ul))throw Error(r(327));var n=e.callbackNode;if(Lr()&&e.callbackNode!==n)return null;var i=xt(e,e===Dl?Ql:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=zr(e,i);else{t=i;var a=Ul;Ul|=2;var l=kr();for(Dl===e&&Ql===t||(gr(),Vr(e,t));;)try{Nr();break}catch(g){Xr(e,g)}rn(),Tl.current=l,Ul=a,null!==Pl?t=0:(Dl=null,Ql=0,t=$l)}if(0!==t){if(2===t&&(0!==(a=qt(e))&&(i=a,t=xr(e,a))),1===t)throw n=er,Vr(e,0),qr(e,i),Br(e,Nt()),n;if(6===t)qr(e,i);else{if(a=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var a=n[i],l=a.getSnapshot;a=a.value;try{if(!Et(l(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=zr(e,i))&&(0!==(l=qt(e))&&(i=l,t=xr(e,l))),1===t))throw n=er,Vr(e,0),qr(e,i),Br(e,Nt()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(r(345));case 2:case 5:Fr(e,lr);break;case 3:if(qr(e,i),(130023424&i)===i&&10<(t=rr+500-Nt())){if(0!==xt(e,0))break;if(((a=e.suspendedLanes)&i)!==i){br(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=T(Fr.bind(null,e,lr),t);break}Fr(e,lr);break;case 4:if(qr(e,i),(4194240&i)===i)break;for(t=e.eventTimes,a=-1;0<i;){var o=31-bt(i);l=1<<o,(o=t[o])>a&&(a=o),i&=~l}if(i=a,10<(i=(120>(i=Nt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*_l(i/1960))-i)){e.timeoutHandle=T(Fr.bind(null,e,lr),i);break}Fr(e,lr);break;default:throw Error(r(329))}}}return Br(e,Nt()),e.callbackNode===n?Zr.bind(null,e):null}function xr(e,t){var n=ar;return e.current.memoizedState.isDehydrated&&(Vr(e,t).flags|=256),2!==(e=zr(e,t))&&(t=lr,lr=n,null!==t&&wr(t)),e}function wr(e){null===lr?lr=e:lr.push.apply(lr,e)}function qr(e,t){for(t&=~ir,t&=~nr,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),i=1<<n;e[n]=-1,t&=~i}}function Wr(e){if(0!==(6&Ul))throw Error(r(327));Lr();var t=xt(e,0);if(0===(1&t))return Br(e,Nt()),null;var n=zr(e,t);if(0!==e.tag&&2===n){var i=qt(e);0!==i&&(t=i,n=xr(e,i))}if(1===n)throw n=er,Vr(e,0),qr(e,t),Br(e,Nt()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fr(e,lr),Br(e,Nt()),null}function Sr(e){null!==dr&&0===dr.tag&&0===(6&Ul)&&Lr();var t=Ul;Ul|=1;var n=Jl.transition,i=Vt;try{if(Jl.transition=null,Vt=1,e)return e()}finally{Vt=i,Jl.transition=n,0===(6&(Ul=t))&&Qt()}}function Rr(){Ol=jl.current,ot(jl)}function Vr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==J&&(e.timeoutHandle=J,E(n)),null!==Pl)for(n=Pl.return;null!==n;){var i=n;switch(Fn(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&ht();break;case 3:Ci(),ot(ct),ot(ut),fi();break;case 5:hi(i);break;case 4:Ci();break;case 13:case 19:ot(Ai);break;case 10:gn(i.type._context);break;case 22:case 23:Rr()}n=n.return}if(Dl=e,Pl=e=$r(e.current,null),Ql=Ol=t,$l=0,er=null,ir=nr=tr=0,lr=ar=null,null!==In){for(t=0;t<In.length;t++)if(null!==(i=(n=In[t]).interleaved)){n.interleaved=null;var a=i.next,l=n.pending;if(null!==l){var r=l.next;l.next=a,i.next=r}n.pending=i}In=null}return e}function Xr(e,t){for(;;){var n=Pl;try{if(rn(),bi.current=Ca,xi){for(var i=Gi.memoizedState;null!==i;){var a=i.queue;null!==a&&(a.pending=null),i=i.next}xi=!1}if(yi=0,Zi=Bi=Gi=null,wi=!1,qi=0,El.current=null,null===n||null===n.return){$l=1,er=t,Pl=null;break}e:{var l=e,o=n.return,g=n,s=t;if(t=Ql,g.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s,c=g,I=c.tag;if(0===(1&c.mode)&&(0===I||11===I||15===I)){var C=c.alternate;C?(c.updateQueue=C.updateQueue,c.memoizedState=C.memoizedState,c.lanes=C.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=wa(o);if(null!==d){d.flags&=-257,qa(d,o,g,0,t),1&d.mode&&xa(l,u,t),s=u;var h=(t=d).updateQueue;if(null===h){var A=new Set;A.add(s),t.updateQueue=A}else h.add(s);break e}if(0===(1&t)){xa(l,u,t),Yr();break e}s=Error(r(426))}else if(Tn&&1&g.mode){var m=wa(o);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),qa(m,o,g,0,t),ei(s);break e}}l=s,4!==$l&&($l=2),null===ar?ar=[l]:ar.push(l),s=ma(s,g),g=o;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t,fn(g,Ba(0,s,t));break e;case 1:l=s;var p=g.type,f=g.stateNode;if(0===(128&g.flags)&&("function"===typeof p.getDerivedStateFromError||null!==f&&"function"===typeof f.componentDidCatch&&(null===Ir||!Ir.has(f)))){g.flags|=65536,t&=-t,g.lanes|=t,fn(g,Za(g,l,t));break e}}g=g.return}while(null!==g)}Mr(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function kr(){var e=Tl.current;return Tl.current=Ca,null===e?Ca:e}function Yr(){0!==$l&&3!==$l&&2!==$l||($l=4),null===Dl||0===(268435455&tr)&&0===(268435455&nr)||qr(Dl,Ql)}function zr(e,t){var n=Ul;Ul|=2;var i=kr();for(Dl===e&&Ql===t||Vr(e,t);;)try{Kr();break}catch(a){Xr(e,a)}if(rn(),Ul=n,Tl.current=i,null!==Pl)throw Error(r(261));return Dl=null,Ql=0,$l}function Kr(){for(;null!==Pl;)Hr(Pl)}function Nr(){for(;null!==Pl&&!zt();)Hr(Pl)}function Hr(e){var t=sr(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?Mr(e):Pl=t,El.current=null}function Mr(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ka(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=ll(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return $l=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===$l&&($l=5)}function Fr(e,t){var n=Vt,i=Jl.transition;try{Jl.transition=null,Vt=1,function(e,t,n){do{Lr()}while(null!==dr);if(0!==(6&Ul))throw Error(r(327));var i=e.finishedWork,a=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var l=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-bt(n),l=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~l}}(e,l),e===Dl&&(Pl=Dl=null,Ql=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Cr||(Cr=!0,Pr(Ft,(function(){return Lr(),null}))),l=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||l){l=Jl.transition,Jl.transition=null;var o=Vt;Vt=1;var g=Ul;Ul|=4,El.current=null,function(e,t){for(z(e.containerInfo),sl=t;null!==sl;)if(t=(e=sl).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,sl=t;else for(;null!==sl;){e=sl;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,a=n.memoizedState,l=e.stateNode,o=l.getSnapshotBeforeUpdate(e.elementType===e.type?i:en(e.type,i),a);l.__reactInternalSnapshotBeforeUpdate=o}break;case 3:D&&Ze(e.stateNode.containerInfo);break;default:throw Error(r(163))}}catch(g){Tr(e,e.return,g)}if(null!==(t=e.sibling)){t.return=e.return,sl=t;break}sl=e.return}n=Il,Il=!1}(e,i),function(e,t){for(sl=t;null!==sl;){var n=(t=sl).deletions;if(null!==n)for(var i=0;i<n.length;i++){var a=n[i];try{var l=e;D?Bl(l,a,t):ml(l,a,t);var r=a.alternate;null!==r&&(r.return=null),a.return=null}catch(v){Tr(a,t,v)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,sl=n;else for(;null!==sl;){t=sl;try{var o=t.flags;if(32&o&&D&&be(t.stateNode),512&o){var g=t.alternate;if(null!==g){var s=g.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(rr=Nt())}break;case 22:var c=null!==t.memoizedState,I=t.alternate,C=null!==I&&null!==I.memoizedState;if(n=t,D)e:if(i=n,a=c,l=null,D)for(var d=i;;){if(5===d.tag){if(null===l){l=d;var h=d.stateNode;a?ve(h):Ge(d.stateNode,d.memoizedProps)}}else if(6===d.tag){if(null===l){var A=d.stateNode;a?ye(A):Be(A,d.memoizedProps)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===i)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===i)break;for(;null===d.sibling;){if(null===d.return||d.return===i)break e;l===d&&(l=null),d=d.return}l===d&&(l=null),d.sibling.return=d.return,d=d.sibling}if(c&&!C&&0!==(1&n.mode)){sl=n;for(var m=n.child;null!==m;){for(n=sl=m;null!==sl;){var p=(i=sl).child;switch(i.tag){case 0:case 11:case 14:case 15:Cl(4,i,i.return);break;case 1:ul(i,i.return);var f=i.stateNode;if("function"===typeof f.componentWillUnmount){var b=i.return;try{f.props=i.memoizedProps,f.state=i.memoizedState,f.componentWillUnmount()}catch(v){Tr(i,b,v)}}break;case 5:ul(i,i.return);break;case 22:if(null!==i.memoizedState){Sl(n);continue}}null!==p?(p.return=i,sl=p):Sl(n)}m=m.sibling}}}switch(4102&o){case 2:vl(t),t.flags&=-3;break;case 6:vl(t),t.flags&=-3,Zl(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Zl(t.alternate,t);break;case 4:Zl(t.alternate,t)}}catch(v){Tr(t,t.return,v)}if(null!==(n=t.sibling)){n.return=t.return,sl=n;break}sl=t.return}}}(e,i),K(e.containerInfo),e.current=i,wl(i,e,a),Kt(),Ul=g,Vt=o,Jl.transition=l}else e.current=i;if(Cr&&(Cr=!1,dr=e,hr=a),0===(l=e.pendingLanes)&&(Ir=null),function(e){if(Tt&&"function"===typeof Tt.onCommitFiberRoot)try{Tt.onCommitFiberRoot(_t,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),Br(e,Nt()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(ur)throw ur=!1,e=cr,cr=null,e;0!==(1&hr)&&0!==e.tag&&Lr(),0!==(1&(l=e.pendingLanes))?e===mr?Ar++:(Ar=0,mr=e):Ar=0,Qt()}(e,t,n)}finally{Jl.transition=i,Vt=n}return null}function Lr(){if(null!==dr){var e=Xt(hr),t=Jl.transition,n=Vt;try{if(Jl.transition=null,Vt=16>e?16:e,null===dr)var i=!1;else{if(e=dr,dr=null,hr=0,0!==(6&Ul))throw Error(r(331));var a=Ul;for(Ul|=4,sl=e.current;null!==sl;){var l=sl,o=l.child;if(0!==(16&sl.flags)){var g=l.deletions;if(null!==g){for(var s=0;s<g.length;s++){var u=g[s];for(sl=u;null!==sl;){var c=sl;switch(c.tag){case 0:case 11:case 15:Cl(8,c,l)}var I=c.child;if(null!==I)I.return=c,sl=I;else for(;null!==sl;){var C=(c=sl).sibling,d=c.return;if(pl(c),c===u){sl=null;break}if(null!==C){C.return=d,sl=C;break}sl=d}}}var h=l.alternate;if(null!==h){var A=h.child;if(null!==A){h.child=null;do{var m=A.sibling;A.sibling=null,A=m}while(null!==A)}}sl=l}}if(0!==(2064&l.subtreeFlags)&&null!==o)o.return=l,sl=o;else e:for(;null!==sl;){if(0!==(2048&(l=sl).flags))switch(l.tag){case 0:case 11:case 15:Cl(9,l,l.return)}var p=l.sibling;if(null!==p){p.return=l.return,sl=p;break e}sl=l.return}}var f=e.current;for(sl=f;null!==sl;){var b=(o=sl).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,sl=b;else e:for(o=f;null!==sl;){if(0!==(2048&(g=sl).flags))try{switch(g.tag){case 0:case 11:case 15:dl(9,g)}}catch(y){Tr(g,g.return,y)}if(g===o){sl=null;break e}var v=g.sibling;if(null!==v){v.return=g.return,sl=v;break e}sl=g.return}}if(Ul=a,Qt(),Tt&&"function"===typeof Tt.onPostCommitFiberRoot)try{Tt.onPostCommitFiberRoot(_t,e)}catch(y){}i=!0}return i}finally{Vt=n,Jl.transition=t}}return!1}function _r(e,t,n){mn(e,t=Ba(0,t=ma(n,t),1)),t=br(),null!==(e=Gr(e,1))&&(St(e,1,t),Br(e,t))}function Tr(e,t,n){if(3===e.tag)_r(e,e,n);else for(;null!==t;){if(3===t.tag){_r(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Ir||!Ir.has(i))){mn(t,e=Za(t,e=ma(n,e),1)),e=br(),null!==(t=Gr(t,1))&&(St(t,1,e),Br(t,e));break}}t=t.return}}function Er(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=br(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Ql&n)===n&&(4===$l||3===$l&&(130023424&Ql)===Ql&&500>Nt()-rr?Vr(e,0):ir|=n),Br(e,t)}function Jr(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Bt,0===(130023424&(Bt<<=1))&&(Bt=4194304)));var n=br();null!==(e=Gr(e,t))&&(St(e,t,n),Br(e,n))}function Ur(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Jr(e,n)}function Dr(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(r(314))}null!==i&&i.delete(t),Jr(e,n)}function Pr(e,t){return kt(e,t)}function Qr(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,i){return new Qr(e,t,n,i)}function jr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $r(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eo(e,t,n,i,a,l){var o=2;if(i=e,"function"===typeof e)jr(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case u:return to(n.children,a,l,t);case c:o=8,a|=8;break;case I:return(e=Or(12,n,t,2|a)).elementType=I,e.lanes=l,e;case A:return(e=Or(13,n,t,a)).elementType=A,e.lanes=l,e;case m:return(e=Or(19,n,t,a)).elementType=m,e.lanes=l,e;case b:return no(n,a,l,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case d:o=9;break e;case h:o=11;break e;case p:o=14;break e;case f:o=16,i=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Or(o,n,t,a)).elementType=e,t.type=i,t.lanes=l,t}function to(e,t,n,i){return(e=Or(7,e,i,t)).lanes=n,e}function no(e,t,n,i){return(e=Or(22,e,i,t)).elementType=b,e.lanes=n,e.stateNode={},e}function io(e,t,n){return(e=Or(6,e,null,t)).lanes=n,e}function ao(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lo(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=J,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wt(0),this.expirationTimes=Wt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wt(0),this.identifierPrefix=i,this.onRecoverableError=a,Q&&(this.mutableSourceEagerHydrationData=null)}function ro(e,t,n,i,a,l,r,o,g){return e=new lo(e,t,n,o,g),1===t?(t=1,!0===l&&(t|=8)):t=0,l=Or(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},dn(l),e}function oo(e){if(!e)return st;e:{if(Z(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(dt(n))return mt(e,n,t)}return t}function go(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return null===(e=q(t))?null:e.stateNode}function so(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function uo(e,t){so(e,t),(e=e.alternate)&&so(e,t)}function co(e){return null===(e=q(e))?null:e.stateNode}function Io(){return null}return sr=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ct.current)za=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return za=!1,function(e,t,n){switch(t.tag){case 3:Ja(t),$n();break;case 5:di(t);break;case 1:dt(t.type)&&pt(t);break;case 4:Ii(t,t.stateNode.containerInfo);break;case 10:on(0,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(gt(Ai,1&Ai.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Qa(e,t,n):(gt(Ai,1&Ai.current),null!==(e=al(e,t,n))?e.sibling:null);gt(Ai,1&Ai.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return il(e,t,n);t.flags|=128}var a=t.memoizedState;if(null!==a&&(a.rendering=null,a.tail=null,a.lastEffect=null),gt(Ai,Ai.current),i)break;return null;case 22:case 23:return t.lanes=0,Fa(e,t,n)}return al(e,t,n)}(e,t,n);za=0!==(131072&e.flags)}else za=!1,Tn&&0!==(1048576&t.flags)&&Hn(t,Vn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var a=Ct(t,ut.current);un(t,n),a=Vi(null,t,i,e,a,n);var l=Xi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(i)?(l=!0,pt(t)):l=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,dn(t),a.updater=Bn,t.stateNode=a,a._reactInternals=t,qn(t,i,e,n),t=Ea(null,t,i,!0,l,n)):(t.tag=0,Tn&&l&&Mn(t),Ka(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return jr(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===h)return 11;if(e===p)return 14}return 2}(i),e=en(i,e),a){case 0:t=_a(null,t,i,e,n);break e;case 1:t=Ta(null,t,i,e,n);break e;case 11:t=Na(null,t,i,e,n);break e;case 14:t=Ha(null,t,i,en(i.type,e),n);break e}throw Error(r(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,_a(e,t,i,a=t.elementType===i?a:en(i,a),n);case 1:return i=t.type,a=t.pendingProps,Ta(e,t,i,a=t.elementType===i?a:en(i,a),n);case 3:e:{if(Ja(t),null===e)throw Error(r(387));i=t.pendingProps,a=(l=t.memoizedState).element,hn(e,t),bn(t,i,null,n);var o=t.memoizedState;if(i=o.element,Q&&l.isDehydrated){if(l={element:i,isDehydrated:!1,cache:o.cache,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=Ua(e,t,i,n,a=Error(r(423)));break e}if(i!==a){t=Ua(e,t,i,n,a=Error(r(424)));break e}for(Q&&(_n=Fe(t.stateNode.containerInfo),Ln=t,Tn=!0,Jn=null,En=!1),n=ri(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===a){t=al(e,t,n);break e}Ka(e,t,i,n)}t=t.child}return t;case 5:return di(t),null===e&&Qn(t),i=t.type,a=t.pendingProps,l=null!==e?e.memoizedProps:null,o=a.children,L(i,a)?o=null:null!==l&&L(i,l)&&(t.flags|=32),La(e,t),Ka(e,t,o,n),t.child;case 6:return null===e&&Qn(t),null;case 13:return Qa(e,t,n);case 4:return Ii(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=li(t,null,i,n):Ka(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,Na(e,t,i,a=t.elementType===i?a:en(i,a),n);case 7:return Ka(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ka(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,l=t.memoizedProps,on(0,i,o=a.value),null!==l)if(Et(l.value,o)){if(l.children===a.children&&!ct.current){t=al(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var g=l.dependencies;if(null!==g){o=l.child;for(var s=g.firstContext;null!==s;){if(s.context===i){if(1===l.tag){(s=An(-1,n&-n)).tag=2;var u=l.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?s.next=s:(s.next=c.next,c.next=s),u.pending=s}}l.lanes|=n,null!==(s=l.alternate)&&(s.lanes|=n),sn(l.return,n,t),g.lanes|=n;break}s=s.next}}else if(10===l.tag)o=l.type===t.type?null:l.child;else if(18===l.tag){if(null===(o=l.return))throw Error(r(341));o.lanes|=n,null!==(g=o.alternate)&&(g.lanes|=n),sn(o,n,t),o=l.sibling}else o=l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===t){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}Ka(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,un(t,n),i=i(a=cn(a)),t.flags|=1,Ka(e,t,i,n),t.child;case 14:return a=en(i=t.type,t.pendingProps),Ha(e,t,i,a=en(i.type,a),n);case 15:return Ma(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:en(i,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,dt(i)?(e=!0,pt(t)):e=!1,un(t,n),xn(t,i,a),qn(t,i,a,n),Ea(null,t,i,!0,e,n);case 19:return il(e,t,n);case 22:return Fa(e,t,n)}throw Error(r(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(yr(e,134217728,br()),uo(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=br(),n=vr(e);yr(e,n,t),uo(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zt(t.pendingLanes);0!==n&&(Rt(t,1|n),Br(t,Nt()),0===(6&Ul)&&(gr(),Qt()))}break;case 13:var i=br();Sr((function(){return yr(e,1,i)})),uo(e,1)}},t.batchedUpdates=function(e,t){var n=Ul;Ul|=1;try{return e(t)}finally{0===(Ul=n)&&(gr(),Ut&&Qt())}},t.createComponentSelector=function(e){return{$$typeof:Vl,value:e}},t.createContainer=function(e,t,n,i,a,l,r){return ro(e,t,!1,null,0,i,0,l,r)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Xl,value:e}},t.createHydrationContainer=function(e,t,n,i,a,l,r,o,g){return(e=ro(n,i,!0,e,0,l,0,o,g)).context=oo(null),n=e.current,(l=An(i=br(),a=vr(n))).callback=void 0!==t&&null!==t?t:null,mn(n,l),e.current.lanes=a,St(e,a,i),Br(e,i),e},t.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:kl,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Yl,value:e}},t.createTextSelector=function(e){return{$$typeof:zl,value:e}},t.deferredUpdates=function(e){var t=Vt,n=Jl.transition;try{return Jl.transition=null,Vt=16,e()}finally{Vt=t,Jl.transition=n}},t.discreteUpdates=function(e,t,n,i,a){var l=Vt,r=Jl.transition;try{return Jl.transition=null,Vt=1,e(t,n,i,a)}finally{Vt=l,Jl.transition=r,0===Ul&&gr()}},t.findAllNodes=Ll,t.findBoundingRects=function(e,t){if(!ie)throw Error(r(363));t=Ll(e,t),e=[];for(var n=0;n<t.length;n++)e.push(le(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,a=i+n.width,l=n.y,o=l+n.height,g=t-1;0<=g;g--)if(t!==g){var s=e[g],u=s.x,c=u+s.width,I=s.y,C=I+s.height;if(i>=u&&l>=I&&a<=c&&o<=C){e.splice(t,1);break}if(!(i!==u||n.width!==s.width||C<l||I>o)){I>l&&(s.height+=I-l,s.y=l),C<o&&(s.height=o-I),e.splice(t,1);break}if(!(l!==I||n.height!==s.height||c<i||u>a)){u>i&&(s.width+=u-i,s.x=i),c<a&&(s.width=a-u),e.splice(t,1);break}}return e},t.findHostInstance=go,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=w(e))?S(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return go(e)},t.flushControlled=function(e){var t=Ul;Ul|=1;var n=Jl.transition,i=Vt;try{Jl.transition=null,Vt=1,e()}finally{Vt=i,Jl.transition=n,0===(Ul=t)&&(gr(),Qt())}},t.flushPassiveEffects=Lr,t.flushSync=Sr,t.focusWithin=function(e,t){if(!ie)throw Error(r(363));for(t=Fl(e=Nl(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!oe(n)){if(5===n.tag&&se(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Vt},t.getFindAllNodesFailureDescription=function(e,t){if(!ie)throw Error(r(363));var n=0,i=[];e=[Nl(e),0];for(var a=0;a<e.length;){var l=e[a++],o=e[a++],g=t[o];if((5!==l.tag||!oe(l))&&(Hl(l,g)&&(i.push(Ml(g)),++o>n&&(n=o)),o<t.length))for(l=l.child;null!==l;)e.push(l,o),l=l.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Ml(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?X(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:co,findFiberByHostInstance:e.findFiberByHostInstance||Io,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{_t=t.inject(e),Tt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,i){if(!ie)throw Error(r(363));e=Ll(e,t);var a=ue(e,n,i).disconnect;return{disconnect:function(){a()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Vt;try{return Vt=e,t()}finally{Vt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,i){var a=t.current,l=br(),r=vr(a);return n=oo(n),null===t.context?t.context=n:t.pendingContext=n,(t=An(l,r)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),mn(a,t),null!==(e=yr(a,r,l))&&pn(e,a,r),r},t}},4585:function(e,t,n){"use strict";e.exports=n(4976)},258:function(e,t,n){"use strict";e.exports=n(3721)},5783:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,a=e[i];if(!(0<l(a,t)))break e;e[i]=t,e[n]=a,n=i}}function i(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,a=e.length,r=a>>>1;i<r;){var o=2*(i+1)-1,g=e[o],s=o+1,u=e[s];if(0>l(g,n))s<a&&0>l(u,g)?(e[i]=u,e[s]=n,i=s):(e[i]=g,e[o]=n,i=o);else{if(!(s<a&&0>l(u,n)))break e;e[i]=u,e[s]=n,i=s}}}return t}function l(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,g=o.now();t.unstable_now=function(){return o.now()-g}}var s=[],u=[],c=1,I=null,C=3,d=!1,h=!1,A=!1,m="function"===typeof setTimeout?setTimeout:null,p="function"===typeof clearTimeout?clearTimeout:null,f="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(s,t)}t=i(u)}}function v(e){if(A=!1,b(e),!h)if(null!==i(s))h=!0,X(y);else{var t=i(u);null!==t&&k(v,t.startTime-e)}}function y(e,n){h=!1,A&&(A=!1,p(x),x=-1),d=!0;var l=C;try{for(b(n),I=i(s);null!==I&&(!(I.expirationTime>n)||e&&!W());){var r=I.callback;if("function"===typeof r){I.callback=null,C=I.priorityLevel;var o=r(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?I.callback=o:I===i(s)&&a(s),b(n)}else a(s);I=i(s)}if(null!==I)var g=!0;else{var c=i(u);null!==c&&k(v,c.startTime-n),g=!1}return g}finally{I=null,C=l,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,B=!1,Z=null,x=-1,w=5,q=-1;function W(){return!(t.unstable_now()-q<w)}function S(){if(null!==Z){var e=t.unstable_now();q=e;var n=!0;try{n=Z(!0,e)}finally{n?G():(B=!1,Z=null)}}else B=!1}if("function"===typeof f)G=function(){f(S)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,V=R.port2;R.port1.onmessage=S,G=function(){V.postMessage(null)}}else G=function(){m(S,0)};function X(e){Z=e,B||(B=!0,G())}function k(e,n){x=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||d||(h=!0,X(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return i(s)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,a,l){var r=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?r+l:r:l=r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:c++,callback:a,priorityLevel:e,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>r?(e.sortIndex=l,n(u,e),null===i(s)&&e===i(u)&&(A?(p(x),x=-1):A=!0,k(v,l-r))):(e.sortIndex=o,n(s,e),h||d||(h=!0,X(y))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},3100:function(e,t,n){"use strict";e.exports=n(5783)},8459:function(e,t){"use strict";var n,i=Symbol.for("react.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),s=Symbol.for("react.context"),u=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case l:case o:case r:case I:case C:return e;default:switch(e=e&&e.$$typeof){case u:case s:case c:case h:case d:case g:return e;default:return t}}case a:return t}}}n=Symbol.for("react.module.reference")},6900:function(e,t,n){"use strict";n(8459)},6374:function(e,t,n){"use strict";var i=n(2791),a=Symbol.for("react.element"),l=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,n){var i,l={},s=null,u=null;for(i in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(u=t.ref),t)r.call(t,i)&&!g.hasOwnProperty(i)&&(l[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===l[i]&&(l[i]=t[i]);return{$$typeof:a,type:e,key:s,ref:u,props:l,_owner:o.current}}t.Fragment=l,t.jsx=s,t.jsxs=s},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),g=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.iterator;var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,A={};function m(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||d}function p(){}function f(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||d}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},p.prototype=m.prototype;var b=f.prototype=new p;b.constructor=f,h(b,m.prototype),b.isPureReactComponent=!0;var v=Array.isArray,y=Object.prototype.hasOwnProperty,G={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function Z(e,t,i){var a,l={},r=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(r=""+t.key),t)y.call(t,a)&&!B.hasOwnProperty(a)&&(l[a]=t[a]);var g=arguments.length-2;if(1===g)l.children=i;else if(1<g){for(var s=Array(g),u=0;u<g;u++)s[u]=arguments[u+2];l.children=s}if(e&&e.defaultProps)for(a in g=e.defaultProps)void 0===l[a]&&(l[a]=g[a]);return{$$typeof:n,type:e,key:r,ref:o,props:l,_owner:G.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var w=/\/+/g;function q(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function W(e,t,a,l,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var g=!1;if(null===e)g=!0;else switch(o){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case n:case i:g=!0}}if(g)return r=r(g=e),e=""===l?"."+q(g,0):l,v(r)?(a="",null!=e&&(a=e.replace(w,"$&/")+"/"),W(r,t,a,"",(function(e){return e}))):null!=r&&(x(r)&&(r=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,a+(!r.key||g&&g.key===r.key?"":(""+r.key).replace(w,"$&/")+"/")+e)),t.push(r)),1;if(g=0,l=""===l?".":l+":",v(e))for(var s=0;s<e.length;s++){var u=l+q(o=e[s],s);g+=W(o,t,a,u,r)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=C&&e[C]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),s=0;!(o=e.next()).done;)g+=W(o=o.value,t,a,u=l+q(o,s++),r);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function S(e,t,n){if(null==e)return e;var i=[],a=0;return W(e,i,"","",(function(e){return t.call(n,e,a++)})),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var V={current:null},X={transition:null},k={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:X,ReactCurrentOwner:G};t.Children={map:S,forEach:function(e,t,n){S(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return S(e,(function(){t++})),t},toArray:function(e){return S(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=a,t.Profiler=r,t.PureComponent=f,t.StrictMode=l,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h({},e.props),l=e.key,r=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(r=t.ref,o=G.current),void 0!==t.key&&(l=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(s in t)y.call(t,s)&&!B.hasOwnProperty(s)&&(a[s]=void 0===t[s]&&void 0!==g?g[s]:t[s])}var s=arguments.length-2;if(1===s)a.children=i;else if(1<s){g=Array(s);for(var u=0;u<s;u++)g[u]=arguments[u+2];a.children=g}return{$$typeof:n,type:e.type,key:l,ref:r,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:g,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=Z,t.createFactory=function(e){var t=Z.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:I,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=X.transition;X.transition={};try{e()}finally{X.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return V.current.useCallback(e,t)},t.useContext=function(e){return V.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return V.current.useDeferredValue(e)},t.useEffect=function(e,t){return V.current.useEffect(e,t)},t.useId=function(){return V.current.useId()},t.useImperativeHandle=function(e,t,n){return V.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return V.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return V.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return V.current.useMemo(e,t)},t.useReducer=function(e,t,n){return V.current.useReducer(e,t,n)},t.useRef=function(e){return V.current.useRef(e)},t.useState=function(e){return V.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return V.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return V.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,a=e[i];if(!(0<l(a,t)))break e;e[i]=t,e[n]=a,n=i}}function i(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,a=e.length,r=a>>>1;i<r;){var o=2*(i+1)-1,g=e[o],s=o+1,u=e[s];if(0>l(g,n))s<a&&0>l(u,g)?(e[i]=u,e[s]=n,i=s):(e[i]=g,e[o]=n,i=o);else{if(!(s<a&&0>l(u,n)))break e;e[i]=u,e[s]=n,i=s}}}return t}function l(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,g=o.now();t.unstable_now=function(){return o.now()-g}}var s=[],u=[],c=1,I=null,C=3,d=!1,h=!1,A=!1,m="function"===typeof setTimeout?setTimeout:null,p="function"===typeof clearTimeout?clearTimeout:null,f="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(s,t)}t=i(u)}}function v(e){if(A=!1,b(e),!h)if(null!==i(s))h=!0,X(y);else{var t=i(u);null!==t&&k(v,t.startTime-e)}}function y(e,n){h=!1,A&&(A=!1,p(x),x=-1),d=!0;var l=C;try{for(b(n),I=i(s);null!==I&&(!(I.expirationTime>n)||e&&!W());){var r=I.callback;if("function"===typeof r){I.callback=null,C=I.priorityLevel;var o=r(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?I.callback=o:I===i(s)&&a(s),b(n)}else a(s);I=i(s)}if(null!==I)var g=!0;else{var c=i(u);null!==c&&k(v,c.startTime-n),g=!1}return g}finally{I=null,C=l,d=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,B=!1,Z=null,x=-1,w=5,q=-1;function W(){return!(t.unstable_now()-q<w)}function S(){if(null!==Z){var e=t.unstable_now();q=e;var n=!0;try{n=Z(!0,e)}finally{n?G():(B=!1,Z=null)}}else B=!1}if("function"===typeof f)G=function(){f(S)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,V=R.port2;R.port1.onmessage=S,G=function(){V.postMessage(null)}}else G=function(){m(S,0)};function X(e){Z=e,B||(B=!0,G())}function k(e,n){x=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||d||(h=!0,X(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return i(s)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,a,l){var r=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?r+l:r:l=r,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:c++,callback:a,priorityLevel:e,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>r?(e.sortIndex=l,n(u,e),null===i(s)&&e===i(u)&&(A?(p(x),x=-1):A=!0,k(v,l-r))):(e.sortIndex=o,n(s,e),h||d||(h=!0,X(y))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1561:function(e,t,n){"use strict";var i=n(2791);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},l=i.useState,r=i.useEffect,o=i.useLayoutEffect,g=i.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(i){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=l({inst:{value:n,getSnapshot:t}}),a=i[0].inst,u=i[1];return o((function(){a.value=n,a.getSnapshot=t,s(a)&&u({inst:a})}),[e,n,t]),r((function(){return s(a)&&u({inst:a}),e((function(){s(a)&&u({inst:a})}))}),[e]),g(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:u},7595:function(e,t,n){"use strict";var i=n(2791),a=n(7248);var l="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},r=a.useSyncExternalStore,o=i.useRef,g=i.useEffect,s=i.useMemo,u=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,i,a){var c=o(null);if(null===c.current){var I={hasValue:!1,value:null};c.current=I}else I=c.current;c=s((function(){function e(e){if(!g){if(g=!0,r=e,e=i(e),void 0!==a&&I.hasValue){var t=I.value;if(a(t,e))return o=t}return o=e}if(t=o,l(r,e))return t;var n=i(e);return void 0!==a&&a(t,n)?t:(r=e,o=n)}var r,o,g=!1,s=void 0===n?null:n;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]}),[t,n,i,a]);var C=r(e,c[0],c[1]);return g((function(){I.hasValue=!0,I.value=C}),[C]),u(C),C}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,n),l.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".28cb0dcd.chunk.js"},n.miniCssF=function(e){},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="my-app:";n.l=function(i,a,l,r){if(e[i])e[i].push(a);else{var o,g;if(void 0!==l)for(var s=document.getElementsByTagName("script"),u=0;u<s.length;u++){var c=s[u];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==t+l){o=c;break}}o||(g=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+l),o.src=i),e[i]=[a];var I=function(t,n){o.onerror=o.onload=null,clearTimeout(C);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},C=setTimeout(I.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=I.bind(null,o.onerror),o.onload=I.bind(null,o.onload),g&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var l=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=l);var r=n.p+n.u(t),o=new Error;n.l(r,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var l=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+l+": "+r+")",o.name="ChunkLoadError",o.type=l,o.request=r,a[1](o)}}),"chunk-"+t,t)}};var t=function(t,i){var a,l,r=i[0],o=i[1],g=i[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(g)g(n)}for(t&&t(i);s<r.length;s++)l=r[s],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0},i=self.webpackChunkmy_app=self.webpackChunkmy_app||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),function(){"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:function(){return We},AddEquation:function(){return j},AddOperation:function(){return Be},AdditiveAnimationBlendMode:function(){return tn},AdditiveBlending:function(){return D},AlphaFormat:function(){return ot},AlwaysDepth:function(){return he},AlwaysStencilFunc:function(){return Sn},AmbientLight:function(){return yI},AmbientLightProbe:function(){return NI},AnimationClip:function(){return Ec},AnimationLoader:function(){return tI},AnimationMixer:function(){return hC},AnimationObjectGroup:function(){return IC},AnimationUtils:function(){return Vc},ArcCurve:function(){return Ds},ArrayCamera:function(){return Zg},ArrowHelper:function(){return rd},Audio:function(){return QI},AudioAnalyser:function(){return nC},AudioContext:function(){return YI},AudioListener:function(){return PI},AudioLoader:function(){return zI},AxesHelper:function(){return od},BackSide:function(){return T},BasicDepthPacking:function(){return gn},BasicShadowMap:function(){return H},Bone:function(){return Cs},BooleanKeyframeTrack:function(){return Nc},Box2:function(){return wC},Box3:function(){return Ni},Box3Helper:function(){return id},BoxBufferGeometry:function(){return Ad},BoxGeometry:function(){return Nl},BoxHelper:function(){return nd},BufferAttribute:function(){return el},BufferGeometry:function(){return pl},BufferGeometryLoader:function(){return WI},ByteType:function(){return Oe},Cache:function(){return Dc},Camera:function(){return _l},CameraHelper:function(){return OC},CanvasTexture:function(){return Es},CapsuleBufferGeometry:function(){return md},CapsuleGeometry:function(){return hu},CatmullRomCurve3:function(){return eu},CineonToneMapping:function(){return qe},CircleBufferGeometry:function(){return pd},CircleGeometry:function(){return Au},ClampToEdgeWrapping:function(){return Ne},Clock:function(){return _I},Color:function(){return vi},ColorKeyframeTrack:function(){return Hc},ColorManagement:function(){return Ci},CompressedTexture:function(){return Ts},CompressedTextureLoader:function(){return nI},ConeBufferGeometry:function(){return fd},ConeGeometry:function(){return pu},CubeCamera:function(){return Jl},CubeReflectionMapping:function(){return Ve},CubeRefractionMapping:function(){return Xe},CubeTexture:function(){return Ul},CubeTextureLoader:function(){return aI},CubeUVReflectionMapping:function(){return ze},CubicBezierCurve:function(){return au},CubicBezierCurve3:function(){return lu},CubicInterpolant:function(){return kc},CullFaceBack:function(){return z},CullFaceFront:function(){return K},CullFaceFrontBack:function(){return N},CullFaceNone:function(){return Y},Curve:function(){return Js},CurvePath:function(){return Iu},CustomBlending:function(){return O},CustomToneMapping:function(){return Se},CylinderBufferGeometry:function(){return bd},CylinderGeometry:function(){return mu},Cylindrical:function(){return ZC},Data3DTexture:function(){return Ri},DataArrayTexture:function(){return Wi},DataTexture:function(){return ds},DataTexture2DArray:function(){return dd},DataTexture3D:function(){return hd},DataTextureLoader:function(){return lI},DataUtils:function(){return cd},DecrementStencilOp:function(){return fn},DecrementWrapStencilOp:function(){return vn},DefaultLoadingManager:function(){return Qc},DepthFormat:function(){return It},DepthStencilFormat:function(){return Ct},DepthTexture:function(){return Wg},DirectionalLight:function(){return vI},DirectionalLightHelper:function(){return DC},DiscreteInterpolant:function(){return zc},DodecahedronBufferGeometry:function(){return vd},DodecahedronGeometry:function(){return bu},DoubleSide:function(){return E},DstAlphaFactor:function(){return se},DstColorFactor:function(){return ce},DynamicCopyUsage:function(){return Nn},DynamicDrawUsage:function(){return Vn},DynamicReadUsage:function(){return Yn},EdgesGeometry:function(){return Zu},EllipseCurve:function(){return Us},EqualDepth:function(){return pe},EqualStencilFunc:function(){return Zn},EquirectangularReflectionMapping:function(){return ke},EquirectangularRefractionMapping:function(){return Ye},Euler:function(){return ya},EventDispatcher:function(){return _n},ExtrudeBufferGeometry:function(){return yd},ExtrudeGeometry:function(){return nc},FileLoader:function(){return eI},Float16BufferAttribute:function(){return gl},Float32BufferAttribute:function(){return sl},Float64BufferAttribute:function(){return ul},FloatType:function(){return nt},Fog:function(){return Ng},FogExp2:function(){return Kg},FramebufferTexture:function(){return _s},FrontSide:function(){return _},Frustum:function(){return tr},GLBufferAttribute:function(){return bC},GLSL1:function(){return Mn},GLSL3:function(){return Fn},GreaterDepth:function(){return be},GreaterEqualDepth:function(){return fe},GreaterEqualStencilFunc:function(){return Wn},GreaterStencilFunc:function(){return wn},GridHelper:function(){return _C},Group:function(){return xg},HalfFloatType:function(){return it},HemisphereLight:function(){return gI},HemisphereLightHelper:function(){return LC},HemisphereLightProbe:function(){return KI},IcosahedronBufferGeometry:function(){return Gd},IcosahedronGeometry:function(){return ac},ImageBitmapLoader:function(){return kI},ImageLoader:function(){return iI},ImageUtils:function(){return yi},ImmediateRenderObject:function(){return Id},IncrementStencilOp:function(){return pn},IncrementWrapStencilOp:function(){return bn},InstancedBufferAttribute:function(){return ps},InstancedBufferGeometry:function(){return qI},InstancedInterleavedBuffer:function(){return fC},InstancedMesh:function(){return Gs},Int16BufferAttribute:function(){return al},Int32BufferAttribute:function(){return rl},Int8BufferAttribute:function(){return tl},IntType:function(){return et},InterleavedBuffer:function(){return Mg},InterleavedBufferAttribute:function(){return Lg},Interpolant:function(){return Xc},InterpolateDiscrete:function(){return Dt},InterpolateLinear:function(){return Pt},InterpolateSmooth:function(){return Qt},InvertStencilOp:function(){return yn},KeepStencilOp:function(){return An},KeyframeTrack:function(){return Kc},LOD:function(){return rs},LatheBufferGeometry:function(){return Bd},LatheGeometry:function(){return du},Layers:function(){return Ga},LessDepth:function(){return Ae},LessEqualDepth:function(){return me},LessEqualStencilFunc:function(){return xn},LessStencilFunc:function(){return Bn},Light:function(){return oI},LightProbe:function(){return ZI},Line:function(){return Ss},Line3:function(){return SC},LineBasicMaterial:function(){return Bs},LineCurve:function(){return ru},LineCurve3:function(){return ou},LineDashedMaterial:function(){return Zc},LineLoop:function(){return ks},LineSegments:function(){return Xs},LinearEncoding:function(){return rn},LinearFilter:function(){return Ee},LinearInterpolant:function(){return Yc},LinearMipMapLinearFilter:function(){return Pe},LinearMipMapNearestFilter:function(){return Ue},LinearMipmapLinearFilter:function(){return De},LinearMipmapNearestFilter:function(){return Je},LinearSRGBColorSpace:function(){return dn},LinearToneMapping:function(){return xe},Loader:function(){return Oc},LoaderUtils:function(){return wI},LoadingManager:function(){return Pc},LoopOnce:function(){return Et},LoopPingPong:function(){return Ut},LoopRepeat:function(){return Jt},LuminanceAlphaFormat:function(){return ct},LuminanceFormat:function(){return ut},MOUSE:function(){return X},Material:function(){return Qa},MaterialLoader:function(){return xI},MathUtils:function(){return ii},Matrix3:function(){return li},Matrix4:function(){return Ia},MaxEquation:function(){return ne},Mesh:function(){return zl},MeshBasicMaterial:function(){return Oa},MeshDepthMaterial:function(){return fg},MeshDistanceMaterial:function(){return bg},MeshLambertMaterial:function(){return Gc},MeshMatcapMaterial:function(){return Bc},MeshNormalMaterial:function(){return yc},MeshPhongMaterial:function(){return bc},MeshPhysicalMaterial:function(){return fc},MeshStandardMaterial:function(){return pc},MeshToonMaterial:function(){return vc},MinEquation:function(){return te},MirroredRepeatWrapping:function(){return He},MixOperation:function(){return Ge},MultiplyBlending:function(){return Q},MultiplyOperation:function(){return ye},NearestFilter:function(){return Me},NearestMipMapLinearFilter:function(){return Te},NearestMipMapNearestFilter:function(){return Le},NearestMipmapLinearFilter:function(){return _e},NearestMipmapNearestFilter:function(){return Fe},NeverDepth:function(){return de},NeverStencilFunc:function(){return Gn},NoBlending:function(){return J},NoColorSpace:function(){return In},NoToneMapping:function(){return Ze},NormalAnimationBlendMode:function(){return en},NormalBlending:function(){return U},NotEqualDepth:function(){return ve},NotEqualStencilFunc:function(){return qn},NumberKeyframeTrack:function(){return Mc},Object3D:function(){return Ka},ObjectLoader:function(){return SI},ObjectSpaceNormalMap:function(){return cn},OctahedronBufferGeometry:function(){return Zd},OctahedronGeometry:function(){return lc},OneFactor:function(){return ae},OneMinusDstAlphaFactor:function(){return ue},OneMinusDstColorFactor:function(){return Ie},OneMinusSrcAlphaFactor:function(){return ge},OneMinusSrcColorFactor:function(){return re},OrthographicCamera:function(){return dr},PCFShadowMap:function(){return M},PCFSoftShadowMap:function(){return F},PMREMGenerator:function(){return Gr},Path:function(){return Cu},PerspectiveCamera:function(){return Tl},Plane:function(){return jl},PlaneBufferGeometry:function(){return xd},PlaneGeometry:function(){return ar},PlaneHelper:function(){return ad},PointLight:function(){return fI},PointLightHelper:function(){return NC},Points:function(){return Ms},PointsMaterial:function(){return Ys},PolarGridHelper:function(){return TC},PolyhedronBufferGeometry:function(){return wd},PolyhedronGeometry:function(){return fu},PositionalAudio:function(){return tC},PropertyBinding:function(){return cC},PropertyMixer:function(){return iC},QuadraticBezierCurve:function(){return gu},QuadraticBezierCurve3:function(){return su},Quaternion:function(){return ki},QuaternionKeyframeTrack:function(){return Lc},QuaternionLinearInterpolant:function(){return Fc},REVISION:function(){return V},RGBADepthPacking:function(){return sn},RGBAFormat:function(){return st},RGBAIntegerFormat:function(){return pt},RGBA_ASTC_10x10_Format:function(){return Ft},RGBA_ASTC_10x5_Format:function(){return Nt},RGBA_ASTC_10x6_Format:function(){return Ht},RGBA_ASTC_10x8_Format:function(){return Mt},RGBA_ASTC_12x10_Format:function(){return Lt},RGBA_ASTC_12x12_Format:function(){return _t},RGBA_ASTC_4x4_Format:function(){return St},RGBA_ASTC_5x4_Format:function(){return Rt},RGBA_ASTC_5x5_Format:function(){return Vt},RGBA_ASTC_6x5_Format:function(){return Xt},RGBA_ASTC_6x6_Format:function(){return kt},RGBA_ASTC_8x5_Format:function(){return Yt},RGBA_ASTC_8x6_Format:function(){return zt},RGBA_ASTC_8x8_Format:function(){return Kt},RGBA_BPTC_Format:function(){return Tt},RGBA_ETC2_EAC_Format:function(){return Wt},RGBA_PVRTC_2BPPV1_Format:function(){return xt},RGBA_PVRTC_4BPPV1_Format:function(){return Zt},RGBA_S3TC_DXT1_Format:function(){return bt},RGBA_S3TC_DXT3_Format:function(){return vt},RGBA_S3TC_DXT5_Format:function(){return yt},RGBFormat:function(){return gt},RGB_ETC1_Format:function(){return wt},RGB_ETC2_Format:function(){return qt},RGB_PVRTC_2BPPV1_Format:function(){return Bt},RGB_PVRTC_4BPPV1_Format:function(){return Gt},RGB_S3TC_DXT1_Format:function(){return ft},RGFormat:function(){return At},RGIntegerFormat:function(){return mt},RawShaderMaterial:function(){return mc},Ray:function(){return ca},Raycaster:function(){return vC},RectAreaLight:function(){return GI},RedFormat:function(){return dt},RedIntegerFormat:function(){return ht},ReinhardToneMapping:function(){return we},RepeatWrapping:function(){return Ke},ReplaceStencilOp:function(){return mn},ReverseSubtractEquation:function(){return ee},RingBufferGeometry:function(){return qd},RingGeometry:function(){return rc},SRGBColorSpace:function(){return Cn},Scene:function(){return Hg},ShaderChunk:function(){return lr},ShaderLib:function(){return or},ShaderMaterial:function(){return Ll},ShadowMaterial:function(){return Ac},Shape:function(){return xu},ShapeBufferGeometry:function(){return Wd},ShapeGeometry:function(){return oc},ShapePath:function(){return gd},ShapeUtils:function(){return $u},ShortType:function(){return je},Skeleton:function(){return ms},SkeletonHelper:function(){return zC},SkinnedMesh:function(){return Is},Source:function(){return Gi},Sphere:function(){return ia},SphereBufferGeometry:function(){return Sd},SphereGeometry:function(){return gc},Spherical:function(){return BC},SphericalHarmonics3:function(){return BI},SplineCurve:function(){return uu},SpotLight:function(){return dI},SpotLightHelper:function(){return VC},Sprite:function(){return ns},SpriteMaterial:function(){return _g},SrcAlphaFactor:function(){return oe},SrcAlphaSaturateFactor:function(){return Ce},SrcColorFactor:function(){return le},StaticCopyUsage:function(){return Kn},StaticDrawUsage:function(){return Rn},StaticReadUsage:function(){return kn},StereoCamera:function(){return LI},StreamCopyUsage:function(){return Hn},StreamDrawUsage:function(){return Xn},StreamReadUsage:function(){return zn},StringKeyframeTrack:function(){return _c},SubtractEquation:function(){return $},SubtractiveBlending:function(){return P},TOUCH:function(){return k},TangentSpaceNormalMap:function(){return un},TetrahedronBufferGeometry:function(){return Rd},TetrahedronGeometry:function(){return sc},Texture:function(){return xi},TextureLoader:function(){return rI},TorusBufferGeometry:function(){return Vd},TorusGeometry:function(){return uc},TorusKnotBufferGeometry:function(){return Xd},TorusKnotGeometry:function(){return cc},Triangle:function(){return Da},TriangleFanDrawMode:function(){return ln},TriangleStripDrawMode:function(){return an},TrianglesDrawMode:function(){return nn},TubeBufferGeometry:function(){return kd},TubeGeometry:function(){return Ic},UVMapping:function(){return Re},Uint16BufferAttribute:function(){return ll},Uint32BufferAttribute:function(){return ol},Uint8BufferAttribute:function(){return nl},Uint8ClampedBufferAttribute:function(){return il},Uniform:function(){return AC},UniformsGroup:function(){return pC},UniformsLib:function(){return rr},UniformsUtils:function(){return Fl},UnsignedByteType:function(){return Qe},UnsignedInt248Type:function(){return rt},UnsignedIntType:function(){return tt},UnsignedShort4444Type:function(){return at},UnsignedShort5551Type:function(){return lt},UnsignedShortType:function(){return $e},VSMShadowMap:function(){return L},Vector2:function(){return ai},Vector3:function(){return Yi},Vector4:function(){return wi},VectorKeyframeTrack:function(){return Tc},VideoTexture:function(){return Ls},WebGL1Renderer:function(){return Yg},WebGL3DRenderTarget:function(){return Vi},WebGLArrayRenderTarget:function(){return Si},WebGLCubeRenderTarget:function(){return Dl},WebGLMultipleRenderTargets:function(){return Xi},WebGLMultisampleRenderTarget:function(){return Cd},WebGLRenderTarget:function(){return qi},WebGLRenderer:function(){return kg},WebGLUtils:function(){return Bg},WireframeGeometry:function(){return Cc},WrapAroundEnding:function(){return $t},ZeroCurvatureEnding:function(){return Ot},ZeroFactor:function(){return ie},ZeroSlopeEnding:function(){return jt},ZeroStencilOp:function(){return hn},_SRGBAFormat:function(){return Ln},sRGBEncoding:function(){return on}});var t,i=n(2791),a=n(1250);function l(e){if(Array.isArray(e))return e}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return l(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,l=[],r=!0,o=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(l.push(i.value),!t||l.length!==t);r=!0);}catch(g){o=!0,a=g}finally{try{r||null==n.return||n.return()}finally{if(o)throw a}}return l}}(e,t)||o(e,t)||g()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(cy){return!1}}function C(e,t,n){return C=I()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&c(a,n.prototype),a},C.apply(null,arguments)}function d(e){var t="function"===typeof Map?new Map:void 0;return d=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return C(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},d(e)}function h(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function A(e){return function(e){if(Array.isArray(e))return r(e)}(e)||h(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t,n,i,a,l,r){try{var o=e[l](r),g=o.value}catch(s){return void n(s)}o.done?t(g):Promise.resolve(g).then(i,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var l=e.apply(t,n);function r(e){m(l,i,a,r,o,"next",e)}function o(e){m(l,i,a,r,o,"throw",e)}r(void 0)}))}}function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,g=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){g=!0,l=e},f:function(){try{r||null==n.return||n.return()}finally{if(g)throw l}}}}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function v(){return v="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=b(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},v.apply(this,arguments)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function Z(e,t){if(t&&("object"===B(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function x(e){var t=I();return function(){var n,i=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Z(this,n)}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(){q=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",r=i.toStringTag||"@@toStringTag";function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(w){o=function(e,t,n){return e[t]=n}}function g(e,t,n,i){var a=t&&t.prototype instanceof c?t:c,l=Object.create(a.prototype),r=new G(i||[]);return l._invoke=function(e,t,n){var i="suspendedStart";return function(a,l){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===a)throw l;return x()}for(n.method=a,n.arg=l;;){var r=n.delegate;if(r){var o=b(r,n);if(o){if(o===u)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var g=s(e,t,n);if("normal"===g.type){if(i=n.done?"completed":"suspendedYield",g.arg===u)continue;return{value:g.arg,done:n.done}}"throw"===g.type&&(i="completed",n.method="throw",n.arg=g.arg)}}}(e,n,r),l}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(w){return{type:"throw",arg:w}}}e.wrap=g;var u={};function c(){}function I(){}function C(){}var d={};o(d,a,(function(){return this}));var h=Object.getPrototypeOf,A=h&&h(h(Z([])));A&&A!==t&&n.call(A,a)&&(d=A);var m=C.prototype=c.prototype=Object.create(d);function p(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function f(e,t){function i(a,l,r,o){var g=s(e[a],e,l);if("throw"!==g.type){var u=g.arg,c=u.value;return c&&"object"==B(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){i("next",e,r,o)}),(function(e){i("throw",e,r,o)})):t.resolve(c).then((function(e){u.value=e,r(u)}),(function(e){return i("throw",e,r,o)}))}o(g.arg)}var a;this._invoke=function(e,n){function l(){return new t((function(t,a){i(e,n,t,a)}))}return a=a?a.then(l,l):l()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=s(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function v(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function y(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function G(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(v,this),this.reset(!0)}function Z(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,l=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:x}}function x(){return{value:void 0,done:!0}}return I.prototype=C,o(m,"constructor",C),o(C,"constructor",I),I.displayName=o(C,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===I||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,o(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},p(f.prototype),o(f.prototype,l,(function(){return this})),e.AsyncIterator=f,e.async=function(t,n,i,a,l){void 0===l&&(l=Promise);var r=new f(g(t,n,i,a),l);return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},p(m),o(m,r,"Generator"),o(m,a,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=Z,G.prototype={constructor:G,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(y),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return r.type="throw",r.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],r=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var o=n.call(l,"catchLoc"),g=n.call(l,"finallyLoc");if(o&&g){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(o){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!g)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var l=a;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var r=l?l.completion:{};return r.type=e,r.arg=t,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),y(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;y(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:Z(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function R(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var V="144",X={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},k={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Y=0,z=1,K=2,N=3,H=0,M=1,F=2,L=3,_=0,T=1,E=2,J=0,U=1,D=2,P=3,Q=4,O=5,j=100,$=101,ee=102,te=103,ne=104,ie=200,ae=201,le=202,re=203,oe=204,ge=205,se=206,ue=207,ce=208,Ie=209,Ce=210,de=0,he=1,Ae=2,me=3,pe=4,fe=5,be=6,ve=7,ye=0,Ge=1,Be=2,Ze=0,xe=1,we=2,qe=3,We=4,Se=5,Re=300,Ve=301,Xe=302,ke=303,Ye=304,ze=306,Ke=1e3,Ne=1001,He=1002,Me=1003,Fe=1004,Le=1004,_e=1005,Te=1005,Ee=1006,Je=1007,Ue=1007,De=1008,Pe=1008,Qe=1009,Oe=1010,je=1011,$e=1012,et=1013,tt=1014,nt=1015,it=1016,at=1017,lt=1018,rt=1020,ot=1021,gt=1022,st=1023,ut=1024,ct=1025,It=1026,Ct=1027,dt=1028,ht=1029,At=1030,mt=1031,pt=1033,ft=33776,bt=33777,vt=33778,yt=33779,Gt=35840,Bt=35841,Zt=35842,xt=35843,wt=36196,qt=37492,Wt=37496,St=37808,Rt=37809,Vt=37810,Xt=37811,kt=37812,Yt=37813,zt=37814,Kt=37815,Nt=37816,Ht=37817,Mt=37818,Ft=37819,Lt=37820,_t=37821,Tt=36492,Et=2200,Jt=2201,Ut=2202,Dt=2300,Pt=2301,Qt=2302,Ot=2400,jt=2401,$t=2402,en=2500,tn=2501,nn=0,an=1,ln=2,rn=3e3,on=3001,gn=3200,sn=3201,un=0,cn=1,In="",Cn="srgb",dn="srgb-linear",hn=0,An=7680,mn=7681,pn=7682,fn=7683,bn=34055,vn=34056,yn=5386,Gn=512,Bn=513,Zn=514,xn=515,wn=516,qn=517,Wn=518,Sn=519,Rn=35044,Vn=35048,Xn=35040,kn=35045,Yn=35049,zn=35041,Kn=35046,Nn=35050,Hn=35042,Mn="100",Fn="300 es",Ln=1035,_n=function(){function e(){W(this,e)}return R(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,a=n.length;i<a;i++)n[i].call(this,e);e.target=null}}}}]),e}(),Tn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],En=1234567,Jn=Math.PI/180,Un=180/Math.PI;function Dn(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Tn[255&e]+Tn[e>>8&255]+Tn[e>>16&255]+Tn[e>>24&255]+"-"+Tn[255&t]+Tn[t>>8&255]+"-"+Tn[t>>16&15|64]+Tn[t>>24&255]+"-"+Tn[63&n|128]+Tn[n>>8&255]+"-"+Tn[n>>16&255]+Tn[n>>24&255]+Tn[255&i]+Tn[i>>8&255]+Tn[i>>16&255]+Tn[i>>24&255]).toLowerCase()}function Pn(e,t,n){return Math.max(t,Math.min(n,e))}function Qn(e,t){return(e%t+t)%t}function On(e,t,n){return(1-n)*e+n*t}function jn(e){return 0===(e&e-1)&&0!==e}function $n(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function ei(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function ti(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function ni(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var ii=Object.freeze({__proto__:null,DEG2RAD:Jn,RAD2DEG:Un,generateUUID:Dn,clamp:Pn,euclideanModulo:Qn,mapLinear:function(e,t,n,i,a){return i+(e-t)*(a-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:On,damp:function(e,t,n,i){return On(e,t,1-Math.exp(-n*i))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Qn(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(En=e);var t=En+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Jn},radToDeg:function(e){return e*Un},isPowerOfTwo:jn,ceilPowerOfTwo:$n,floorPowerOfTwo:ei,setQuaternionFromProperEuler:function(e,t,n,i,a){var l=Math.cos,r=Math.sin,o=l(n/2),g=r(n/2),s=l((t+i)/2),u=r((t+i)/2),c=l((t-i)/2),I=r((t-i)/2),C=l((i-t)/2),d=r((i-t)/2);switch(a){case"XYX":e.set(o*u,g*c,g*I,o*s);break;case"YZY":e.set(g*I,o*u,g*c,o*s);break;case"ZXZ":e.set(g*c,g*I,o*u,o*s);break;case"XZX":e.set(o*u,g*d,g*C,o*s);break;case"YXY":e.set(g*C,o*u,g*d,o*s);break;case"ZYZ":e.set(g*d,g*C,o*u,o*s);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}},normalize:ni,denormalize:ti}),ai=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;W(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return R(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),a=this.x-e.x,l=this.y-e.y;return this.x=a*n-l*i+e.x,this.y=a*i+l*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),li=function(){function e(){W(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return R(e,[{key:"set",value:function(e,t,n,i,a,l,r,o,g){var s=this.elements;return s[0]=e,s[1]=i,s[2]=r,s[3]=t,s[4]=a,s[5]=o,s[6]=n,s[7]=l,s[8]=g,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,a=this.elements,l=n[0],r=n[3],o=n[6],g=n[1],s=n[4],u=n[7],c=n[2],I=n[5],C=n[8],d=i[0],h=i[3],A=i[6],m=i[1],p=i[4],f=i[7],b=i[2],v=i[5],y=i[8];return a[0]=l*d+r*m+o*b,a[3]=l*h+r*p+o*v,a[6]=l*A+r*f+o*y,a[1]=g*d+s*m+u*b,a[4]=g*h+s*p+u*v,a[7]=g*A+s*f+u*y,a[2]=c*d+I*m+C*b,a[5]=c*h+I*p+C*v,a[8]=c*A+I*f+C*y,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],l=e[4],r=e[5],o=e[6],g=e[7],s=e[8];return t*l*s-t*r*g-n*a*s+n*r*o+i*a*g-i*l*o}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],l=e[4],r=e[5],o=e[6],g=e[7],s=e[8],u=s*l-r*g,c=r*o-s*a,I=g*a-l*o,C=t*u+n*c+i*I;if(0===C)return this.set(0,0,0,0,0,0,0,0,0);var d=1/C;return e[0]=u*d,e[1]=(i*g-s*n)*d,e[2]=(r*n-i*l)*d,e[3]=c*d,e[4]=(s*t-i*o)*d,e[5]=(i*a-r*t)*d,e[6]=I*d,e[7]=(n*o-g*t)*d,e[8]=(l*t-n*a)*d,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,i,a,l,r){var o=Math.cos(a),g=Math.sin(a);return this.set(n*o,n*g,-n*(o*l+g*r)+l+e,-i*g,i*o,-i*(-g*l+o*r)+r+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,a=i[0],l=i[3],r=i[6],o=i[1],g=i[4],s=i[7];return i[0]=t*a+n*o,i[3]=t*l+n*g,i[6]=t*r+n*s,i[1]=-n*a+t*o,i[4]=-n*l+t*g,i[7]=-n*r+t*s,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function ri(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var oi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function gi(e,t){return new oi[e](t)}function si(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ui(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ci(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Ii=(w(t={},Cn,w({},dn,ui)),w(t,dn,w({},Cn,ci)),t),Ci={legacyMode:!0,get workingColorSpace(){return dn},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(Ii[t]&&void 0!==Ii[t][n]){var i=Ii[t][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},hi={r:0,g:0,b:0},Ai={h:0,s:0,l:0},mi={h:0,s:0,l:0};function pi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function fi(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var bi,vi=function(e){function t(e,n,i){return W(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===i?this.set(e):this.setRGB(e,n,i)}return R(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cn;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ci.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dn;return this.r=e,this.g=t,this.b=n,Ci.toWorkingColorSpace(this,i),this}},{key:"setHSL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dn;if(e=Qn(e,1),t=Pn(t,0,1),n=Pn(n,0,1),0===t)this.r=this.g=this.b=n;else{var a=n<=.5?n*(1+t):n+t-n*t,l=2*n-a;this.r=pi(l,a,e+1/3),this.g=pi(l,a,e),this.b=pi(l,a,e-1/3)}return Ci.toWorkingColorSpace(this,i),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cn;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var a,l=t[1],r=t[2];switch(l){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,Ci.toWorkingColorSpace(this,n),i(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,Ci.toWorkingColorSpace(this,n),i(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){var o=parseFloat(a[1])/360,g=parseFloat(a[2])/100,s=parseFloat(a[3])/100;return i(a[4]),this.setHSL(o,g,s,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var u=t[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,Ci.toWorkingColorSpace(this,n),this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,Ci.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cn,n=di[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=ui(e.r),this.g=ui(e.g),this.b=ui(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=ci(e.r),this.g=ci(e.g),this.b=ci(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn;return Ci.fromWorkingColorSpace(fi(this,hi),e),Pn(255*hi.r,0,255)<<16^Pn(255*hi.g,0,255)<<8^Pn(255*hi.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn;Ci.fromWorkingColorSpace(fi(this,hi),t);var n,i,a=hi.r,l=hi.g,r=hi.b,o=Math.max(a,l,r),g=Math.min(a,l,r),s=(g+o)/2;if(g===o)n=0,i=0;else{var u=o-g;switch(i=s<=.5?u/(o+g):u/(2-o-g),o){case a:n=(l-r)/u+(l<r?6:0);break;case l:n=(r-a)/u+2;break;case r:n=(a-l)/u+4}n/=6}return e.h=n,e.s=i,e.l=s,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn;return Ci.fromWorkingColorSpace(fi(this,hi),t),e.r=hi.r,e.g=hi.g,e.b=hi.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn;return Ci.fromWorkingColorSpace(fi(this,hi),e),e!==Cn?"color(".concat(e," ").concat(hi.r," ").concat(hi.g," ").concat(hi.b,")"):"rgb(".concat(255*hi.r|0,",").concat(255*hi.g|0,",").concat(255*hi.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(Ai),Ai.h+=e,Ai.s+=t,Ai.l+=n,this.setHSL(Ai.h,Ai.s,Ai.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(Ai),e.getHSL(mi);var n=On(Ai.h,mi.h,t),i=On(Ai.s,mi.s,t),a=On(Ai.l,mi.l,t);return this.setHSL(n,i,a),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}();vi.NAMES=di;var yi=function(){function e(){W(this,e)}return R(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===bi&&(bi=si("canvas")),bi.width=e.width,bi.height=e.height;var n=bi.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=bi}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=si("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var i=n.getImageData(0,0,e.width,e.height),a=i.data,l=0;l<a.length;l++)a[l]=255*ui(a[l]/255);return n.putImageData(i,0,0),t}if(e.data){for(var r=e.data.slice(0),o=0;o<r.length;o++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[o]=Math.floor(255*ui(r[o]/255)):r[o]=ui(r[o]);return{data:r,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),Gi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;W(this,e),this.isSource=!0,this.uuid=Dn(),this.data=t,this.version=0}return R(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},i=this.data;if(null!==i){var a;if(Array.isArray(i)){a=[];for(var l=0,r=i.length;l<r;l++)i[l].isDataTexture?a.push(Bi(i[l].image)):a.push(Bi(i[l]))}else a=Bi(i);n.url=a}return t||(e.images[this.uuid]=n),n}}]),e}();function Bi(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?yi.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Zi=0,xi=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ne,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ne,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ee,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:De,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:st,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Qe,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,I=arguments.length>9&&void 0!==arguments[9]?arguments[9]:rn;return W(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty(y(e),"id",{value:Zi++}),e.uuid=Dn(),e.name="",e.source=new Gi(i),e.mipmaps=[],e.mapping=a,e.wrapS=l,e.wrapT=r,e.magFilter=o,e.minFilter=g,e.anisotropy=c,e.format=s,e.internalFormat=null,e.type=u,e.offset=new ai(0,0),e.repeat=new ai(1,1),e.center=new ai(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new li,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=I,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return R(n,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==Re)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ke:e.x=e.x-Math.floor(e.x);break;case Ne:e.x=e.x<0?0:1;break;case He:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ke:e.y=e.y-Math.floor(e.y);break;case Ne:e.y=e.y<0?0:1;break;case He:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(_n);xi.DEFAULT_IMAGE=null,xi.DEFAULT_MAPPING=Re;var wi=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;W(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=a}return R(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,a=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*i+l[12]*a,this.y=l[1]*t+l[5]*n+l[9]*i+l[13]*a,this.z=l[2]*t+l[6]*n+l[10]*i+l[14]*a,this.w=l[3]*t+l[7]*n+l[11]*i+l[15]*a,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,i,a,l=.01,r=.1,o=e.elements,g=o[0],s=o[4],u=o[8],c=o[1],I=o[5],C=o[9],d=o[2],h=o[6],A=o[10];if(Math.abs(s-c)<l&&Math.abs(u-d)<l&&Math.abs(C-h)<l){if(Math.abs(s+c)<r&&Math.abs(u+d)<r&&Math.abs(C+h)<r&&Math.abs(g+I+A-3)<r)return this.set(1,0,0,0),this;t=Math.PI;var m=(g+1)/2,p=(I+1)/2,f=(A+1)/2,b=(s+c)/4,v=(u+d)/4,y=(C+h)/4;return m>p&&m>f?m<l?(n=0,i=.707106781,a=.707106781):(i=b/(n=Math.sqrt(m)),a=v/n):p>f?p<l?(n=.707106781,i=0,a=.707106781):(n=b/(i=Math.sqrt(p)),a=y/i):f<l?(n=.707106781,i=.707106781,a=0):(n=v/(a=Math.sqrt(f)),i=y/a),this.set(n,i,a,t),this}var G=Math.sqrt((h-C)*(h-C)+(u-d)*(u-d)+(c-s)*(c-s));return Math.abs(G)<.001&&(G=1),this.x=(h-C)/G,this.y=(u-d)/G,this.z=(c-s)/G,this.w=Math.acos((g+I+A-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(),qi=function(e){G(n,e);var t=x(n);function n(e,i){var a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};W(this,n),(a=t.call(this)).isWebGLRenderTarget=!0,a.width=e,a.height=i,a.depth=1,a.scissor=new wi(0,0,e,i),a.scissorTest=!1,a.viewport=new wi(0,0,e,i);var r={width:e,height:i,depth:1};return a.texture=new xi(r,l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.encoding),a.texture.isRenderTargetTexture=!0,a.texture.flipY=!1,a.texture.generateMipmaps=void 0!==l.generateMipmaps&&l.generateMipmaps,a.texture.internalFormat=void 0!==l.internalFormat?l.internalFormat:null,a.texture.minFilter=void 0!==l.minFilter?l.minFilter:Ee,a.depthBuffer=void 0===l.depthBuffer||l.depthBuffer,a.stencilBuffer=void 0!==l.stencilBuffer&&l.stencilBuffer,a.depthTexture=void 0!==l.depthTexture?l.depthTexture:null,a.samples=void 0!==l.samples?l.samples:0,a}return R(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new Gi(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(_n),Wi=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return W(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:i,width:a,height:l,depth:r},e.magFilter=Me,e.minFilter=Me,e.wrapR=Ne,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return R(n)}(xi),Si=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;return W(this,n),(l=t.call(this,e,i)).isWebGLArrayRenderTarget=!0,l.depth=a,l.texture=new Wi(null,e,i,a),l.texture.isRenderTargetTexture=!0,l}return R(n)}(qi),Ri=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return W(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:i,width:a,height:l,depth:r},e.magFilter=Me,e.minFilter=Me,e.wrapR=Ne,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return R(n)}(xi),Vi=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;return W(this,n),(l=t.call(this,e,i)).isWebGL3DRenderTarget=!0,l.depth=a,l.texture=new Ri(null,e,i,a),l.texture.isRenderTargetTexture=!0,l}return R(n)}(qi),Xi=function(e){G(n,e);var t=x(n);function n(e,i,a){var l,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};W(this,n),(l=t.call(this,e,i,r)).isWebGLMultipleRenderTargets=!0;var o=l.texture;l.texture=[];for(var g=0;g<a;g++)l.texture[g]=o.clone(),l.texture[g].isRenderTargetTexture=!0;return l}return R(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(qi),ki=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;W(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=a}return R(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,i=e._y,a=e._z,l=e._order,r=Math.cos,o=Math.sin,g=r(n/2),s=r(i/2),u=r(a/2),c=o(n/2),I=o(i/2),C=o(a/2);switch(l){case"XYZ":this._x=c*s*u+g*I*C,this._y=g*I*u-c*s*C,this._z=g*s*C+c*I*u,this._w=g*s*u-c*I*C;break;case"YXZ":this._x=c*s*u+g*I*C,this._y=g*I*u-c*s*C,this._z=g*s*C-c*I*u,this._w=g*s*u+c*I*C;break;case"ZXY":this._x=c*s*u-g*I*C,this._y=g*I*u+c*s*C,this._z=g*s*C+c*I*u,this._w=g*s*u-c*I*C;break;case"ZYX":this._x=c*s*u-g*I*C,this._y=g*I*u+c*s*C,this._z=g*s*C-c*I*u,this._w=g*s*u+c*I*C;break;case"YZX":this._x=c*s*u+g*I*C,this._y=g*I*u+c*s*C,this._z=g*s*C-c*I*u,this._w=g*s*u-c*I*C;break;case"XZY":this._x=c*s*u-g*I*C,this._y=g*I*u-c*s*C,this._z=g*s*C+c*I*u,this._w=g*s*u+c*I*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],i=t[4],a=t[8],l=t[1],r=t[5],o=t[9],g=t[2],s=t[6],u=t[10],c=n+r+u;if(c>0){var I=.5/Math.sqrt(c+1);this._w=.25/I,this._x=(s-o)*I,this._y=(a-g)*I,this._z=(l-i)*I}else if(n>r&&n>u){var C=2*Math.sqrt(1+n-r-u);this._w=(s-o)/C,this._x=.25*C,this._y=(i+l)/C,this._z=(a+g)/C}else if(r>u){var d=2*Math.sqrt(1+r-n-u);this._w=(a-g)/d,this._x=(i+l)/d,this._y=.25*d,this._z=(o+s)/d}else{var h=2*Math.sqrt(1+u-n-r);this._w=(l-i)/h,this._x=(a+g)/h,this._y=(o+s)/h,this._z=.25*h}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Pn(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,i=e._y,a=e._z,l=e._w,r=t._x,o=t._y,g=t._z,s=t._w;return this._x=n*s+l*r+i*g-a*o,this._y=i*s+l*o+a*r-n*g,this._z=a*s+l*g+n*o-i*r,this._w=l*s-n*r-i*o-a*g,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,a=this._z,l=this._w,r=l*e._w+n*e._x+i*e._y+a*e._z;if(r<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,r=-r):this.copy(e),r>=1)return this._w=l,this._x=n,this._y=i,this._z=a,this;var o=1-r*r;if(o<=Number.EPSILON){var g=1-t;return this._w=g*l+t*this._w,this._x=g*n+t*this._x,this._y=g*i+t*this._y,this._z=g*a+t*this._z,this.normalize(),this._onChangeCallback(),this}var s=Math.sqrt(o),u=Math.atan2(s,r),c=Math.sin((1-t)*u)/s,I=Math.sin(t*u)/s;return this._w=l*c+this._w*I,this._x=n*c+this._x*I,this._y=i*c+this._y*I,this._z=a*c+this._z*I,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(a),n*Math.cos(a),t*Math.sin(i))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,i,a,l,r){var o=n[i+0],g=n[i+1],s=n[i+2],u=n[i+3],c=a[l+0],I=a[l+1],C=a[l+2],d=a[l+3];if(0===r)return e[t+0]=o,e[t+1]=g,e[t+2]=s,void(e[t+3]=u);if(1===r)return e[t+0]=c,e[t+1]=I,e[t+2]=C,void(e[t+3]=d);if(u!==d||o!==c||g!==I||s!==C){var h=1-r,A=o*c+g*I+s*C+u*d,m=A>=0?1:-1,p=1-A*A;if(p>Number.EPSILON){var f=Math.sqrt(p),b=Math.atan2(f,A*m);h=Math.sin(h*b)/f,r=Math.sin(r*b)/f}var v=r*m;if(o=o*h+c*v,g=g*h+I*v,s=s*h+C*v,u=u*h+d*v,h===1-r){var y=1/Math.sqrt(o*o+g*g+s*s+u*u);o*=y,g*=y,s*=y,u*=y}}e[t]=o,e[t+1]=g,e[t+2]=s,e[t+3]=u}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,i,a,l){var r=n[i],o=n[i+1],g=n[i+2],s=n[i+3],u=a[l],c=a[l+1],I=a[l+2],C=a[l+3];return e[t]=r*C+s*u+o*I-g*c,e[t+1]=o*C+s*c+g*u-r*I,e[t+2]=g*C+s*I+r*c-o*u,e[t+3]=s*C-r*u-o*c-g*I,e}}]),t}(),Yi=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;W(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}return R(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Ki.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Ki.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*i,this.y=a[1]*t+a[4]*n+a[7]*i,this.z=a[2]*t+a[5]*n+a[8]*i,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,a=e.elements,l=1/(a[3]*t+a[7]*n+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*i+a[12])*l,this.y=(a[1]*t+a[5]*n+a[9]*i+a[13])*l,this.z=(a[2]*t+a[6]*n+a[10]*i+a[14])*l,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,i=this.z,a=e.x,l=e.y,r=e.z,o=e.w,g=o*t+l*i-r*n,s=o*n+r*t-a*i,u=o*i+a*n-l*t,c=-a*t-l*n-r*i;return this.x=g*o+c*-a+s*-r-u*-l,this.y=s*o+c*-l+u*-a-g*-r,this.z=u*o+c*-r+g*-l-s*-a,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i,this.y=a[1]*t+a[5]*n+a[9]*i,this.z=a[2]*t+a[6]*n+a[10]*i,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,i=e.y,a=e.z,l=t.x,r=t.y,o=t.z;return this.x=i*o-a*r,this.y=a*l-n*o,this.z=n*r-i*l,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return zi.copy(this).projectOnVector(e),this.sub(zi)}},{key:"reflect",value:function(e){return this.sub(zi.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Pn(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),zi=new Yi,Ki=new ki,Ni=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yi(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi(-1/0,-1/0,-1/0);W(this,e),this.isBox3=!0,this.min=t,this.max=n}return R(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,i=1/0,a=-1/0,l=-1/0,r=-1/0,o=0,g=e.length;o<g;o+=3){var s=e[o],u=e[o+1],c=e[o+2];s<t&&(t=s),u<n&&(n=u),c<i&&(i=c),s>a&&(a=s),u>l&&(l=u),c>r&&(r=c)}return this.min.set(t,n,i),this.max.set(a,l,r),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,i=1/0,a=-1/0,l=-1/0,r=-1/0,o=0,g=e.count;o<g;o++){var s=e.getX(o),u=e.getY(o),c=e.getZ(o);s<t&&(t=s),u<n&&(n=u),c<i&&(i=c),s>a&&(a=s),u>l&&(l=u),c>r&&(r=c)}return this.min.set(t,n,i),this.max.set(a,l,r),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Mi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var i=n.attributes.position,a=0,l=i.count;a<l;a++)Mi.fromBufferAttribute(i,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Mi);else null===n.boundingBox&&n.computeBoundingBox(),Fi.copy(n.boundingBox),Fi.applyMatrix4(e.matrixWorld),this.union(Fi);for(var r=e.children,o=0,g=r.length;o<g;o++)this.expandByObject(r[o],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Mi),Mi.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Di),Pi.subVectors(this.max,Di),Li.subVectors(e.a,Di),_i.subVectors(e.b,Di),Ti.subVectors(e.c,Di),Ei.subVectors(_i,Li),Ji.subVectors(Ti,_i),Ui.subVectors(Li,Ti);var t=[0,-Ei.z,Ei.y,0,-Ji.z,Ji.y,0,-Ui.z,Ui.y,Ei.z,0,-Ei.x,Ji.z,0,-Ji.x,Ui.z,0,-Ui.x,-Ei.y,Ei.x,0,-Ji.y,Ji.x,0,-Ui.y,Ui.x,0];return!!ji(t,Li,_i,Ti,Pi)&&(!!ji(t=[1,0,0,0,1,0,0,0,1],Li,_i,Ti,Pi)&&(Qi.crossVectors(Ei,Ji),ji(t=[Qi.x,Qi.y,Qi.z],Li,_i,Ti,Pi)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Mi.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Mi).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Hi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Hi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Hi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Hi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Hi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Hi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Hi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Hi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Hi)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Hi=[new Yi,new Yi,new Yi,new Yi,new Yi,new Yi,new Yi,new Yi],Mi=new Yi,Fi=new Ni,Li=new Yi,_i=new Yi,Ti=new Yi,Ei=new Yi,Ji=new Yi,Ui=new Yi,Di=new Yi,Pi=new Yi,Qi=new Yi,Oi=new Yi;function ji(e,t,n,i,a){for(var l=0,r=e.length-3;l<=r;l+=3){Oi.fromArray(e,l);var o=a.x*Math.abs(Oi.x)+a.y*Math.abs(Oi.y)+a.z*Math.abs(Oi.z),g=t.dot(Oi),s=n.dot(Oi),u=i.dot(Oi);if(Math.max(-Math.max(g,s,u),Math.min(g,s,u))>o)return!1}return!0}var $i=new Ni,ea=new Yi,ta=new Yi,na=new Yi,ia=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;W(this,e),this.center=t,this.radius=n}return R(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):$i.setFromPoints(e).getCenter(n);for(var i=0,a=0,l=e.length;a<l;a++)i=Math.max(i,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){na.subVectors(e,this.center);var t=na.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),i=.5*(n-this.radius);this.center.add(na.multiplyScalar(i/n)),this.radius+=i}return this}},{key:"union",value:function(e){return!0===this.center.equals(e.center)?ta.set(0,0,1).multiplyScalar(e.radius):ta.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(ea.copy(e.center).add(ta)),this.expandByPoint(ea.copy(e.center).sub(ta)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),aa=new Yi,la=new Yi,ra=new Yi,oa=new Yi,ga=new Yi,sa=new Yi,ua=new Yi,ca=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi(0,0,-1);W(this,e),this.origin=t,this.direction=n}return R(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,aa)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=aa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(aa.copy(this.direction).multiplyScalar(t).add(this.origin),aa.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,i){la.copy(e).add(t).multiplyScalar(.5),ra.copy(t).sub(e).normalize(),oa.copy(this.origin).sub(la);var a,l,r,o,g=.5*e.distanceTo(t),s=-this.direction.dot(ra),u=oa.dot(this.direction),c=-oa.dot(ra),I=oa.lengthSq(),C=Math.abs(1-s*s);if(C>0)if(l=s*u-c,o=g*C,(a=s*c-u)>=0)if(l>=-o)if(l<=o){var d=1/C;r=(a*=d)*(a+s*(l*=d)+2*u)+l*(s*a+l+2*c)+I}else l=g,r=-(a=Math.max(0,-(s*l+u)))*a+l*(l+2*c)+I;else l=-g,r=-(a=Math.max(0,-(s*l+u)))*a+l*(l+2*c)+I;else l<=-o?r=-(a=Math.max(0,-(-s*g+u)))*a+(l=a>0?-g:Math.min(Math.max(-g,-c),g))*(l+2*c)+I:l<=o?(a=0,r=(l=Math.min(Math.max(-g,-c),g))*(l+2*c)+I):r=-(a=Math.max(0,-(s*g+u)))*a+(l=a>0?g:Math.min(Math.max(-g,-c),g))*(l+2*c)+I;else l=s>0?-g:g,r=-(a=Math.max(0,-(s*l+u)))*a+l*(l+2*c)+I;return n&&n.copy(this.direction).multiplyScalar(a).add(this.origin),i&&i.copy(ra).multiplyScalar(l).add(la),r}},{key:"intersectSphere",value:function(e,t){aa.subVectors(e.center,this.origin);var n=aa.dot(this.direction),i=aa.dot(aa)-n*n,a=e.radius*e.radius;if(i>a)return null;var l=Math.sqrt(a-i),r=n-l,o=n+l;return r<0&&o<0?null:r<0?this.at(o,t):this.at(r,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,i,a,l,r,o,g=1/this.direction.x,s=1/this.direction.y,u=1/this.direction.z,c=this.origin;return g>=0?(n=(e.min.x-c.x)*g,i=(e.max.x-c.x)*g):(n=(e.max.x-c.x)*g,i=(e.min.x-c.x)*g),s>=0?(a=(e.min.y-c.y)*s,l=(e.max.y-c.y)*s):(a=(e.max.y-c.y)*s,l=(e.min.y-c.y)*s),n>l||a>i?null:((a>n||n!==n)&&(n=a),(l<i||i!==i)&&(i=l),u>=0?(r=(e.min.z-c.z)*u,o=(e.max.z-c.z)*u):(r=(e.max.z-c.z)*u,o=(e.min.z-c.z)*u),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,aa)}},{key:"intersectTriangle",value:function(e,t,n,i,a){ga.subVectors(t,e),sa.subVectors(n,e),ua.crossVectors(ga,sa);var l,r=this.direction.dot(ua);if(r>0){if(i)return null;l=1}else{if(!(r<0))return null;l=-1,r=-r}oa.subVectors(this.origin,e);var o=l*this.direction.dot(sa.crossVectors(oa,sa));if(o<0)return null;var g=l*this.direction.dot(ga.cross(oa));if(g<0)return null;if(o+g>r)return null;var s=-l*oa.dot(ua);return s<0?null:this.at(s/r,a)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Ia=function(){function e(){W(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return R(e,[{key:"set",value:function(e,t,n,i,a,l,r,o,g,s,u,c,I,C,d,h){var A=this.elements;return A[0]=e,A[4]=t,A[8]=n,A[12]=i,A[1]=a,A[5]=l,A[9]=r,A[13]=o,A[2]=g,A[6]=s,A[10]=u,A[14]=c,A[3]=I,A[7]=C,A[11]=d,A[15]=h,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,i=1/Ca.setFromMatrixColumn(e,0).length(),a=1/Ca.setFromMatrixColumn(e,1).length(),l=1/Ca.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,i=e.y,a=e.z,l=Math.cos(n),r=Math.sin(n),o=Math.cos(i),g=Math.sin(i),s=Math.cos(a),u=Math.sin(a);if("XYZ"===e.order){var c=l*s,I=l*u,C=r*s,d=r*u;t[0]=o*s,t[4]=-o*u,t[8]=g,t[1]=I+C*g,t[5]=c-d*g,t[9]=-r*o,t[2]=d-c*g,t[6]=C+I*g,t[10]=l*o}else if("YXZ"===e.order){var h=o*s,A=o*u,m=g*s,p=g*u;t[0]=h+p*r,t[4]=m*r-A,t[8]=l*g,t[1]=l*u,t[5]=l*s,t[9]=-r,t[2]=A*r-m,t[6]=p+h*r,t[10]=l*o}else if("ZXY"===e.order){var f=o*s,b=o*u,v=g*s,y=g*u;t[0]=f-y*r,t[4]=-l*u,t[8]=v+b*r,t[1]=b+v*r,t[5]=l*s,t[9]=y-f*r,t[2]=-l*g,t[6]=r,t[10]=l*o}else if("ZYX"===e.order){var G=l*s,B=l*u,Z=r*s,x=r*u;t[0]=o*s,t[4]=Z*g-B,t[8]=G*g+x,t[1]=o*u,t[5]=x*g+G,t[9]=B*g-Z,t[2]=-g,t[6]=r*o,t[10]=l*o}else if("YZX"===e.order){var w=l*o,q=l*g,W=r*o,S=r*g;t[0]=o*s,t[4]=S-w*u,t[8]=W*u+q,t[1]=u,t[5]=l*s,t[9]=-r*s,t[2]=-g*s,t[6]=q*u+W,t[10]=w-S*u}else if("XZY"===e.order){var R=l*o,V=l*g,X=r*o,k=r*g;t[0]=o*s,t[4]=-u,t[8]=g*s,t[1]=R*u+k,t[5]=l*s,t[9]=V*u-X,t[2]=X*u-V,t[6]=r*s,t[10]=k*u+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(ha,e,Aa)}},{key:"lookAt",value:function(e,t,n){var i=this.elements;return fa.subVectors(e,t),0===fa.lengthSq()&&(fa.z=1),fa.normalize(),ma.crossVectors(n,fa),0===ma.lengthSq()&&(1===Math.abs(n.z)?fa.x+=1e-4:fa.z+=1e-4,fa.normalize(),ma.crossVectors(n,fa)),ma.normalize(),pa.crossVectors(fa,ma),i[0]=ma.x,i[4]=pa.x,i[8]=fa.x,i[1]=ma.y,i[5]=pa.y,i[9]=fa.y,i[2]=ma.z,i[6]=pa.z,i[10]=fa.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,a=this.elements,l=n[0],r=n[4],o=n[8],g=n[12],s=n[1],u=n[5],c=n[9],I=n[13],C=n[2],d=n[6],h=n[10],A=n[14],m=n[3],p=n[7],f=n[11],b=n[15],v=i[0],y=i[4],G=i[8],B=i[12],Z=i[1],x=i[5],w=i[9],q=i[13],W=i[2],S=i[6],R=i[10],V=i[14],X=i[3],k=i[7],Y=i[11],z=i[15];return a[0]=l*v+r*Z+o*W+g*X,a[4]=l*y+r*x+o*S+g*k,a[8]=l*G+r*w+o*R+g*Y,a[12]=l*B+r*q+o*V+g*z,a[1]=s*v+u*Z+c*W+I*X,a[5]=s*y+u*x+c*S+I*k,a[9]=s*G+u*w+c*R+I*Y,a[13]=s*B+u*q+c*V+I*z,a[2]=C*v+d*Z+h*W+A*X,a[6]=C*y+d*x+h*S+A*k,a[10]=C*G+d*w+h*R+A*Y,a[14]=C*B+d*q+h*V+A*z,a[3]=m*v+p*Z+f*W+b*X,a[7]=m*y+p*x+f*S+b*k,a[11]=m*G+p*w+f*R+b*Y,a[15]=m*B+p*q+f*V+b*z,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],a=e[12],l=e[1],r=e[5],o=e[9],g=e[13],s=e[2],u=e[6],c=e[10],I=e[14];return e[3]*(+a*o*u-i*g*u-a*r*c+n*g*c+i*r*I-n*o*I)+e[7]*(+t*o*I-t*g*c+a*l*c-i*l*I+i*g*s-a*o*s)+e[11]*(+t*g*u-t*r*I-a*l*u+n*l*I+a*r*s-n*g*s)+e[15]*(-i*r*s-t*o*u+t*r*c+i*l*u-n*l*c+n*o*s)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],a=e[3],l=e[4],r=e[5],o=e[6],g=e[7],s=e[8],u=e[9],c=e[10],I=e[11],C=e[12],d=e[13],h=e[14],A=e[15],m=u*h*g-d*c*g+d*o*I-r*h*I-u*o*A+r*c*A,p=C*c*g-s*h*g-C*o*I+l*h*I+s*o*A-l*c*A,f=s*d*g-C*u*g+C*r*I-l*d*I-s*r*A+l*u*A,b=C*u*o-s*d*o-C*r*c+l*d*c+s*r*h-l*u*h,v=t*m+n*p+i*f+a*b;if(0===v)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var y=1/v;return e[0]=m*y,e[1]=(d*c*a-u*h*a-d*i*I+n*h*I+u*i*A-n*c*A)*y,e[2]=(r*h*a-d*o*a+d*i*g-n*h*g-r*i*A+n*o*A)*y,e[3]=(u*o*a-r*c*a-u*i*g+n*c*g+r*i*I-n*o*I)*y,e[4]=p*y,e[5]=(s*h*a-C*c*a+C*i*I-t*h*I-s*i*A+t*c*A)*y,e[6]=(C*o*a-l*h*a-C*i*g+t*h*g+l*i*A-t*o*A)*y,e[7]=(l*c*a-s*o*a+s*i*g-t*c*g-l*i*I+t*o*I)*y,e[8]=f*y,e[9]=(C*u*a-s*d*a-C*n*I+t*d*I+s*n*A-t*u*A)*y,e[10]=(l*d*a-C*r*a+C*n*g-t*d*g-l*n*A+t*r*A)*y,e[11]=(s*r*a-l*u*a-s*n*g+t*u*g+l*n*I-t*r*I)*y,e[12]=b*y,e[13]=(s*d*i-C*u*i+C*n*c-t*d*c-s*n*h+t*u*h)*y,e[14]=(C*r*i-l*d*i-C*n*o+t*d*o+l*n*h-t*r*h)*y,e[15]=(l*u*i-s*r*i+s*n*o-t*u*o-l*n*c+t*r*c)*y,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,i=e.y,a=e.z;return t[0]*=n,t[4]*=i,t[8]*=a,t[1]*=n,t[5]*=i,t[9]*=a,t[2]*=n,t[6]*=i,t[10]*=a,t[3]*=n,t[7]*=i,t[11]*=a,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),a=1-n,l=e.x,r=e.y,o=e.z,g=a*l,s=a*r;return this.set(g*l+n,g*r-i*o,g*o+i*r,0,g*r+i*o,s*r+n,s*o-i*l,0,g*o-i*r,s*o+i*l,a*o*o+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,i,a,l){return this.set(1,n,a,0,e,1,l,0,t,i,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var i=this.elements,a=t._x,l=t._y,r=t._z,o=t._w,g=a+a,s=l+l,u=r+r,c=a*g,I=a*s,C=a*u,d=l*s,h=l*u,A=r*u,m=o*g,p=o*s,f=o*u,b=n.x,v=n.y,y=n.z;return i[0]=(1-(d+A))*b,i[1]=(I+f)*b,i[2]=(C-p)*b,i[3]=0,i[4]=(I-f)*v,i[5]=(1-(c+A))*v,i[6]=(h+m)*v,i[7]=0,i[8]=(C+p)*y,i[9]=(h-m)*y,i[10]=(1-(c+d))*y,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"decompose",value:function(e,t,n){var i=this.elements,a=Ca.set(i[0],i[1],i[2]).length(),l=Ca.set(i[4],i[5],i[6]).length(),r=Ca.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],da.copy(this);var o=1/a,g=1/l,s=1/r;return da.elements[0]*=o,da.elements[1]*=o,da.elements[2]*=o,da.elements[4]*=g,da.elements[5]*=g,da.elements[6]*=g,da.elements[8]*=s,da.elements[9]*=s,da.elements[10]*=s,t.setFromRotationMatrix(da),n.x=a,n.y=l,n.z=r,this}},{key:"makePerspective",value:function(e,t,n,i,a,l){var r=this.elements,o=2*a/(t-e),g=2*a/(n-i),s=(t+e)/(t-e),u=(n+i)/(n-i),c=-(l+a)/(l-a),I=-2*l*a/(l-a);return r[0]=o,r[4]=0,r[8]=s,r[12]=0,r[1]=0,r[5]=g,r[9]=u,r[13]=0,r[2]=0,r[6]=0,r[10]=c,r[14]=I,r[3]=0,r[7]=0,r[11]=-1,r[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,i,a,l){var r=this.elements,o=1/(t-e),g=1/(n-i),s=1/(l-a),u=(t+e)*o,c=(n+i)*g,I=(l+a)*s;return r[0]=2*o,r[4]=0,r[8]=0,r[12]=-u,r[1]=0,r[5]=2*g,r[9]=0,r[13]=-c,r[2]=0,r[6]=0,r[10]=-2*s,r[14]=-I,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),Ca=new Yi,da=new Ia,ha=new Yi(0,0,0),Aa=new Yi(1,1,1),ma=new Yi,pa=new Yi,fa=new Yi,ba=new Ia,va=new ki,ya=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;W(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=a}return R(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.elements,a=i[0],l=i[4],r=i[8],o=i[1],g=i[5],s=i[9],u=i[2],c=i[6],I=i[10];switch(t){case"XYZ":this._y=Math.asin(Pn(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(-s,I),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(c,g),this._z=0);break;case"YXZ":this._x=Math.asin(-Pn(s,-1,1)),Math.abs(s)<.9999999?(this._y=Math.atan2(r,I),this._z=Math.atan2(o,g)):(this._y=Math.atan2(-u,a),this._z=0);break;case"ZXY":this._x=Math.asin(Pn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-u,I),this._z=Math.atan2(-l,g)):(this._y=0,this._z=Math.atan2(o,a));break;case"ZYX":this._y=Math.asin(-Pn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(c,I),this._z=Math.atan2(o,a)):(this._x=0,this._z=Math.atan2(-l,g));break;case"YZX":this._z=Math.asin(Pn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-s,g),this._y=Math.atan2(-u,a)):(this._x=0,this._y=Math.atan2(r,I));break;case"XZY":this._z=Math.asin(-Pn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(c,g),this._y=Math.atan2(r,a)):(this._x=Math.atan2(-s,I),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return ba.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ba,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return va.setFromEuler(this),this.setFromQuaternion(va,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),t}();ya.DefaultOrder="XYZ",ya.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Ga=function(){function e(){W(this,e),this.mask=1}return R(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),Ba=0,Za=new Yi,xa=new ki,wa=new Ia,qa=new Yi,Wa=new Yi,Sa=new Yi,Ra=new ki,Va=new Yi(1,0,0),Xa=new Yi(0,1,0),ka=new Yi(0,0,1),Ya={type:"added"},za={type:"removed"},Ka=function(e){G(n,e);var t=x(n);function n(){var e;W(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty(y(e),"id",{value:Ba++}),e.uuid=Dn(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var i=new Yi,a=new ya,l=new ki,r=new Yi(1,1,1);return a._onChange((function(){l.setFromEuler(a,!1)})),l._onChange((function(){a.setFromQuaternion(l,void 0,!1)})),Object.defineProperties(y(e),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ia},normalMatrix:{value:new li}}),e.matrix=new Ia,e.matrixWorld=new Ia,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,e.layers=new Ga,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return R(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return xa.setFromAxisAngle(e,t),this.quaternion.multiply(xa),this}},{key:"rotateOnWorldAxis",value:function(e,t){return xa.setFromAxisAngle(e,t),this.quaternion.premultiply(xa),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Va,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Xa,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(ka,e)}},{key:"translateOnAxis",value:function(e,t){return Za.copy(e).applyQuaternion(this.quaternion),this.position.add(Za.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Va,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Xa,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(ka,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(wa.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?qa.copy(e):qa.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),Wa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wa.lookAt(Wa,qa,this.up):wa.lookAt(qa,Wa,this.up),this.quaternion.setFromRotationMatrix(wa),i&&(wa.extractRotation(i.matrixWorld),xa.setFromRotationMatrix(wa),this.quaternion.premultiply(xa.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Ya)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(za)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(za)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),wa.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),wa.multiply(e.parent.matrixWorld)),e.applyMatrix4(wa),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var a=this.children[n].getObjectByProperty(e,t);if(void 0!==a)return a}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wa,e,Sa),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wa,Ra,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++){var a=t[n];!0!==a.matrixWorldAutoUpdate&&!0!==e||a.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,a=0,l=i.length;a<l;a++){var r=i[a];!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function a(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);var l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){var r=l.shapes;if(Array.isArray(r))for(var o=0,g=r.length;o<g;o++){var s=r[o];a(e.shapes,s)}else a(e.shapes,r)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var u=[],c=0,I=this.material.length;c<I;c++)u.push(a(e.materials,this.material[c]));i.material=u}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(var C=0;C<this.children.length;C++)i.children.push(this.children[C].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(var d=0;d<this.animations.length;d++){var h=this.animations[d];i.animations.push(a(e.animations,h))}}if(t){var A=B(e.geometries),m=B(e.materials),p=B(e.textures),f=B(e.images),b=B(e.shapes),v=B(e.skeletons),y=B(e.animations),G=B(e.nodes);A.length>0&&(n.geometries=A),m.length>0&&(n.materials=m),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),b.length>0&&(n.shapes=b),v.length>0&&(n.skeletons=v),y.length>0&&(n.animations=y),G.length>0&&(n.nodes=G)}return n.object=i,n;function B(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}]),n}(_n);Ka.DefaultUp=new Yi(0,1,0),Ka.DefaultMatrixAutoUpdate=!0,Ka.DefaultMatrixWorldAutoUpdate=!0;var Na=new Yi,Ha=new Yi,Ma=new Yi,Fa=new Yi,La=new Yi,_a=new Yi,Ta=new Yi,Ea=new Yi,Ja=new Yi,Ua=new Yi,Da=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Yi;W(this,e),this.a=t,this.b=n,this.c=i}return R(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Na.subVectors(this.c,this.b),Ha.subVectors(this.a,this.b),.5*Na.cross(Ha).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,i,a,l){return e.getUV(t,this.a,this.b,this.c,n,i,a,l)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,i,a=this.a,l=this.b,r=this.c;La.subVectors(l,a),_a.subVectors(r,a),Ea.subVectors(e,a);var o=La.dot(Ea),g=_a.dot(Ea);if(o<=0&&g<=0)return t.copy(a);Ja.subVectors(e,l);var s=La.dot(Ja),u=_a.dot(Ja);if(s>=0&&u<=s)return t.copy(l);var c=o*u-s*g;if(c<=0&&o>=0&&s<=0)return n=o/(o-s),t.copy(a).addScaledVector(La,n);Ua.subVectors(e,r);var I=La.dot(Ua),C=_a.dot(Ua);if(C>=0&&I<=C)return t.copy(r);var d=I*g-o*C;if(d<=0&&g>=0&&C<=0)return i=g/(g-C),t.copy(a).addScaledVector(_a,i);var h=s*C-I*u;if(h<=0&&u-s>=0&&I-C>=0)return Ta.subVectors(r,l),i=(u-s)/(u-s+(I-C)),t.copy(l).addScaledVector(Ta,i);var A=1/(h+d+c);return n=d*A,i=c*A,t.copy(a).addScaledVector(La,n).addScaledVector(_a,i)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,i){i.subVectors(n,t),Na.subVectors(e,t),i.cross(Na);var a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,i,a){Na.subVectors(i,t),Ha.subVectors(n,t),Ma.subVectors(e,t);var l=Na.dot(Na),r=Na.dot(Ha),o=Na.dot(Ma),g=Ha.dot(Ha),s=Ha.dot(Ma),u=l*g-r*r;if(0===u)return a.set(-2,-1,-1);var c=1/u,I=(g*o-r*s)*c,C=(l*s-r*o)*c;return a.set(1-I-C,C,I)}},{key:"containsPoint",value:function(e,t,n,i){return this.getBarycoord(e,t,n,i,Fa),Fa.x>=0&&Fa.y>=0&&Fa.x+Fa.y<=1}},{key:"getUV",value:function(e,t,n,i,a,l,r,o){return this.getBarycoord(e,t,n,i,Fa),o.set(0,0),o.addScaledVector(a,Fa.x),o.addScaledVector(l,Fa.y),o.addScaledVector(r,Fa.z),o}},{key:"isFrontFacing",value:function(e,t,n,i){return Na.subVectors(n,t),Ha.subVectors(e,t),Na.cross(Ha).dot(i)<0}}]),e}(),Pa=0,Qa=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty(y(e),"id",{value:Pa++}),e.uuid=Dn(),e.name="",e.type="Material",e.blending=U,e.side=_,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=oe,e.blendDst=ge,e.blendEquation=j,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=me,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=Sn,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=An,e.stencilZFail=An,e.stencilZPass=An,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return R(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==U&&(n.blending=this.blending),this.side!==_&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var a=i(e.textures),l=i(e.images);a.length>0&&(n.textures=a),l.length>0&&(n.images=l)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var a=0;a!==i;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(_n),Oa=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isMeshBasicMaterial=!0,i.type="MeshBasicMaterial",i.color=new vi(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=ye,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Qa),ja=new Yi,$a=new ai,el=function(){function e(t,n,i){if(W(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===i,this.usage=Rn,this.updateRange={offset:0,count:-1},this.version=0}return R(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[n+i];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)$a.fromBufferAttribute(this,t),$a.applyMatrix3(e),this.setXY(t,$a.x,$a.y);else if(3===this.itemSize)for(var i=0,a=this.count;i<a;i++)ja.fromBufferAttribute(this,i),ja.applyMatrix3(e),this.setXYZ(i,ja.x,ja.y,ja.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)ja.fromBufferAttribute(this,t),ja.applyMatrix4(e),this.setXYZ(t,ja.x,ja.y,ja.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)ja.fromBufferAttribute(this,t),ja.applyNormalMatrix(e),this.setXYZ(t,ja.x,ja.y,ja.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)ja.fromBufferAttribute(this,t),ja.transformDirection(e),this.setXYZ(t,ja.x,ja.y,ja.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=ti(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=ti(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=ti(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=ti(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array),i=ni(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,a){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array),i=ni(i,this.array),a=ni(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=a,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Rn&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),e}(),tl=function(e){G(n,e);var t=x(n);function n(e,i,a){return W(this,n),t.call(this,new Int8Array(e),i,a)}return R(n)}(el),nl=function(e){G(n,e);var t=x(n);function n(e,i,a){return W(this,n),t.call(this,new Uint8Array(e),i,a)}return R(n)}(el),il=function(e){G(n,e);var t=x(n);function n(e,i,a){return W(this,n),t.call(this,new Uint8ClampedArray(e),i,a)}return R(n)}(el),al=function(e){G(n,e);var t=x(n);function n(e,i,a){return W(this,n),t.call(this,new Int16Array(e),i,a)}return R(n)}(el),ll=function(e){G(n,e);var t=x(n);function n(e,i,a){return W(this,n),t.call(this,new Uint16Array(e),i,a)}return R(n)}(el),rl=function(e){G(n,e);var t=x(n);function n(e,i,a){return W(this,n),t.call(this,new Int32Array(e),i,a)}return R(n)}(el),ol=function(e){G(n,e);var t=x(n);function n(e,i,a){return W(this,n),t.call(this,new Uint32Array(e),i,a)}return R(n)}(el),gl=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;return W(this,n),(l=t.call(this,new Uint16Array(e),i,a)).isFloat16BufferAttribute=!0,l}return R(n)}(el),sl=function(e){G(n,e);var t=x(n);function n(e,i,a){return W(this,n),t.call(this,new Float32Array(e),i,a)}return R(n)}(el),ul=function(e){G(n,e);var t=x(n);function n(e,i,a){return W(this,n),t.call(this,new Float64Array(e),i,a)}return R(n)}(el),cl=0,Il=new Ia,Cl=new Ka,dl=new Yi,hl=new Ni,Al=new Ni,ml=new Yi,pl=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(y(e),"id",{value:cl++}),e.uuid=Dn(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return R(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(ri(e)?ol:ll)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new li).getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}var a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(e),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Il.makeRotationFromQuaternion(e),this.applyMatrix4(Il),this}},{key:"rotateX",value:function(e){return Il.makeRotationX(e),this.applyMatrix4(Il),this}},{key:"rotateY",value:function(e){return Il.makeRotationY(e),this.applyMatrix4(Il),this}},{key:"rotateZ",value:function(e){return Il.makeRotationZ(e),this.applyMatrix4(Il),this}},{key:"translate",value:function(e,t,n){return Il.makeTranslation(e,t,n),this.applyMatrix4(Il),this}},{key:"scale",value:function(e,t,n){return Il.makeScale(e,t,n),this.applyMatrix4(Il),this}},{key:"lookAt",value:function(e){return Cl.lookAt(e),Cl.updateMatrix(),this.applyMatrix4(Cl.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(dl).negate(),this.translate(dl.x,dl.y,dl.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var a=e[n];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new sl(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Ni);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Yi(-1/0,-1/0,-1/0),new Yi(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var a=t[n];hl.setFromBufferAttribute(a),this.morphTargetsRelative?(ml.addVectors(this.boundingBox.min,hl.min),this.boundingBox.expandByPoint(ml),ml.addVectors(this.boundingBox.max,hl.max),this.boundingBox.expandByPoint(ml)):(this.boundingBox.expandByPoint(hl.min),this.boundingBox.expandByPoint(hl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new ia);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Yi,1/0);if(e){var n=this.boundingSphere.center;if(hl.setFromBufferAttribute(e),t)for(var i=0,a=t.length;i<a;i++){var l=t[i];Al.setFromBufferAttribute(l),this.morphTargetsRelative?(ml.addVectors(hl.min,Al.min),hl.expandByPoint(ml),ml.addVectors(hl.max,Al.max),hl.expandByPoint(ml)):(hl.expandByPoint(Al.min),hl.expandByPoint(Al.max))}hl.getCenter(n);for(var r=0,o=0,g=e.count;o<g;o++)ml.fromBufferAttribute(e,o),r=Math.max(r,n.distanceToSquared(ml));if(t)for(var s=0,u=t.length;s<u;s++)for(var c=t[s],I=this.morphTargetsRelative,C=0,d=c.count;C<d;C++)ml.fromBufferAttribute(c,C),I&&(dl.fromBufferAttribute(e,C),ml.add(dl)),r=Math.max(r,n.distanceToSquared(ml));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,i=t.position.array,a=t.normal.array,l=t.uv.array,r=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new el(new Float32Array(4*r),4));for(var o=this.getAttribute("tangent").array,g=[],s=[],u=0;u<r;u++)g[u]=new Yi,s[u]=new Yi;var c=new Yi,I=new Yi,C=new Yi,d=new ai,h=new ai,A=new ai,m=new Yi,p=new Yi,f=this.groups;0===f.length&&(f=[{start:0,count:n.length}]);for(var b=0,v=f.length;b<v;++b)for(var y=f[b],G=y.start,B=G,Z=G+y.count;B<Z;B+=3)z(n[B+0],n[B+1],n[B+2]);for(var x=new Yi,w=new Yi,q=new Yi,W=new Yi,S=0,R=f.length;S<R;++S)for(var V=f[S],X=V.start,k=X,Y=X+V.count;k<Y;k+=3)K(n[k+0]),K(n[k+1]),K(n[k+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function z(e,t,n){c.fromArray(i,3*e),I.fromArray(i,3*t),C.fromArray(i,3*n),d.fromArray(l,2*e),h.fromArray(l,2*t),A.fromArray(l,2*n),I.sub(c),C.sub(c),h.sub(d),A.sub(d);var a=1/(h.x*A.y-A.x*h.y);isFinite(a)&&(m.copy(I).multiplyScalar(A.y).addScaledVector(C,-h.y).multiplyScalar(a),p.copy(C).multiplyScalar(h.x).addScaledVector(I,-A.x).multiplyScalar(a),g[e].add(m),g[t].add(m),g[n].add(m),s[e].add(p),s[t].add(p),s[n].add(p))}function K(e){q.fromArray(a,3*e),W.copy(q);var t=g[e];x.copy(t),x.sub(q.multiplyScalar(q.dot(t))).normalize(),w.crossVectors(W,t);var n=w.dot(s[e])<0?-1:1;o[4*e]=x.x,o[4*e+1]=x.y,o[4*e+2]=x.z,o[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new el(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var i=0,a=n.count;i<a;i++)n.setXYZ(i,0,0,0);var l=new Yi,r=new Yi,o=new Yi,g=new Yi,s=new Yi,u=new Yi,c=new Yi,I=new Yi;if(e)for(var C=0,d=e.count;C<d;C+=3){var h=e.getX(C+0),A=e.getX(C+1),m=e.getX(C+2);l.fromBufferAttribute(t,h),r.fromBufferAttribute(t,A),o.fromBufferAttribute(t,m),c.subVectors(o,r),I.subVectors(l,r),c.cross(I),g.fromBufferAttribute(n,h),s.fromBufferAttribute(n,A),u.fromBufferAttribute(n,m),g.add(c),s.add(c),u.add(c),n.setXYZ(h,g.x,g.y,g.z),n.setXYZ(A,s.x,s.y,s.z),n.setXYZ(m,u.x,u.y,u.z)}else for(var p=0,f=t.count;p<f;p+=3)l.fromBufferAttribute(t,p+0),r.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),c.subVectors(o,r),I.subVectors(l,r),c.cross(I),n.setXYZ(p+0,c.x,c.y,c.z),n.setXYZ(p+1,c.x,c.y,c.z),n.setXYZ(p+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)ml.fromBufferAttribute(e,t),ml.normalize(),e.setXYZ(t,ml.x,ml.y,ml.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,i=e.itemSize,a=e.normalized,l=new n.constructor(t.length*i),r=0,o=0,g=0,s=t.length;g<s;g++){r=e.isInterleavedBufferAttribute?t[g]*e.data.stride+e.offset:t[g]*i;for(var u=0;u<i;u++)l[o++]=n[r++]}return new el(l,i,a)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,i=this.index.array,a=this.attributes;for(var l in a){var r=e(a[l],i);t.setAttribute(l,r)}var o=this.morphAttributes;for(var g in o){for(var s=[],u=o[g],c=0,I=u.length;c<I;c++){var C=e(u[c],i);s.push(C)}t.morphAttributes[g]=s}t.morphTargetsRelative=this.morphTargetsRelative;for(var d=this.groups,h=0,A=d.length;h<A;h++){var m=d[h];t.addGroup(m.start,m.count,m.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var a=this.attributes;for(var l in a){var r=a[l];e.data.attributes[l]=r.toJSON(e.data)}var o={},g=!1;for(var s in this.morphAttributes){for(var u=this.morphAttributes[s],c=[],I=0,C=u.length;I<C;I++){var d=u[I];c.push(d.toJSON(e.data))}c.length>0&&(o[s]=c,g=!0)}g&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);var h=this.groups;h.length>0&&(e.data.groups=JSON.parse(JSON.stringify(h)));var A=this.boundingSphere;return null!==A&&(e.data.boundingSphere={center:A.center.toArray(),radius:A.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var i=e.attributes;for(var a in i){var l=i[a];this.setAttribute(a,l.clone(t))}var r=e.morphAttributes;for(var o in r){for(var g=[],s=r[o],u=0,c=s.length;u<c;u++)g.push(s[u].clone(t));this.morphAttributes[o]=g}this.morphTargetsRelative=e.morphTargetsRelative;for(var I=e.groups,C=0,d=I.length;C<d;C++){var h=I[C];this.addGroup(h.start,h.count,h.materialIndex)}var A=e.boundingBox;null!==A&&(this.boundingBox=A.clone());var m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(_n),fl=new Ia,bl=new ca,vl=new ia,yl=new Yi,Gl=new Yi,Bl=new Yi,Zl=new Yi,xl=new Yi,wl=new Yi,ql=new Yi,Wl=new Yi,Sl=new Yi,Rl=new ai,Vl=new ai,Xl=new ai,kl=new Yi,Yl=new Yi,zl=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pl,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oa;return W(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=i,e.material=a,e.updateMorphTargets(),e}return R(n,[{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=n.length;i<a;i++){var l=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=i}}}}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),vl.copy(n.boundingSphere),vl.applyMatrix4(a),!1!==e.ray.intersectsSphere(vl)&&(fl.copy(a).invert(),bl.copy(e.ray).applyMatrix4(fl),null===n.boundingBox||!1!==bl.intersectsBox(n.boundingBox)))){var l,r=n.index,o=n.attributes.position,g=n.morphAttributes.position,s=n.morphTargetsRelative,u=n.attributes.uv,c=n.attributes.uv2,I=n.groups,C=n.drawRange;if(null!==r)if(Array.isArray(i))for(var d=0,h=I.length;d<h;d++)for(var A=I[d],m=i[A.materialIndex],p=Math.max(A.start,C.start),f=Math.min(r.count,Math.min(A.start+A.count,C.start+C.count));p<f;p+=3){var b=r.getX(p),v=r.getX(p+1),y=r.getX(p+2);(l=Kl(this,m,e,bl,o,g,s,u,c,b,v,y))&&(l.faceIndex=Math.floor(p/3),l.face.materialIndex=A.materialIndex,t.push(l))}else for(var G=Math.max(0,C.start),B=Math.min(r.count,C.start+C.count);G<B;G+=3){var Z=r.getX(G),x=r.getX(G+1),w=r.getX(G+2);(l=Kl(this,i,e,bl,o,g,s,u,c,Z,x,w))&&(l.faceIndex=Math.floor(G/3),t.push(l))}else if(void 0!==o)if(Array.isArray(i))for(var q=0,W=I.length;q<W;q++)for(var S=I[q],R=i[S.materialIndex],V=Math.max(S.start,C.start),X=Math.min(o.count,Math.min(S.start+S.count,C.start+C.count));V<X;V+=3){(l=Kl(this,R,e,bl,o,g,s,u,c,V,V+1,V+2))&&(l.faceIndex=Math.floor(V/3),l.face.materialIndex=S.materialIndex,t.push(l))}else for(var k=Math.max(0,C.start),Y=Math.min(o.count,C.start+C.count);k<Y;k+=3){(l=Kl(this,i,e,bl,o,g,s,u,c,k,k+1,k+2))&&(l.faceIndex=Math.floor(k/3),t.push(l))}}}}]),n}(Ka);function Kl(e,t,n,i,a,l,r,o,g,s,u,c){yl.fromBufferAttribute(a,s),Gl.fromBufferAttribute(a,u),Bl.fromBufferAttribute(a,c);var I=e.morphTargetInfluences;if(l&&I){ql.set(0,0,0),Wl.set(0,0,0),Sl.set(0,0,0);for(var C=0,d=l.length;C<d;C++){var h=I[C],A=l[C];0!==h&&(Zl.fromBufferAttribute(A,s),xl.fromBufferAttribute(A,u),wl.fromBufferAttribute(A,c),r?(ql.addScaledVector(Zl,h),Wl.addScaledVector(xl,h),Sl.addScaledVector(wl,h)):(ql.addScaledVector(Zl.sub(yl),h),Wl.addScaledVector(xl.sub(Gl),h),Sl.addScaledVector(wl.sub(Bl),h)))}yl.add(ql),Gl.add(Wl),Bl.add(Sl)}e.isSkinnedMesh&&(e.boneTransform(s,yl),e.boneTransform(u,Gl),e.boneTransform(c,Bl));var m=function(e,t,n,i,a,l,r,o){if(null===(t.side===T?i.intersectTriangle(r,l,a,!0,o):i.intersectTriangle(a,l,r,t.side!==E,o)))return null;Yl.copy(o),Yl.applyMatrix4(e.matrixWorld);var g=n.ray.origin.distanceTo(Yl);return g<n.near||g>n.far?null:{distance:g,point:Yl.clone(),object:e}}(e,t,n,i,yl,Gl,Bl,kl);if(m){o&&(Rl.fromBufferAttribute(o,s),Vl.fromBufferAttribute(o,u),Xl.fromBufferAttribute(o,c),m.uv=Da.getUV(kl,yl,Gl,Bl,Rl,Vl,Xl,new ai)),g&&(Rl.fromBufferAttribute(g,s),Vl.fromBufferAttribute(g,u),Xl.fromBufferAttribute(g,c),m.uv2=Da.getUV(kl,yl,Gl,Bl,Rl,Vl,Xl,new ai));var p={a:s,b:u,c:c,normal:new Yi,materialIndex:0};Da.getNormal(yl,Gl,Bl,p.normal),m.face=p}return m}var Nl=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;W(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:i,height:a,depth:l,widthSegments:r,heightSegments:o,depthSegments:g};var s=y(e);r=Math.floor(r),o=Math.floor(o),g=Math.floor(g);var u=[],c=[],I=[],C=[],d=0,h=0;function A(e,t,n,i,a,l,r,o,g,A,m){for(var p=l/g,f=r/A,b=l/2,v=r/2,y=o/2,G=g+1,B=A+1,Z=0,x=0,w=new Yi,q=0;q<B;q++)for(var W=q*f-v,S=0;S<G;S++){var R=S*p-b;w[e]=R*i,w[t]=W*a,w[n]=y,c.push(w.x,w.y,w.z),w[e]=0,w[t]=0,w[n]=o>0?1:-1,I.push(w.x,w.y,w.z),C.push(S/g),C.push(1-q/A),Z+=1}for(var V=0;V<A;V++)for(var X=0;X<g;X++){var k=d+X+G*V,Y=d+X+G*(V+1),z=d+(X+1)+G*(V+1),K=d+(X+1)+G*V;u.push(k,Y,K),u.push(Y,z,K),x+=6}s.addGroup(h,x,m),h+=x,d+=Z}return A("z","y","x",-1,-1,l,a,i,g,o,0),A("z","y","x",1,-1,l,a,-i,g,o,1),A("x","z","y",1,1,i,l,a,r,g,2),A("x","z","y",1,-1,i,l,-a,r,g,3),A("x","y","z",1,-1,i,a,l,r,o,4),A("x","y","z",-1,-1,i,a,-l,r,o,5),e.setIndex(u),e.setAttribute("position",new sl(c,3)),e.setAttribute("normal",new sl(I,3)),e.setAttribute("uv",new sl(C,2)),e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(pl);function Hl(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var a=e[n][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?t[n][i]=a.clone():Array.isArray(a)?t[n][i]=a.slice():t[n][i]=a}return t}function Ml(e){for(var t={},n=0;n<e.length;n++){var i=Hl(e[n]);for(var a in i)t[a]=i[a]}return t}var Fl={clone:Hl,merge:Ml},Ll=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isShaderMaterial=!0,i.type="ShaderMaterial",i.defines={},i.uniforms={},i.uniformsGroups=[],i.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",i.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",i.linewidth=1,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.lights=!1,i.clipping=!1,i.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},i.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},i.index0AttributeName=void 0,i.uniformsNeedUpdate=!1,i.glslVersion=null,void 0!==e&&i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hl(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=v(u(n.prototype),"toJSON",this).call(this,e);for(var i in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var l={};for(var r in this.extensions)!0===this.extensions[r]&&(l[r]=!0);return Object.keys(l).length>0&&(t.extensions=l),t}}]),n}(Qa),_l=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new Ia,e.projectionMatrix=new Ia,e.projectionMatrixInverse=new Ia,e}return R(n,[{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){v(u(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){v(u(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Ka),Tl=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return W(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=i,e.zoom=1,e.near=l,e.far=r,e.focus=10,e.aspect=a,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return R(n,[{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Un*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Jn*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Un*Math.atan(Math.tan(.5*Jn*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,i,a,l){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Jn*this.fov)/this.zoom,n=2*t,i=this.aspect*n,a=-.5*i,l=this.view;if(null!==this.view&&this.view.enabled){var r=l.fullWidth,o=l.fullHeight;a+=l.offsetX*i/r,t-=l.offsetY*n/o,i*=l.width/r,n*=l.height/o}var g=this.filmOffset;0!==g&&(a+=e*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=v(u(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(_l),El=90,Jl=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;W(this,n),(l=t.call(this)).type="CubeCamera",l.renderTarget=a;var r=new Tl(El,1,e,i);r.layers=l.layers,r.up.set(0,-1,0),r.lookAt(new Yi(1,0,0)),l.add(r);var o=new Tl(El,1,e,i);o.layers=l.layers,o.up.set(0,-1,0),o.lookAt(new Yi(-1,0,0)),l.add(o);var g=new Tl(El,1,e,i);g.layers=l.layers,g.up.set(0,0,1),g.lookAt(new Yi(0,1,0)),l.add(g);var s=new Tl(El,1,e,i);s.layers=l.layers,s.up.set(0,0,-1),s.lookAt(new Yi(0,-1,0)),l.add(s);var u=new Tl(El,1,e,i);u.layers=l.layers,u.up.set(0,-1,0),u.lookAt(new Yi(0,0,1)),l.add(u);var c=new Tl(El,1,e,i);return c.layers=l.layers,c.up.set(0,-1,0),c.lookAt(new Yi(0,0,-1)),l.add(c),l}return R(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=s(this.children,6),a=i[0],l=i[1],r=i[2],o=i[3],g=i[4],u=i[5],c=e.getRenderTarget(),I=e.toneMapping,C=e.xr.enabled;e.toneMapping=Ze,e.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,a),e.setRenderTarget(n,1),e.render(t,l),e.setRenderTarget(n,2),e.render(t,r),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,g),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(c),e.toneMapping=I,e.xr.enabled=C,n.texture.needsPMREMUpdate=!0}}]),n}(Ka),Ul=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o,g,s,u,c){var I;return W(this,n),e=void 0!==e?e:[],i=void 0!==i?i:Ve,(I=t.call(this,e,i,a,l,r,o,g,s,u,c)).isCubeTexture=!0,I.flipY=!1,I}return R(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(xi),Dl=function(e){G(n,e);var t=x(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};W(this,n),(i=t.call(this,e,e,a)).isWebGLCubeRenderTarget=!0;var l={width:e,height:e,depth:1},r=[l,l,l,l,l,l];return i.texture=new Ul(r,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),i.texture.isRenderTargetTexture=!0,i.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,i.texture.minFilter=void 0!==a.minFilter?a.minFilter:Ee,i}return R(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",a="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",l=new Nl(5,5,5),r=new Ll({name:"CubemapFromEquirect",uniforms:Hl(n),vertexShader:i,fragmentShader:a,side:T,blending:J});r.uniforms.tEquirect.value=t;var o=new zl(l,r),g=t.minFilter;return t.minFilter===De&&(t.minFilter=Ee),new Jl(1,10,this).update(e,o),t.minFilter=g,o.geometry.dispose(),o.material.dispose(),this}},{key:"clear",value:function(e,t,n,i){for(var a=e.getRenderTarget(),l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,i);e.setRenderTarget(a)}}]),n}(qi),Pl=new Yi,Ql=new Yi,Ol=new li,jl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yi(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;W(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return R(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var i=Pl.subVectors(n,t).cross(Ql.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(Pl),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(n).multiplyScalar(a).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Ol.getNormalMatrix(e),i=this.coplanarPoint(Pl).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(a),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),$l=new ia,er=new Yi,tr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jl,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jl,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new jl,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new jl,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new jl,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new jl;W(this,e),this.planes=[t,n,i,a,l,r]}return R(e,[{key:"set",value:function(e,t,n,i,a,l){var r=this.planes;return r[0].copy(e),r[1].copy(t),r[2].copy(n),r[3].copy(i),r[4].copy(a),r[5].copy(l),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,i=n[0],a=n[1],l=n[2],r=n[3],o=n[4],g=n[5],s=n[6],u=n[7],c=n[8],I=n[9],C=n[10],d=n[11],h=n[12],A=n[13],m=n[14],p=n[15];return t[0].setComponents(r-i,u-o,d-c,p-h).normalize(),t[1].setComponents(r+i,u+o,d+c,p+h).normalize(),t[2].setComponents(r+a,u+g,d+I,p+A).normalize(),t[3].setComponents(r-a,u-g,d-I,p-A).normalize(),t[4].setComponents(r-l,u-s,d-C,p-m).normalize(),t[5].setComponents(r+l,u+s,d+C,p+m).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),$l.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($l)}},{key:"intersectsSprite",value:function(e){return $l.center.set(0,0,0),$l.radius=.7071067811865476,$l.applyMatrix4(e.matrixWorld),this.intersectsSphere($l)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,i=-e.radius,a=0;a<6;a++){if(t[a].distanceToPoint(n)<i)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(er.x=i.normal.x>0?e.max.x:e.min.x,er.y=i.normal.y>0?e.max.y:e.min.y,er.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(er)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function nr(){var e=null,t=!1,n=null,i=null;function a(t,l){n(t,l),i=e.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(a),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function ir(e,t){var n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,a){if(t.isGLBufferAttribute){var l=i.get(t);(!l||l.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var r=i.get(t);void 0===r?i.set(t,function(t,i){var a,l=t.array,r=t.usage,o=e.createBuffer();if(e.bindBuffer(i,o),e.bufferData(i,l,r),t.onUploadCallback(),l instanceof Float32Array)a=5126;else if(l instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(l instanceof Int16Array)a=5122;else if(l instanceof Uint32Array)a=5125;else if(l instanceof Int32Array)a=5124;else if(l instanceof Int8Array)a=5120;else if(l instanceof Uint8Array)a=5121;else{if(!(l instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);a=5121}return{buffer:o,type:a,bytesPerElement:l.BYTES_PER_ELEMENT,version:t.version}}(t,a)):r.version<t.version&&(!function(t,i,a){var l=i.array,r=i.updateRange;e.bindBuffer(a,t),-1===r.count?e.bufferSubData(a,0,l):(n?e.bufferSubData(a,r.offset*l.BYTES_PER_ELEMENT,l,r.offset,r.count):e.bufferSubData(a,r.offset*l.BYTES_PER_ELEMENT,l.subarray(r.offset,r.offset+r.count)),r.count=-1)}(r.buffer,t,a),r.version=t.version)}}}}var ar=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;W(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:i,height:a,widthSegments:l,heightSegments:r};for(var o=i/2,g=a/2,s=Math.floor(l),u=Math.floor(r),c=s+1,I=u+1,C=i/s,d=a/u,h=[],A=[],m=[],p=[],f=0;f<I;f++)for(var b=f*d-g,v=0;v<c;v++){var y=v*C-o;A.push(y,-b,0),m.push(0,0,1),p.push(v/s),p.push(1-f/u)}for(var G=0;G<u;G++)for(var B=0;B<s;B++){var Z=B+c*G,x=B+c*(G+1),w=B+1+c*(G+1),q=B+1+c*G;h.push(Z,x,q),h.push(x,w,q)}return e.setIndex(h),e.setAttribute("position",new sl(A,3)),e.setAttribute("normal",new sl(m,3)),e.setAttribute("uv",new sl(p,2)),e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(pl),lr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},rr={common:{diffuse:{value:new vi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new li},uv2Transform:{value:new li},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ai(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new li}},sprite:{diffuse:{value:new vi(16777215)},opacity:{value:1},center:{value:new ai(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new li}}},or={basic:{uniforms:Ml([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.fog]),vertexShader:lr.meshbasic_vert,fragmentShader:lr.meshbasic_frag},lambert:{uniforms:Ml([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,rr.lights,{emissive:{value:new vi(0)}}]),vertexShader:lr.meshlambert_vert,fragmentShader:lr.meshlambert_frag},phong:{uniforms:Ml([rr.common,rr.specularmap,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,rr.lights,{emissive:{value:new vi(0)},specular:{value:new vi(1118481)},shininess:{value:30}}]),vertexShader:lr.meshphong_vert,fragmentShader:lr.meshphong_frag},standard:{uniforms:Ml([rr.common,rr.envmap,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.roughnessmap,rr.metalnessmap,rr.fog,rr.lights,{emissive:{value:new vi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:lr.meshphysical_vert,fragmentShader:lr.meshphysical_frag},toon:{uniforms:Ml([rr.common,rr.aomap,rr.lightmap,rr.emissivemap,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.gradientmap,rr.fog,rr.lights,{emissive:{value:new vi(0)}}]),vertexShader:lr.meshtoon_vert,fragmentShader:lr.meshtoon_frag},matcap:{uniforms:Ml([rr.common,rr.bumpmap,rr.normalmap,rr.displacementmap,rr.fog,{matcap:{value:null}}]),vertexShader:lr.meshmatcap_vert,fragmentShader:lr.meshmatcap_frag},points:{uniforms:Ml([rr.points,rr.fog]),vertexShader:lr.points_vert,fragmentShader:lr.points_frag},dashed:{uniforms:Ml([rr.common,rr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:lr.linedashed_vert,fragmentShader:lr.linedashed_frag},depth:{uniforms:Ml([rr.common,rr.displacementmap]),vertexShader:lr.depth_vert,fragmentShader:lr.depth_frag},normal:{uniforms:Ml([rr.common,rr.bumpmap,rr.normalmap,rr.displacementmap,{opacity:{value:1}}]),vertexShader:lr.meshnormal_vert,fragmentShader:lr.meshnormal_frag},sprite:{uniforms:Ml([rr.sprite,rr.fog]),vertexShader:lr.sprite_vert,fragmentShader:lr.sprite_frag},background:{uniforms:{uvTransform:{value:new li},t2D:{value:null}},vertexShader:lr.background_vert,fragmentShader:lr.background_frag},cube:{uniforms:Ml([rr.envmap,{opacity:{value:1}}]),vertexShader:lr.cube_vert,fragmentShader:lr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:lr.equirect_vert,fragmentShader:lr.equirect_frag},distanceRGBA:{uniforms:Ml([rr.common,rr.displacementmap,{referencePosition:{value:new Yi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:lr.distanceRGBA_vert,fragmentShader:lr.distanceRGBA_frag},shadow:{uniforms:Ml([rr.lights,rr.fog,{color:{value:new vi(0)},opacity:{value:1}}]),vertexShader:lr.shadow_vert,fragmentShader:lr.shadow_frag}};function gr(e,t,n,i,a,l){var r,o,g=new vi(0),s=!0===a?0:1,u=null,c=0,I=null;function C(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,l)}return{getClearColor:function(){return g},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;g.set(e),C(g,s=t)},getClearAlpha:function(){return s},setClearAlpha:function(e){C(g,s=e)},render:function(n,a){var l=!1,d=!0===a.isScene?a.background:null;d&&d.isTexture&&(d=t.get(d));var h=e.xr,A=h.getSession&&h.getSession();A&&"additive"===A.environmentBlendMode&&(d=null),null===d?C(g,s):d&&d.isColor&&(C(d,1),l=!0),(e.autoClear||l)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&(d.isCubeTexture||d.mapping===ze)?(void 0===o&&((o=new zl(new Nl(1,1,1),new Ll({name:"BackgroundCubeMaterial",uniforms:Hl(or.cube.uniforms),vertexShader:or.cube.vertexShader,fragmentShader:or.cube.fragmentShader,side:T,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(o)),o.material.uniforms.envMap.value=d,o.material.uniforms.flipEnvMap.value=d.isCubeTexture&&!1===d.isRenderTargetTexture?-1:1,u===d&&c===d.version&&I===e.toneMapping||(o.material.needsUpdate=!0,u=d,c=d.version,I=e.toneMapping),o.layers.enableAll(),n.unshift(o,o.geometry,o.material,0,0,null)):d&&d.isTexture&&(void 0===r&&((r=new zl(new ar(2,2),new Ll({name:"BackgroundMaterial",uniforms:Hl(or.background.uniforms),vertexShader:or.background.vertexShader,fragmentShader:or.background.fragmentShader,side:_,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(r)),r.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),r.material.uniforms.uvTransform.value.copy(d.matrix),u===d&&c===d.version&&I===e.toneMapping||(r.material.needsUpdate=!0,u=d,c=d.version,I=e.toneMapping),r.layers.enableAll(),n.unshift(r,r.geometry,r.material,0,0,null))}}}function sr(e,t,n,i){var a=e.getParameter(34921),l=i.isWebGL2?null:t.get("OES_vertex_array_object"),r=i.isWebGL2||null!==l,o={},g=C(null),s=g,u=!1;function c(t){return i.isWebGL2?e.bindVertexArray(t):l.bindVertexArrayOES(t)}function I(t){return i.isWebGL2?e.deleteVertexArray(t):l.deleteVertexArrayOES(t)}function C(e){for(var t=[],n=[],i=[],l=0;l<a;l++)t[l]=0,n[l]=0,i[l]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function d(){for(var e=s.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function h(e){A(e,0)}function A(n,a){var l=s.newAttributes,r=s.enabledAttributes,o=s.attributeDivisors;(l[n]=1,0===r[n]&&(e.enableVertexAttribArray(n),r[n]=1),o[n]!==a)&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,a),o[n]=a)}function m(){for(var t=s.newAttributes,n=s.enabledAttributes,i=0,a=n.length;i<a;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function p(t,n,a,l,r,o){!0!==i.isWebGL2||5124!==a&&5125!==a?e.vertexAttribPointer(t,n,a,l,r,o):e.vertexAttribIPointer(t,n,a,r,o)}function f(){b(),u=!0,s!==g&&c((s=g).object)}function b(){g.geometry=null,g.program=null,g.wireframe=!1}return{setup:function(a,g,I,f,b){var v=!1;if(r){var y=function(t,n,a){var r=!0===a.wireframe,g=o[t.id];void 0===g&&(g={},o[t.id]=g);var s=g[n.id];void 0===s&&(s={},g[n.id]=s);var u=s[r];void 0===u&&(u=C(i.isWebGL2?e.createVertexArray():l.createVertexArrayOES()),s[r]=u);return u}(f,I,g);s!==y&&c((s=y).object),v=function(e,t,n,i){var a=s.attributes,l=t.attributes,r=0,o=n.getAttributes();for(var g in o){if(o[g].location>=0){var u=a[g],c=l[g];if(void 0===c&&("instanceMatrix"===g&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===g&&e.instanceColor&&(c=e.instanceColor)),void 0===u)return!0;if(u.attribute!==c)return!0;if(c&&u.data!==c.data)return!0;r++}}return s.attributesNum!==r||s.index!==i}(a,f,I,b),v&&function(e,t,n,i){var a={},l=t.attributes,r=0,o=n.getAttributes();for(var g in o){if(o[g].location>=0){var u=l[g];void 0===u&&("instanceMatrix"===g&&e.instanceMatrix&&(u=e.instanceMatrix),"instanceColor"===g&&e.instanceColor&&(u=e.instanceColor));var c={};c.attribute=u,u&&u.data&&(c.data=u.data),a[g]=c,r++}}s.attributes=a,s.attributesNum=r,s.index=i}(a,f,I,b)}else{var G=!0===g.wireframe;s.geometry===f.id&&s.program===I.id&&s.wireframe===G||(s.geometry=f.id,s.program=I.id,s.wireframe=G,v=!0)}null!==b&&n.update(b,34963),(v||u)&&(u=!1,function(a,l,r,o){if(!1===i.isWebGL2&&(a.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;d();var g=o.attributes,s=r.getAttributes(),u=l.defaultAttributeValues;for(var c in s){var I=s[c];if(I.location>=0){var C=g[c];if(void 0===C&&("instanceMatrix"===c&&a.instanceMatrix&&(C=a.instanceMatrix),"instanceColor"===c&&a.instanceColor&&(C=a.instanceColor)),void 0!==C){var f=C.normalized,b=C.itemSize,v=n.get(C);if(void 0===v)continue;var y=v.buffer,G=v.type,B=v.bytesPerElement;if(C.isInterleavedBufferAttribute){var Z=C.data,x=Z.stride,w=C.offset;if(Z.isInstancedInterleavedBuffer){for(var q=0;q<I.locationSize;q++)A(I.location+q,Z.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(var W=0;W<I.locationSize;W++)h(I.location+W);e.bindBuffer(34962,y);for(var S=0;S<I.locationSize;S++)p(I.location+S,b/I.locationSize,G,f,x*B,(w+b/I.locationSize*S)*B)}else{if(C.isInstancedBufferAttribute){for(var R=0;R<I.locationSize;R++)A(I.location+R,C.meshPerAttribute);!0!==a.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=C.meshPerAttribute*C.count)}else for(var V=0;V<I.locationSize;V++)h(I.location+V);e.bindBuffer(34962,y);for(var X=0;X<I.locationSize;X++)p(I.location+X,b/I.locationSize,G,f,b*B,b/I.locationSize*X*B)}}else if(void 0!==u){var k=u[c];if(void 0!==k)switch(k.length){case 2:e.vertexAttrib2fv(I.location,k);break;case 3:e.vertexAttrib3fv(I.location,k);break;case 4:e.vertexAttrib4fv(I.location,k);break;default:e.vertexAttrib1fv(I.location,k)}}}}m()}(a,g,I,f),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:f,resetDefaultState:b,dispose:function(){for(var e in f(),o){var t=o[e];for(var n in t){var i=t[n];for(var a in i)I(i[a].object),delete i[a];delete t[n]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0!==o[e.id]){var t=o[e.id];for(var n in t){var i=t[n];for(var a in i)I(i[a].object),delete i[a];delete t[n]}delete o[e.id]}},releaseStatesOfProgram:function(e){for(var t in o){var n=o[t];if(void 0!==n[e.id]){var i=n[e.id];for(var a in i)I(i[a].object),delete i[a];delete n[e.id]}}},initAttributes:d,enableAttribute:h,disableUnusedAttributes:m}}function ur(e,t,n,i){var a,l=i.isWebGL2;this.setMode=function(e){a=e},this.render=function(t,i){e.drawArrays(a,t,i),n.update(i,a,1)},this.renderInstances=function(i,r,o){if(0!==o){var g,s;if(l)g=e,s="drawArraysInstanced";else if(s="drawArraysInstancedANGLE",null===(g=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g[s](a,i,r,o),n.update(r,a,o)}}}function cr(e,t,n){var i;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var l="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,r=void 0!==n.precision?n.precision:"highp",o=a(r);o!==r&&(console.warn("THREE.WebGLRenderer:",r,"not supported, using",o,"instead."),r=o);var g=l||t.has("WEBGL_draw_buffers"),s=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),c=e.getParameter(35660),I=e.getParameter(3379),C=e.getParameter(34076),d=e.getParameter(34921),h=e.getParameter(36347),A=e.getParameter(36348),m=e.getParameter(36349),p=c>0,f=l||t.has("OES_texture_float");return{isWebGL2:l,drawBuffers:g,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:a,precision:r,logarithmicDepthBuffer:s,maxTextures:u,maxVertexTextures:c,maxTextureSize:I,maxCubemapSize:C,maxAttributes:d,maxVertexUniforms:h,maxVaryings:A,maxFragmentUniforms:m,vertexTextures:p,floatFragmentTextures:f,floatVertexTextures:p&&f,maxSamples:l?e.getParameter(36183):0}}function Ir(e){var t=this,n=null,i=0,a=!1,l=!1,r=new jl,o=new li,g={value:null,needsUpdate:!1};function s(){g.value!==n&&(g.value=n,g.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function u(e,n,i,a){var l=null!==e?e.length:0,s=null;if(0!==l){if(s=g.value,!0!==a||null===s){var u=i+4*l,c=n.matrixWorldInverse;o.getNormalMatrix(c),(null===s||s.length<u)&&(s=new Float32Array(u));for(var I=0,C=i;I!==l;++I,C+=4)r.copy(e[I]).applyMatrix4(c,o),r.normal.toArray(s,C),s[C+3]=r.constant}g.value=s,g.needsUpdate=!0}return t.numPlanes=l,t.numIntersection=0,s}this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,l){var r=0!==e.length||t||0!==i||a;return a=t,n=u(e,l,0),i=e.length,r},this.beginShadows=function(){l=!0,u(null)},this.endShadows=function(){l=!1,s()},this.setState=function(t,r,o){var c=t.clippingPlanes,I=t.clipIntersection,C=t.clipShadows,d=e.get(t);if(!a||null===c||0===c.length||l&&!C)l?u(null):s();else{var h=l?0:i,A=4*h,m=d.clippingState||null;g.value=m,m=u(c,r,A,o);for(var p=0;p!==A;++p)m[p]=n[p];d.clippingState=m,this.numIntersection=I?this.numPlanes:0,this.numPlanes+=h}}}function Cr(e){var t=new WeakMap;function n(e,t){return t===ke?e.mapping=Ve:t===Ye&&(e.mapping=Xe),e}function i(e){var n=e.target;n.removeEventListener("dispose",i);var a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){var l=a.mapping;if(l===ke||l===Ye){if(t.has(a))return n(t.get(a).texture,a.mapping);var r=a.image;if(r&&r.height>0){var o=new Dl(r.height/2);return o.fromEquirectangularTexture(e,a),t.set(a,o),a.addEventListener("dispose",i),n(o.texture,a.mapping)}return null}}return a},dispose:function(){t=new WeakMap}}}or.physical={uniforms:Ml([or.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ai(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new vi(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ai},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new vi(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new vi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:lr.meshphysical_vert,fragmentShader:lr.meshphysical_frag};var dr=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return W(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=i,e.right=a,e.top=l,e.bottom=r,e.near=o,e.far=g,e.updateProjectionMatrix(),e}return R(n,[{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,i,a,l){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=l,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,a=n-e,l=n+e,r=i+t,o=i-t;if(null!==this.view&&this.view.enabled){var g=(this.right-this.left)/this.view.fullWidth/this.zoom,s=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l=(a+=g*this.view.offsetX)+g*this.view.width,o=(r-=s*this.view.offsetY)-s*this.view.height}this.projectionMatrix.makeOrthographic(a,l,r,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=v(u(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(_l),hr=[.125,.215,.35,.446,.526,.582],Ar=20,mr=new dr,pr=new vi,fr=null,br=(1+Math.sqrt(5))/2,vr=1/br,yr=[new Yi(1,1,1),new Yi(-1,1,1),new Yi(1,1,-1),new Yi(-1,1,-1),new Yi(0,br,vr),new Yi(0,br,-vr),new Yi(vr,0,br),new Yi(-vr,0,br),new Yi(br,vr,0),new Yi(-br,vr,0)],Gr=function(){function e(t){W(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return R(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;fr=this._renderer.getRenderTarget(),this._setSize(256);var a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,n,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=wr(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=xr(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(fr),e.scissorTest=!1,Zr(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===Ve||e.mapping===Xe?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),fr=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ee,minFilter:Ee,generateMipmaps:!1,type:it,format:st,encoding:rn,depthBuffer:!1},i=Br(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Br(e,t,n);var a=this._lodMax,l=function(e){for(var t=[],n=[],i=[],a=e,l=e-4+1+hr.length,r=0;r<l;r++){var o=Math.pow(2,a);n.push(o);var g=1/o;r>e-4?g=hr[r-e+4-1]:0===r&&(g=0),i.push(g);for(var s=1/(o-2),u=-s,c=1+s,I=[u,u,c,u,c,c,u,u,c,c,u,c],C=6,d=6,h=3,A=2,m=1,p=new Float32Array(h*d*C),f=new Float32Array(A*d*C),b=new Float32Array(m*d*C),v=0;v<C;v++){var y=v%3*2/3-1,G=v>2?0:-1,B=[y,G,0,y+2/3,G,0,y+2/3,G+1,0,y,G,0,y+2/3,G+1,0,y,G+1,0];p.set(B,h*d*v),f.set(I,A*d*v);var Z=[v,v,v,v,v,v];b.set(Z,m*d*v)}var x=new pl;x.setAttribute("position",new el(p,h)),x.setAttribute("uv",new el(f,A)),x.setAttribute("faceIndex",new el(b,m)),t.push(x),a>4&&a--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(a);this._sizeLods=l.sizeLods,this._lodPlanes=l.lodPlanes,this._sigmas=l.sigmas,this._blurMaterial=function(e,t,n){var i=new Float32Array(Ar),a=new Yi(0,1,0);return new Ll({name:"SphericalGaussianBlur",defines:{n:Ar,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:J,depthTest:!1,depthWrite:!1})}(a,e,t)}return i}},{key:"_compileMaterial",value:function(e){var t=new zl(this._lodPlanes[0],e);this._renderer.compile(t,mr)}},{key:"_sceneToCubeUV",value:function(e,t,n,i){var a=new Tl(90,1,t,n),l=[1,-1,1,1,1,1],r=[1,1,1,-1,-1,-1],o=this._renderer,g=o.autoClear,s=o.toneMapping;o.getClearColor(pr),o.toneMapping=Ze,o.autoClear=!1;var u=new Oa({name:"PMREM.Background",side:T,depthWrite:!1,depthTest:!1}),c=new zl(new Nl,u),I=!1,C=e.background;C?C.isColor&&(u.color.copy(C),e.background=null,I=!0):(u.color.copy(pr),I=!0);for(var d=0;d<6;d++){var h=d%3;0===h?(a.up.set(0,l[d],0),a.lookAt(r[d],0,0)):1===h?(a.up.set(0,0,l[d]),a.lookAt(0,r[d],0)):(a.up.set(0,l[d],0),a.lookAt(0,0,r[d]));var A=this._cubeSize;Zr(i,h*A,d>2?A:0,A,A),o.setRenderTarget(i),I&&o.render(c,a),o.render(e,a)}c.geometry.dispose(),c.material.dispose(),o.toneMapping=s,o.autoClear=g,e.background=C}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,i=e.mapping===Ve||e.mapping===Xe;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=wr()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=xr());var a=i?this._cubemapMaterial:this._equirectMaterial,l=new zl(this._lodPlanes[0],a);a.uniforms.envMap.value=e;var r=this._cubeSize;Zr(t,0,0,3*r,2*r),n.setRenderTarget(t),n.render(l,mr)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var i=1;i<this._lodPlanes.length;i++){var a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),l=yr[(i-1)%yr.length];this._blur(e,i-1,i,a,l)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,i,a){var l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,i,"latitudinal",a),this._halfBlur(l,e,n,n,i,"longitudinal",a)}},{key:"_halfBlur",value:function(e,t,n,i,a,l,r){var o=this._renderer,g=this._blurMaterial;"latitudinal"!==l&&"longitudinal"!==l&&console.error("blur direction must be either latitudinal or longitudinal!");var s=new zl(this._lodPlanes[i],g),u=g.uniforms,c=this._sizeLods[n]-1,I=isFinite(a)?Math.PI/(2*c):2*Math.PI/39,C=a/I,d=isFinite(a)?1+Math.floor(3*C):Ar;d>Ar&&console.warn("sigmaRadians, ".concat(a,", is too large and will clip, as it requested ").concat(d," samples when the maximum is set to ").concat(Ar));for(var h=[],A=0,m=0;m<Ar;++m){var p=m/C,f=Math.exp(-p*p/2);h.push(f),0===m?A+=f:m<d&&(A+=2*f)}for(var b=0;b<h.length;b++)h[b]=h[b]/A;u.envMap.value=e.texture,u.samples.value=d,u.weights.value=h,u.latitudinal.value="latitudinal"===l,r&&(u.poleAxis.value=r);var v=this._lodMax;u.dTheta.value=I,u.mipInt.value=v-n;var y=this._sizeLods[i];Zr(t,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(s,mr)}}]),e}();function Br(e,t,n){var i=new qi(e,t,n);return i.texture.mapping=ze,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Zr(e,t,n,i,a){e.viewport.set(t,n,i,a),e.scissor.set(t,n,i,a)}function xr(){return new Ll({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:J,depthTest:!1,depthWrite:!1})}function wr(){return new Ll({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:J,depthTest:!1,depthWrite:!1})}function qr(e){var t=new WeakMap,n=null;function i(e){var n=e.target;n.removeEventListener("dispose",i);var a=t.get(n);void 0!==a&&(t.delete(n),a.dispose())}return{get:function(a){if(a&&a.isTexture){var l=a.mapping,r=l===ke||l===Ye,o=l===Ve||l===Xe;if(r||o){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;var g=t.get(a);return null===n&&(n=new Gr(e)),g=r?n.fromEquirectangular(a,g):n.fromCubemap(a,g),t.set(a,g),g.texture}if(t.has(a))return t.get(a).texture;var s=a.image;if(r&&s&&s.height>0||o&&s&&function(e){for(var t=0,n=6,i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(s)){null===n&&(n=new Gr(e));var u=r?n.fromEquirectangular(a):n.fromCubemap(a);return t.set(a,u),a.addEventListener("dispose",i),u.texture}return null}}return a},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Wr(e){var t={};function n(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Sr(e,t,n,i){var a={},l=new WeakMap;function r(e){var o=e.target;for(var g in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[g]);o.removeEventListener("dispose",r),delete a[o.id];var s=l.get(o);s&&(t.remove(s),l.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){var n=[],i=e.index,a=e.attributes.position,r=0;if(null!==i){var o=i.array;r=i.version;for(var g=0,s=o.length;g<s;g+=3){var u=o[g+0],c=o[g+1],I=o[g+2];n.push(u,c,c,I,I,u)}}else{var C=a.array;r=a.version;for(var d=0,h=C.length/3-1;d<h;d+=3){var A=d+0,m=d+1,p=d+2;n.push(A,m,m,p,p,A)}}var f=new(ri(n)?ol:ll)(n,1);f.version=r;var b=l.get(e);b&&t.remove(b),l.set(e,f)}return{get:function(e,t){return!0===a[t.id]||(t.addEventListener("dispose",r),a[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var i in n)t.update(n[i],34962);var a=e.morphAttributes;for(var l in a)for(var r=a[l],o=0,g=r.length;o<g;o++)t.update(r[o],34962)},getWireframeAttribute:function(e){var t=l.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return l.get(e)}}}function Rr(e,t,n,i){var a,l,r,o=i.isWebGL2;this.setMode=function(e){a=e},this.setIndex=function(e){l=e.type,r=e.bytesPerElement},this.render=function(t,i){e.drawElements(a,i,l,t*r),n.update(i,a,1)},this.renderInstances=function(i,g,s){if(0!==s){var u,c;if(o)u=e,c="drawElementsInstanced";else if(c="drawElementsInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](a,g,l,i*r,s),n.update(g,a,s)}}}function Vr(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Xr(e,t){return e[0]-t[0]}function kr(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Yr(e,t,n){for(var i={},a=new Float32Array(8),l=new WeakMap,r=new wi,o=[],g=0;g<8;g++)o[g]=[g,0];return{update:function(g,s,u,c){var I=g.morphTargetInfluences;if(!0===t.isWebGL2){var C=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,d=void 0!==C?C.length:0,h=l.get(s);if(void 0===h||h.count!==d){void 0!==h&&h.texture.dispose();var A=void 0!==s.morphAttributes.position,m=void 0!==s.morphAttributes.normal,p=void 0!==s.morphAttributes.color,f=s.morphAttributes.position||[],b=s.morphAttributes.normal||[],v=s.morphAttributes.color||[],y=0;!0===A&&(y=1),!0===m&&(y=2),!0===p&&(y=3);var G=s.attributes.position.count*y,B=1;G>t.maxTextureSize&&(B=Math.ceil(G/t.maxTextureSize),G=t.maxTextureSize);var Z=new Float32Array(G*B*4*d),x=new Wi(Z,G,B,d);x.type=nt,x.needsUpdate=!0;for(var w=4*y,q=0;q<d;q++)for(var W=f[q],S=b[q],R=v[q],V=G*B*4*q,X=0;X<W.count;X++){var k=X*w;!0===A&&(r.fromBufferAttribute(W,X),Z[V+k+0]=r.x,Z[V+k+1]=r.y,Z[V+k+2]=r.z,Z[V+k+3]=0),!0===m&&(r.fromBufferAttribute(S,X),Z[V+k+4]=r.x,Z[V+k+5]=r.y,Z[V+k+6]=r.z,Z[V+k+7]=0),!0===p&&(r.fromBufferAttribute(R,X),Z[V+k+8]=r.x,Z[V+k+9]=r.y,Z[V+k+10]=r.z,Z[V+k+11]=4===R.itemSize?r.w:1)}h={count:d,texture:x,size:new ai(G,B)},l.set(s,h),s.addEventListener("dispose",(function e(){x.dispose(),l.delete(s),s.removeEventListener("dispose",e)}))}for(var Y=0,z=0;z<I.length;z++)Y+=I[z];var K=s.morphTargetsRelative?1:1-Y;c.getUniforms().setValue(e,"morphTargetBaseInfluence",K),c.getUniforms().setValue(e,"morphTargetInfluences",I),c.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),c.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}else{var N=void 0===I?0:I.length,H=i[s.id];if(void 0===H||H.length!==N){H=[];for(var M=0;M<N;M++)H[M]=[M,0];i[s.id]=H}for(var F=0;F<N;F++){var L=H[F];L[0]=F,L[1]=I[F]}H.sort(kr);for(var _=0;_<8;_++)_<N&&H[_][1]?(o[_][0]=H[_][0],o[_][1]=H[_][1]):(o[_][0]=Number.MAX_SAFE_INTEGER,o[_][1]=0);o.sort(Xr);for(var T=s.morphAttributes.position,E=s.morphAttributes.normal,J=0,U=0;U<8;U++){var D=o[U],P=D[0],Q=D[1];P!==Number.MAX_SAFE_INTEGER&&Q?(T&&s.getAttribute("morphTarget"+U)!==T[P]&&s.setAttribute("morphTarget"+U,T[P]),E&&s.getAttribute("morphNormal"+U)!==E[P]&&s.setAttribute("morphNormal"+U,E[P]),a[U]=Q,J+=Q):(T&&!0===s.hasAttribute("morphTarget"+U)&&s.deleteAttribute("morphTarget"+U),E&&!0===s.hasAttribute("morphNormal"+U)&&s.deleteAttribute("morphNormal"+U),a[U]=0)}var O=s.morphTargetsRelative?1:1-J;c.getUniforms().setValue(e,"morphTargetBaseInfluence",O),c.getUniforms().setValue(e,"morphTargetInfluences",a)}}}}function zr(e,t,n,i){var a=new WeakMap;function l(e){var t=e.target;t.removeEventListener("dispose",l),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var r=i.render.frame,o=e.geometry,g=t.get(e,o);return a.get(g)!==r&&(t.update(g),a.set(g,r)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",l)&&e.addEventListener("dispose",l),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),g},dispose:function(){a=new WeakMap}}}var Kr=new xi,Nr=new Wi,Hr=new Ri,Mr=new Ul,Fr=[],Lr=[],_r=new Float32Array(16),Tr=new Float32Array(9),Er=new Float32Array(4);function Jr(e,t,n){var i=e[0];if(i<=0||i>0)return e;var a=t*n,l=Fr[a];if(void 0===l&&(l=new Float32Array(a),Fr[a]=l),0!==t){i.toArray(l,0);for(var r=1,o=0;r!==t;++r)o+=n,e[r].toArray(l,o)}return l}function Ur(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Dr(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function Pr(e,t){var n=Lr[t];void 0===n&&(n=new Int32Array(t),Lr[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Qr(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Or(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ur(n,t))return;e.uniform2fv(this.addr,t),Dr(n,t)}}function jr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ur(n,t))return;e.uniform3fv(this.addr,t),Dr(n,t)}}function $r(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ur(n,t))return;e.uniform4fv(this.addr,t),Dr(n,t)}}function eo(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Ur(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Dr(n,t)}else{if(Ur(n,i))return;Er.set(i),e.uniformMatrix2fv(this.addr,!1,Er),Dr(n,i)}}function to(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Ur(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Dr(n,t)}else{if(Ur(n,i))return;Tr.set(i),e.uniformMatrix3fv(this.addr,!1,Tr),Dr(n,i)}}function no(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Ur(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Dr(n,t)}else{if(Ur(n,i))return;_r.set(i),e.uniformMatrix4fv(this.addr,!1,_r),Dr(n,i)}}function io(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ao(e,t){var n=this.cache;Ur(n,t)||(e.uniform2iv(this.addr,t),Dr(n,t))}function lo(e,t){var n=this.cache;Ur(n,t)||(e.uniform3iv(this.addr,t),Dr(n,t))}function ro(e,t){var n=this.cache;Ur(n,t)||(e.uniform4iv(this.addr,t),Dr(n,t))}function oo(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function go(e,t){var n=this.cache;Ur(n,t)||(e.uniform2uiv(this.addr,t),Dr(n,t))}function so(e,t){var n=this.cache;Ur(n,t)||(e.uniform3uiv(this.addr,t),Dr(n,t))}function uo(e,t){var n=this.cache;Ur(n,t)||(e.uniform4uiv(this.addr,t),Dr(n,t))}function co(e,t,n){var i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),n.setTexture2D(t||Kr,a)}function Io(e,t,n){var i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),n.setTexture3D(t||Hr,a)}function Co(e,t,n){var i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),n.setTextureCube(t||Mr,a)}function ho(e,t,n){var i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),n.setTexture2DArray(t||Nr,a)}function Ao(e,t){e.uniform1fv(this.addr,t)}function mo(e,t){var n=Jr(t,this.size,2);e.uniform2fv(this.addr,n)}function po(e,t){var n=Jr(t,this.size,3);e.uniform3fv(this.addr,n)}function fo(e,t){var n=Jr(t,this.size,4);e.uniform4fv(this.addr,n)}function bo(e,t){var n=Jr(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function vo(e,t){var n=Jr(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function yo(e,t){var n=Jr(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Go(e,t){e.uniform1iv(this.addr,t)}function Bo(e,t){e.uniform2iv(this.addr,t)}function Zo(e,t){e.uniform3iv(this.addr,t)}function xo(e,t){e.uniform4iv(this.addr,t)}function wo(e,t){e.uniform1uiv(this.addr,t)}function qo(e,t){e.uniform2uiv(this.addr,t)}function Wo(e,t){e.uniform3uiv(this.addr,t)}function So(e,t){e.uniform4uiv(this.addr,t)}function Ro(e,t,n){var i=t.length,a=Pr(n,i);e.uniform1iv(this.addr,a);for(var l=0;l!==i;++l)n.setTexture2D(t[l]||Kr,a[l])}function Vo(e,t,n){var i=t.length,a=Pr(n,i);e.uniform1iv(this.addr,a);for(var l=0;l!==i;++l)n.setTexture3D(t[l]||Hr,a[l])}function Xo(e,t,n){var i=t.length,a=Pr(n,i);e.uniform1iv(this.addr,a);for(var l=0;l!==i;++l)n.setTextureCube(t[l]||Mr,a[l])}function ko(e,t,n){var i=t.length,a=Pr(n,i);e.uniform1iv(this.addr,a);for(var l=0;l!==i;++l)n.setTexture2DArray(t[l]||Nr,a[l])}var Yo=R((function e(t,n,i){W(this,e),this.id=t,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Qr;case 35664:return Or;case 35665:return jr;case 35666:return $r;case 35674:return eo;case 35675:return to;case 35676:return no;case 5124:case 35670:return io;case 35667:case 35671:return ao;case 35668:case 35672:return lo;case 35669:case 35673:return ro;case 5125:return oo;case 36294:return go;case 36295:return so;case 36296:return uo;case 35678:case 36198:case 36298:case 36306:case 35682:return co;case 35679:case 36299:case 36307:return Io;case 35680:case 36300:case 36308:case 36293:return Co;case 36289:case 36303:case 36311:case 36292:return ho}}(n.type)})),zo=R((function e(t,n,i){W(this,e),this.id=t,this.addr=i,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return Ao;case 35664:return mo;case 35665:return po;case 35666:return fo;case 35674:return bo;case 35675:return vo;case 35676:return yo;case 5124:case 35670:return Go;case 35667:case 35671:return Bo;case 35668:case 35672:return Zo;case 35669:case 35673:return xo;case 5125:return wo;case 36294:return qo;case 36295:return Wo;case 36296:return So;case 35678:case 36198:case 36298:case 36306:case 35682:return Ro;case 35679:case 36299:case 36307:return Vo;case 35680:case 36300:case 36308:case 36293:return Xo;case 36289:case 36303:case 36311:case 36292:return ko}}(n.type)})),Ko=function(){function e(t){W(this,e),this.id=t,this.seq=[],this.map={}}return R(e,[{key:"setValue",value:function(e,t,n){for(var i=this.seq,a=0,l=i.length;a!==l;++a){var r=i[a];r.setValue(e,t[r.id],n)}}}]),e}(),No=/(\w+)(\])?(\[|\.)?/g;function Ho(e,t){e.seq.push(t),e.map[t.id]=t}function Mo(e,t,n){var i=e.name,a=i.length;for(No.lastIndex=0;;){var l=No.exec(i),r=No.lastIndex,o=l[1],g="]"===l[2],s=l[3];if(g&&(o|=0),void 0===s||"["===s&&r+2===a){Ho(n,void 0===s?new Yo(o,e,t):new zo(o,e,t));break}var u=n.map[o];void 0===u&&Ho(n,u=new Ko(o)),n=u}}var Fo=function(){function e(t,n){W(this,e),this.seq=[],this.map={};for(var i=t.getProgramParameter(n,35718),a=0;a<i;++a){var l=t.getActiveUniform(n,a);Mo(l,t.getUniformLocation(n,l.name),this)}}return R(e,[{key:"setValue",value:function(e,t,n,i){var a=this.map[t];void 0!==a&&a.setValue(e,n,i)}},{key:"setOptional",value:function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)}}],[{key:"upload",value:function(e,t,n,i){for(var a=0,l=t.length;a!==l;++a){var r=t[a],o=n[r.id];!1!==o.needsUpdate&&r.setValue(e,o.value,i)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],i=0,a=e.length;i!==a;++i){var l=e[i];l.id in t&&n.push(l)}return n}}]),e}();function Lo(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}var _o=0;function To(e,t,n){var i=e.getShaderParameter(t,35713),a=e.getShaderInfoLog(t).trim();if(i&&""===a)return"";var l=/ERROR: 0:(\d+)/.exec(a);if(l){var r=parseInt(l[1]);return n.toUpperCase()+"\n\n"+a+"\n\n"+function(e,t){for(var n=e.split("\n"),i=[],a=Math.max(t-6,0),l=Math.min(t+6,n.length),r=a;r<l;r++){var o=r+1;i.push("".concat(o===t?">":" "," ").concat(o,": ").concat(n[r]))}return i.join("\n")}(e.getShaderSource(t),r)}return a}function Eo(e,t){var n=function(e){switch(e){case rn:return["Linear","( value )"];case on:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Jo(e,t){var n;switch(t){case xe:n="Linear";break;case we:n="Reinhard";break;case qe:n="OptimizedCineon";break;case We:n="ACESFilmic";break;case Se:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Uo(e){return""!==e}function Do(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Po(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Qo=/^[ \t]*#include +<([\w\d./]+)>/gm;function Oo(e){return e.replace(Qo,jo)}function jo(e,t){var n=lr[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Oo(n)}var $o=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function eg(e){return e.replace($o,tg)}function tg(e,t,n,i){for(var a="",l=parseInt(t);l<parseInt(n);l++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return a}function ng(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ig(e,t,n,i){var a,l,r=e.getContext(),o=n.defines,g=n.vertexShader,s=n.fragmentShader,u=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===M?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===F?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===L&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Ve:case Xe:t="ENVMAP_TYPE_CUBE";break;case ze:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),I=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Xe&&(t="ENVMAP_MODE_REFRACTION");return t}(n),C=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case ye:t="ENVMAP_BLENDING_MULTIPLY";break;case Ge:t="ENVMAP_BLENDING_MIX";break;case Be:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),h=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Uo).join("\n")}(n),A=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),m=r.createProgram(),p=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((a=[A].filter(Uo).join("\n")).length>0&&(a+="\n"),(l=[h,A].filter(Uo).join("\n")).length>0&&(l+="\n")):(a=[ng(n),"#define SHADER_NAME "+n.shaderName,A,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+I:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Uo).join("\n"),l=[h,ng(n),"#define SHADER_NAME "+n.shaderName,A,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+I:"",n.envMap?"#define "+C:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ze?"#define TONE_MAPPING":"",n.toneMapping!==Ze?lr.tonemapping_pars_fragment:"",n.toneMapping!==Ze?Jo("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",lr.encodings_pars_fragment,Eo("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Uo).join("\n")),g=Po(g=Do(g=Oo(g),n),n),s=Po(s=Do(s=Oo(s),n),n),g=eg(g),s=eg(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(p="#version 300 es\n",a=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,l=["#define varying in",n.glslVersion===Fn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Fn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+l);var f,b,v=p+l+s,y=Lo(r,35633,p+a+g),G=Lo(r,35632,v);if(r.attachShader(m,y),r.attachShader(m,G),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){var B=r.getProgramInfoLog(m).trim(),Z=r.getShaderInfoLog(y).trim(),x=r.getShaderInfoLog(G).trim(),w=!0,q=!0;if(!1===r.getProgramParameter(m,35714)){w=!1;var W=To(r,y,"vertex"),S=To(r,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+B+"\n"+W+"\n"+S)}else""!==B?console.warn("THREE.WebGLProgram: Program Info Log:",B):""!==Z&&""!==x||(q=!1);q&&(this.diagnostics={runnable:w,programLog:B,vertexShader:{log:Z,prefix:a},fragmentShader:{log:x,prefix:l}})}return r.deleteShader(y),r.deleteShader(G),this.getUniforms=function(){return void 0===f&&(f=new Fo(r,m)),f},this.getAttributes=function(){return void 0===b&&(b=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),a=0;a<i;a++){var l=e.getActiveAttrib(t,a),r=l.name,o=1;35674===l.type&&(o=2),35675===l.type&&(o=3),35676===l.type&&(o=4),n[r]={type:l.type,location:e.getAttribLocation(t,r),locationSize:o}}return n}(r,m)),b},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=_o++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=y,this.fragmentShader=G,this}var ag=0,lg=function(){function e(){W(this,e),this.shaderCache=new Map,this.materialCache=new Map}return R(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return!1===l.has(i)&&(l.add(i),i.usedTimes++),!1===l.has(a)&&(l.add(a),a.usedTimes++),this}},{key:"remove",value:function(e){var t,n=f(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code)}}catch(a){n.e(a)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new rg(e),t.set(e,n)),n}}]),e}(),rg=R((function e(t){W(this,e),this.id=ag++,this.code=t,this.usedTimes=0}));function og(e,t,n,i,a,l,r){var o=new Ga,g=new lg,s=[],u=a.isWebGL2,c=a.logarithmicDepthBuffer,I=a.vertexTextures,C=a.precision,d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(l,o,s,h,A){var m=h.fog,p=A.geometry,f=l.isMeshStandardMaterial?h.environment:null,b=(l.isMeshStandardMaterial?n:t).get(l.envMap||f),v=b&&b.mapping===ze?b.image.height:null,y=d[l.type];null!==l.precision&&(C=a.getMaxPrecision(l.precision))!==l.precision&&console.warn("THREE.WebGLProgram.getParameters:",l.precision,"not supported, using",C,"instead.");var G,B,Z,x,w=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,q=void 0!==w?w.length:0,W=0;if(void 0!==p.morphAttributes.position&&(W=1),void 0!==p.morphAttributes.normal&&(W=2),void 0!==p.morphAttributes.color&&(W=3),y){var S=or[y];G=S.vertexShader,B=S.fragmentShader}else G=l.vertexShader,B=l.fragmentShader,g.update(l),Z=g.getVertexShaderID(l),x=g.getFragmentShaderID(l);var R=e.getRenderTarget(),V=l.alphaTest>0,X=l.clearcoat>0,k=l.iridescence>0;return{isWebGL2:u,shaderID:y,shaderName:l.type,vertexShader:G,fragmentShader:B,defines:l.defines,customVertexShaderID:Z,customFragmentShaderID:x,isRawShaderMaterial:!0===l.isRawShaderMaterial,glslVersion:l.glslVersion,precision:C,instancing:!0===A.isInstancedMesh,instancingColor:!0===A.isInstancedMesh&&null!==A.instanceColor,supportsVertexTextures:I,outputEncoding:null===R?e.outputEncoding:!0===R.isXRRenderTarget?R.texture.encoding:rn,map:!!l.map,matcap:!!l.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:v,lightMap:!!l.lightMap,aoMap:!!l.aoMap,emissiveMap:!!l.emissiveMap,bumpMap:!!l.bumpMap,normalMap:!!l.normalMap,objectSpaceNormalMap:l.normalMapType===cn,tangentSpaceNormalMap:l.normalMapType===un,decodeVideoTexture:!!l.map&&!0===l.map.isVideoTexture&&l.map.encoding===on,clearcoat:X,clearcoatMap:X&&!!l.clearcoatMap,clearcoatRoughnessMap:X&&!!l.clearcoatRoughnessMap,clearcoatNormalMap:X&&!!l.clearcoatNormalMap,iridescence:k,iridescenceMap:k&&!!l.iridescenceMap,iridescenceThicknessMap:k&&!!l.iridescenceThicknessMap,displacementMap:!!l.displacementMap,roughnessMap:!!l.roughnessMap,metalnessMap:!!l.metalnessMap,specularMap:!!l.specularMap,specularIntensityMap:!!l.specularIntensityMap,specularColorMap:!!l.specularColorMap,opaque:!1===l.transparent&&l.blending===U,alphaMap:!!l.alphaMap,alphaTest:V,gradientMap:!!l.gradientMap,sheen:l.sheen>0,sheenColorMap:!!l.sheenColorMap,sheenRoughnessMap:!!l.sheenRoughnessMap,transmission:l.transmission>0,transmissionMap:!!l.transmissionMap,thicknessMap:!!l.thicknessMap,combine:l.combine,vertexTangents:!!l.normalMap&&!!p.attributes.tangent,vertexColors:l.vertexColors,vertexAlphas:!0===l.vertexColors&&!!p.attributes.color&&4===p.attributes.color.itemSize,vertexUvs:!!l.map||!!l.bumpMap||!!l.normalMap||!!l.specularMap||!!l.alphaMap||!!l.emissiveMap||!!l.roughnessMap||!!l.metalnessMap||!!l.clearcoatMap||!!l.clearcoatRoughnessMap||!!l.clearcoatNormalMap||!!l.iridescenceMap||!!l.iridescenceThicknessMap||!!l.displacementMap||!!l.transmissionMap||!!l.thicknessMap||!!l.specularIntensityMap||!!l.specularColorMap||!!l.sheenColorMap||!!l.sheenRoughnessMap,uvsVertexOnly:!(l.map||l.bumpMap||l.normalMap||l.specularMap||l.alphaMap||l.emissiveMap||l.roughnessMap||l.metalnessMap||l.clearcoatNormalMap||l.iridescenceMap||l.iridescenceThicknessMap||l.transmission>0||l.transmissionMap||l.thicknessMap||l.specularIntensityMap||l.specularColorMap||l.sheen>0||l.sheenColorMap||l.sheenRoughnessMap)&&!!l.displacementMap,fog:!!m,useFog:!0===l.fog,fogExp2:m&&m.isFogExp2,flatShading:!!l.flatShading,sizeAttenuation:l.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===A.isSkinnedMesh,morphTargets:void 0!==p.morphAttributes.position,morphNormals:void 0!==p.morphAttributes.normal,morphColors:void 0!==p.morphAttributes.color,morphTargetsCount:q,morphTextureStride:W,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:r.numPlanes,numClipIntersection:r.numIntersection,dithering:l.dithering,shadowMapEnabled:e.shadowMap.enabled&&s.length>0,shadowMapType:e.shadowMap.type,toneMapping:l.toneMapped?e.toneMapping:Ze,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:l.premultipliedAlpha,doubleSided:l.side===E,flipSided:l.side===T,useDepthPacking:!!l.depthPacking,depthPacking:l.depthPacking||0,index0AttributeName:l.index0AttributeName,extensionDerivatives:l.extensions&&l.extensions.derivatives,extensionFragDepth:l.extensions&&l.extensions.fragDepth,extensionDrawBuffers:l.extensions&&l.extensions.drawBuffers,extensionShaderTextureLOD:l.extensions&&l.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:l.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.map&&o.enable(4);t.matcap&&o.enable(5);t.envMap&&o.enable(6);t.lightMap&&o.enable(7);t.aoMap&&o.enable(8);t.emissiveMap&&o.enable(9);t.bumpMap&&o.enable(10);t.normalMap&&o.enable(11);t.objectSpaceNormalMap&&o.enable(12);t.tangentSpaceNormalMap&&o.enable(13);t.clearcoat&&o.enable(14);t.clearcoatMap&&o.enable(15);t.clearcoatRoughnessMap&&o.enable(16);t.clearcoatNormalMap&&o.enable(17);t.iridescence&&o.enable(18);t.iridescenceMap&&o.enable(19);t.iridescenceThicknessMap&&o.enable(20);t.displacementMap&&o.enable(21);t.specularMap&&o.enable(22);t.roughnessMap&&o.enable(23);t.metalnessMap&&o.enable(24);t.gradientMap&&o.enable(25);t.alphaMap&&o.enable(26);t.alphaTest&&o.enable(27);t.vertexColors&&o.enable(28);t.vertexAlphas&&o.enable(29);t.vertexUvs&&o.enable(30);t.vertexTangents&&o.enable(31);t.uvsVertexOnly&&o.enable(32);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.skinning&&o.enable(4);t.morphTargets&&o.enable(5);t.morphNormals&&o.enable(6);t.morphColors&&o.enable(7);t.premultipliedAlpha&&o.enable(8);t.shadowMapEnabled&&o.enable(9);t.physicallyCorrectLights&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.specularIntensityMap&&o.enable(15);t.specularColorMap&&o.enable(16);t.transmission&&o.enable(17);t.transmissionMap&&o.enable(18);t.thicknessMap&&o.enable(19);t.sheen&&o.enable(20);t.sheenColorMap&&o.enable(21);t.sheenRoughnessMap&&o.enable(22);t.decodeVideoTexture&&o.enable(23);t.opaque&&o.enable(24);e.push(o.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=d[e.type];if(n){var i=or[n];t=Fl.clone(i.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var i,a=0,r=s.length;a<r;a++){var o=s[a];if(o.cacheKey===n){++(i=o).usedTimes;break}}return void 0===i&&(i=new ig(e,n,t,l),s.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){var t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},releaseShaderCache:function(e){g.remove(e)},programs:s,dispose:function(){g.dispose()}}}function gg(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function sg(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ug(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function cg(){var e=[],t=0,n=[],i=[],a=[];function l(n,i,a,l,r,o){var g=e[t];return void 0===g?(g={id:n.id,object:n,geometry:i,material:a,groupOrder:l,renderOrder:n.renderOrder,z:r,group:o},e[t]=g):(g.id=n.id,g.object=n,g.geometry=i,g.material=a,g.groupOrder=l,g.renderOrder=n.renderOrder,g.z=r,g.group=o),t++,g}return{opaque:n,transmissive:i,transparent:a,init:function(){t=0,n.length=0,i.length=0,a.length=0},push:function(e,t,r,o,g,s){var u=l(e,t,r,o,g,s);r.transmission>0?i.push(u):!0===r.transparent?a.push(u):n.push(u)},unshift:function(e,t,r,o,g,s){var u=l(e,t,r,o,g,s);r.transmission>0?i.unshift(u):!0===r.transparent?a.unshift(u):n.unshift(u)},finish:function(){for(var n=t,i=e.length;n<i;n++){var a=e[n];if(null===a.id)break;a.id=null,a.object=null,a.geometry=null,a.material=null,a.group=null}},sort:function(e,t){n.length>1&&n.sort(e||sg),i.length>1&&i.sort(t||ug),a.length>1&&a.sort(t||ug)}}}function Ig(){var e=new WeakMap;return{get:function(t,n){var i,a=e.get(t);return void 0===a?(i=new cg,e.set(t,[i])):n>=a.length?(i=new cg,a.push(i)):i=a[n],i},dispose:function(){e=new WeakMap}}}function Cg(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Yi,color:new vi};break;case"SpotLight":n={position:new Yi,direction:new Yi,color:new vi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Yi,color:new vi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Yi,skyColor:new vi,groundColor:new vi};break;case"RectAreaLight":n={color:new vi,position:new Yi,halfWidth:new Yi,halfHeight:new Yi}}return e[t.id]=n,n}}}var dg=0;function hg(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Ag(e,t){for(var n=new Cg,i=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ai};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ai,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},l=0;l<9;l++)a.probe.push(new Yi);var r=new Yi,o=new Ia,g=new Ia;return{setup:function(l,r){for(var o=0,g=0,s=0,u=0;u<9;u++)a.probe[u].set(0,0,0);var c=0,I=0,C=0,d=0,h=0,A=0,m=0,p=0,f=0,b=0;l.sort(hg);for(var v=!0!==r?Math.PI:1,y=0,G=l.length;y<G;y++){var B=l[y],Z=B.color,x=B.intensity,w=B.distance,q=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)o+=Z.r*x*v,g+=Z.g*x*v,s+=Z.b*x*v;else if(B.isLightProbe)for(var W=0;W<9;W++)a.probe[W].addScaledVector(B.sh.coefficients[W],x);else if(B.isDirectionalLight){var S=n.get(B);if(S.color.copy(B.color).multiplyScalar(B.intensity*v),B.castShadow){var R=B.shadow,V=i.get(B);V.shadowBias=R.bias,V.shadowNormalBias=R.normalBias,V.shadowRadius=R.radius,V.shadowMapSize=R.mapSize,a.directionalShadow[c]=V,a.directionalShadowMap[c]=q,a.directionalShadowMatrix[c]=B.shadow.matrix,A++}a.directional[c]=S,c++}else if(B.isSpotLight){var X=n.get(B);X.position.setFromMatrixPosition(B.matrixWorld),X.color.copy(Z).multiplyScalar(x*v),X.distance=w,X.coneCos=Math.cos(B.angle),X.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),X.decay=B.decay,a.spot[C]=X;var k=B.shadow;if(B.map&&(a.spotLightMap[f]=B.map,f++,k.updateMatrices(B),B.castShadow&&b++),a.spotLightMatrix[C]=k.matrix,B.castShadow){var Y=i.get(B);Y.shadowBias=k.bias,Y.shadowNormalBias=k.normalBias,Y.shadowRadius=k.radius,Y.shadowMapSize=k.mapSize,a.spotShadow[C]=Y,a.spotShadowMap[C]=q,p++}C++}else if(B.isRectAreaLight){var z=n.get(B);z.color.copy(Z).multiplyScalar(x),z.halfWidth.set(.5*B.width,0,0),z.halfHeight.set(0,.5*B.height,0),a.rectArea[d]=z,d++}else if(B.isPointLight){var K=n.get(B);if(K.color.copy(B.color).multiplyScalar(B.intensity*v),K.distance=B.distance,K.decay=B.decay,B.castShadow){var N=B.shadow,H=i.get(B);H.shadowBias=N.bias,H.shadowNormalBias=N.normalBias,H.shadowRadius=N.radius,H.shadowMapSize=N.mapSize,H.shadowCameraNear=N.camera.near,H.shadowCameraFar=N.camera.far,a.pointShadow[I]=H,a.pointShadowMap[I]=q,a.pointShadowMatrix[I]=B.shadow.matrix,m++}a.point[I]=K,I++}else if(B.isHemisphereLight){var M=n.get(B);M.skyColor.copy(B.color).multiplyScalar(x*v),M.groundColor.copy(B.groundColor).multiplyScalar(x*v),a.hemi[h]=M,h++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=rr.LTC_FLOAT_1,a.rectAreaLTC2=rr.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=rr.LTC_HALF_1,a.rectAreaLTC2=rr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=o,a.ambient[1]=g,a.ambient[2]=s;var F=a.hash;F.directionalLength===c&&F.pointLength===I&&F.spotLength===C&&F.rectAreaLength===d&&F.hemiLength===h&&F.numDirectionalShadows===A&&F.numPointShadows===m&&F.numSpotShadows===p&&F.numSpotMaps===f||(a.directional.length=c,a.spot.length=C,a.rectArea.length=d,a.point.length=I,a.hemi.length=h,a.directionalShadow.length=A,a.directionalShadowMap.length=A,a.pointShadow.length=m,a.pointShadowMap.length=m,a.spotShadow.length=p,a.spotShadowMap.length=p,a.directionalShadowMatrix.length=A,a.pointShadowMatrix.length=m,a.spotLightMatrix.length=p+f-b,a.spotLightMap.length=f,a.numSpotLightShadowsWithMaps=b,F.directionalLength=c,F.pointLength=I,F.spotLength=C,F.rectAreaLength=d,F.hemiLength=h,F.numDirectionalShadows=A,F.numPointShadows=m,F.numSpotShadows=p,F.numSpotMaps=f,a.version=dg++)},setupView:function(e,t){for(var n=0,i=0,l=0,s=0,u=0,c=t.matrixWorldInverse,I=0,C=e.length;I<C;I++){var d=e[I];if(d.isDirectionalLight){var h=a.directional[n];h.direction.setFromMatrixPosition(d.matrixWorld),r.setFromMatrixPosition(d.target.matrixWorld),h.direction.sub(r),h.direction.transformDirection(c),n++}else if(d.isSpotLight){var A=a.spot[l];A.position.setFromMatrixPosition(d.matrixWorld),A.position.applyMatrix4(c),A.direction.setFromMatrixPosition(d.matrixWorld),r.setFromMatrixPosition(d.target.matrixWorld),A.direction.sub(r),A.direction.transformDirection(c),l++}else if(d.isRectAreaLight){var m=a.rectArea[s];m.position.setFromMatrixPosition(d.matrixWorld),m.position.applyMatrix4(c),g.identity(),o.copy(d.matrixWorld),o.premultiply(c),g.extractRotation(o),m.halfWidth.set(.5*d.width,0,0),m.halfHeight.set(0,.5*d.height,0),m.halfWidth.applyMatrix4(g),m.halfHeight.applyMatrix4(g),s++}else if(d.isPointLight){var p=a.point[i];p.position.setFromMatrixPosition(d.matrixWorld),p.position.applyMatrix4(c),i++}else if(d.isHemisphereLight){var f=a.hemi[u];f.direction.setFromMatrixPosition(d.matrixWorld),f.direction.transformDirection(c),u++}}},state:a}}function mg(e,t){var n=new Ag(e,t),i=[],a=[];return{init:function(){i.length=0,a.length=0},state:{lightsArray:i,shadowsArray:a,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){a.push(e)}}}function pg(e,t){var n=new WeakMap;return{get:function(i){var a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=n.get(i);return void 0===r?(a=new mg(e,t),n.set(i,[a])):l>=r.length?(a=new mg(e,t),r.push(a)):a=r[l],a},dispose:function(){n=new WeakMap}}}var fg=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isMeshDepthMaterial=!0,i.type="MeshDepthMaterial",i.depthPacking=gn,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Qa),bg=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isMeshDistanceMaterial=!0,i.type="MeshDistanceMaterial",i.referencePosition=new Yi,i.nearDistance=1,i.farDistance=1e3,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Qa);function vg(e,t,n){var i=new tr,a=new ai,l=new ai,r=new wi,o=new fg({depthPacking:sn}),g=new bg,s={},u=n.maxTextureSize,c={0:T,1:_,2:E},I=new Ll({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ai},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),C=I.clone();C.defines.HORIZONTAL_PASS=1;var d=new pl;d.setAttribute("position",new el(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var h=new zl(d,I),A=this;function m(n,i){var l=t.update(h);I.defines.VSM_SAMPLES!==n.blurSamples&&(I.defines.VSM_SAMPLES=n.blurSamples,C.defines.VSM_SAMPLES=n.blurSamples,I.needsUpdate=!0,C.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new qi(a.x,a.y)),I.uniforms.shadow_pass.value=n.map.texture,I.uniforms.resolution.value=n.mapSize,I.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,l,I,h,null),C.uniforms.shadow_pass.value=n.mapPass.texture,C.uniforms.resolution.value=n.mapSize,C.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,l,C,h,null)}function p(t,n,i,a,l,r){var u=null,I=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(u=void 0!==I?I:!0===i.isPointLight?g:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){var C=u.uuid,d=n.uuid,h=s[C];void 0===h&&(h={},s[C]=h);var A=h[d];void 0===A&&(A=u.clone(),h[d]=A),u=A}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=r===L?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:c[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=a,u.farDistance=l),u}function f(n,a,l,r,o){if(!1!==n.visible){if(n.layers.test(a.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===L)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,n.matrixWorld);var g=t.update(n),s=n.material;if(Array.isArray(s))for(var u=g.groups,c=0,I=u.length;c<I;c++){var C=u[c],d=s[C.materialIndex];if(d&&d.visible){var h=p(n,d,r,l.near,l.far,o);e.renderBufferDirect(l,null,g,h,n,C)}}else if(s.visible){var A=p(n,s,r,l.near,l.far,o);e.renderBufferDirect(l,null,g,A,n,null)}}for(var m=n.children,b=0,v=m.length;b<v;b++)f(m[b],a,l,r,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=M,this.render=function(t,n,o){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==t.length){var g=e.getRenderTarget(),s=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),I=e.state;I.setBlending(J),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);for(var C=0,d=t.length;C<d;C++){var h=t[C],p=h.shadow;if(void 0!==p){if(!1!==p.autoUpdate||!1!==p.needsUpdate){a.copy(p.mapSize);var b=p.getFrameExtents();if(a.multiply(b),l.copy(p.mapSize),(a.x>u||a.y>u)&&(a.x>u&&(l.x=Math.floor(u/b.x),a.x=l.x*b.x,p.mapSize.x=l.x),a.y>u&&(l.y=Math.floor(u/b.y),a.y=l.y*b.y,p.mapSize.y=l.y)),null===p.map){var v=this.type!==L?{minFilter:Me,magFilter:Me}:{};p.map=new qi(a.x,a.y,v),p.map.texture.name=h.name+".shadowMap",p.camera.updateProjectionMatrix()}e.setRenderTarget(p.map),e.clear();for(var y=p.getViewportCount(),G=0;G<y;G++){var B=p.getViewport(G);r.set(l.x*B.x,l.y*B.y,l.x*B.z,l.y*B.w),I.viewport(r),p.updateMatrices(h,G),i=p.getFrustum(),f(n,o,p.camera,h,this.type)}!0!==p.isPointLightShadow&&this.type===L&&m(p,o),p.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",h,"has no shadow.")}A.needsUpdate=!1,e.setRenderTarget(g,s,c)}}}function yg(e,t,n){var i,a,l=n.isWebGL2;var r=new function(){var t=!1,n=new wi,i=null,a=new wi(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,l,r,o){!0===o&&(t*=r,i*=r,l*=r),n.set(t,i,l,r),!1===a.equals(n)&&(e.clearColor(t,i,l,r),a.copy(n))},reset:function(){t=!1,i=null,a.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,i=null,a=null;return{setTest:function(e){e?Be(2929):Ze(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case de:e.depthFunc(512);break;case he:e.depthFunc(519);break;case Ae:e.depthFunc(513);break;case me:e.depthFunc(515);break;case pe:e.depthFunc(514);break;case fe:e.depthFunc(518);break;case be:e.depthFunc(516);break;case ve:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,n=null,i=null,a=null}}},g=new function(){var t=!1,n=null,i=null,a=null,l=null,r=null,o=null,g=null,s=null;return{setTest:function(e){t||(e?Be(2960):Ze(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,r){i===t&&a===n&&l===r||(e.stencilFunc(t,n,r),i=t,a=n,l=r)},setOp:function(t,n,i){r===t&&o===n&&g===i||(e.stencilOp(t,n,i),r=t,o=n,g=i)},setLocked:function(e){t=e},setClear:function(t){s!==t&&(e.clearStencil(t),s=t)},reset:function(){t=!1,n=null,i=null,a=null,l=null,r=null,o=null,g=null,s=null}}},s=new WeakMap,u=new WeakMap,c={},I={},C=new WeakMap,d=[],h=null,A=!1,m=null,p=null,f=null,b=null,v=null,y=null,G=null,B=!1,Z=null,x=null,q=null,W=null,S=null,R=e.getParameter(35661),V=!1,X=0,k=e.getParameter(7938);-1!==k.indexOf("WebGL")?(X=parseFloat(/^WebGL (\d)/.exec(k)[1]),V=X>=1):-1!==k.indexOf("OpenGL ES")&&(X=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),V=X>=2);var N=null,H={},M=e.getParameter(3088),F=e.getParameter(2978),L=(new wi).fromArray(M),_=(new wi).fromArray(F);function ye(t,n,i){var a=new Uint8Array(4),l=e.createTexture();e.bindTexture(t,l),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var r=0;r<i;r++)e.texImage2D(n+r,0,6408,1,1,0,6408,5121,a);return l}var Ge={};function Be(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function Ze(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}Ge[3553]=ye(3553,3553,1),Ge[34067]=ye(34067,34069,6),r.setClear(0,0,0,1),o.setClear(1),g.setClear(0),Be(2929),o.setFunc(me),Se(!1),Re(z),Be(2884),We(J);var xe=(w(i={},j,32774),w(i,$,32778),w(i,ee,32779),i);if(l)xe[te]=32775,xe[ne]=32776;else{var we=t.get("EXT_blend_minmax");null!==we&&(xe[te]=we.MIN_EXT,xe[ne]=we.MAX_EXT)}var qe=(w(a={},ie,0),w(a,ae,1),w(a,le,768),w(a,oe,770),w(a,Ce,776),w(a,ce,774),w(a,se,772),w(a,re,769),w(a,ge,771),w(a,Ie,775),w(a,ue,773),a);function We(t,n,i,a,l,r,o,g){if(t!==J){if(!1===A&&(Be(3042),A=!0),t===O)l=l||n,r=r||i,o=o||a,n===p&&l===v||(e.blendEquationSeparate(xe[n],xe[l]),p=n,v=l),i===f&&a===b&&r===y&&o===G||(e.blendFuncSeparate(qe[i],qe[a],qe[r],qe[o]),f=i,b=a,y=r,G=o),m=t,B=null;else if(t!==m||g!==B){if(p===j&&v===j||(e.blendEquation(32774),p=j,v=j),g)switch(t){case U:e.blendFuncSeparate(1,771,1,771);break;case D:e.blendFunc(1,1);break;case P:e.blendFuncSeparate(0,769,0,1);break;case Q:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case U:e.blendFuncSeparate(770,771,1,771);break;case D:e.blendFunc(770,1);break;case P:e.blendFuncSeparate(0,769,0,1);break;case Q:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,b=null,y=null,G=null,m=t,B=g}}else!0===A&&(Ze(3042),A=!1)}function Se(t){Z!==t&&(t?e.frontFace(2304):e.frontFace(2305),Z=t)}function Re(t){t!==Y?(Be(2884),t!==x&&(t===z?e.cullFace(1029):t===K?e.cullFace(1028):e.cullFace(1032))):Ze(2884),x=t}function Ve(t,n,i){t?(Be(32823),W===n&&S===i||(e.polygonOffset(n,i),W=n,S=i)):Ze(32823)}function Xe(t){void 0===t&&(t=33984+R-1),N!==t&&(e.activeTexture(t),N=t)}return{buffers:{color:r,depth:o,stencil:g},enable:Be,disable:Ze,bindFramebuffer:function(t,n){return I[t]!==n&&(e.bindFramebuffer(t,n),I[t]=n,l&&(36009===t&&(I[36160]=n),36160===t&&(I[36009]=n)),!0)},drawBuffers:function(i,a){var l=d,r=!1;if(i)if(void 0===(l=C.get(a))&&(l=[],C.set(a,l)),i.isWebGLMultipleRenderTargets){var o=i.texture;if(l.length!==o.length||36064!==l[0]){for(var g=0,s=o.length;g<s;g++)l[g]=36064+g;l.length=o.length,r=!0}}else 36064!==l[0]&&(l[0]=36064,r=!0);else 1029!==l[0]&&(l[0]=1029,r=!0);r&&(n.isWebGL2?e.drawBuffers(l):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(l))},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:We,setMaterial:function(e,t){e.side===E?Ze(2884):Be(2884);var n=e.side===T;t&&(n=!n),Se(n),e.blending===U&&!1===e.transparent?We(J):We(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),r.setMask(e.colorWrite);var i=e.stencilWrite;g.setTest(i),i&&(g.setMask(e.stencilWriteMask),g.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),g.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ve(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?Be(32926):Ze(32926)},setFlipSided:Se,setCullFace:Re,setLineWidth:function(t){t!==q&&(V&&e.lineWidth(t),q=t)},setPolygonOffset:Ve,setScissorTest:function(e){e?Be(3089):Ze(3089)},activeTexture:Xe,bindTexture:function(t,n){null===N&&Xe();var i=H[N];void 0===i&&(i={type:void 0,texture:void 0},H[N]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||Ge[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=H[N];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){var i=u.get(n);void 0===i&&(i=new WeakMap,u.set(n,i));var a=i.get(t);void 0===a&&(a=e.getUniformBlockIndex(n,t.name),i.set(t,a))},uniformBlockBinding:function(t,n){var i=u.get(n).get(t);s.get(t)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),s.set(t,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===L.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),L.copy(t))},viewport:function(t){!1===_.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),_.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===l&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},N=null,H={},I={},C=new WeakMap,d=[],h=null,A=!1,m=null,p=null,f=null,b=null,v=null,y=null,G=null,B=!1,Z=null,x=null,q=null,W=null,S=null,L.set(0,0,e.canvas.width,e.canvas.height),_.set(0,0,e.canvas.width,e.canvas.height),r.reset(),o.reset(),g.reset()}}}function Gg(e,t,n,i,a,l,r){var o,g,s,u=a.isWebGL2,c=a.maxTextures,I=a.maxCubemapSize,C=a.maxTextureSize,d=a.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,A=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,p=new WeakMap,f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(E){}function b(e,t){return f?new OffscreenCanvas(e,t):si("canvas")}function v(e,t,n,i){var a=1;if((e.width>i||e.height>i)&&(a=i/Math.max(e.width,e.height)),a<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var l=t?ei:Math.floor,r=l(a*e.width),o=l(a*e.height);void 0===s&&(s=b(r,o));var g=n?b(r,o):s;return g.width=r,g.height=o,g.getContext("2d").drawImage(e,0,0,r,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+r+"x"+o+")."),g}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return jn(e.width)&&jn(e.height)}function G(e,t){return e.generateMipmaps&&t&&e.minFilter!==Me&&e.minFilter!==Ee}function B(t){e.generateMipmap(t)}function Z(n,i,a,l){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===u)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=i;return 6403===i&&(5126===a&&(o=33326),5131===a&&(o=33325),5121===a&&(o=33321)),33319===i&&(5126===a&&(o=33328),5131===a&&(o=33327),5121===a&&(o=33323)),6408===i&&(5126===a&&(o=34836),5131===a&&(o=34842),5121===a&&(o=l===on&&!1===r?35907:32856),32819===a&&(o=32854),32820===a&&(o=32855)),33325!==o&&33326!==o&&33327!==o&&33328!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function x(e,t,n){return!0===G(e,n)||e.isFramebufferTexture&&e.minFilter!==Me&&e.minFilter!==Ee?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function q(e){return e===Me||e===Fe||e===_e?9728:9729}function W(e){var t=e.target;t.removeEventListener("dispose",W),function(e){var t=i.get(e);if(void 0===t.__webglInit)return;var n=e.source,a=p.get(n);if(a){var l=a[t.__cacheKey];l.usedTimes--,0===l.usedTimes&&R(e),0===Object.keys(a).length&&p.delete(n)}i.remove(e)}(t),t.isVideoTexture&&m.delete(t)}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=t.texture,a=i.get(t),l=i.get(n);void 0!==l.__webglTexture&&(e.deleteTexture(l.__webglTexture),r.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)e.deleteFramebuffer(a.__webglFramebuffer[o]),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer[o]);else{if(e.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&e.deleteRenderbuffer(a.__webglDepthbuffer),a.__webglMultisampledFramebuffer&&e.deleteFramebuffer(a.__webglMultisampledFramebuffer),a.__webglColorRenderbuffer)for(var g=0;g<a.__webglColorRenderbuffer.length;g++)a.__webglColorRenderbuffer[g]&&e.deleteRenderbuffer(a.__webglColorRenderbuffer[g]);a.__webglDepthRenderbuffer&&e.deleteRenderbuffer(a.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var s=0,u=n.length;s<u;s++){var c=i.get(n[s]);c.__webglTexture&&(e.deleteTexture(c.__webglTexture),r.memory.textures--),i.remove(n[s])}i.remove(n),i.remove(t)}(n)}function R(t){var n=i.get(t);e.deleteTexture(n.__webglTexture);var a=t.source;delete p.get(a)[n.__cacheKey],r.memory.textures--}var V=0;function X(e,t){var a=i.get(e);if(e.isVideoTexture&&function(e){var t=r.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&a.__version!==e.version){var l=e.image;if(null===l)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==l.complete)return void N(a,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,a.__webglTexture)}var k=(w(o={},Ke,10497),w(o,Ne,33071),w(o,He,33648),o),Y=(w(g={},Me,9728),w(g,Fe,9984),w(g,_e,9986),w(g,Ee,9729),w(g,Je,9985),w(g,De,9987),g);function z(n,l,r){if(r?(e.texParameteri(n,10242,k[l.wrapS]),e.texParameteri(n,10243,k[l.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,k[l.wrapR]),e.texParameteri(n,10240,Y[l.magFilter]),e.texParameteri(n,10241,Y[l.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),l.wrapS===Ne&&l.wrapT===Ne||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,q(l.magFilter)),e.texParameteri(n,10241,q(l.minFilter)),l.minFilter!==Me&&l.minFilter!==Ee&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var o=t.get("EXT_texture_filter_anisotropic");if(l.type===nt&&!1===t.has("OES_texture_float_linear"))return;if(!1===u&&l.type===it&&!1===t.has("OES_texture_half_float_linear"))return;(l.anisotropy>1||i.get(l).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(l.anisotropy,a.getMaxAnisotropy())),i.get(l).__currentAnisotropy=l.anisotropy)}}function K(t,n){var i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",W));var a=n.source,l=p.get(a);void 0===l&&(l={},p.set(a,l));var o=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(o!==t.__cacheKey){void 0===l[o]&&(l[o]={texture:e.createTexture(),usedTimes:0},r.memory.textures++,i=!0),l[o].usedTimes++;var g=l[t.__cacheKey];void 0!==g&&(l[t.__cacheKey].usedTimes--,0===g.usedTimes&&R(n)),t.__cacheKey=o,t.__webglTexture=l[o].texture}return i}function N(t,i,a){var r=3553;i.isDataArrayTexture&&(r=35866),i.isData3DTexture&&(r=32879);var o=K(t,i),g=i.source;if(n.activeTexture(33984+a),n.bindTexture(r,t.__webglTexture),g.version!==g.__currentVersion||!0===o){e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);var s,c=function(e){return!u&&(e.wrapS!==Ne||e.wrapT!==Ne||e.minFilter!==Me&&e.minFilter!==Ee)}(i)&&!1===y(i.image),I=v(i.image,c,!1,C),d=y(I=T(i,I))||u,h=l.convert(i.format,i.encoding),A=l.convert(i.type),m=Z(i.internalFormat,h,A,i.encoding,i.isVideoTexture);z(r,i,d);var p=i.mipmaps,f=u&&!0!==i.isVideoTexture,b=void 0===g.__currentVersion||!0===o,w=x(i,I,d);if(i.isDepthTexture)m=6402,u?m=i.type===nt?36012:i.type===tt?33190:i.type===rt?35056:33189:i.type===nt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===It&&6402===m&&i.type!==$e&&i.type!==tt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=tt,A=l.convert(i.type)),i.format===Ct&&6402===m&&(m=34041,i.type!==rt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=rt,A=l.convert(i.type))),b&&(f?n.texStorage2D(3553,1,m,I.width,I.height):n.texImage2D(3553,0,m,I.width,I.height,0,h,A,null));else if(i.isDataTexture)if(p.length>0&&d){f&&b&&n.texStorage2D(3553,w,m,p[0].width,p[0].height);for(var q=0,W=p.length;q<W;q++)s=p[q],f?n.texSubImage2D(3553,q,0,0,s.width,s.height,h,A,s.data):n.texImage2D(3553,q,m,s.width,s.height,0,h,A,s.data);i.generateMipmaps=!1}else f?(b&&n.texStorage2D(3553,w,m,I.width,I.height),n.texSubImage2D(3553,0,0,0,I.width,I.height,h,A,I.data)):n.texImage2D(3553,0,m,I.width,I.height,0,h,A,I.data);else if(i.isCompressedTexture){f&&b&&n.texStorage2D(3553,w,m,p[0].width,p[0].height);for(var S=0,R=p.length;S<R;S++)s=p[S],i.format!==st?null!==h?f?n.compressedTexSubImage2D(3553,S,0,0,s.width,s.height,h,s.data):n.compressedTexImage2D(3553,S,m,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):f?n.texSubImage2D(3553,S,0,0,s.width,s.height,h,A,s.data):n.texImage2D(3553,S,m,s.width,s.height,0,h,A,s.data)}else if(i.isDataArrayTexture)f?(b&&n.texStorage3D(35866,w,m,I.width,I.height,I.depth),n.texSubImage3D(35866,0,0,0,0,I.width,I.height,I.depth,h,A,I.data)):n.texImage3D(35866,0,m,I.width,I.height,I.depth,0,h,A,I.data);else if(i.isData3DTexture)f?(b&&n.texStorage3D(32879,w,m,I.width,I.height,I.depth),n.texSubImage3D(32879,0,0,0,0,I.width,I.height,I.depth,h,A,I.data)):n.texImage3D(32879,0,m,I.width,I.height,I.depth,0,h,A,I.data);else if(i.isFramebufferTexture){if(b)if(f)n.texStorage2D(3553,w,m,I.width,I.height);else for(var V=I.width,X=I.height,k=0;k<w;k++)n.texImage2D(3553,k,m,V,X,0,h,A,null),V>>=1,X>>=1}else if(p.length>0&&d){f&&b&&n.texStorage2D(3553,w,m,p[0].width,p[0].height);for(var Y=0,N=p.length;Y<N;Y++)s=p[Y],f?n.texSubImage2D(3553,Y,0,0,h,A,s):n.texImage2D(3553,Y,m,h,A,s);i.generateMipmaps=!1}else f?(b&&n.texStorage2D(3553,w,m,I.width,I.height),n.texSubImage2D(3553,0,0,0,h,A,I)):n.texImage2D(3553,0,m,h,A,I);G(i,d)&&B(r),g.__currentVersion=g.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function H(t,a,r,o,g){var s=l.convert(r.format,r.encoding),u=l.convert(r.type),c=Z(r.internalFormat,s,u,r.encoding);i.get(a).__hasExternalTextures||(32879===g||35866===g?n.texImage3D(g,0,c,a.width,a.height,a.depth,0,s,u,null):n.texImage2D(g,0,c,a.width,a.height,0,s,u,null)),n.bindFramebuffer(36160,t),_(a)?h.framebufferTexture2DMultisampleEXT(36160,o,g,i.get(r).__webglTexture,0,L(a)):e.framebufferTexture2D(36160,o,g,i.get(r).__webglTexture,0),n.bindFramebuffer(36160,null)}function M(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var a=33189;if(i||_(n)){var r=n.depthTexture;r&&r.isDepthTexture&&(r.type===nt?a=36012:r.type===tt&&(a=33190));var o=L(n);_(n)?h.renderbufferStorageMultisampleEXT(36161,o,a,n.width,n.height):e.renderbufferStorageMultisample(36161,o,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var g=L(n);i&&!1===_(n)?e.renderbufferStorageMultisample(36161,g,35056,n.width,n.height):_(n)?h.renderbufferStorageMultisampleEXT(36161,g,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var s=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],u=0;u<s.length;u++){var c=s[u],I=l.convert(c.format,c.encoding),C=l.convert(c.type),d=Z(c.internalFormat,I,C,c.encoding),A=L(n);i&&!1===_(n)?e.renderbufferStorageMultisample(36161,A,d,n.width,n.height):_(n)?h.renderbufferStorageMultisampleEXT(36161,A,d,n.width,n.height):e.renderbufferStorage(36161,d,n.width,n.height)}e.bindRenderbuffer(36161,null)}function F(t){var a=i.get(t),l=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!a.__autoAllocateDepthBuffer){if(l)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,a){if(a&&a.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!a.depthTexture||!a.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(a.depthTexture).__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),X(a.depthTexture,0);var l=i.get(a.depthTexture).__webglTexture,r=L(a);if(a.depthTexture.format===It)_(a)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,l,0,r):e.framebufferTexture2D(36160,36096,3553,l,0);else{if(a.depthTexture.format!==Ct)throw new Error("Unknown depthTexture format");_(a)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,l,0,r):e.framebufferTexture2D(36160,33306,3553,l,0)}}(a.__webglFramebuffer,t)}else if(l){a.__webglDepthbuffer=[];for(var r=0;r<6;r++)n.bindFramebuffer(36160,a.__webglFramebuffer[r]),a.__webglDepthbuffer[r]=e.createRenderbuffer(),M(a.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,a.__webglFramebuffer),a.__webglDepthbuffer=e.createRenderbuffer(),M(a.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function L(e){return Math.min(d,e.samples)}function _(e){var n=i.get(e);return u&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function T(e,n){var i=e.encoding,a=e.format,l=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Ln||i!==rn&&(i===on?!1===u?!0===t.has("EXT_sRGB")&&a===st?(e.format=Ln,e.minFilter=Ee,e.generateMipmaps=!1):n=yi.sRGBToLinear(n):a===st&&l===Qe||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=function(){var e=V;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),V+=1,e},this.resetTextureUnits=function(){V=0},this.setTexture2D=X,this.setTexture2DArray=function(e,t){var a=i.get(e);e.version>0&&a.__version!==e.version?N(a,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,a.__webglTexture))},this.setTexture3D=function(e,t){var a=i.get(e);e.version>0&&a.__version!==e.version?N(a,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,a.__webglTexture))},this.setTextureCube=function(t,a){var r=i.get(t);t.version>0&&r.__version!==t.version?function(t,i,a){if(6!==i.image.length)return;var r=K(t,i),o=i.source;if(n.activeTexture(33984+a),n.bindTexture(34067,t.__webglTexture),o.version!==o.__currentVersion||!0===r){e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);for(var g=i.isCompressedTexture||i.image[0].isCompressedTexture,s=i.image[0]&&i.image[0].isDataTexture,c=[],C=0;C<6;C++)c[C]=g||s?s?i.image[C].image:i.image[C]:v(i.image[C],!1,!0,I),c[C]=T(i,c[C]);var d,h=c[0],A=y(h)||u,m=l.convert(i.format,i.encoding),p=l.convert(i.type),f=Z(i.internalFormat,m,p,i.encoding),b=u&&!0!==i.isVideoTexture,w=void 0===o.__currentVersion||!0===r,q=x(i,h,A);if(z(34067,i,A),g){b&&w&&n.texStorage2D(34067,q,f,h.width,h.height);for(var W=0;W<6;W++){d=c[W].mipmaps;for(var S=0;S<d.length;S++){var R=d[S];i.format!==st?null!==m?b?n.compressedTexSubImage2D(34069+W,S,0,0,R.width,R.height,m,R.data):n.compressedTexImage2D(34069+W,S,f,R.width,R.height,0,R.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):b?n.texSubImage2D(34069+W,S,0,0,R.width,R.height,m,p,R.data):n.texImage2D(34069+W,S,f,R.width,R.height,0,m,p,R.data)}}}else{d=i.mipmaps,b&&w&&(d.length>0&&q++,n.texStorage2D(34067,q,f,c[0].width,c[0].height));for(var V=0;V<6;V++)if(s){b?n.texSubImage2D(34069+V,0,0,0,c[V].width,c[V].height,m,p,c[V].data):n.texImage2D(34069+V,0,f,c[V].width,c[V].height,0,m,p,c[V].data);for(var X=0;X<d.length;X++){var k=d[X].image[V].image;b?n.texSubImage2D(34069+V,X+1,0,0,k.width,k.height,m,p,k.data):n.texImage2D(34069+V,X+1,f,k.width,k.height,0,m,p,k.data)}}else{b?n.texSubImage2D(34069+V,0,0,0,m,p,c[V]):n.texImage2D(34069+V,0,f,m,p,c[V]);for(var Y=0;Y<d.length;Y++){var N=d[Y];b?n.texSubImage2D(34069+V,Y+1,0,0,m,p,N.image[V]):n.texImage2D(34069+V,Y+1,f,m,p,N.image[V])}}}G(i,A)&&B(34067),o.__currentVersion=o.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(r,t,a):(n.activeTexture(33984+a),n.bindTexture(34067,r.__webglTexture))},this.rebindTextures=function(e,t,n){var a=i.get(e);void 0!==t&&H(a.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&F(e)},this.setupRenderTarget=function(t){var o=t.texture,g=i.get(t),s=i.get(o);t.addEventListener("dispose",S),!0!==t.isWebGLMultipleRenderTargets&&(void 0===s.__webglTexture&&(s.__webglTexture=e.createTexture()),s.__version=o.version,r.memory.textures++);var c=!0===t.isWebGLCubeRenderTarget,I=!0===t.isWebGLMultipleRenderTargets,C=y(t)||u;if(c){g.__webglFramebuffer=[];for(var d=0;d<6;d++)g.__webglFramebuffer[d]=e.createFramebuffer()}else{if(g.__webglFramebuffer=e.createFramebuffer(),I)if(a.drawBuffers)for(var h=t.texture,A=0,m=h.length;A<m;A++){var p=i.get(h[A]);void 0===p.__webglTexture&&(p.__webglTexture=e.createTexture(),r.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&t.samples>0&&!1===_(t)){var f=I?o:[o];g.__webglMultisampledFramebuffer=e.createFramebuffer(),g.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,g.__webglMultisampledFramebuffer);for(var b=0;b<f.length;b++){var v=f[b];g.__webglColorRenderbuffer[b]=e.createRenderbuffer(),e.bindRenderbuffer(36161,g.__webglColorRenderbuffer[b]);var x=l.convert(v.format,v.encoding),w=l.convert(v.type),q=Z(v.internalFormat,x,w,v.encoding),W=L(t);e.renderbufferStorageMultisample(36161,W,q,t.width,t.height),e.framebufferRenderbuffer(36160,36064+b,36161,g.__webglColorRenderbuffer[b])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(g.__webglDepthRenderbuffer=e.createRenderbuffer(),M(g.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(c){n.bindTexture(34067,s.__webglTexture),z(34067,o,C);for(var R=0;R<6;R++)H(g.__webglFramebuffer[R],t,o,36064,34069+R);G(o,C)&&B(34067),n.unbindTexture()}else if(I){for(var V=t.texture,X=0,k=V.length;X<k;X++){var Y=V[X],K=i.get(Y);n.bindTexture(3553,K.__webglTexture),z(3553,Y,C),H(g.__webglFramebuffer,t,Y,36064+X,3553),G(Y,C)&&B(3553)}n.unbindTexture()}else{var N=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(u?N=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(N,s.__webglTexture),z(N,o,C),H(g.__webglFramebuffer,t,o,36064,N),G(o,C)&&B(N),n.unbindTexture()}t.depthBuffer&&F(t)},this.updateRenderTargetMipmap=function(e){for(var t=y(e)||u,a=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],l=0,r=a.length;l<r;l++){var o=a[l];if(G(o,t)){var g=e.isWebGLCubeRenderTarget?34067:3553,s=i.get(o).__webglTexture;n.bindTexture(g,s),B(g),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(u&&t.samples>0&&!1===_(t)){var a=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],l=t.width,r=t.height,o=16384,g=[],s=t.stencilBuffer?33306:36096,c=i.get(t),I=!0===t.isWebGLMultipleRenderTargets;if(I)for(var C=0;C<a.length;C++)n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+C,36161,null),n.bindFramebuffer(36160,c.__webglFramebuffer),e.framebufferTexture2D(36009,36064+C,3553,null,0);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer);for(var d=0;d<a.length;d++){g.push(36064+d),t.depthBuffer&&g.push(s);var h=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),I&&e.framebufferRenderbuffer(36008,36064,36161,c.__webglColorRenderbuffer[d]),!0===h&&(e.invalidateFramebuffer(36008,[s]),e.invalidateFramebuffer(36009,[s])),I){var m=i.get(a[d]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,m,0)}e.blitFramebuffer(0,0,l,r,0,0,l,r,o,9728),A&&e.invalidateFramebuffer(36008,g)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),I)for(var p=0;p<a.length;p++){n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+p,36161,c.__webglColorRenderbuffer[p]);var f=i.get(a[p]).__webglTexture;n.bindFramebuffer(36160,c.__webglFramebuffer),e.framebufferTexture2D(36009,36064+p,3553,f,0)}n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=H,this.useMultisampledRTT=_}function Bg(e,t,n){var i=n.isWebGL2;return{convert:function(n){var a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===Qe)return 5121;if(n===at)return 32819;if(n===lt)return 32820;if(n===Oe)return 5120;if(n===je)return 5122;if(n===$e)return 5123;if(n===et)return 5124;if(n===tt)return 5125;if(n===nt)return 5126;if(n===it)return i?5131:null!==(a=t.get("OES_texture_half_float"))?a.HALF_FLOAT_OES:null;if(n===ot)return 6406;if(n===st)return 6408;if(n===ut)return 6409;if(n===ct)return 6410;if(n===It)return 6402;if(n===Ct)return 34041;if(n===dt)return 6403;if(n===gt)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===Ln)return null!==(a=t.get("EXT_sRGB"))?a.SRGB_ALPHA_EXT:null;if(n===ht)return 36244;if(n===At)return 33319;if(n===mt)return 33320;if(n===pt)return 36249;if(n===ft||n===bt||n===vt||n===yt)if(l===on){if(null===(a=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===ft)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===bt)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===vt)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===yt)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(a=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===ft)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===bt)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===vt)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===yt)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Gt||n===Bt||n===Zt||n===xt){if(null===(a=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===Gt)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Bt)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Zt)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===xt)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===wt)return null!==(a=t.get("WEBGL_compressed_texture_etc1"))?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===qt||n===Wt){if(null===(a=t.get("WEBGL_compressed_texture_etc")))return null;if(n===qt)return l===on?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===Wt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===St||n===Rt||n===Vt||n===Xt||n===kt||n===Yt||n===zt||n===Kt||n===Nt||n===Ht||n===Mt||n===Ft||n===Lt||n===_t){if(null===(a=t.get("WEBGL_compressed_texture_astc")))return null;if(n===St)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Rt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Vt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Xt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===kt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Yt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===zt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Kt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Nt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Ht)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Mt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Ft)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Lt)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===_t)return l===on?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Tt){if(null===(a=t.get("EXT_texture_compression_bptc")))return null;if(n===Tt)return l===on?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===rt?i?34042:null!==(a=t.get("WEBGL_depth_texture"))?a.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var Zg=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return W(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=i,e}return R(n)}(Tl),xg=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return R(n)}(Ka),wg={type:"move"},qg=function(){function e(){W(this,e),this._targetRay=null,this._grip=null,this._hand=null}return R(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new xg,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new xg,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Yi,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Yi),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new xg,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Yi,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Yi),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var i=null,a=null,l=null,r=this._targetRay,o=this._grip,g=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(g&&e.hand){l=!0;var s,u=f(e.hand.values());try{for(u.s();!(s=u.n()).done;){var c=s.value,I=t.getJointPose(c,n);if(void 0===g.joints[c.jointName]){var C=new xg;C.matrixAutoUpdate=!1,C.visible=!1,g.joints[c.jointName]=C,g.add(C)}var d=g.joints[c.jointName];null!==I&&(d.matrix.fromArray(I.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.jointRadius=I.radius),d.visible=null!==I}}catch(p){u.e(p)}finally{u.f()}var h=g.joints["index-finger-tip"],A=g.joints["thumb-tip"],m=h.position.distanceTo(A.position);g.inputState.pinching&&m>.025?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!g.inputState.pinching&&m<=.015&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&null!==(a=t.getPose(e.gripSpace,n))&&(o.matrix.fromArray(a.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),a.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(a.linearVelocity)):o.hasLinearVelocity=!1,a.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(a.angularVelocity)):o.hasAngularVelocity=!1);null!==r&&(null===(i=t.getPose(e.targetRaySpace,n))&&null!==a&&(i=a),null!==i&&(r.matrix.fromArray(i.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),i.linearVelocity?(r.hasLinearVelocity=!0,r.linearVelocity.copy(i.linearVelocity)):r.hasLinearVelocity=!1,i.angularVelocity?(r.hasAngularVelocity=!0,r.angularVelocity.copy(i.angularVelocity)):r.hasAngularVelocity=!1,this.dispatchEvent(wg)))}return null!==r&&(r.visible=null!==i),null!==o&&(o.visible=null!==a),null!==g&&(g.visible=null!==l),this}}]),e}(),Wg=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o,g,s,u,c){var I;if(W(this,n),(c=void 0!==c?c:It)!==It&&c!==Ct)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===a&&c===It&&(a=tt),void 0===a&&c===Ct&&(a=rt),(I=t.call(this,null,l,r,o,g,s,c,a,u)).isDepthTexture=!0,I.image={width:e,height:i},I.magFilter=void 0!==g?g:Me,I.minFilter=void 0!==s?s:Me,I.flipY=!1,I.generateMipmaps=!1,I}return R(n)}(xi),Sg=function(e){G(n,e);var t=x(n);function n(e,i){var a;W(this,n);var l=y(a=t.call(this)),r=null,o=1,g=null,s="local-floor",u=null,c=null,I=null,C=null,d=null,h=null,A=i.getContextAttributes(),m=null,f=null,b=[],v=[],G=new Tl;G.layers.enable(1),G.viewport=new wi;var B=new Tl;B.layers.enable(2),B.viewport=new wi;var Z=[G,B],x=new Zg;x.layers.enable(1),x.layers.enable(2);var w=null,S=null;function R(e){var t=v.indexOf(e.inputSource);if(-1!==t){var n=b[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function V(){r.removeEventListener("select",R),r.removeEventListener("selectstart",R),r.removeEventListener("selectend",R),r.removeEventListener("squeeze",R),r.removeEventListener("squeezestart",R),r.removeEventListener("squeezeend",R),r.removeEventListener("end",V),r.removeEventListener("inputsourceschange",X);for(var t=0;t<b.length;t++){var n=v[t];null!==n&&(v[t]=null,b[t].disconnect(n))}w=null,S=null,e.setRenderTarget(m),d=null,C=null,I=null,r=null,f=null,N.stop(),l.isPresenting=!1,l.dispatchEvent({type:"sessionend"})}function X(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],i=v.indexOf(n);i>=0&&(v[i]=null,b[i].dispatchEvent({type:"disconnected",data:n}))}for(var a=0;a<e.added.length;a++){var l=e.added[a],r=v.indexOf(l);if(-1===r){for(var o=0;o<b.length;o++){if(o>=v.length){v.push(l),r=o;break}if(null===v[o]){v[o]=l,r=o;break}}if(-1===r)break}var g=b[r];g&&g.dispatchEvent({type:"connected",data:l})}}a.cameraAutoUpdate=!0,a.enabled=!1,a.isPresenting=!1,a.getController=function(e){var t=b[e];return void 0===t&&(t=new qg,b[e]=t),t.getTargetRaySpace()},a.getControllerGrip=function(e){var t=b[e];return void 0===t&&(t=new qg,b[e]=t),t.getGripSpace()},a.getHand=function(e){var t=b[e];return void 0===t&&(t=new qg,b[e]=t),t.getHandSpace()},a.setFramebufferScaleFactor=function(e){o=e,!0===l.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},a.setReferenceSpaceType=function(e){s=e,!0===l.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},a.getReferenceSpace=function(){return u||g},a.setReferenceSpace=function(e){u=e},a.getBaseLayer=function(){return null!==C?C:d},a.getBinding=function(){return I},a.getFrame=function(){return h},a.getSession=function(){return r},a.setSession=function(){var t=p(q().mark((function t(n){var a,c,h,p,b;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(r=n)){t.next=25;break}if(m=e.getRenderTarget(),r.addEventListener("select",R),r.addEventListener("selectstart",R),r.addEventListener("selectend",R),r.addEventListener("squeeze",R),r.addEventListener("squeezestart",R),r.addEventListener("squeezeend",R),r.addEventListener("end",V),r.addEventListener("inputsourceschange",X),!0===A.xrCompatible){t.next=14;break}return t.next=14,i.makeXRCompatible();case 14:return void 0===r.renderState.layers||!1===e.capabilities.isWebGL2?(a={antialias:void 0!==r.renderState.layers||A.antialias,alpha:A.alpha,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:o},d=new XRWebGLLayer(r,i,a),r.updateRenderState({baseLayer:d}),f=new qi(d.framebufferWidth,d.framebufferHeight,{format:st,type:Qe,encoding:e.outputEncoding,stencilBuffer:A.stencil})):(c=null,h=null,p=null,A.depth&&(p=A.stencil?35056:33190,c=A.stencil?Ct:It,h=A.stencil?rt:tt),b={colorFormat:32856,depthFormat:p,scaleFactor:o},I=new XRWebGLBinding(r,i),C=I.createProjectionLayer(b),r.updateRenderState({layers:[C]}),f=new qi(C.textureWidth,C.textureHeight,{format:st,type:Qe,depthTexture:new Wg(C.textureWidth,C.textureHeight,h,void 0,void 0,void 0,void 0,void 0,void 0,c),stencilBuffer:A.stencil,encoding:e.outputEncoding,samples:A.antialias?4:0}),e.properties.get(f).__ignoreDepthValues=C.ignoreDepthValues),f.isXRRenderTarget=!0,this.setFoveation(1),u=null,t.next=20,r.requestReferenceSpace(s);case 20:g=t.sent,N.setContext(r),N.start(),l.isPresenting=!0,l.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var k=new Yi,Y=new Yi;function z(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}a.updateCamera=function(e){if(null!==r){x.near=B.near=G.near=e.near,x.far=B.far=G.far=e.far,w===x.near&&S===x.far||(r.updateRenderState({depthNear:x.near,depthFar:x.far}),w=x.near,S=x.far);var t=e.parent,n=x.cameras;z(x,t);for(var i=0;i<n.length;i++)z(n[i],t);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),e.matrix.copy(x.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);for(var a=e.children,l=0,o=a.length;l<o;l++)a[l].updateMatrixWorld(!0);2===n.length?function(e,t,n){k.setFromMatrixPosition(t.matrixWorld),Y.setFromMatrixPosition(n.matrixWorld);var i=k.distanceTo(Y),a=t.projectionMatrix.elements,l=n.projectionMatrix.elements,r=a[14]/(a[10]-1),o=a[14]/(a[10]+1),g=(a[9]+1)/a[5],s=(a[9]-1)/a[5],u=(a[8]-1)/a[0],c=(l[8]+1)/l[0],I=r*u,C=r*c,d=i/(-u+c),h=d*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(h),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var A=r+d,m=o+d,p=I-h,f=C+(i-h),b=g*o/m*A,v=s*o/m*A;e.projectionMatrix.makePerspective(p,f,b,v,A,m)}(x,G,B):x.projectionMatrix.copy(G.projectionMatrix)}},a.getCamera=function(){return x},a.getFoveation=function(){return null!==C?C.fixedFoveation:null!==d?d.fixedFoveation:void 0},a.setFoveation=function(e){null!==C&&(C.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};var K=null;var N=new nr;return N.setAnimationLoop((function(t,n){if(c=n.getViewerPose(u||g),h=n,null!==c){var i=c.views;null!==d&&(e.setRenderTargetFramebuffer(f,d.framebuffer),e.setRenderTarget(f));var a=!1;i.length!==x.cameras.length&&(x.cameras.length=0,a=!0);for(var l=0;l<i.length;l++){var r=i[l],o=null;if(null!==d)o=d.getViewport(r);else{var s=I.getViewSubImage(C,r);o=s.viewport,0===l&&(e.setRenderTargetTextures(f,s.colorTexture,C.ignoreDepthValues?void 0:s.depthStencilTexture),e.setRenderTarget(f))}var A=Z[l];void 0===A&&((A=new Tl).layers.enable(l),A.viewport=new wi,Z[l]=A),A.matrix.fromArray(r.transform.matrix),A.projectionMatrix.fromArray(r.projectionMatrix),A.viewport.set(o.x,o.y,o.width,o.height),0===l&&x.matrix.copy(A.matrix),!0===a&&x.cameras.push(A)}}for(var m=0;m<b.length;m++){var p=v[m],y=b[m];null!==p&&void 0!==y&&y.update(p,n,u||g)}K&&K(t,n),h=null})),a.setAnimationLoop=function(e){K=e},a.dispose=function(){},a}return R(n)}(_n);function Rg(e,t){function n(n,i){n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===T&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===T&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);var a,l,r=t.get(i).envMap;if(r&&(n.envMap.value=r,n.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;var o=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*o}i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?a=i.map:i.specularMap?a=i.specularMap:i.displacementMap?a=i.displacementMap:i.normalMap?a=i.normalMap:i.bumpMap?a=i.bumpMap:i.roughnessMap?a=i.roughnessMap:i.metalnessMap?a=i.metalnessMap:i.alphaMap?a=i.alphaMap:i.emissiveMap?a=i.emissiveMap:i.clearcoatMap?a=i.clearcoatMap:i.clearcoatNormalMap?a=i.clearcoatNormalMap:i.clearcoatRoughnessMap?a=i.clearcoatRoughnessMap:i.iridescenceMap?a=i.iridescenceMap:i.iridescenceThicknessMap?a=i.iridescenceThicknessMap:i.specularIntensityMap?a=i.specularIntensityMap:i.specularColorMap?a=i.specularColorMap:i.transmissionMap?a=i.transmissionMap:i.thicknessMap?a=i.thicknessMap:i.sheenColorMap?a=i.sheenColorMap:i.sheenRoughnessMap&&(a=i.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uvTransform.value.copy(a.matrix)),i.aoMap?l=i.aoMap:i.lightMap&&(l=i.lightMap),void 0!==l&&(l.isWebGLRenderTarget&&(l=l.texture),!0===l.matrixAutoUpdate&&l.updateMatrix(),n.uv2Transform.value.copy(l.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,a,l,r){i.isMeshBasicMaterial||i.isMeshLambertMaterial?n(e,i):i.isMeshToonMaterial?(n(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(n(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(n(e,i),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===T&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,i,r)):i.isMeshMatcapMaterial?(n(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?n(e,i):i.isMeshDistanceMaterial?(n(e,i),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?n(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var a;t.map?a=t.map:t.alphaMap&&(a=t.alphaMap);void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}(e,i,a,l):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Vg(e,t,n,i){var a={},l={},r=[],o=n.isWebGL2?e.getParameter(35375):0;function g(e,t,n){var i=e.value;if(void 0===n[t])return n[t]="number"===typeof i?i:i.clone(),!0;if("number"===typeof i){if(n[t]!==i)return n[t]=i,!0}else{var a=n[t];if(!1===a.equals(i))return a.copy(i),!0}return!1}function s(e){var t=e.value,n={boundary:0,storage:0};return"number"===typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function u(t){var n=t.target;n.removeEventListener("dispose",u);var i=r.indexOf(n.__bindingPointIndex);r.splice(i,1),e.deleteBuffer(a[n.id]),delete a[n.id],delete l[n.id]}return{bind:function(e,t){var n=t.program;i.uniformBlockBinding(e,n)},update:function(n,c){var I=a[n.id];void 0===I&&(!function(e){for(var t=e.uniforms,n=0,i=16,a=0,l=0,r=t.length;l<r;l++){var o=t[l],g=s(o);if(o.__data=new Float32Array(g.storage/Float32Array.BYTES_PER_ELEMENT),o.__offset=n,l>0)0!==(a=n%i)&&i-a-g.boundary<0&&(n+=i-a,o.__offset=n);n+=g.storage}(a=n%i)>0&&(n+=i-a);e.__size=n,e.__cache={}}(n),I=function(t){var n=function(){for(var e=0;e<o;e++)if(-1===r.indexOf(e))return r.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var i=e.createBuffer(),a=t.__size,l=t.usage;return e.bindBuffer(35345,i),e.bufferData(35345,a,l),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}(n),a[n.id]=I,n.addEventListener("dispose",u));var C=c.program;i.updateUBOMapping(n,C);var d=t.render.frame;l[n.id]!==d&&(!function(t){var n=a[t.id],i=t.uniforms,l=t.__cache;e.bindBuffer(35345,n);for(var r=0,o=i.length;r<o;r++){var s=i[r];if(!0===g(s,r,l)){var u=s.value,c=s.__offset;"number"===typeof u?(s.__data[0]=u,e.bufferSubData(35345,c,s.__data)):(s.value.isMatrix3?(s.__data[0]=s.value.elements[0],s.__data[1]=s.value.elements[1],s.__data[2]=s.value.elements[2],s.__data[3]=s.value.elements[0],s.__data[4]=s.value.elements[3],s.__data[5]=s.value.elements[4],s.__data[6]=s.value.elements[5],s.__data[7]=s.value.elements[0],s.__data[8]=s.value.elements[6],s.__data[9]=s.value.elements[7],s.__data[10]=s.value.elements[8],s.__data[11]=s.value.elements[0]):u.toArray(s.__data),e.bufferSubData(35345,c,s.__data))}}e.bindBuffer(35345,null)}(n),l[n.id]=d)},dispose:function(){for(var t in a)e.deleteBuffer(a[t]);r=[],a={},l={}}}}function Xg(){var e=si("canvas");return e.style.display="block",e}function kg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n=void 0!==e.canvas?e.canvas:Xg(),i=void 0!==e.context?e.context:null,a=void 0===e.depth||e.depth,l=void 0===e.stencil||e.stencil,r=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,g=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,s=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==i?i.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var c=null,I=null,C=[],d=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=rn,this.physicallyCorrectLights=!1,this.toneMapping=Ze,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});var h=this,A=!1,m=0,p=0,f=null,b=-1,v=null,y=new wi,G=new wi,B=null,Z=n.width,x=n.height,w=1,q=null,W=null,S=new wi(0,0,Z,x),R=new wi(0,0,Z,x),X=!1,k=new tr,Y=!1,z=!1,K=null,N=new Ia,H=new ai,M=new Yi,F={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function L(){return null===f?w:1}var J,U,D,P,Q,O,j,$,ee,te,ne,ie,ae,le,re,oe,ge,se,ue,ce,Ie,Ce,de,he,Ae=i;function me(e,t){for(var i=0;i<e.length;i++){var a=e[i],l=n.getContext(a,t);if(null!==l)return l}return null}try{var pe={alpha:!0,depth:a,stencil:l,antialias:r,premultipliedAlpha:o,preserveDrawingBuffer:g,powerPreference:s,failIfMajorPerformanceCaveat:u};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(V)),n.addEventListener("webglcontextlost",ye,!1),n.addEventListener("webglcontextrestored",Ge,!1),n.addEventListener("webglcontextcreationerror",Be,!1),null===Ae){var fe=["webgl2","webgl","experimental-webgl"];if(!0===h.isWebGL1Renderer&&fe.shift(),null===(Ae=me(fe,pe)))throw me(fe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ae.getShaderPrecisionFormat&&(Ae.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Te){throw console.error("THREE.WebGLRenderer: "+Te.message),Te}function be(){J=new Wr(Ae),U=new cr(Ae,J,e),J.init(U),Ce=new Bg(Ae,J,U),D=new yg(Ae,J,U),P=new Vr,Q=new gg,O=new Gg(Ae,J,D,Q,U,Ce,P),j=new Cr(h),$=new qr(h),ee=new ir(Ae,U),de=new sr(Ae,J,ee,U),te=new Sr(Ae,ee,P,de),ne=new zr(Ae,te,ee,P),ue=new Yr(Ae,U,O),oe=new Ir(Q),ie=new og(h,j,$,J,U,de,oe),ae=new Rg(h,Q),le=new Ig,re=new pg(J,U),se=new gr(h,j,D,ne,t,o),ge=new vg(h,ne,U),he=new Vg(Ae,P,U,D),ce=new ur(Ae,J,P,U),Ie=new Rr(Ae,J,P,U),P.programs=ie.programs,h.capabilities=U,h.extensions=J,h.properties=Q,h.renderLists=le,h.shadowMap=ge,h.state=D,h.info=P}be();var ve=new Sg(h,Ae);function ye(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Ge(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;var e=P.autoReset,t=ge.enabled,n=ge.autoUpdate,i=ge.needsUpdate,a=ge.type;be(),P.autoReset=e,ge.enabled=t,ge.autoUpdate=n,ge.needsUpdate=i,ge.type=a}function Be(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function xe(e){var t=e.target;t.removeEventListener("dispose",xe),we(t)}function we(e){qe(e),Q.remove(e)}function qe(e){var t=Q.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))}this.xr=ve,this.getContext=function(){return Ae},this.getContextAttributes=function(){return Ae.getContextAttributes()},this.forceContextLoss=function(){var e=J.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=J.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return w},this.setPixelRatio=function(e){void 0!==e&&(w=e,this.setSize(Z,x,!1))},this.getSize=function(e){return e.set(Z,x)},this.setSize=function(e,t,i){ve.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Z=e,x=t,n.width=Math.floor(e*w),n.height=Math.floor(t*w),!1!==i&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(Z*w,x*w).floor()},this.setDrawingBufferSize=function(e,t,i){Z=e,x=t,w=i,n.width=Math.floor(e*i),n.height=Math.floor(t*i),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(y)},this.getViewport=function(e){return e.copy(S)},this.setViewport=function(e,t,n,i){e.isVector4?S.set(e.x,e.y,e.z,e.w):S.set(e,t,n,i),D.viewport(y.copy(S).multiplyScalar(w).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,n,i){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,i),D.scissor(G.copy(R).multiplyScalar(w).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(e){D.setScissorTest(X=e)},this.setOpaqueSort=function(e){q=e},this.setTransparentSort=function(e){W=e},this.getClearColor=function(e){return e.copy(se.getClearColor())},this.setClearColor=function(){se.setClearColor.apply(se,arguments)},this.getClearAlpha=function(){return se.getClearAlpha()},this.setClearAlpha=function(){se.setClearAlpha.apply(se,arguments)},this.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;e&&(i|=16384),t&&(i|=256),n&&(i|=1024),Ae.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ye,!1),n.removeEventListener("webglcontextrestored",Ge,!1),n.removeEventListener("webglcontextcreationerror",Be,!1),le.dispose(),re.dispose(),Q.dispose(),j.dispose(),$.dispose(),ne.dispose(),de.dispose(),he.dispose(),ie.dispose(),ve.dispose(),ve.removeEventListener("sessionstart",Re),ve.removeEventListener("sessionend",Ve),K&&(K.dispose(),K=null),Xe.stop()},this.renderBufferDirect=function(e,t,n,i,a,l){null===t&&(t=F);var r=a.isMesh&&a.matrixWorld.determinant()<0,o=Fe(e,t,n,i,a);D.setMaterial(i,r);var g=n.index,s=n.attributes.position;if(null===g){if(void 0===s||0===s.count)return}else if(0===g.count)return;var u,c=1;!0===i.wireframe&&(g=te.getWireframeAttribute(n),c=2),de.setup(a,i,o,n,g);var I=ce;null!==g&&(u=ee.get(g),(I=Ie).setIndex(u));var C=null!==g?g.count:s.count,d=n.drawRange.start*c,h=n.drawRange.count*c,A=null!==l?l.start*c:0,m=null!==l?l.count*c:1/0,p=Math.max(d,A),f=Math.min(C,d+h,A+m)-1,b=Math.max(0,f-p+1);if(0!==b){if(a.isMesh)!0===i.wireframe?(D.setLineWidth(i.wireframeLinewidth*L()),I.setMode(1)):I.setMode(4);else if(a.isLine){var v=i.linewidth;void 0===v&&(v=1),D.setLineWidth(v*L()),a.isLineSegments?I.setMode(1):a.isLineLoop?I.setMode(2):I.setMode(3)}else a.isPoints?I.setMode(0):a.isSprite&&I.setMode(4);if(a.isInstancedMesh)I.renderInstances(p,b,a.count);else if(n.isInstancedBufferGeometry){var y=Math.min(n.instanceCount,n._maxInstanceCount);I.renderInstances(p,b,y)}else I.render(p,b)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===E?(e.side=T,e.needsUpdate=!0,He(e,t,n),e.side=_,e.needsUpdate=!0,He(e,t,n),e.side=E):He(e,t,n)}(I=re.get(e)).init(),d.push(I),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(I.pushLight(e),e.castShadow&&I.pushShadow(e))})),I.setupLights(h.physicallyCorrectLights),e.traverse((function(t){var i=t.material;if(i)if(Array.isArray(i))for(var a=0;a<i.length;a++){n(i[a],e,t)}else n(i,e,t)})),d.pop(),I=null};var We=null;function Se(e){We&&We(e)}function Re(){Xe.stop()}function Ve(){Xe.start()}var Xe=new nr;function ke(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)I.pushLight(e),e.castShadow&&I.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){i&&M.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);var a=ne.update(e),l=e.material;l.visible&&c.push(e,a,l,n,M.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==P.render.frame&&(e.skeleton.update(),e.skeleton.frame=P.render.frame),!e.frustumCulled||k.intersectsObject(e))){i&&M.setFromMatrixPosition(e.matrixWorld).applyMatrix4(N);var r=ne.update(e),o=e.material;if(Array.isArray(o))for(var g=r.groups,s=0,u=g.length;s<u;s++){var C=g[s],d=o[C.materialIndex];d&&d.visible&&c.push(e,r,d,n,M.z,C)}else o.visible&&c.push(e,r,o,n,M.z,null)}for(var h=e.children,A=0,m=h.length;A<m;A++)ke(h[A],t,n,i)}}function Ye(e,t,n,i){var a=e.opaque,l=e.transmissive,r=e.transparent;I.setupLightsView(n),l.length>0&&ze(a,t,n),i&&D.viewport(y.copy(i)),a.length>0&&Ke(a,t,n),l.length>0&&Ke(l,t,n),r.length>0&&Ke(r,t,n),D.buffers.depth.setTest(!0),D.buffers.depth.setMask(!0),D.buffers.color.setMask(!0),D.setPolygonOffset(!1)}function ze(e,t,n){var i=U.isWebGL2;null===K&&(K=new qi(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?it:Qe,minFilter:De,samples:i&&!0===r?4:0})),h.getDrawingBufferSize(H),i?K.setSize(H.x,H.y):K.setSize(ei(H.x),ei(H.y));var a=h.getRenderTarget();h.setRenderTarget(K),h.clear();var l=h.toneMapping;h.toneMapping=Ze,Ke(e,t,n),h.toneMapping=l,O.updateMultisampleRenderTarget(K),O.updateRenderTargetMipmap(K),h.setRenderTarget(a)}function Ke(e,t,n){for(var i=!0===t.isScene?t.overrideMaterial:null,a=0,l=e.length;a<l;a++){var r=e[a],o=r.object,g=r.geometry,s=null===i?r.material:i,u=r.group;o.layers.test(n.layers)&&Ne(o,t,n,g,s,u)}}function Ne(e,t,n,i,a,l){e.onBeforeRender(h,t,n,i,a,l),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),a.onBeforeRender(h,t,n,i,e,l),!0===a.transparent&&a.side===E?(a.side=T,a.needsUpdate=!0,h.renderBufferDirect(n,t,i,a,e,l),a.side=_,a.needsUpdate=!0,h.renderBufferDirect(n,t,i,a,e,l),a.side=E):h.renderBufferDirect(n,t,i,a,e,l),e.onAfterRender(h,t,n,i,a,l)}function He(e,t,n){!0!==t.isScene&&(t=F);var i=Q.get(e),a=I.state.lights,l=I.state.shadowsArray,r=a.state.version,o=ie.getParameters(e,a.state,l,t,n),g=ie.getProgramCacheKey(o),s=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?$:j).get(e.envMap||i.environment),void 0===s&&(e.addEventListener("dispose",xe),s=new Map,i.programs=s);var u=s.get(g);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===r)return Me(e,o),u}else o.uniforms=ie.getUniforms(e),e.onBuild(n,o,h),e.onBeforeCompile(o,h),u=ie.acquireProgram(o,g),s.set(g,u),i.uniforms=o.uniforms;var c=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(c.clippingPlanes=oe.uniform),Me(e,o),i.needsLights=_e(e),i.lightsStateVersion=r,i.needsLights&&(c.ambientLightColor.value=a.state.ambient,c.lightProbe.value=a.state.probe,c.directionalLights.value=a.state.directional,c.directionalLightShadows.value=a.state.directionalShadow,c.spotLights.value=a.state.spot,c.spotLightShadows.value=a.state.spotShadow,c.rectAreaLights.value=a.state.rectArea,c.ltc_1.value=a.state.rectAreaLTC1,c.ltc_2.value=a.state.rectAreaLTC2,c.pointLights.value=a.state.point,c.pointLightShadows.value=a.state.pointShadow,c.hemisphereLights.value=a.state.hemi,c.directionalShadowMap.value=a.state.directionalShadowMap,c.directionalShadowMatrix.value=a.state.directionalShadowMatrix,c.spotShadowMap.value=a.state.spotShadowMap,c.spotLightMatrix.value=a.state.spotLightMatrix,c.spotLightMap.value=a.state.spotLightMap,c.pointShadowMap.value=a.state.pointShadowMap,c.pointShadowMatrix.value=a.state.pointShadowMatrix);var C=u.getUniforms(),d=Fo.seqWithValue(C.seq,c);return i.currentProgram=u,i.uniformsList=d,u}function Me(e,t){var n=Q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function Fe(e,t,n,i,a){!0!==t.isScene&&(t=F),O.resetTextureUnits();var l=t.fog,r=i.isMeshStandardMaterial?t.environment:null,o=null===f?h.outputEncoding:!0===f.isXRRenderTarget?f.texture.encoding:rn,g=(i.isMeshStandardMaterial?$:j).get(i.envMap||r),s=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!i.normalMap&&!!n.attributes.tangent,c=!!n.morphAttributes.position,C=!!n.morphAttributes.normal,d=!!n.morphAttributes.color,A=i.toneMapped?h.toneMapping:Ze,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,p=void 0!==m?m.length:0,y=Q.get(i),G=I.state.lights;if(!0===Y&&(!0===z||e!==v)){var B=e===v&&i.id===b;oe.setState(i,e,B)}var Z=!1;i.version===y.__version?y.needsLights&&y.lightsStateVersion!==G.state.version||y.outputEncoding!==o||a.isInstancedMesh&&!1===y.instancing?Z=!0:a.isInstancedMesh||!0!==y.instancing?a.isSkinnedMesh&&!1===y.skinning?Z=!0:a.isSkinnedMesh||!0!==y.skinning?y.envMap!==g||!0===i.fog&&y.fog!==l?Z=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===oe.numPlanes&&y.numIntersection===oe.numIntersection?(y.vertexAlphas!==s||y.vertexTangents!==u||y.morphTargets!==c||y.morphNormals!==C||y.morphColors!==d||y.toneMapping!==A||!0===U.isWebGL2&&y.morphTargetsCount!==p)&&(Z=!0):Z=!0:Z=!0:Z=!0:(Z=!0,y.__version=i.version);var q=y.currentProgram;!0===Z&&(q=He(i,t,a));var W=!1,S=!1,R=!1,V=q.getUniforms(),X=y.uniforms;if(D.useProgram(q.program)&&(W=!0,S=!0,R=!0),i.id!==b&&(b=i.id,S=!0),W||v!==e){if(V.setValue(Ae,"projectionMatrix",e.projectionMatrix),U.logarithmicDepthBuffer&&V.setValue(Ae,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),v!==e&&(v=e,S=!0,R=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){var k=V.map.cameraPosition;void 0!==k&&k.setValue(Ae,M.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&V.setValue(Ae,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||a.isSkinnedMesh)&&V.setValue(Ae,"viewMatrix",e.matrixWorldInverse)}if(a.isSkinnedMesh){V.setOptional(Ae,a,"bindMatrix"),V.setOptional(Ae,a,"bindMatrixInverse");var N=a.skeleton;N&&(U.floatVertexTextures?(null===N.boneTexture&&N.computeBoneTexture(),V.setValue(Ae,"boneTexture",N.boneTexture,O),V.setValue(Ae,"boneTextureSize",N.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var H=n.morphAttributes;if((void 0!==H.position||void 0!==H.normal||void 0!==H.color&&!0===U.isWebGL2)&&ue.update(a,n,i,q),(S||y.receiveShadow!==a.receiveShadow)&&(y.receiveShadow=a.receiveShadow,V.setValue(Ae,"receiveShadow",a.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(X.envMap.value=g,X.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1),S&&(V.setValue(Ae,"toneMappingExposure",h.toneMappingExposure),y.needsLights&&Le(X,R),l&&!0===i.fog&&ae.refreshFogUniforms(X,l),ae.refreshMaterialUniforms(X,i,w,x,K),Fo.upload(Ae,y.uniformsList,X,O)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Fo.upload(Ae,y.uniformsList,X,O),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&V.setValue(Ae,"center",a.center),V.setValue(Ae,"modelViewMatrix",a.modelViewMatrix),V.setValue(Ae,"normalMatrix",a.normalMatrix),V.setValue(Ae,"modelMatrix",a.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial)for(var L=i.uniformsGroups,_=0,T=L.length;_<T;_++)if(U.isWebGL2){var E=L[_];he.update(E,q),he.bind(E,q)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return q}function Le(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function _e(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Xe.setAnimationLoop(Se),"undefined"!==typeof self&&Xe.setContext(self),this.setAnimationLoop=function(e){We=e,ve.setAnimationLoop(e),null===e?Xe.stop():Xe.start()},ve.addEventListener("sessionstart",Re),ve.addEventListener("sessionend",Ve),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==A){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===ve.enabled&&!0===ve.isPresenting&&(!0===ve.cameraAutoUpdate&&ve.updateCamera(t),t=ve.getCamera()),!0===e.isScene&&e.onBeforeRender(h,e,t,f),(I=re.get(e,d.length)).init(),d.push(I),N.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromProjectionMatrix(N),z=this.localClippingEnabled,Y=oe.init(this.clippingPlanes,z,t),(c=le.get(e,C.length)).init(),C.push(c),ke(e,t,0,h.sortObjects),c.finish(),!0===h.sortObjects&&c.sort(q,W),!0===Y&&oe.beginShadows();var n=I.state.shadowsArray;if(ge.render(n,e,t),!0===Y&&oe.endShadows(),!0===this.info.autoReset&&this.info.reset(),se.render(c,e),I.setupLights(h.physicallyCorrectLights),t.isArrayCamera)for(var i=t.cameras,a=0,l=i.length;a<l;a++){var r=i[a];Ye(c,e,r,r.viewport)}else Ye(c,e,t);null!==f&&(O.updateMultisampleRenderTarget(f),O.updateRenderTargetMipmap(f)),!0===e.isScene&&e.onAfterRender(h,e,t),de.resetDefaultState(),b=-1,v=null,d.pop(),I=d.length>0?d[d.length-1]:null,C.pop(),c=C.length>0?C[C.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return m},this.getActiveMipmapLevel=function(){return p},this.getRenderTarget=function(){return f},this.setRenderTargetTextures=function(e,t,n){Q.get(e.texture).__webglTexture=t,Q.get(e.depthTexture).__webglTexture=n;var i=Q.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=Q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;f=e,m=t,p=n;var i=!0;if(e){var a=Q.get(e);void 0!==a.__useDefaultFramebuffer?(D.bindFramebuffer(36160,null),i=!1):void 0===a.__webglFramebuffer?O.setupRenderTarget(e):a.__hasExternalTextures&&O.rebindTextures(e,Q.get(e.texture).__webglTexture,Q.get(e.depthTexture).__webglTexture)}var l=null,r=!1,o=!1;if(e){var g=e.texture;(g.isData3DTexture||g.isDataArrayTexture)&&(o=!0);var s=Q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(l=s[t],r=!0):l=U.isWebGL2&&e.samples>0&&!1===O.useMultisampledRTT(e)?Q.get(e).__webglMultisampledFramebuffer:s,y.copy(e.viewport),G.copy(e.scissor),B=e.scissorTest}else y.copy(S).multiplyScalar(w).floor(),G.copy(R).multiplyScalar(w).floor(),B=X;var u=D.bindFramebuffer(36160,l);if(u&&U.drawBuffers&&i&&D.drawBuffers(e,l),D.viewport(y),D.scissor(G),D.setScissorTest(B),r){var c=Q.get(e.texture);Ae.framebufferTexture2D(36160,36064,34069+t,c.__webglTexture,n)}else if(o){var I=Q.get(e.texture),C=t||0;Ae.framebufferTextureLayer(36160,36064,I.__webglTexture,n||0,C)}b=-1},this.readRenderTargetPixels=function(e,t,n,i,a,l,r){if(e&&e.isWebGLRenderTarget){var o=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==r&&(o=o[r]),o){D.bindFramebuffer(36160,o);try{var g=e.texture,s=g.format,u=g.type;if(s!==st&&Ce.convert(s)!==Ae.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var c=u===it&&(J.has("EXT_color_buffer_half_float")||U.isWebGL2&&J.has("EXT_color_buffer_float"));if(u!==Qe&&Ce.convert(u)!==Ae.getParameter(35738)&&(u!==nt||!(U.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-a&&Ae.readPixels(t,n,i,a,Ce.convert(s),Ce.convert(u),l)}finally{var I=null!==f?Q.get(f).__webglFramebuffer:null;D.bindFramebuffer(36160,I)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.pow(2,-n),a=Math.floor(t.image.width*i),l=Math.floor(t.image.height*i);O.setTexture2D(t,0),Ae.copyTexSubImage2D(3553,n,0,0,e.x,e.y,a,l),D.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.image.width,l=t.image.height,r=Ce.convert(n.format),o=Ce.convert(n.type);O.setTexture2D(n,0),Ae.pixelStorei(37440,n.flipY),Ae.pixelStorei(37441,n.premultiplyAlpha),Ae.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?Ae.texSubImage2D(3553,i,e.x,e.y,a,l,r,o,t.image.data):t.isCompressedTexture?Ae.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,r,t.mipmaps[0].data):Ae.texSubImage2D(3553,i,e.x,e.y,r,o,t.image),0===i&&n.generateMipmaps&&Ae.generateMipmap(3553),D.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(h.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var l,r=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,g=e.max.z-e.min.z+1,s=Ce.convert(i.format),u=Ce.convert(i.type);if(i.isData3DTexture)O.setTexture3D(i,0),l=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");O.setTexture2DArray(i,0),l=35866}Ae.pixelStorei(37440,i.flipY),Ae.pixelStorei(37441,i.premultiplyAlpha),Ae.pixelStorei(3317,i.unpackAlignment);var c=Ae.getParameter(3314),I=Ae.getParameter(32878),C=Ae.getParameter(3316),d=Ae.getParameter(3315),A=Ae.getParameter(32877),m=n.isCompressedTexture?n.mipmaps[0]:n.image;Ae.pixelStorei(3314,m.width),Ae.pixelStorei(32878,m.height),Ae.pixelStorei(3316,e.min.x),Ae.pixelStorei(3315,e.min.y),Ae.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?Ae.texSubImage3D(l,a,t.x,t.y,t.z,r,o,g,s,u,m.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ae.compressedTexSubImage3D(l,a,t.x,t.y,t.z,r,o,g,s,m.data)):Ae.texSubImage3D(l,a,t.x,t.y,t.z,r,o,g,s,u,m),Ae.pixelStorei(3314,c),Ae.pixelStorei(32878,I),Ae.pixelStorei(3316,C),Ae.pixelStorei(3315,d),Ae.pixelStorei(32877,A),0===a&&i.generateMipmaps&&Ae.generateMipmap(l),D.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?O.setTextureCube(e,0):e.isData3DTexture?O.setTexture3D(e,0):e.isDataArrayTexture?O.setTexture2DArray(e,0):O.setTexture2D(e,0),D.unbindTexture()},this.resetState=function(){m=0,p=0,f=null,D.reset(),de.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var Yg=function(e){G(n,e);var t=x(n);function n(){return W(this,n),t.apply(this,arguments)}return R(n)}(kg);Yg.prototype.isWebGL1Renderer=!0;var zg,Kg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;W(this,e),this.isFogExp2=!0,this.name="",this.color=new vi(t),this.density=n}return R(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}(),Ng=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;W(this,e),this.isFog=!0,this.name="",this.color=new vi(t),this.near=n,this.far=i}return R(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),Hg=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:y(e)})),e}return R(n,[{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=v(u(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),n}(Ka),Mg=function(){function e(t,n){W(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Rn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Dn()}return R(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[n+i];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),Fg=new Yi,Lg=function(){function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];W(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=i,this.normalized=!0===a}return R(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Fg.fromBufferAttribute(this,t),Fg.applyMatrix4(e),this.setXYZ(t,Fg.x,Fg.y,Fg.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Fg.fromBufferAttribute(this,t),Fg.applyNormalMatrix(e),this.setXYZ(t,Fg.x,Fg.y,Fg.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Fg.fromBufferAttribute(this,t),Fg.transformDirection(e),this.setXYZ(t,Fg.x,Fg.y,Fg.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ti(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ti(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ti(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ti(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array),i=ni(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array),i=ni(i,this.array),a=ni(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=a,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");for(var n=[],i=0;i<this.count;i++)for(var a=i*this.data.stride+this.offset,l=0;l<this.itemSize;l++)n.push(this.data.array[a+l]);return new el(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,a=0;a<this.itemSize;a++)t.push(this.data.array[i+a]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),_g=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isSpriteMaterial=!0,i.type="SpriteMaterial",i.color=new vi(16777215),i.map=null,i.alphaMap=null,i.rotation=0,i.sizeAttenuation=!0,i.transparent=!0,i.fog=!0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Qa),Tg=new Yi,Eg=new Yi,Jg=new Yi,Ug=new ai,Dg=new ai,Pg=new Ia,Qg=new Yi,Og=new Yi,jg=new Yi,$g=new ai,es=new ai,ts=new ai,ns=function(e){G(n,e);var t=x(n);function n(e){var i;if(W(this,n),(i=t.call(this)).isSprite=!0,i.type="Sprite",void 0===zg){zg=new pl;var a=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),l=new Mg(a,5);zg.setIndex([0,1,2,0,2,3]),zg.setAttribute("position",new Lg(l,3,0,!1)),zg.setAttribute("uv",new Lg(l,2,3,!1))}return i.geometry=zg,i.material=void 0!==e?e:new _g,i.center=new ai(.5,.5),i}return R(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Eg.setFromMatrixScale(this.matrixWorld),Pg.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Jg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Eg.multiplyScalar(-Jg.z);var n,i,a=this.material.rotation;0!==a&&(i=Math.cos(a),n=Math.sin(a));var l=this.center;is(Qg.set(-.5,-.5,0),Jg,l,Eg,n,i),is(Og.set(.5,-.5,0),Jg,l,Eg,n,i),is(jg.set(.5,.5,0),Jg,l,Eg,n,i),$g.set(0,0),es.set(1,0),ts.set(1,1);var r=e.ray.intersectTriangle(Qg,Og,jg,!1,Tg);if(null!==r||(is(Og.set(-.5,.5,0),Jg,l,Eg,n,i),es.set(0,1),null!==(r=e.ray.intersectTriangle(Qg,jg,Og,!1,Tg)))){var o=e.ray.origin.distanceTo(Tg);o<e.near||o>e.far||t.push({distance:o,point:Tg.clone(),uv:Da.getUV(Tg,Qg,Og,jg,$g,es,ts,new ai),face:null,object:this})}}},{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Ka);function is(e,t,n,i,a,l){Ug.subVectors(e,n).addScalar(.5).multiply(i),void 0!==a?(Dg.x=l*Ug.x-a*Ug.y,Dg.y=a*Ug.x+l*Ug.y):Dg.copy(Ug),e.copy(t),e.x+=Dg.x,e.y+=Dg.y,e.applyMatrix4(Pg)}var as=new Yi,ls=new Yi,rs=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties(y(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return R(n,[{key:"copy",value:function(e){v(u(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,i=0,a=t.length;i<a;i++){var l=t[i];this.addLevel(l.object.clone(),l.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n,i=this.levels;for(n=0;n<i.length&&!(t<i[n].distance);n++);return i.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){as.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(as);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){as.setFromMatrixPosition(e.matrixWorld),ls.setFromMatrixPosition(this.matrixWorld);var n,i,a=as.distanceTo(ls)/e.zoom;for(t[0].object.visible=!0,n=1,i=t.length;n<i&&a>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=v(u(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var i=this.levels,a=0,l=i.length;a<l;a++){var r=i[a];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}]),n}(Ka),os=new Yi,gs=new wi,ss=new wi,us=new Yi,cs=new Ia,Is=function(e){G(n,e);var t=x(n);function n(e,i){var a;return W(this,n),(a=t.call(this,e,i)).isSkinnedMesh=!0,a.type="SkinnedMesh",a.bindMode="attached",a.bindMatrix=new Ia,a.bindMatrixInverse=new Ia,a}return R(n,[{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new wi,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);var a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){v(u(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,i=this.geometry;gs.fromBufferAttribute(i.attributes.skinIndex,e),ss.fromBufferAttribute(i.attributes.skinWeight,e),os.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var a=0;a<4;a++){var l=ss.getComponent(a);if(0!==l){var r=gs.getComponent(a);cs.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(us.copy(os).applyMatrix4(cs),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(zl),Cs=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return R(n)}(Ka),ds=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,g=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Me,I=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Me,C=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0;return W(this,n),(e=t.call(this,null,g,s,u,c,I,r,o,C,d)).isDataTexture=!0,e.image={data:i,width:a,height:l},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return R(n)}(xi),hs=new Ia,As=new Ia,ms=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];W(this,e),this.uuid=Dn(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return R(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ia)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new Ia;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var i=0,a=this.bones.length;i<a;i++){var l=this.bones[i];l&&(l.parent&&l.parent.isBone?(l.matrix.copy(l.parent.matrixWorld).invert(),l.matrix.multiply(l.matrixWorld)):l.matrix.copy(l.matrixWorld),l.matrix.decompose(l.position,l.quaternion,l.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,a=0,l=e.length;a<l;a++){var r=e[a]?e[a].matrixWorld:As;hs.multiplyMatrices(r,t[a]),hs.toArray(n,16*a)}null!==i&&(i.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=$n(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new ds(t,e,e,st,nt);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,i=e.bones.length;n<i;n++){var a=e.bones[n],l=t[a];void 0===l&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),l=new Cs),this.bones.push(l),this.boneInverses.push((new Ia).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,i=0,a=t.length;i<a;i++){var l=t[i];e.bones.push(l.uuid);var r=n[i];e.boneInverses.push(r.toArray())}return e}}]),e}(),ps=function(e){G(n,e);var t=x(n);function n(e,i,a){var l,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return W(this,n),(l=t.call(this,e,i,a)).isInstancedBufferAttribute=!0,l.meshPerAttribute=r,l}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(el),fs=new Ia,bs=new Ia,vs=[],ys=new zl,Gs=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;return W(this,n),(l=t.call(this,e,i)).isInstancedMesh=!0,l.instanceMatrix=new ps(new Float32Array(16*a),16),l.instanceColor=null,l.count=a,l.frustumCulled=!1,l}return R(n,[{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,i=this.count;if(ys.geometry=this.geometry,ys.material=this.material,void 0!==ys.material)for(var a=0;a<i;a++){this.getMatrixAt(a,fs),bs.multiplyMatrices(n,fs),ys.matrixWorld=bs,ys.raycast(e,vs);for(var l=0,r=vs.length;l<r;l++){var o=vs[l];o.instanceId=a,o.object=this,t.push(o)}vs.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new ps(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(zl),Bs=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isLineBasicMaterial=!0,i.type="LineBasicMaterial",i.color=new vi(16777215),i.linewidth=1,i.linecap="round",i.linejoin="round",i.fog=!0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(Qa),Zs=new Yi,xs=new Yi,ws=new Ia,qs=new ca,Ws=new ia,Ss=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pl,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Bs;return W(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=i,e.material=a,e.updateMorphTargets(),e}return R(n,[{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,a=t.count;i<a;i++)Zs.fromBufferAttribute(t,i-1),xs.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Zs.distanceTo(xs);e.setAttribute("lineDistance",new sl(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,l=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ws.copy(n.boundingSphere),Ws.applyMatrix4(i),Ws.radius+=a,!1!==e.ray.intersectsSphere(Ws)){ws.copy(i).invert(),qs.copy(e.ray).applyMatrix4(ws);var r=a/((this.scale.x+this.scale.y+this.scale.z)/3),o=r*r,g=new Yi,s=new Yi,u=new Yi,c=new Yi,I=this.isLineSegments?2:1,C=n.index,d=n.attributes.position;if(null!==C)for(var h=Math.max(0,l.start),A=Math.min(C.count,l.start+l.count)-1;h<A;h+=I){var m=C.getX(h),p=C.getX(h+1);if(g.fromBufferAttribute(d,m),s.fromBufferAttribute(d,p),!(qs.distanceSqToSegment(g,s,c,u)>o)){c.applyMatrix4(this.matrixWorld);var f=e.ray.origin.distanceTo(c);f<e.near||f>e.far||t.push({distance:f,point:u.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this})}}else for(var b=Math.max(0,l.start),v=Math.min(d.count,l.start+l.count)-1;b<v;b+=I){if(g.fromBufferAttribute(d,b),s.fromBufferAttribute(d,b+1),!(qs.distanceSqToSegment(g,s,c,u)>o)){c.applyMatrix4(this.matrixWorld);var y=e.ray.origin.distanceTo(c);y<e.near||y>e.far||t.push({distance:y,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=n.length;i<a;i++){var l=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=i}}}}}]),n}(Ka),Rs=new Yi,Vs=new Yi,Xs=function(e){G(n,e);var t=x(n);function n(e,i){var a;return W(this,n),(a=t.call(this,e,i)).isLineSegments=!0,a.type="LineSegments",a}return R(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],i=0,a=t.count;i<a;i+=2)Rs.fromBufferAttribute(t,i),Vs.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Rs.distanceTo(Vs);e.setAttribute("lineDistance",new sl(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(Ss),ks=function(e){G(n,e);var t=x(n);function n(e,i){var a;return W(this,n),(a=t.call(this,e,i)).isLineLoop=!0,a.type="LineLoop",a}return R(n)}(Ss),Ys=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isPointsMaterial=!0,i.type="PointsMaterial",i.color=new vi(16777215),i.map=null,i.alphaMap=null,i.size=1,i.sizeAttenuation=!0,i.fog=!0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Qa),zs=new Ia,Ks=new ca,Ns=new ia,Hs=new Yi,Ms=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pl,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ys;return W(this,n),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=i,e.material=a,e.updateMorphTargets(),e}return R(n,[{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,l=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ns.copy(n.boundingSphere),Ns.applyMatrix4(i),Ns.radius+=a,!1!==e.ray.intersectsSphere(Ns)){zs.copy(i).invert(),Ks.copy(e.ray).applyMatrix4(zs);var r=a/((this.scale.x+this.scale.y+this.scale.z)/3),o=r*r,g=n.index,s=n.attributes.position;if(null!==g)for(var u=Math.max(0,l.start),c=Math.min(g.count,l.start+l.count);u<c;u++){var I=g.getX(u);Hs.fromBufferAttribute(s,I),Fs(Hs,I,o,i,e,t,this)}else for(var C=Math.max(0,l.start),d=Math.min(s.count,l.start+l.count);C<d;C++)Hs.fromBufferAttribute(s,C),Fs(Hs,C,o,i,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=n.length;i<a;i++){var l=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=i}}}}}]),n}(Ka);function Fs(e,t,n,i,a,l,r){var o=Ks.distanceSqToPoint(e);if(o<n){var g=new Yi;Ks.closestPointToPoint(e,g),g.applyMatrix4(i);var s=a.ray.origin.distanceTo(g);if(s<a.near||s>a.far)return;l.push({distance:s,distanceToRay:Math.sqrt(o),point:g,index:t,face:null,object:r})}}var Ls=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o,g,s,u){var c;W(this,n),(c=t.call(this,e,i,a,l,r,o,g,s,u)).isVideoTexture=!0,c.minFilter=void 0!==o?o:Ee,c.magFilter=void 0!==r?r:Ee,c.generateMipmaps=!1;var I=y(c);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){I.needsUpdate=!0,e.requestVideoFrameCallback(t)})),c}return R(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(xi),_s=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;return W(this,n),(l=t.call(this,{width:e,height:i})).isFramebufferTexture=!0,l.format=a,l.magFilter=Me,l.minFilter=Me,l.generateMipmaps=!1,l.needsUpdate=!0,l}return R(n)}(xi),Ts=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o,g,s,u,c,I,C){var d;return W(this,n),(d=t.call(this,null,o,g,s,u,c,l,r,I,C)).isCompressedTexture=!0,d.image={width:i,height:a},d.mipmaps=e,d.flipY=!1,d.generateMipmaps=!1,d}return R(n)}(xi),Es=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o,g,s,u){var c;return W(this,n),(c=t.call(this,e,i,a,l,r,o,g,s,u)).isCanvasTexture=!0,c.needsUpdate=!0,c}return R(n)}(xi),Js=function(){function e(){W(this,e),this.type="Curve",this.arcLengthDivisions=200}return R(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],i=this.getPoint(0),a=0;n.push(0);for(var l=1;l<=e;l++)a+=(t=this.getPoint(l/e)).distanceTo(i),n.push(a),i=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,i=this.getLengths(),a=0,l=i.length;n=t||e*i[l-1];for(var r,o=0,g=l-1;o<=g;)if((r=i[a=Math.floor(o+(g-o)/2)]-n)<0)o=a+1;else{if(!(r>0)){g=a;break}g=a-1}if(i[a=g]===n)return a/(l-1);var s=i[a];return(a+(n-s)/(i[a+1]-s))/(l-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,i=e-n,a=e+n;i<0&&(i=0),a>1&&(a=1);var l=this.getPoint(i),r=this.getPoint(a),o=t||(l.isVector2?new ai:new Yi);return o.copy(r).sub(l).normalize(),o}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Yi,i=[],a=[],l=[],r=new Yi,o=new Ia,g=0;g<=e;g++){var s=g/e;i[g]=this.getTangentAt(s,new Yi)}a[0]=new Yi,l[0]=new Yi;var u=Number.MAX_VALUE,c=Math.abs(i[0].x),I=Math.abs(i[0].y),C=Math.abs(i[0].z);c<=u&&(u=c,n.set(1,0,0)),I<=u&&(u=I,n.set(0,1,0)),C<=u&&n.set(0,0,1),r.crossVectors(i[0],n).normalize(),a[0].crossVectors(i[0],r),l[0].crossVectors(i[0],a[0]);for(var d=1;d<=e;d++){if(a[d]=a[d-1].clone(),l[d]=l[d-1].clone(),r.crossVectors(i[d-1],i[d]),r.length()>Number.EPSILON){r.normalize();var h=Math.acos(Pn(i[d-1].dot(i[d]),-1,1));a[d].applyMatrix4(o.makeRotationAxis(r,h))}l[d].crossVectors(i[d],a[d])}if(!0===t){var A=Math.acos(Pn(a[0].dot(a[e]),-1,1));A/=e,i[0].dot(r.crossVectors(a[0],a[e]))>0&&(A=-A);for(var m=1;m<=e;m++)a[m].applyMatrix4(o.makeRotationAxis(i[m],A*m)),l[m].crossVectors(i[m],a[m])}return{tangents:i,normals:a,binormals:l}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),Us=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return W(this,n),(e=t.call(this)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=i,e.aY=a,e.xRadius=l,e.yRadius=r,e.aStartAngle=o,e.aEndAngle=g,e.aClockwise=s,e.aRotation=u,e}return R(n,[{key:"getPoint",value:function(e,t){for(var n=t||new ai,i=2*Math.PI,a=this.aEndAngle-this.aStartAngle,l=Math.abs(a)<Number.EPSILON;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(a=l?0:i),!0!==this.aClockwise||l||(a===i?a=-i:a-=i);var r=this.aStartAngle+e*a,o=this.aX+this.xRadius*Math.cos(r),g=this.aY+this.yRadius*Math.sin(r);if(0!==this.aRotation){var s=Math.cos(this.aRotation),u=Math.sin(this.aRotation),c=o-this.aX,I=g-this.aY;o=c*s-I*u+this.aX,g=c*u+I*s+this.aY}return n.set(o,g)}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return v(u(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(Js),Ds=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o){var g;return W(this,n),(g=t.call(this,e,i,a,a,l,r,o)).isArcCurve=!0,g.type="ArcCurve",g}return R(n)}(Us);function Ps(){var e=0,t=0,n=0,i=0;function a(a,l,r,o){e=a,t=r,n=-3*a+3*l-2*r-o,i=2*a-2*l+r+o}return{initCatmullRom:function(e,t,n,i,l){a(t,n,l*(n-e),l*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,l,r,o){var g=(t-e)/l-(n-e)/(l+r)+(n-t)/r,s=(n-t)/r-(i-t)/(r+o)+(i-n)/o;a(t,n,g*=r,s*=r)},calc:function(a){var l=a*a;return e+t*a+n*l+i*(l*a)}}}var Qs=new Yi,Os=new Ps,js=new Ps,$s=new Ps,eu=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return W(this,n),(e=t.call(this)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=i,e.closed=a,e.curveType=l,e.tension=r,e}return R(n,[{key:"getPoint",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi,a=i,l=this.points,r=l.length,o=(r-(this.closed?0:1))*e,g=Math.floor(o),s=o-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/r)+1)*r:0===s&&g===r-1&&(g=r-2,s=1),this.closed||g>0?t=l[(g-1)%r]:(Qs.subVectors(l[0],l[1]).add(l[0]),t=Qs);var u=l[g%r],c=l[(g+1)%r];if(this.closed||g+2<r?n=l[(g+2)%r]:(Qs.subVectors(l[r-1],l[r-2]).add(l[r-1]),n=Qs),"centripetal"===this.curveType||"chordal"===this.curveType){var I="chordal"===this.curveType?.5:.25,C=Math.pow(t.distanceToSquared(u),I),d=Math.pow(u.distanceToSquared(c),I),h=Math.pow(c.distanceToSquared(n),I);d<1e-4&&(d=1),C<1e-4&&(C=d),h<1e-4&&(h=d),Os.initNonuniformCatmullRom(t.x,u.x,c.x,n.x,C,d,h),js.initNonuniformCatmullRom(t.y,u.y,c.y,n.y,C,d,h),$s.initNonuniformCatmullRom(t.z,u.z,c.z,n.z,C,d,h)}else"catmullrom"===this.curveType&&(Os.initCatmullRom(t.x,u.x,c.x,n.x,this.tension),js.initCatmullRom(t.y,u.y,c.y,n.y,this.tension),$s.initCatmullRom(t.z,u.z,c.z,n.z,this.tension));return a.set(Os.calc(s),js.calc(s),$s.calc(s)),a}},{key:"copy",value:function(e){v(u(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){v(u(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var a=e.points[t];this.points.push((new Yi).fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(Js);function tu(e,t,n,i,a){var l=.5*(i-t),r=.5*(a-n),o=e*e;return(2*n-2*i+l+r)*(e*o)+(-3*n+3*i-2*l-r)*o+l*e+n}function nu(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function iu(e,t,n,i,a){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,a)}var au=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ai,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ai,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ai,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ai;return W(this,n),(e=t.call(this)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=i,e.v1=a,e.v2=l,e.v3=r,e}return R(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ai,n=t,i=this.v0,a=this.v1,l=this.v2,r=this.v3;return n.set(iu(e,i.x,a.x,l.x,r.x),iu(e,i.y,a.y,l.y,r.y)),n}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return v(u(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Js),lu=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yi,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Yi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Yi;return W(this,n),(e=t.call(this)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=i,e.v1=a,e.v2=l,e.v3=r,e}return R(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi,n=t,i=this.v0,a=this.v1,l=this.v2,r=this.v3;return n.set(iu(e,i.x,a.x,l.x,r.x),iu(e,i.y,a.y,l.y,r.y),iu(e,i.z,a.z,l.z,r.z)),n}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return v(u(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Js),ru=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ai,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ai;return W(this,n),(e=t.call(this)).isLineCurve=!0,e.type="LineCurve",e.v1=i,e.v2=a,e}return R(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ai,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new ai;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return v(u(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Js),ou=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yi,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi;return W(this,n),(e=t.call(this)).isLineCurve3=!0,e.type="LineCurve3",e.v1=i,e.v2=a,e}return R(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return v(u(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Js),gu=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ai,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ai,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ai;return W(this,n),(e=t.call(this)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=i,e.v1=a,e.v2=l,e}return R(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ai,n=t,i=this.v0,a=this.v1,l=this.v2;return n.set(nu(e,i.x,a.x,l.x),nu(e,i.y,a.y,l.y)),n}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return v(u(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Js),su=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yi,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Yi;return W(this,n),(e=t.call(this)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=i,e.v1=a,e.v2=l,e}return R(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi,n=t,i=this.v0,a=this.v1,l=this.v2;return n.set(nu(e,i.x,a.x,l.x),nu(e,i.y,a.y,l.y),nu(e,i.z,a.z,l.z)),n}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return v(u(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Js),uu=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return W(this,n),(e=t.call(this)).isSplineCurve=!0,e.type="SplineCurve",e.points=i,e}return R(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ai,n=t,i=this.points,a=(i.length-1)*e,l=Math.floor(a),r=a-l,o=i[0===l?l:l-1],g=i[l],s=i[l>i.length-2?i.length-1:l+1],u=i[l>i.length-3?i.length-1:l+2];return n.set(tu(r,o.x,g.x,s.x,u.x),tu(r,o.y,g.y,s.y,u.y)),n}},{key:"copy",value:function(e){v(u(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var a=e.points[t];this.points.push(a.clone())}return this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var a=this.points[t];e.points.push(a.toArray())}return e}},{key:"fromJSON",value:function(e){v(u(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var a=e.points[t];this.points.push((new ai).fromArray(a))}return this}}]),n}(Js),cu=Object.freeze({__proto__:null,ArcCurve:Ds,CatmullRomCurve3:eu,CubicBezierCurve:au,CubicBezierCurve3:lu,EllipseCurve:Us,LineCurve:ru,LineCurve3:ou,QuadraticBezierCurve:gu,QuadraticBezierCurve3:su,SplineCurve:uu}),Iu=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return R(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ru(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),i=this.getCurveLengths(),a=0;a<i.length;){if(i[a]>=n){var l=i[a]-n,r=this.curves[a],o=r.getLength(),g=0===o?0:1-l/o;return r.getPointAt(g,t)}a++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=0,a=this.curves;i<a.length;i++)for(var l=a[i],r=l.isEllipseCurve?2*t:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?t*l.points.length:t,o=l.getPoints(r),g=0;g<o.length;g++){var s=o[g];e&&e.equals(s)||(n.push(s),e=s)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){v(u(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var a=this.curves[t];e.curves.push(a.toJSON())}return e}},{key:"fromJSON",value:function(e){v(u(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var a=e.curves[t];this.curves.push((new cu[a.type]).fromJSON(a))}return this}}]),n}(Js),Cu=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).type="Path",i.currentPoint=new ai,e&&i.setFromPoints(e),i}return R(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new ru(this.currentPoint.clone(),new ai(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){var a=new gu(this.currentPoint.clone(),new ai(e,t),new ai(n,i));return this.curves.push(a),this.currentPoint.set(n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,a,l){var r=new au(this.currentPoint.clone(),new ai(e,t),new ai(n,i),new ai(a,l));return this.curves.push(r),this.currentPoint.set(a,l),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new uu(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,i,a,l){var r=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+r,t+o,n,i,a,l),this}},{key:"absarc",value:function(e,t,n,i,a,l){return this.absellipse(e,t,n,n,i,a,l),this}},{key:"ellipse",value:function(e,t,n,i,a,l,r,o){var g=this.currentPoint.x,s=this.currentPoint.y;return this.absellipse(e+g,t+s,n,i,a,l,r,o),this}},{key:"absellipse",value:function(e,t,n,i,a,l,r,o){var g=new Us(e,t,n,i,a,l,r,o);if(this.curves.length>0){var s=g.getPoint(0);s.equals(this.currentPoint)||this.lineTo(s.x,s.y)}this.curves.push(g);var u=g.getPoint(1);return this.currentPoint.copy(u),this}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return v(u(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(Iu),du=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new ai(0,-.5),new ai(.5,0),new ai(0,.5)],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;W(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:i,segments:a,phiStart:l,phiLength:r},a=Math.floor(a),r=Pn(r,0,2*Math.PI);for(var o=[],g=[],s=[],u=[],c=[],I=1/a,C=new Yi,d=new ai,h=new Yi,A=new Yi,m=new Yi,p=0,f=0,b=0;b<=i.length-1;b++)switch(b){case 0:p=i[b+1].x-i[b].x,f=i[b+1].y-i[b].y,h.x=1*f,h.y=-p,h.z=0*f,m.copy(h),h.normalize(),u.push(h.x,h.y,h.z);break;case i.length-1:u.push(m.x,m.y,m.z);break;default:p=i[b+1].x-i[b].x,f=i[b+1].y-i[b].y,h.x=1*f,h.y=-p,h.z=0*f,A.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),u.push(h.x,h.y,h.z),m.copy(A)}for(var v=0;v<=a;v++)for(var y=l+v*I*r,G=Math.sin(y),B=Math.cos(y),Z=0;Z<=i.length-1;Z++){C.x=i[Z].x*G,C.y=i[Z].y,C.z=i[Z].x*B,g.push(C.x,C.y,C.z),d.x=v/a,d.y=Z/(i.length-1),s.push(d.x,d.y);var x=u[3*Z+0]*G,w=u[3*Z+1],q=u[3*Z+0]*B;c.push(x,w,q)}for(var S=0;S<a;S++)for(var R=0;R<i.length-1;R++){var V=R+S*i.length,X=V,k=V+i.length,Y=V+i.length+1,z=V+1;o.push(X,k,z),o.push(Y,z,k)}return e.setIndex(o),e.setAttribute("position",new sl(g,3)),e.setAttribute("uv",new sl(s,2)),e.setAttribute("normal",new sl(c,3)),e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(pl),hu=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;W(this,n);var o=new Cu;return o.absarc(0,-a/2,i,1.5*Math.PI,0),o.absarc(0,a/2,i,0,.5*Math.PI),(e=t.call(this,o.getPoints(l),r)).type="CapsuleGeometry",e.parameters={radius:i,height:a,capSegments:l,radialSegments:r},e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(du),Au=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;W(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:i,segments:a,thetaStart:l,thetaLength:r},a=Math.max(3,a);var o=[],g=[],s=[],u=[],c=new Yi,I=new ai;g.push(0,0,0),s.push(0,0,1),u.push(.5,.5);for(var C=0,d=3;C<=a;C++,d+=3){var h=l+C/a*r;c.x=i*Math.cos(h),c.y=i*Math.sin(h),g.push(c.x,c.y,c.z),s.push(0,0,1),I.x=(g[d]/i+1)/2,I.y=(g[d+1]/i+1)/2,u.push(I.x,I.y)}for(var A=1;A<=a;A++)o.push(A,A+1,0);return e.setIndex(o),e.setAttribute("position",new sl(g,3)),e.setAttribute("normal",new sl(s,3)),e.setAttribute("uv",new sl(u,2)),e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(pl),mu=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,g=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;W(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:i,radiusBottom:a,height:l,radialSegments:r,heightSegments:o,openEnded:g,thetaStart:s,thetaLength:u};var c=y(e);r=Math.floor(r),o=Math.floor(o);var I=[],C=[],d=[],h=[],A=0,m=[],p=l/2,f=0;function b(){for(var e=new Yi,t=new Yi,n=0,g=(a-i)/l,b=0;b<=o;b++){for(var v=[],y=b/o,G=y*(a-i)+i,B=0;B<=r;B++){var Z=B/r,x=Z*u+s,w=Math.sin(x),q=Math.cos(x);t.x=G*w,t.y=-y*l+p,t.z=G*q,C.push(t.x,t.y,t.z),e.set(w,g,q).normalize(),d.push(e.x,e.y,e.z),h.push(Z,1-y),v.push(A++)}m.push(v)}for(var W=0;W<r;W++)for(var S=0;S<o;S++){var R=m[S][W],V=m[S+1][W],X=m[S+1][W+1],k=m[S][W+1];I.push(R,V,k),I.push(V,X,k),n+=6}c.addGroup(f,n,0),f+=n}function v(e){for(var t=A,n=new ai,l=new Yi,o=0,g=!0===e?i:a,m=!0===e?1:-1,b=1;b<=r;b++)C.push(0,p*m,0),d.push(0,m,0),h.push(.5,.5),A++;for(var v=A,y=0;y<=r;y++){var G=y/r*u+s,B=Math.cos(G),Z=Math.sin(G);l.x=g*Z,l.y=p*m,l.z=g*B,C.push(l.x,l.y,l.z),d.push(0,m,0),n.x=.5*B+.5,n.y=.5*Z*m+.5,h.push(n.x,n.y),A++}for(var x=0;x<r;x++){var w=t+x,q=v+x;!0===e?I.push(q,q+1,w):I.push(q+1,q,w),o+=3}c.addGroup(f,o,!0===e?1:2),f+=o}return b(),!1===g&&(i>0&&v(!0),a>0&&v(!1)),e.setIndex(I),e.setAttribute("position",new sl(C,3)),e.setAttribute("normal",new sl(d,3)),e.setAttribute("uv",new sl(h,2)),e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(pl),pu=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return W(this,n),(e=t.call(this,0,i,a,l,r,o,g,s)).type="ConeGeometry",e.parameters={radius:i,height:a,radialSegments:l,heightSegments:r,openEnded:o,thetaStart:g,thetaLength:s},e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(mu),fu=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;W(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:i,indices:a,radius:l,detail:r};var o=[],g=[];function s(e){for(var t=new Yi,n=new Yi,i=new Yi,l=0;l<a.length;l+=3)h(a[l+0],t),h(a[l+1],n),h(a[l+2],i),u(t,n,i,e)}function u(e,t,n,i){for(var a=i+1,l=[],r=0;r<=a;r++){l[r]=[];for(var o=e.clone().lerp(n,r/a),g=t.clone().lerp(n,r/a),s=a-r,u=0;u<=s;u++)l[r][u]=0===u&&r===a?o:o.clone().lerp(g,u/s)}for(var c=0;c<a;c++)for(var I=0;I<2*(a-c)-1;I++){var C=Math.floor(I/2);I%2===0?(d(l[c][C+1]),d(l[c+1][C]),d(l[c][C])):(d(l[c][C+1]),d(l[c+1][C+1]),d(l[c+1][C]))}}function c(e){for(var t=new Yi,n=0;n<o.length;n+=3)t.x=o[n+0],t.y=o[n+1],t.z=o[n+2],t.normalize().multiplyScalar(e),o[n+0]=t.x,o[n+1]=t.y,o[n+2]=t.z}function I(){for(var e=new Yi,t=0;t<o.length;t+=3){e.x=o[t+0],e.y=o[t+1],e.z=o[t+2];var n=p(e)/2/Math.PI+.5,i=f(e)/Math.PI+.5;g.push(n,1-i)}A(),C()}function C(){for(var e=0;e<g.length;e+=6){var t=g[e+0],n=g[e+2],i=g[e+4],a=Math.max(t,n,i),l=Math.min(t,n,i);a>.9&&l<.1&&(t<.2&&(g[e+0]+=1),n<.2&&(g[e+2]+=1),i<.2&&(g[e+4]+=1))}}function d(e){o.push(e.x,e.y,e.z)}function h(e,t){var n=3*e;t.x=i[n+0],t.y=i[n+1],t.z=i[n+2]}function A(){for(var e=new Yi,t=new Yi,n=new Yi,i=new Yi,a=new ai,l=new ai,r=new ai,s=0,u=0;s<o.length;s+=9,u+=6){e.set(o[s+0],o[s+1],o[s+2]),t.set(o[s+3],o[s+4],o[s+5]),n.set(o[s+6],o[s+7],o[s+8]),a.set(g[u+0],g[u+1]),l.set(g[u+2],g[u+3]),r.set(g[u+4],g[u+5]),i.copy(e).add(t).add(n).divideScalar(3);var c=p(i);m(a,u+0,e,c),m(l,u+2,t,c),m(r,u+4,n,c)}}function m(e,t,n,i){i<0&&1===e.x&&(g[t]=e.x-1),0===n.x&&0===n.z&&(g[t]=i/2/Math.PI+.5)}function p(e){return Math.atan2(e.z,-e.x)}function f(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return s(r),c(l),I(),e.setAttribute("position",new sl(o,3)),e.setAttribute("normal",new sl(o.slice(),3)),e.setAttribute("uv",new sl(g,2)),0===r?e.computeVertexNormals():e.normalizeNormals(),e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(pl),bu=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;W(this,n);var l=(1+Math.sqrt(5))/2,r=1/l,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-l,0,-r,l,0,r,-l,0,r,l,-r,-l,0,-r,l,0,r,-l,0,r,l,0,-l,0,-r,l,0,-r,-l,0,r,l,0,r],g=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return(e=t.call(this,o,g,i,a)).type="DodecahedronGeometry",e.parameters={radius:i,detail:a},e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(fu),vu=new Yi,yu=new Yi,Gu=new Yi,Bu=new Da,Zu=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(W(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:i,thresholdAngle:a},null!==i){for(var l=4,r=Math.pow(10,l),o=Math.cos(Jn*a),g=i.getIndex(),s=i.getAttribute("position"),u=g?g.count:s.count,c=[0,0,0],I=["a","b","c"],C=new Array(3),d={},h=[],A=0;A<u;A+=3){g?(c[0]=g.getX(A),c[1]=g.getX(A+1),c[2]=g.getX(A+2)):(c[0]=A,c[1]=A+1,c[2]=A+2);var m=Bu.a,p=Bu.b,f=Bu.c;if(m.fromBufferAttribute(s,c[0]),p.fromBufferAttribute(s,c[1]),f.fromBufferAttribute(s,c[2]),Bu.getNormal(Gu),C[0]="".concat(Math.round(m.x*r),",").concat(Math.round(m.y*r),",").concat(Math.round(m.z*r)),C[1]="".concat(Math.round(p.x*r),",").concat(Math.round(p.y*r),",").concat(Math.round(p.z*r)),C[2]="".concat(Math.round(f.x*r),",").concat(Math.round(f.y*r),",").concat(Math.round(f.z*r)),C[0]!==C[1]&&C[1]!==C[2]&&C[2]!==C[0])for(var b=0;b<3;b++){var v=(b+1)%3,y=C[b],G=C[v],B=Bu[I[b]],Z=Bu[I[v]],x="".concat(y,"_").concat(G),w="".concat(G,"_").concat(y);w in d&&d[w]?(Gu.dot(d[w].normal)<=o&&(h.push(B.x,B.y,B.z),h.push(Z.x,Z.y,Z.z)),d[w]=null):x in d||(d[x]={index0:c[b],index1:c[v],normal:Gu.clone()})}}for(var q in d)if(d[q]){var S=d[q],R=S.index0,V=S.index1;vu.fromBufferAttribute(s,R),yu.fromBufferAttribute(s,V),h.push(vu.x,vu.y,vu.z),h.push(yu.x,yu.y,yu.z)}e.setAttribute("position",new sl(h,3))}return e}return R(n)}(pl),xu=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this,e)).uuid=Dn(),i.type="Shape",i.holes=[],i}return R(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){v(u(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var a=e.holes[t];this.holes.push(a.clone())}return this}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var a=this.holes[t];e.holes.push(a.toJSON())}return e}},{key:"fromJSON",value:function(e){v(u(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var a=e.holes[t];this.holes.push((new Cu).fromJSON(a))}return this}}]),n}(Cu),wu=function(e,t){var n,i,a,l,r,o,g,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,u=t&&t.length,c=u?t[0]*s:e.length,I=qu(e,0,c,s,!0),C=[];if(!I||I.next===I.prev)return C;if(u&&(I=Yu(e,t,I,s)),e.length>80*s){n=a=e[0],i=l=e[1];for(var d=s;d<c;d+=s)(r=e[d])<n&&(n=r),(o=e[d+1])<i&&(i=o),r>a&&(a=r),o>l&&(l=o);g=0!==(g=Math.max(a-n,l-i))?1/g:0}return Su(I,C,s,n,i,g),C};function qu(e,t,n,i,a){var l,r;if(a===function(e,t,n,i){for(var a=0,l=t,r=n-i;l<n;l+=i)a+=(e[r]-e[l])*(e[l+1]+e[r+1]),r=l;return a}(e,t,n,i)>0)for(l=t;l<n;l+=i)r=Qu(l,e[l],e[l+1],r);else for(l=n-i;l>=t;l-=i)r=Qu(l,e[l],e[l+1],r);return r&&Tu(r,r.next)&&(Ou(r),r=r.next),r}function Wu(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!Tu(i,i.next)&&0!==_u(i.prev,i,i.next))i=i.next;else{if(Ou(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Su(e,t,n,i,a,l,r){if(e){!r&&l&&function(e,t,n,i){var a=e;do{null===a.z&&(a.z=Hu(a.x,a.y,t,n,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,n,i,a,l,r,o,g,s=1;do{for(n=e,e=null,l=null,r=0;n;){for(r++,i=n,o=0,t=0;t<s&&(o++,i=i.nextZ);t++);for(g=s;o>0||g>0&&i;)0!==o&&(0===g||!i||n.z<=i.z)?(a=n,n=n.nextZ,o--):(a=i,i=i.nextZ,g--),l?l.nextZ=a:e=a,a.prevZ=l,l=a;n=i}l.nextZ=null,s*=2}while(r>1)}(a)}(e,i,a,l);for(var o,g,s=e;e.prev!==e.next;)if(o=e.prev,g=e.next,l?Vu(e,i,a,l):Ru(e))t.push(o.i/n),t.push(e.i/n),t.push(g.i/n),Ou(e),e=g.next,s=g.next;else if((e=g)===s){r?1===r?Su(e=Xu(Wu(e),t,n),t,n,i,a,l,2):2===r&&ku(e,t,n,i,a,l):Su(Wu(e),t,n,i,a,l,1);break}}}function Ru(e){var t=e.prev,n=e,i=e.next;if(_u(t,n,i)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(Fu(t.x,t.y,n.x,n.y,i.x,i.y,a.x,a.y)&&_u(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function Vu(e,t,n,i){var a=e.prev,l=e,r=e.next;if(_u(a,l,r)>=0)return!1;for(var o=a.x<l.x?a.x<r.x?a.x:r.x:l.x<r.x?l.x:r.x,g=a.y<l.y?a.y<r.y?a.y:r.y:l.y<r.y?l.y:r.y,s=a.x>l.x?a.x>r.x?a.x:r.x:l.x>r.x?l.x:r.x,u=a.y>l.y?a.y>r.y?a.y:r.y:l.y>r.y?l.y:r.y,c=Hu(o,g,t,n,i),I=Hu(s,u,t,n,i),C=e.prevZ,d=e.nextZ;C&&C.z>=c&&d&&d.z<=I;){if(C!==e.prev&&C!==e.next&&Fu(a.x,a.y,l.x,l.y,r.x,r.y,C.x,C.y)&&_u(C.prev,C,C.next)>=0)return!1;if(C=C.prevZ,d!==e.prev&&d!==e.next&&Fu(a.x,a.y,l.x,l.y,r.x,r.y,d.x,d.y)&&_u(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;C&&C.z>=c;){if(C!==e.prev&&C!==e.next&&Fu(a.x,a.y,l.x,l.y,r.x,r.y,C.x,C.y)&&_u(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;d&&d.z<=I;){if(d!==e.prev&&d!==e.next&&Fu(a.x,a.y,l.x,l.y,r.x,r.y,d.x,d.y)&&_u(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Xu(e,t,n){var i=e;do{var a=i.prev,l=i.next.next;!Tu(a,l)&&Eu(a,i,i.next,l)&&Du(a,l)&&Du(l,a)&&(t.push(a.i/n),t.push(i.i/n),t.push(l.i/n),Ou(i),Ou(i.next),i=e=l),i=i.next}while(i!==e);return Wu(i)}function ku(e,t,n,i,a,l){var r=e;do{for(var o=r.next.next;o!==r.prev;){if(r.i!==o.i&&Lu(r,o)){var g=Pu(r,o);return r=Wu(r,r.next),g=Wu(g,g.next),Su(r,t,n,i,a,l),void Su(g,t,n,i,a,l)}o=o.next}r=r.next}while(r!==e)}function Yu(e,t,n,i){var a,l,r,o=[];for(a=0,l=t.length;a<l;a++)(r=qu(e,t[a]*i,a<l-1?t[a+1]*i:e.length,i,!1))===r.next&&(r.steiner=!0),o.push(Mu(r));for(o.sort(zu),a=0;a<o.length;a++)Ku(o[a],n),n=Wu(n,n.next);return n}function zu(e,t){return e.x-t.x}function Ku(e,t){if(t=function(e,t){var n,i=t,a=e.x,l=e.y,r=-1/0;do{if(l<=i.y&&l>=i.next.y&&i.next.y!==i.y){var o=i.x+(l-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=a&&o>r){if(r=o,o===a){if(l===i.y)return i;if(l===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(a===r)return n;var g,s=n,u=n.x,c=n.y,I=1/0;i=n;do{a>=i.x&&i.x>=u&&a!==i.x&&Fu(l<c?a:r,l,u,c,l<c?r:a,l,i.x,i.y)&&(g=Math.abs(l-i.y)/(a-i.x),Du(i,e)&&(g<I||g===I&&(i.x>n.x||i.x===n.x&&Nu(n,i)))&&(n=i,I=g)),i=i.next}while(i!==s);return n}(e,t),t){var n=Pu(t,e);Wu(t,t.next),Wu(n,n.next)}}function Nu(e,t){return _u(e.prev,e,t.prev)<0&&_u(t.next,e,e.next)<0}function Hu(e,t,n,i,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Mu(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Fu(e,t,n,i,a,l,r,o){return(a-r)*(t-o)-(e-r)*(l-o)>=0&&(e-r)*(i-o)-(n-r)*(t-o)>=0&&(n-r)*(l-o)-(a-r)*(i-o)>=0}function Lu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Eu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Du(e,t)&&Du(t,e)&&function(e,t){var n=e,i=!1,a=(e.x+t.x)/2,l=(e.y+t.y)/2;do{n.y>l!==n.next.y>l&&n.next.y!==n.y&&a<(n.next.x-n.x)*(l-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(_u(e.prev,e,t.prev)||_u(e,t.prev,t))||Tu(e,t)&&_u(e.prev,e,e.next)>0&&_u(t.prev,t,t.next)>0)}function _u(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Tu(e,t){return e.x===t.x&&e.y===t.y}function Eu(e,t,n,i){var a=Uu(_u(e,t,n)),l=Uu(_u(e,t,i)),r=Uu(_u(n,i,e)),o=Uu(_u(n,i,t));return a!==l&&r!==o||(!(0!==a||!Ju(e,n,t))||(!(0!==l||!Ju(e,i,t))||(!(0!==r||!Ju(n,e,i))||!(0!==o||!Ju(n,t,i)))))}function Ju(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Uu(e){return e>0?1:e<0?-1:0}function Du(e,t){return _u(e.prev,e,e.next)<0?_u(e,t,e.next)>=0&&_u(e,e.prev,t)>=0:_u(e,t,e.prev)<0||_u(e,e.next,t)<0}function Pu(e,t){var n=new ju(e.i,e.x,e.y),i=new ju(t.i,t.x,t.y),a=e.next,l=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,i.next=n,n.prev=i,l.next=i,i.prev=l,i}function Qu(e,t,n,i){var a=new ju(e,t,n);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function Ou(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ju(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var $u=function(){function e(){W(this,e)}return R(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,i=t-1,a=0;a<t;i=a++)n+=e[i].x*e[a].y-e[a].x*e[i].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],i=[],a=[];ec(e),tc(n,e);var l=e.length;t.forEach(ec);for(var r=0;r<t.length;r++)i.push(l),l+=t[r].length,tc(n,t[r]);for(var o=wu(n,i),g=0;g<o.length;g+=3)a.push(o.slice(g,g+3));return a}}]),e}();function ec(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function tc(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var nc=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xu([new ai(.5,.5),new ai(-.5,.5),new ai(-.5,-.5),new ai(.5,-.5)]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};W(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:i,options:a},i=Array.isArray(i)?i:[i];for(var l=y(e),r=[],o=[],g=0,s=i.length;g<s;g++){var u=i[g];c(u)}function c(e){var t,n,i,g,s,u=[],c=void 0!==a.curveSegments?a.curveSegments:12,I=void 0!==a.steps?a.steps:1,C=void 0!==a.depth?a.depth:1,d=void 0===a.bevelEnabled||a.bevelEnabled,h=void 0!==a.bevelThickness?a.bevelThickness:.2,A=void 0!==a.bevelSize?a.bevelSize:h-.1,m=void 0!==a.bevelOffset?a.bevelOffset:0,p=void 0!==a.bevelSegments?a.bevelSegments:3,f=a.extrudePath,b=void 0!==a.UVGenerator?a.UVGenerator:ic,v=!1;f&&(t=f.getSpacedPoints(I),v=!0,d=!1,n=f.computeFrenetFrames(I,!1),i=new Yi,g=new Yi,s=new Yi),d||(p=0,h=0,A=0,m=0);var y=e.extractPoints(c),G=y.shape,B=y.holes;if(!$u.isClockWise(G)){G=G.reverse();for(var Z=0,x=B.length;Z<x;Z++){var w=B[Z];$u.isClockWise(w)&&(B[Z]=w.reverse())}}for(var q=$u.triangulateShape(G,B),W=G,S=0,R=B.length;S<R;S++){var V=B[S];G=G.concat(V)}function X(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var k=G.length,Y=q.length;function z(e,t,n){var i,a,l,r=e.x-t.x,o=e.y-t.y,g=n.x-e.x,s=n.y-e.y,u=r*r+o*o,c=r*s-o*g;if(Math.abs(c)>Number.EPSILON){var I=Math.sqrt(u),C=Math.sqrt(g*g+s*s),d=t.x-o/I,h=t.y+r/I,A=((n.x-s/C-d)*s-(n.y+g/C-h)*g)/(r*s-o*g),m=(i=d+r*A-e.x)*i+(a=h+o*A-e.y)*a;if(m<=2)return new ai(i,a);l=Math.sqrt(m/2)}else{var p=!1;r>Number.EPSILON?g>Number.EPSILON&&(p=!0):r<-Number.EPSILON?g<-Number.EPSILON&&(p=!0):Math.sign(o)===Math.sign(s)&&(p=!0),p?(i=-o,a=r,l=Math.sqrt(u)):(i=r,a=o,l=Math.sqrt(u/2))}return new ai(i/l,a/l)}for(var K=[],N=0,H=W.length,M=H-1,F=N+1;N<H;N++,M++,F++)M===H&&(M=0),F===H&&(F=0),K[N]=z(W[N],W[M],W[F]);for(var L,_=[],T=K.concat(),E=0,J=B.length;E<J;E++){var U=B[E];L=[];for(var D=0,P=U.length,Q=P-1,O=D+1;D<P;D++,Q++,O++)Q===P&&(Q=0),O===P&&(O=0),L[D]=z(U[D],U[Q],U[O]);_.push(L),T=T.concat(L)}for(var j=0;j<p;j++){for(var $=j/p,ee=h*Math.cos($*Math.PI/2),te=A*Math.sin($*Math.PI/2)+m,ne=0,ie=W.length;ne<ie;ne++){var ae=X(W[ne],K[ne],te);Re(ae.x,ae.y,-ee)}for(var le=0,re=B.length;le<re;le++){var oe=B[le];L=_[le];for(var ge=0,se=oe.length;ge<se;ge++){var ue=X(oe[ge],L[ge],te);Re(ue.x,ue.y,-ee)}}}for(var ce=A+m,Ie=0;Ie<k;Ie++){var Ce=d?X(G[Ie],T[Ie],ce):G[Ie];v?(g.copy(n.normals[0]).multiplyScalar(Ce.x),i.copy(n.binormals[0]).multiplyScalar(Ce.y),s.copy(t[0]).add(g).add(i),Re(s.x,s.y,s.z)):Re(Ce.x,Ce.y,0)}for(var de=1;de<=I;de++)for(var he=0;he<k;he++){var Ae=d?X(G[he],T[he],ce):G[he];v?(g.copy(n.normals[de]).multiplyScalar(Ae.x),i.copy(n.binormals[de]).multiplyScalar(Ae.y),s.copy(t[de]).add(g).add(i),Re(s.x,s.y,s.z)):Re(Ae.x,Ae.y,C/I*de)}for(var me=p-1;me>=0;me--){for(var pe=me/p,fe=h*Math.cos(pe*Math.PI/2),be=A*Math.sin(pe*Math.PI/2)+m,ve=0,ye=W.length;ve<ye;ve++){var Ge=X(W[ve],K[ve],be);Re(Ge.x,Ge.y,C+fe)}for(var Be=0,Ze=B.length;Be<Ze;Be++){var xe=B[Be];L=_[Be];for(var we=0,qe=xe.length;we<qe;we++){var We=X(xe[we],L[we],be);v?Re(We.x,We.y+t[I-1].y,t[I-1].x+fe):Re(We.x,We.y,C+fe)}}}function Se(e,t){for(var n=e.length;--n>=0;){var i=n,a=n-1;a<0&&(a=e.length-1);for(var l=0,r=I+2*p;l<r;l++){var o=k*l,g=k*(l+1);Xe(t+i+o,t+a+o,t+a+g,t+i+g)}}}function Re(e,t,n){u.push(e),u.push(t),u.push(n)}function Ve(e,t,n){ke(e),ke(t),ke(n);var i=r.length/3,a=b.generateTopUV(l,r,i-3,i-2,i-1);Ye(a[0]),Ye(a[1]),Ye(a[2])}function Xe(e,t,n,i){ke(e),ke(t),ke(i),ke(t),ke(n),ke(i);var a=r.length/3,o=b.generateSideWallUV(l,r,a-6,a-3,a-2,a-1);Ye(o[0]),Ye(o[1]),Ye(o[3]),Ye(o[1]),Ye(o[2]),Ye(o[3])}function ke(e){r.push(u[3*e+0]),r.push(u[3*e+1]),r.push(u[3*e+2])}function Ye(e){o.push(e.x),o.push(e.y)}!function(){var e=r.length/3;if(d){for(var t=0,n=k*t,i=0;i<Y;i++){var a=q[i];Ve(a[2]+n,a[1]+n,a[0]+n)}n=k*(t=I+2*p);for(var o=0;o<Y;o++){var g=q[o];Ve(g[0]+n,g[1]+n,g[2]+n)}}else{for(var s=0;s<Y;s++){var u=q[s];Ve(u[2],u[1],u[0])}for(var c=0;c<Y;c++){var C=q[c];Ve(C[0]+k*I,C[1]+k*I,C[2]+k*I)}}l.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;Se(W,t),t+=W.length;for(var n=0,i=B.length;n<i;n++){var a=B[n];Se(a,t),t+=a.length}l.addGroup(e,r.length/3-e,1)}()}return e.setAttribute("position",new sl(r,3)),e.setAttribute("uv",new sl(o,2)),e.computeVertexNormals(),e}return R(n,[{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,a=e.length;i<a;i++){var l=e[i];n.shapes.push(l.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],a=0,l=e.shapes.length;a<l;a++){var r=t[e.shapes[a]];i.push(r)}var o=e.options.extrudePath;return void 0!==o&&(e.options.extrudePath=(new cu[o.type]).fromJSON(o)),new n(i,e.options)}}]),n}(pl),ic={generateTopUV:function(e,t,n,i,a){var l=t[3*n],r=t[3*n+1],o=t[3*i],g=t[3*i+1],s=t[3*a],u=t[3*a+1];return[new ai(l,r),new ai(o,g),new ai(s,u)]},generateSideWallUV:function(e,t,n,i,a,l){var r=t[3*n],o=t[3*n+1],g=t[3*n+2],s=t[3*i],u=t[3*i+1],c=t[3*i+2],I=t[3*a],C=t[3*a+1],d=t[3*a+2],h=t[3*l],A=t[3*l+1],m=t[3*l+2];return Math.abs(o-u)<Math.abs(r-s)?[new ai(r,1-g),new ai(s,1-c),new ai(I,1-d),new ai(h,1-m)]:[new ai(o,1-g),new ai(u,1-c),new ai(C,1-d),new ai(A,1-m)]}};var ac=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;W(this,n);var l=(1+Math.sqrt(5))/2,r=[-1,l,0,1,l,0,-1,-l,0,1,-l,0,0,-1,l,0,1,l,0,-1,-l,0,1,-l,l,0,-1,l,0,1,-l,0,-1,-l,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(e=t.call(this,r,o,i,a)).type="IcosahedronGeometry",e.parameters={radius:i,detail:a},e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(fu),lc=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;W(this,n);var l=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return(e=t.call(this,l,r,i,a)).type="OctahedronGeometry",e.parameters={radius:i,detail:a},e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(fu),rc=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;W(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:i,outerRadius:a,thetaSegments:l,phiSegments:r,thetaStart:o,thetaLength:g},l=Math.max(3,l);for(var s=[],u=[],c=[],I=[],C=i,d=(a-i)/(r=Math.max(1,r)),h=new Yi,A=new ai,m=0;m<=r;m++){for(var p=0;p<=l;p++){var f=o+p/l*g;h.x=C*Math.cos(f),h.y=C*Math.sin(f),u.push(h.x,h.y,h.z),c.push(0,0,1),A.x=(h.x/a+1)/2,A.y=(h.y/a+1)/2,I.push(A.x,A.y)}C+=d}for(var b=0;b<r;b++)for(var v=b*(l+1),y=0;y<l;y++){var G=y+v,B=G,Z=G+l+1,x=G+l+2,w=G+1;s.push(B,Z,w),s.push(Z,x,w)}return e.setIndex(s),e.setAttribute("position",new sl(u,3)),e.setAttribute("normal",new sl(c,3)),e.setAttribute("uv",new sl(I,2)),e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(pl),oc=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xu([new ai(0,.5),new ai(-.5,-.5),new ai(.5,-.5)]),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;W(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:i,curveSegments:a};var l=[],r=[],o=[],g=[],s=0,u=0;if(!1===Array.isArray(i))I(i);else for(var c=0;c<i.length;c++)I(i[c]),e.addGroup(s,u,c),s+=u,u=0;function I(e){var t=r.length/3,n=e.extractPoints(a),i=n.shape,s=n.holes;!1===$u.isClockWise(i)&&(i=i.reverse());for(var c=0,I=s.length;c<I;c++){var C=s[c];!0===$u.isClockWise(C)&&(s[c]=C.reverse())}for(var d=$u.triangulateShape(i,s),h=0,A=s.length;h<A;h++){var m=s[h];i=i.concat(m)}for(var p=0,f=i.length;p<f;p++){var b=i[p];r.push(b.x,b.y,0),o.push(0,0,1),g.push(b.x,b.y)}for(var v=0,y=d.length;v<y;v++){var G=d[v],B=G[0]+t,Z=G[1]+t,x=G[2]+t;l.push(B,Z,x),u+=3}}return e.setIndex(l),e.setAttribute("position",new sl(r,3)),e.setAttribute("normal",new sl(o,3)),e.setAttribute("uv",new sl(g,2)),e}return R(n,[{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var a=e[n];t.shapes.push(a.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],a=0,l=e.shapes.length;a<l;a++){var r=t[e.shapes[a]];i.push(r)}return new n(i,e.curveSegments)}}]),n}(pl);var gc=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;W(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:i,widthSegments:a,heightSegments:l,phiStart:r,phiLength:o,thetaStart:g,thetaLength:s},a=Math.max(3,Math.floor(a)),l=Math.max(2,Math.floor(l));for(var u=Math.min(g+s,Math.PI),c=0,I=[],C=new Yi,d=new Yi,h=[],A=[],m=[],p=[],f=0;f<=l;f++){var b=[],v=f/l,y=0;0==f&&0==g?y=.5/a:f==l&&u==Math.PI&&(y=-.5/a);for(var G=0;G<=a;G++){var B=G/a;C.x=-i*Math.cos(r+B*o)*Math.sin(g+v*s),C.y=i*Math.cos(g+v*s),C.z=i*Math.sin(r+B*o)*Math.sin(g+v*s),A.push(C.x,C.y,C.z),d.copy(C).normalize(),m.push(d.x,d.y,d.z),p.push(B+y,1-v),b.push(c++)}I.push(b)}for(var Z=0;Z<l;Z++)for(var x=0;x<a;x++){var w=I[Z][x+1],q=I[Z][x],S=I[Z+1][x],R=I[Z+1][x+1];(0!==Z||g>0)&&h.push(w,q,R),(Z!==l-1||u<Math.PI)&&h.push(q,S,R)}return e.setIndex(h),e.setAttribute("position",new sl(A,3)),e.setAttribute("normal",new sl(m,3)),e.setAttribute("uv",new sl(p,2)),e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(pl),sc=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;W(this,n);var l=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];return(e=t.call(this,l,r,i,a)).type="TetrahedronGeometry",e.parameters={radius:i,detail:a},e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(fu),uc=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;W(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:i,tube:a,radialSegments:l,tubularSegments:r,arc:o},l=Math.floor(l),r=Math.floor(r);for(var g=[],s=[],u=[],c=[],I=new Yi,C=new Yi,d=new Yi,h=0;h<=l;h++)for(var A=0;A<=r;A++){var m=A/r*o,p=h/l*Math.PI*2;C.x=(i+a*Math.cos(p))*Math.cos(m),C.y=(i+a*Math.cos(p))*Math.sin(m),C.z=a*Math.sin(p),s.push(C.x,C.y,C.z),I.x=i*Math.cos(m),I.y=i*Math.sin(m),d.subVectors(C,I).normalize(),u.push(d.x,d.y,d.z),c.push(A/r),c.push(h/l)}for(var f=1;f<=l;f++)for(var b=1;b<=r;b++){var v=(r+1)*f+b-1,y=(r+1)*(f-1)+b-1,G=(r+1)*(f-1)+b,B=(r+1)*f+b;g.push(v,y,B),g.push(y,G,B)}return e.setIndex(g),e.setAttribute("position",new sl(s,3)),e.setAttribute("normal",new sl(u,3)),e.setAttribute("uv",new sl(c,2)),e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(pl),cc=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;W(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:i,tube:a,tubularSegments:l,radialSegments:r,p:o,q:g},l=Math.floor(l),r=Math.floor(r);for(var s=[],u=[],c=[],I=[],C=new Yi,d=new Yi,h=new Yi,A=new Yi,m=new Yi,p=new Yi,f=new Yi,b=0;b<=l;++b){var v=b/l*o*Math.PI*2;X(v,o,g,i,h),X(v+.01,o,g,i,A),p.subVectors(A,h),f.addVectors(A,h),m.crossVectors(p,f),f.crossVectors(m,p),m.normalize(),f.normalize();for(var y=0;y<=r;++y){var G=y/r*Math.PI*2,B=-a*Math.cos(G),Z=a*Math.sin(G);C.x=h.x+(B*f.x+Z*m.x),C.y=h.y+(B*f.y+Z*m.y),C.z=h.z+(B*f.z+Z*m.z),u.push(C.x,C.y,C.z),d.subVectors(C,h).normalize(),c.push(d.x,d.y,d.z),I.push(b/l),I.push(y/r)}}for(var x=1;x<=l;x++)for(var w=1;w<=r;w++){var q=(r+1)*(x-1)+(w-1),S=(r+1)*x+(w-1),R=(r+1)*x+w,V=(r+1)*(x-1)+w;s.push(q,S,V),s.push(S,R,V)}function X(e,t,n,i,a){var l=Math.cos(e),r=Math.sin(e),o=n/t*e,g=Math.cos(o);a.x=i*(2+g)*.5*l,a.y=i*(2+g)*r*.5,a.z=i*Math.sin(o)*.5}return e.setIndex(s),e.setAttribute("position",new sl(u,3)),e.setAttribute("normal",new sl(c,3)),e.setAttribute("uv",new sl(I,2)),e}return R(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(pl),Ic=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new su(new Yi(-1,-1,0),new Yi(-1,1,0),new Yi(1,1,0)),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];W(this,n),(e=t.call(this)).type="TubeGeometry",e.parameters={path:i,tubularSegments:a,radius:l,radialSegments:r,closed:o};var g=i.computeFrenetFrames(a,o);e.tangents=g.tangents,e.normals=g.normals,e.binormals=g.binormals;var s=new Yi,u=new Yi,c=new ai,I=new Yi,C=[],d=[],h=[],A=[];function m(){for(var e=0;e<a;e++)p(e);p(!1===o?a:0),b(),f()}function p(e){I=i.getPointAt(e/a,I);for(var t=g.normals[e],n=g.binormals[e],o=0;o<=r;o++){var c=o/r*Math.PI*2,h=Math.sin(c),A=-Math.cos(c);u.x=A*t.x+h*n.x,u.y=A*t.y+h*n.y,u.z=A*t.z+h*n.z,u.normalize(),d.push(u.x,u.y,u.z),s.x=I.x+l*u.x,s.y=I.y+l*u.y,s.z=I.z+l*u.z,C.push(s.x,s.y,s.z)}}function f(){for(var e=1;e<=a;e++)for(var t=1;t<=r;t++){var n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),l=(r+1)*e+t,o=(r+1)*(e-1)+t;A.push(n,i,o),A.push(i,l,o)}}function b(){for(var e=0;e<=a;e++)for(var t=0;t<=r;t++)c.x=e/a,c.y=t/r,h.push(c.x,c.y)}return m(),e.setIndex(A),e.setAttribute("position",new sl(C,3)),e.setAttribute("normal",new sl(d,3)),e.setAttribute("uv",new sl(h,2)),e}return R(n,[{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new cu[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(pl),Cc=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(W(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:i},null!==i){var a=[],l=new Set,r=new Yi,o=new Yi;if(null!==i.index){var g=i.attributes.position,s=i.index,u=i.groups;0===u.length&&(u=[{start:0,count:s.count,materialIndex:0}]);for(var c=0,I=u.length;c<I;++c)for(var C=u[c],d=C.start,h=C.count,A=d,m=d+h;A<m;A+=3)for(var p=0;p<3;p++){var f=s.getX(A+p),b=s.getX(A+(p+1)%3);r.fromBufferAttribute(g,f),o.fromBufferAttribute(g,b),!0===dc(r,o,l)&&(a.push(r.x,r.y,r.z),a.push(o.x,o.y,o.z))}}else for(var v=i.attributes.position,y=0,G=v.count/3;y<G;y++)for(var B=0;B<3;B++){var Z=3*y+B,x=3*y+(B+1)%3;r.fromBufferAttribute(v,Z),o.fromBufferAttribute(v,x),!0===dc(r,o,l)&&(a.push(r.x,r.y,r.z),a.push(o.x,o.y,o.z))}e.setAttribute("position",new sl(a,3))}return e}return R(n)}(pl);function dc(e,t,n){var i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),a="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(a)&&(n.add(i),n.add(a),!0)}var hc=Object.freeze({__proto__:null,BoxGeometry:Nl,CapsuleGeometry:hu,CircleGeometry:Au,ConeGeometry:pu,CylinderGeometry:mu,DodecahedronGeometry:bu,EdgesGeometry:Zu,ExtrudeGeometry:nc,IcosahedronGeometry:ac,LatheGeometry:du,OctahedronGeometry:lc,PlaneGeometry:ar,PolyhedronGeometry:fu,RingGeometry:rc,ShapeGeometry:oc,SphereGeometry:gc,TetrahedronGeometry:sc,TorusGeometry:uc,TorusKnotGeometry:cc,TubeGeometry:Ic,WireframeGeometry:Cc}),Ac=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isShadowMaterial=!0,i.type="ShadowMaterial",i.color=new vi(0),i.transparent=!0,i.fog=!0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),n}(Qa),mc=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this,e)).isRawShaderMaterial=!0,i.type="RawShaderMaterial",i}return R(n)}(Ll),pc=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isMeshStandardMaterial=!0,i.defines={STANDARD:""},i.type="MeshStandardMaterial",i.color=new vi(16777215),i.roughness=1,i.metalness=0,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new vi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=un,i.normalScale=new ai(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.roughnessMap=null,i.metalnessMap=null,i.alphaMap=null,i.envMap=null,i.envMapIntensity=1,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Qa),fc=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isMeshPhysicalMaterial=!0,i.defines={STANDARD:"",PHYSICAL:""},i.type="MeshPhysicalMaterial",i.clearcoatMap=null,i.clearcoatRoughness=0,i.clearcoatRoughnessMap=null,i.clearcoatNormalScale=new ai(1,1),i.clearcoatNormalMap=null,i.ior=1.5,Object.defineProperty(y(i),"reflectivity",{get:function(){return Pn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),i.iridescenceMap=null,i.iridescenceIOR=1.3,i.iridescenceThicknessRange=[100,400],i.iridescenceThicknessMap=null,i.sheenColor=new vi(0),i.sheenColorMap=null,i.sheenRoughness=1,i.sheenRoughnessMap=null,i.transmissionMap=null,i.thickness=0,i.thicknessMap=null,i.attenuationDistance=0,i.attenuationColor=new vi(1,1,1),i.specularIntensity=1,i.specularIntensityMap=null,i.specularColor=new vi(1,1,1),i.specularColorMap=null,i._sheen=0,i._clearcoat=0,i._iridescence=0,i._transmission=0,i.setValues(e),i}return R(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=A(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(pc),bc=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isMeshPhongMaterial=!0,i.type="MeshPhongMaterial",i.color=new vi(16777215),i.specular=new vi(1118481),i.shininess=30,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new vi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=un,i.normalScale=new ai(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=ye,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Qa),vc=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isMeshToonMaterial=!0,i.defines={TOON:""},i.type="MeshToonMaterial",i.color=new vi(16777215),i.map=null,i.gradientMap=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new vi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=un,i.normalScale=new ai(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Qa),yc=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isMeshNormalMaterial=!0,i.type="MeshNormalMaterial",i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=un,i.normalScale=new ai(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.flatShading=!1,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Qa),Gc=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isMeshLambertMaterial=!0,i.type="MeshLambertMaterial",i.color=new vi(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new vi(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=un,i.normalScale=new ai(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=ye,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Qa),Bc=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isMeshMatcapMaterial=!0,i.defines={MATCAP:""},i.type="MeshMatcapMaterial",i.color=new vi(16777215),i.matcap=null,i.map=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=un,i.normalScale=new ai(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.flatShading=!1,i.fog=!0,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Qa),Zc=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).isLineDashedMaterial=!0,i.type="LineDashedMaterial",i.scale=1,i.dashSize=3,i.gapSize=1,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(Bs);function xc(e,t,n){return qc(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function wc(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function qc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Wc(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n}function Sc(e,t,n){for(var i=e.length,a=new e.constructor(i),l=0,r=0;r!==i;++l)for(var o=n[l]*t,g=0;g!==t;++g)a[r++]=e[o+g];return a}function Rc(e,t,n,i){for(var a=1,l=e[0];void 0!==l&&void 0===l[i];)l=e[a++];if(void 0!==l){var r=l[i];if(void 0!==r)if(Array.isArray(r))do{void 0!==(r=l[i])&&(t.push(l.time),n.push.apply(n,r)),l=e[a++]}while(void 0!==l);else if(void 0!==r.toArray)do{void 0!==(r=l[i])&&(t.push(l.time),r.toArray(n,n.length)),l=e[a++]}while(void 0!==l);else do{void 0!==(r=l[i])&&(t.push(l.time),n.push(r)),l=e[a++]}while(void 0!==l)}}var Vc=Object.freeze({__proto__:null,arraySlice:xc,convertArray:wc,isTypedArray:qc,getKeyframeOrder:Wc,sortedArray:Sc,flattenJSON:Rc,subclip:function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,l=e.clone();l.name=t;for(var r=[],o=0;o<l.tracks.length;++o){for(var g=l.tracks[o],s=g.getValueSize(),u=[],c=[],I=0;I<g.times.length;++I){var C=g.times[I]*a;if(!(C<n||C>=i)){u.push(g.times[I]);for(var d=0;d<s;++d)c.push(g.values[I*s+d])}}0!==u.length&&(g.times=wc(u,g.times.constructor),g.values=wc(c,g.values.constructor),r.push(g))}l.tracks=r;for(var h=1/0,A=0;A<l.tracks.length;++A)h>l.tracks[A].times[0]&&(h=l.tracks[A].times[0]);for(var m=0;m<l.tracks.length;++m)l.tracks[m].shift(-1*h);return l.resetDuration(),l},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);for(var a=n.tracks.length,l=t/i,r=function(t){var i=n.tracks[t],a=i.ValueTypeName;if("bool"===a||"string"===a)return"continue";var r=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===a}));if(void 0===r)return"continue";var o=0,g=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=g/3);var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var c=i.times.length-1,I=void 0;if(l<=i.times[0]){var C=o,d=g-o;I=xc(i.values,C,d)}else if(l>=i.times[c]){var h=c*g+o,A=h+g-o;I=xc(i.values,h,A)}else{var m=i.createInterpolant(),p=o,f=g-o;m.evaluate(l),I=xc(m.resultBuffer,p,f)}"quaternion"===a&&(new ki).fromArray(I).normalize().conjugate().toArray(I);for(var b=r.times.length,v=0;v<b;++v){var y=v*u+s;if("quaternion"===a)ki.multiplyQuaternionsFlat(r.values,y,I,0,r.values,y);else for(var G=u-2*s,B=0;B<G;++B)r.values[y+B]-=I[B]}},o=0;o<a;++o)r(o);return e.blendMode=tn,e}}),Xc=function(){function e(t,n,i,a){W(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return R(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],a=t[n-1];e:{t:{var l;n:{i:if(!(e<i)){for(var r=n+2;;){if(void 0===i){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===r)break;if(a=i,e<(i=t[++n]))break t}l=t.length;break n}if(e>=a)break e;var o=t[1];e<o&&(n=2,a=o);for(var g=n-2;;){if(void 0===a)return this._cachedIndex=0,this.copySampleValue_(0);if(n===g)break;if(i=a,e>=(a=t[--n-1]))break t}l=n,n=0}for(;n<l;){var s=n+l>>>1;e<t[s]?l=s:n=s+1}if(i=t[n],void 0===(a=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,i)}return this.interpolate_(n,a,e,i)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i,l=0;l!==i;++l)t[l]=n[a+l];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),kc=function(e){G(n,e);var t=x(n);function n(e,i,a,l){var r;return W(this,n),(r=t.call(this,e,i,a,l))._weightPrev=-0,r._offsetPrev=-0,r._weightNext=-0,r._offsetNext=-0,r.DefaultSettings_={endingStart:Ot,endingEnd:Ot},r}return R(n,[{key:"intervalChanged_",value:function(e,t,n){var i=this.parameterPositions,a=e-2,l=e+1,r=i[a],o=i[l];if(void 0===r)switch(this.getSettings_().endingStart){case jt:a=e,r=2*t-n;break;case $t:r=t+i[a=i.length-2]-i[a+1];break;default:a=e,r=n}if(void 0===o)switch(this.getSettings_().endingEnd){case jt:l=e,o=2*n-t;break;case $t:l=1,o=n+i[1]-i[0];break;default:l=e-1,o=t}var g=.5*(n-t),s=this.valueSize;this._weightPrev=g/(t-r),this._weightNext=g/(o-n),this._offsetPrev=a*s,this._offsetNext=l*s}},{key:"interpolate_",value:function(e,t,n,i){for(var a=this.resultBuffer,l=this.sampleValues,r=this.valueSize,o=e*r,g=o-r,s=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,I=this._weightNext,C=(n-t)/(i-t),d=C*C,h=d*C,A=-c*h+2*c*d-c*C,m=(1+c)*h+(-1.5-2*c)*d+(-.5+c)*C+1,p=(-1-I)*h+(1.5+I)*d+.5*C,f=I*h-I*d,b=0;b!==r;++b)a[b]=A*l[s+b]+m*l[g+b]+p*l[o+b]+f*l[u+b];return a}}]),n}(Xc),Yc=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),t.call(this,e,i,a,l)}return R(n,[{key:"interpolate_",value:function(e,t,n,i){for(var a=this.resultBuffer,l=this.sampleValues,r=this.valueSize,o=e*r,g=o-r,s=(n-t)/(i-t),u=1-s,c=0;c!==r;++c)a[c]=l[g+c]*u+l[o+c]*s;return a}}]),n}(Xc),zc=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),t.call(this,e,i,a,l)}return R(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(Xc),Kc=function(){function e(t,n,i,a){if(W(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=wc(n,this.TimeBufferType),this.values=wc(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}return R(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new zc(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Yc(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new kc(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Dt:t=this.InterpolantFactoryMethodDiscrete;break;case Pt:t=this.InterpolantFactoryMethodLinear;break;case Qt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Dt;case this.InterpolantFactoryMethodLinear:return Pt;case this.InterpolantFactoryMethodSmooth:return Qt}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,i=n.length,a=0,l=i-1;a!==i&&n[a]<e;)++a;for(;-1!==l&&n[l]>t;)--l;if(++l,0!==a||l!==i){a>=l&&(a=(l=Math.max(l,1))-1);var r=this.getValueSize();this.times=xc(n,a,l),this.values=xc(this.values,a*r,l*r)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var l=null,r=0;r!==a;r++){var o=n[r];if("number"===typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,r,o),e=!1;break}if(null!==l&&l>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,r,o,l),e=!1;break}l=o}if(void 0!==i&&qc(i))for(var g=0,s=i.length;g!==s;++g){var u=i[g];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,u),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=xc(this.times),t=xc(this.values),n=this.getValueSize(),i=this.getInterpolation()===Qt,a=e.length-1,l=1,r=1;r<a;++r){var o=!1,g=e[r];if(g!==e[r+1]&&(1!==r||g!==e[0]))if(i)o=!0;else for(var s=r*n,u=s-n,c=s+n,I=0;I!==n;++I){var C=t[s+I];if(C!==t[u+I]||C!==t[c+I]){o=!0;break}}if(o){if(r!==l){e[l]=e[r];for(var d=r*n,h=l*n,A=0;A!==n;++A)t[h+A]=t[d+A]}++l}}if(a>0){e[l]=e[a];for(var m=a*n,p=l*n,f=0;f!==n;++f)t[p+f]=t[m+f];++l}return l!==e.length?(this.times=xc(e,0,l),this.values=xc(t,0,l*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=xc(this.times,0),t=xc(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:wc(e.times,Array),values:wc(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}]),e}();Kc.prototype.TimeBufferType=Float32Array,Kc.prototype.ValueBufferType=Float32Array,Kc.prototype.DefaultInterpolation=Pt;var Nc=function(e){G(n,e);var t=x(n);function n(){return W(this,n),t.apply(this,arguments)}return R(n)}(Kc);Nc.prototype.ValueTypeName="bool",Nc.prototype.ValueBufferType=Array,Nc.prototype.DefaultInterpolation=Dt,Nc.prototype.InterpolantFactoryMethodLinear=void 0,Nc.prototype.InterpolantFactoryMethodSmooth=void 0;var Hc=function(e){G(n,e);var t=x(n);function n(){return W(this,n),t.apply(this,arguments)}return R(n)}(Kc);Hc.prototype.ValueTypeName="color";var Mc=function(e){G(n,e);var t=x(n);function n(){return W(this,n),t.apply(this,arguments)}return R(n)}(Kc);Mc.prototype.ValueTypeName="number";var Fc=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),t.call(this,e,i,a,l)}return R(n,[{key:"interpolate_",value:function(e,t,n,i){for(var a=this.resultBuffer,l=this.sampleValues,r=this.valueSize,o=(n-t)/(i-t),g=e*r,s=g+r;g!==s;g+=4)ki.slerpFlat(a,0,l,g-r,l,g,o);return a}}]),n}(Xc),Lc=function(e){G(n,e);var t=x(n);function n(){return W(this,n),t.apply(this,arguments)}return R(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Fc(this.times,this.values,this.getValueSize(),e)}}]),n}(Kc);Lc.prototype.ValueTypeName="quaternion",Lc.prototype.DefaultInterpolation=Pt,Lc.prototype.InterpolantFactoryMethodSmooth=void 0;var _c=function(e){G(n,e);var t=x(n);function n(){return W(this,n),t.apply(this,arguments)}return R(n)}(Kc);_c.prototype.ValueTypeName="string",_c.prototype.ValueBufferType=Array,_c.prototype.DefaultInterpolation=Dt,_c.prototype.InterpolantFactoryMethodLinear=void 0,_c.prototype.InterpolantFactoryMethodSmooth=void 0;var Tc=function(e){G(n,e);var t=x(n);function n(){return W(this,n),t.apply(this,arguments)}return R(n)}(Kc);Tc.prototype.ValueTypeName="vector";var Ec=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:en;W(this,e),this.name=t,this.tracks=i,this.duration=n,this.blendMode=a,this.uuid=Dn(),this.duration<0&&this.resetDuration()}return R(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),a=0,l=n.length;a!==l;++a)t.push(Jc(n[a]).scale(i));var r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},a=0,l=n.length;a!==l;++a)t.push(Kc.toJSON(n[a]));return i}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,i){for(var a=t.length,l=[],r=0;r<a;r++){var o=[],g=[];o.push((r+a-1)%a,r,(r+1)%a),g.push(0,1,0);var s=Wc(o);o=Sc(o,1,s),g=Sc(g,1,s),i||0!==o[0]||(o.push(a),g.push(g[0])),l.push(new Mc(".morphTargetInfluences["+t[r].name+"]",o,g).scale(1/n))}return new this(e,-1,l)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var i={},a=/^([\w-]*?)([\d]+)$/,l=0,r=e.length;l<r;l++){var o=e[l],g=o.name.match(a);if(g&&g.length>1){var s=g[1],u=i[s];u||(i[s]=u=[]),u.push(o)}}var c=[];for(var I in i)c.push(this.CreateFromMorphTargetSequence(I,i[I],t,n));return c}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,a){if(0!==n.length){var l=[],r=[];Rc(n,l,r,i),0!==l.length&&a.push(new e(t,l,r))}},i=[],a=e.name||"default",l=e.fps||30,r=e.blendMode,o=e.length||-1,g=e.hierarchy||[],s=0;s<g.length;s++){var u=g[s].keys;if(u&&0!==u.length)if(u[0].morphTargets){var c={},I=void 0;for(I=0;I<u.length;I++)if(u[I].morphTargets)for(var C=0;C<u[I].morphTargets.length;C++)c[u[I].morphTargets[C]]=-1;for(var d in c){for(var h=[],A=[],m=0;m!==u[I].morphTargets.length;++m){var p=u[I];h.push(p.time),A.push(p.morphTarget===d?1:0)}i.push(new Mc(".morphTargetInfluence["+d+"]",h,A))}o=c.length*l}else{var f=".bones["+t[s].name+"]";n(Tc,f+".position",u,"pos",i),n(Lc,f+".quaternion",u,"rot",i),n(Tc,f+".scale",u,"scl",i)}}return 0===i.length?null:new this(a,o,i,r)}}]),e}();function Jc(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Mc;case"vector":case"vector2":case"vector3":case"vector4":return Tc;case"color":return Hc;case"quaternion":return Lc;case"bool":case"boolean":return Nc;case"string":return _c}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];Rc(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Uc,Dc={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Pc=R((function e(t,n,i){W(this,e);var a=this,l=!1,r=0,o=0,g=void 0,s=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=i,this.itemStart=function(e){o++,!1===l&&void 0!==a.onStart&&a.onStart(e,r,o),l=!0},this.itemEnd=function(e){r++,void 0!==a.onProgress&&a.onProgress(e,r,o),r===o&&(l=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(e){void 0!==a.onError&&a.onError(e)},this.resolveURL=function(e){return g?g(e):e},this.setURLModifier=function(e){return g=e,this},this.addHandler=function(e,t){return s.push(e,t),this},this.removeHandler=function(e){var t=s.indexOf(e);return-1!==t&&s.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=s.length;t<n;t+=2){var i=s[t],a=s[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return a}return null}})),Qc=new Pc,Oc=function(){function e(t){W(this,e),this.manager=void 0!==t?t:Qc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return R(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(i,a){n.load(e,i,t,a)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),jc={},$c=function(e){G(n,e);var t=x(n);function n(e,i){var a;return W(this,n),(a=t.call(this,e)).response=i,a}return R(n)}(d(Error)),eI=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){var a=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var l=Dc.get(e);if(void 0!==l)return this.manager.itemStart(e),setTimeout((function(){t&&t(l),a.manager.itemEnd(e)}),0),l;if(void 0===jc[e]){jc[e]=[],jc[e].push({onLoad:t,onProgress:n,onError:i});var r=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,g=this.responseType;fetch(r).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=jc[e],i=t.body.getReader(),a=t.headers.get("Content-Length"),l=a?parseInt(a):0,r=0!==l,o=0,g=new ReadableStream({start:function(e){!function t(){i.read().then((function(i){var a=i.done,g=i.value;if(a)e.close();else{o+=g.byteLength;for(var s=new ProgressEvent("progress",{lengthComputable:r,loaded:o,total:l}),u=0,c=n.length;u<c;u++){var I=n[u];I.onProgress&&I.onProgress(s)}e.enqueue(g),t()}}))}()}});return new Response(g)}throw new $c('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(g){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,o)}));case"json":return e.json();default:if(void 0===o)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((function(e){return i.decode(e)}))}})).then((function(t){Dc.add(e,t);var n=jc[e];delete jc[e];for(var i=0,a=n.length;i<a;i++){var l=n[i];l.onLoad&&l.onLoad(t)}})).catch((function(t){var n=jc[e];if(void 0===n)throw a.manager.itemError(e),t;delete jc[e];for(var i=0,l=n.length;i<l;i++){var r=n[i];r.onError&&r.onError(t)}a.manager.itemError(e)})).finally((function(){a.manager.itemEnd(e)})),this.manager.itemStart(e)}else jc[e].push({onLoad:t,onProgress:n,onError:i})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Oc),tI=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){var a=this,l=new eI(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(n){try{t(a.parse(JSON.parse(n)))}catch(cy){i?i(cy):console.error(cy),a.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=Ec.parse(e[n]);t.push(i)}return t}}]),n}(Oc),nI=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){var a=this,l=[],r=new Ts,o=new eI(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(a.withCredentials);var g=0;function s(s){o.load(e[s],(function(e){var n=a.parse(e,!0);l[s]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(g+=1)&&(1===n.mipmapCount&&(r.minFilter=Ee),r.image=l,r.format=n.format,r.needsUpdate=!0,t&&t(r))}),n,i)}if(Array.isArray(e))for(var u=0,c=e.length;u<c;++u)s(u);else o.load(e,(function(e){var n=a.parse(e,!0);if(n.isCubemap){for(var i=n.mipmaps.length/n.mipmapCount,o=0;o<i;o++){l[o]={mipmaps:[]};for(var g=0;g<n.mipmapCount;g++)l[o].mipmaps.push(n.mipmaps[o*n.mipmapCount+g]),l[o].format=n.format,l[o].width=n.width,l[o].height=n.height}r.image=l}else r.image.width=n.width,r.image.height=n.height,r.mipmaps=n.mipmaps;1===n.mipmapCount&&(r.minFilter=Ee),r.format=n.format,r.needsUpdate=!0,t&&t(r)}),n,i);return r}}]),n}(Oc),iI=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,l=Dc.get(e);if(void 0!==l)return a.manager.itemStart(e),setTimeout((function(){t&&t(l),a.manager.itemEnd(e)}),0),l;var r=si("img");function o(){s(),Dc.add(e,this),t&&t(this),a.manager.itemEnd(e)}function g(t){s(),i&&i(t),a.manager.itemError(e),a.manager.itemEnd(e)}function s(){r.removeEventListener("load",o,!1),r.removeEventListener("error",g,!1)}return r.addEventListener("load",o,!1),r.addEventListener("error",g,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(r.crossOrigin=this.crossOrigin),a.manager.itemStart(e),r.src=e,r}}]),n}(Oc),aI=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){var a=new Ul,l=new iI(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);var r=0;function o(n){l.load(e[n],(function(e){a.images[n]=e,6===++r&&(a.needsUpdate=!0,t&&t(a))}),void 0,i)}for(var g=0;g<e.length;++g)o(g);return a}}]),n}(Oc),lI=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){var a=this,l=new ds,r=new eI(this.manager);return r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setPath(this.path),r.setWithCredentials(a.withCredentials),r.load(e,(function(e){var n=a.parse(e);n&&(void 0!==n.image?l.image=n.image:void 0!==n.data&&(l.image.width=n.width,l.image.height=n.height,l.image.data=n.data),l.wrapS=void 0!==n.wrapS?n.wrapS:Ne,l.wrapT=void 0!==n.wrapT?n.wrapT:Ne,l.magFilter=void 0!==n.magFilter?n.magFilter:Ee,l.minFilter=void 0!==n.minFilter?n.minFilter:Ee,l.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(l.encoding=n.encoding),void 0!==n.flipY&&(l.flipY=n.flipY),void 0!==n.format&&(l.format=n.format),void 0!==n.type&&(l.type=n.type),void 0!==n.mipmaps&&(l.mipmaps=n.mipmaps,l.minFilter=De),1===n.mipmapCount&&(l.minFilter=Ee),void 0!==n.generateMipmaps&&(l.generateMipmaps=n.generateMipmaps),l.needsUpdate=!0,t&&t(l,n))}),n,i),l}}]),n}(Oc),rI=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){var a=new xi,l=new iI(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,(function(e){a.image=e,a.needsUpdate=!0,void 0!==t&&t(a)}),n,i),a}}]),n}(Oc),oI=function(e){G(n,e);var t=x(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return W(this,n),(i=t.call(this)).isLight=!0,i.type="Light",i.color=new vi(e),i.intensity=a,i}return R(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=v(u(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Ka),gI=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;return W(this,n),(l=t.call(this,e,a)).isHemisphereLight=!0,l.type="HemisphereLight",l.position.copy(Ka.DefaultUp),l.updateMatrix(),l.groundColor=new vi(i),l}return R(n,[{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(oI),sI=new Ia,uI=new Yi,cI=new Yi,II=function(){function e(t){W(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ai(512,512),this.map=null,this.mapPass=null,this.matrix=new Ia,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tr,this._frameExtents=new ai(1,1),this._viewportCount=1,this._viewports=[new wi(0,0,1,1)]}return R(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;uI.setFromMatrixPosition(e.matrixWorld),t.position.copy(uI),cI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(cI),t.updateMatrixWorld(),sI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sI),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),CI=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this,new Tl(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return R(n,[{key:"updateMatrices",value:function(e){var t=this.camera,i=2*Un*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,l=e.distance||t.far;i===t.fov&&a===t.aspect&&l===t.far||(t.fov=i,t.aspect=a,t.far=l,t.updateProjectionMatrix()),v(u(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(II),dI=function(e){G(n,e);var t=x(n);function n(e,i){var a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return W(this,n),(a=t.call(this,e,i)).isSpotLight=!0,a.type="SpotLight",a.position.copy(Ka.DefaultUp),a.updateMatrix(),a.target=new Ka,a.distance=l,a.angle=r,a.penumbra=o,a.decay=g,a.map=null,a.shadow=new CI,a}return R(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(oI),hI=new Ia,AI=new Yi,mI=new Yi,pI=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this,new Tl(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new ai(4,2),e._viewportCount=6,e._viewports=[new wi(2,1,1,1),new wi(0,1,1,1),new wi(3,1,1,1),new wi(1,1,1,1),new wi(3,0,1,1),new wi(1,0,1,1)],e._cubeDirections=[new Yi(1,0,0),new Yi(-1,0,0),new Yi(0,0,1),new Yi(0,0,-1),new Yi(0,1,0),new Yi(0,-1,0)],e._cubeUps=[new Yi(0,1,0),new Yi(0,1,0),new Yi(0,1,0),new Yi(0,1,0),new Yi(0,0,1),new Yi(0,0,-1)],e}return R(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,i=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),AI.setFromMatrixPosition(e.matrixWorld),n.position.copy(AI),mI.copy(n.position),mI.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(mI),n.updateMatrixWorld(),i.makeTranslation(-AI.x,-AI.y,-AI.z),hI.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hI)}}]),n}(II),fI=function(e){G(n,e);var t=x(n);function n(e,i){var a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return W(this,n),(a=t.call(this,e,i)).isPointLight=!0,a.type="PointLight",a.distance=l,a.decay=r,a.shadow=new pI,a}return R(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(oI),bI=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this,new dr(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return R(n)}(II),vI=function(e){G(n,e);var t=x(n);function n(e,i){var a;return W(this,n),(a=t.call(this,e,i)).isDirectionalLight=!0,a.type="DirectionalLight",a.position.copy(Ka.DefaultUp),a.updateMatrix(),a.target=new Ka,a.shadow=new bI,a}return R(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(oI),yI=function(e){G(n,e);var t=x(n);function n(e,i){var a;return W(this,n),(a=t.call(this,e,i)).isAmbientLight=!0,a.type="AmbientLight",a}return R(n)}(oI),GI=function(e){G(n,e);var t=x(n);function n(e,i){var a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return W(this,n),(a=t.call(this,e,i)).isRectAreaLight=!0,a.type="RectAreaLight",a.width=l,a.height=r,a}return R(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=v(u(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(oI),BI=function(){function e(){W(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Yi)}return R(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,i=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*i),t.addScaledVector(l[2],.488603*a),t.addScaledVector(l[3],.488603*n),t.addScaledVector(l[4],n*i*1.092548),t.addScaledVector(l[5],i*a*1.092548),t.addScaledVector(l[6],.315392*(3*a*a-1)),t.addScaledVector(l[7],n*a*1.092548),t.addScaledVector(l[8],.546274*(n*n-i*i)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,i=e.y,a=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],1.023328*i),t.addScaledVector(l[2],1.023328*a),t.addScaledVector(l[3],1.023328*n),t.addScaledVector(l[4],.858086*n*i),t.addScaledVector(l[5],.858086*i*a),t.addScaledVector(l[6],.743125*a*a-.247708),t.addScaledVector(l[7],.858086*n*a),t.addScaledVector(l[8],.429043*(n*n-i*i)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-i*i)}}]),e}(),ZI=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new BI,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return W(this,n),(e=t.call(this,void 0,a)).isLightProbe=!0,e.sh=i,e}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=v(u(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(oI),xI=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this,e)).textures={},i}return R(n,[{key:"load",value:function(e,t,n,i){var a=this,l=new eI(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,(function(n){try{t(a.parse(JSON.parse(n)))}catch(cy){i?i(cy):console.error(cy),a.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var a=n.createMaterialFromType(e.type);if(void 0!==e.uuid&&(a.uuid=e.uuid),void 0!==e.name&&(a.name=e.name),void 0!==e.color&&void 0!==a.color&&a.color.setHex(e.color),void 0!==e.roughness&&(a.roughness=e.roughness),void 0!==e.metalness&&(a.metalness=e.metalness),void 0!==e.sheen&&(a.sheen=e.sheen),void 0!==e.sheenColor&&(a.sheenColor=(new vi).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(a.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==a.emissive&&a.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==a.specular&&a.specular.setHex(e.specular),void 0!==e.specularIntensity&&(a.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==a.specularColor&&a.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(a.shininess=e.shininess),void 0!==e.clearcoat&&(a.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(a.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(a.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(a.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(a.transmission=e.transmission),void 0!==e.thickness&&(a.thickness=e.thickness),void 0!==e.attenuationDistance&&(a.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==a.attenuationColor&&a.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(a.fog=e.fog),void 0!==e.flatShading&&(a.flatShading=e.flatShading),void 0!==e.blending&&(a.blending=e.blending),void 0!==e.combine&&(a.combine=e.combine),void 0!==e.side&&(a.side=e.side),void 0!==e.shadowSide&&(a.shadowSide=e.shadowSide),void 0!==e.opacity&&(a.opacity=e.opacity),void 0!==e.transparent&&(a.transparent=e.transparent),void 0!==e.alphaTest&&(a.alphaTest=e.alphaTest),void 0!==e.depthTest&&(a.depthTest=e.depthTest),void 0!==e.depthWrite&&(a.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(a.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(a.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(a.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(a.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(a.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(a.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(a.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(a.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(a.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(a.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(a.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(a.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(a.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(a.rotation=e.rotation),1!==e.linewidth&&(a.linewidth=e.linewidth),void 0!==e.dashSize&&(a.dashSize=e.dashSize),void 0!==e.gapSize&&(a.gapSize=e.gapSize),void 0!==e.scale&&(a.scale=e.scale),void 0!==e.polygonOffset&&(a.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(a.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(a.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(a.dithering=e.dithering),void 0!==e.alphaToCoverage&&(a.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(a.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.toneMapped&&(a.toneMapped=e.toneMapped),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var l in e.uniforms){var r=e.uniforms[l];switch(a.uniforms[l]={},r.type){case"t":a.uniforms[l].value=i(r.value);break;case"c":a.uniforms[l].value=(new vi).setHex(r.value);break;case"v2":a.uniforms[l].value=(new ai).fromArray(r.value);break;case"v3":a.uniforms[l].value=(new Yi).fromArray(r.value);break;case"v4":a.uniforms[l].value=(new wi).fromArray(r.value);break;case"m3":a.uniforms[l].value=(new li).fromArray(r.value);break;case"m4":a.uniforms[l].value=(new Ia).fromArray(r.value);break;default:a.uniforms[l].value=r.value}}if(void 0!==e.defines&&(a.defines=e.defines),void 0!==e.vertexShader&&(a.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(a.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(a.glslVersion=e.glslVersion),void 0!==e.extensions)for(var o in e.extensions)a.extensions[o]=e.extensions[o];if(void 0!==e.size&&(a.size=e.size),void 0!==e.sizeAttenuation&&(a.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(a.map=i(e.map)),void 0!==e.matcap&&(a.matcap=i(e.matcap)),void 0!==e.alphaMap&&(a.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(a.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(a.bumpScale=e.bumpScale),void 0!==e.normalMap&&(a.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(a.normalMapType=e.normalMapType),void 0!==e.normalScale){var g=e.normalScale;!1===Array.isArray(g)&&(g=[g,g]),a.normalScale=(new ai).fromArray(g)}return void 0!==e.displacementMap&&(a.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(a.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(a.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(a.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(a.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(a.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(a.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(a.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(a.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(a.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(a.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(a.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(a.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(a.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(a.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(a.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(a.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(a.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(a.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(a.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(a.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(a.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(a.clearcoatNormalScale=(new ai).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(a.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(a.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(a.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(a.thicknessMap=i(e.thicknessMap)),void 0!==e.sheenColorMap&&(a.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(a.sheenRoughnessMap=i(e.sheenRoughnessMap)),a}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){return new{ShadowMaterial:Ac,SpriteMaterial:_g,RawShaderMaterial:mc,ShaderMaterial:Ll,PointsMaterial:Ys,MeshPhysicalMaterial:fc,MeshStandardMaterial:pc,MeshPhongMaterial:bc,MeshToonMaterial:vc,MeshNormalMaterial:yc,MeshLambertMaterial:Gc,MeshDepthMaterial:fg,MeshDistanceMaterial:bg,MeshBasicMaterial:Oa,MeshMatcapMaterial:Bc,LineDashedMaterial:Zc,LineBasicMaterial:Bs,Material:Qa}[e]}}]),n}(Oc),wI=function(){function e(){W(this,e)}return R(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(cy){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),qI=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=v(u(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(pl),WI=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){var a=this,l=new eI(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,(function(n){try{t(a.parse(JSON.parse(n)))}catch(cy){i?i(cy):console.error(cy),a.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t={},n={};function i(e,i){if(void 0!==t[i])return t[i];var a=e.interleavedBuffers[i],l=function(e,t){if(void 0!==n[t])return n[t];var i=e.arrayBuffers[t],a=new Uint32Array(i).buffer;return n[t]=a,a}(e,a.buffer),r=gi(a.type,l),o=new Mg(r,a.stride);return o.uuid=a.uuid,t[i]=o,o}var a=e.isInstancedBufferGeometry?new qI:new pl,l=e.data.index;if(void 0!==l){var r=gi(l.type,l.array);a.setIndex(new el(r,1))}var o=e.data.attributes;for(var g in o){var s=o[g],u=void 0;if(s.isInterleavedBufferAttribute){var c=i(e.data,s.data);u=new Lg(c,s.itemSize,s.offset,s.normalized)}else{var I=gi(s.type,s.array);u=new(s.isInstancedBufferAttribute?ps:el)(I,s.itemSize,s.normalized)}void 0!==s.name&&(u.name=s.name),void 0!==s.usage&&u.setUsage(s.usage),void 0!==s.updateRange&&(u.updateRange.offset=s.updateRange.offset,u.updateRange.count=s.updateRange.count),a.setAttribute(g,u)}var C=e.data.morphAttributes;if(C)for(var d in C){for(var h=C[d],A=[],m=0,p=h.length;m<p;m++){var f=h[m],b=void 0;if(f.isInterleavedBufferAttribute){var v=i(e.data,f.data);b=new Lg(v,f.itemSize,f.offset,f.normalized)}else{var y=gi(f.type,f.array);b=new el(y,f.itemSize,f.normalized)}void 0!==f.name&&(b.name=f.name),A.push(b)}a.morphAttributes[d]=A}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);var G=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==G)for(var B=0,Z=G.length;B!==Z;++B){var x=G[B];a.addGroup(x.start,x.count,x.materialIndex)}var w=e.data.boundingSphere;if(void 0!==w){var q=new Yi;void 0!==w.center&&q.fromArray(w.center),a.boundingSphere=new ia(q,w.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}]),n}(Oc),SI=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){var a=this,l=""===this.path?wI.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;var r=new eI(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(function(n){var l=null;try{l=JSON.parse(n)}catch(o){return void 0!==i&&i(o),void console.error("THREE:ObjectLoader: Can't parse "+e+".",o.message)}var r=l.metadata;void 0!==r&&void 0!==r.type&&"geometry"!==r.type.toLowerCase()?a.parse(l,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)}},{key:"loadAsync",value:function(){var e=p(q().mark((function e(t,n){var i,a,l,r,o,g;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this,a=""===this.path?wI.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||a,(l=new eI(this.manager)).setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),e.next=9,l.loadAsync(t,n);case 9:if(r=e.sent,o=JSON.parse(r),void 0!==(g=o.metadata)&&void 0!==g.type&&"geometry"!==g.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,i.parseAsync(o);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),l=this.parseImages(e.images,(function(){void 0!==t&&t(g)})),r=this.parseTextures(e.textures,l),o=this.parseMaterials(e.materials,r),g=this.parseObject(e.object,a,o,r,n),s=this.parseSkeletons(e.skeletons,g);if(this.bindSkeletons(g,s),void 0!==t){var u=!1;for(var c in l)if(l[c].data instanceof HTMLImageElement){u=!0;break}!1===u&&t(g)}return g}},{key:"parseAsync",value:function(){var e=p(q().mark((function e(t){var n,i,a,l,r,o,g,s;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,i),e.next=5,this.parseImagesAsync(t.images);case 5:return l=e.sent,r=this.parseTextures(t.textures,l),o=this.parseMaterials(t.materials,r),g=this.parseObject(t.object,a,o,r,n),s=this.parseSkeletons(t.skeletons,g),this.bindSkeletons(g,s),e.abrupt("return",g);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var a=(new xu).fromJSON(e[n]);t[a.uuid]=a}return t}},{key:"parseSkeletons",value:function(e,t){var n={},i={};if(t.traverse((function(e){e.isBone&&(i[e.uuid]=e)})),void 0!==e)for(var a=0,l=e.length;a<l;a++){var r=(new ms).fromJSON(e[a],i);n[r.uuid]=r}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var i=new WI,a=0,l=e.length;a<l;a++){var r=void 0,o=e[a];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":r=i.parse(o);break;default:o.type in hc?r=hc[o.type].fromJSON(o,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(o.type,'"'))}r.uuid=o.uuid,void 0!==o.name&&(r.name=o.name),!0===r.isBufferGeometry&&void 0!==o.userData&&(r.userData=o.userData),n[o.uuid]=r}return n}},{key:"parseMaterials",value:function(e,t){var n={},i={};if(void 0!==e){var a=new xI;a.setTextures(t);for(var l=0,r=e.length;l<r;l++){var o=e[l];void 0===n[o.uuid]&&(n[o.uuid]=a.parse(o)),i[o.uuid]=n[o.uuid]}}return i}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var i=e[n],a=Ec.parse(i);t[a.uuid]=a}return t}},{key:"parseImages",value:function(e,t){var n,i=this,a={};function l(e){if("string"===typeof e){var t=e;return function(e){return i.manager.itemStart(e),n.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t)}return e.data?{data:gi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var r=new Pc(t);(n=new iI(r)).setCrossOrigin(this.crossOrigin);for(var o=0,g=e.length;o<g;o++){var s=e[o],u=s.url;if(Array.isArray(u)){for(var c=[],I=0,C=u.length;I<C;I++){var d=l(u[I]);null!==d&&(d instanceof HTMLImageElement?c.push(d):c.push(new ds(d.data,d.width,d.height)))}a[s.uuid]=new Gi(c)}else{var h=l(s.url);a[s.uuid]=new Gi(h)}}}return a}},{key:"parseImagesAsync",value:function(){var e=p(q().mark((function e(t){var n,i,a,l,r,o,g,s,u,c,I,C,d,h,A;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){return r=p(q().mark((function e(t){var i,l;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i=t)?i:n.resourcePath+i,e.next=5,a.loadAsync(l);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:gi(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)},l=function(e){return r.apply(this,arguments)},n=this,i={},!(void 0!==t&&t.length>0)){e.next=33;break}(a=new iI(this.manager)).setCrossOrigin(this.crossOrigin),o=0,g=t.length;case 8:if(!(o<g)){e.next=33;break}if(s=t[o],u=s.url,!Array.isArray(u)){e.next=26;break}c=[],I=0,C=u.length;case 14:if(!(I<C)){e.next=23;break}return d=u[I],e.next=18,l(d);case 18:null!==(h=e.sent)&&(h instanceof HTMLImageElement?c.push(h):c.push(new ds(h.data,h.width,h.height)));case 20:I++,e.next=14;break;case 23:i[s.uuid]=new Gi(c),e.next=30;break;case 26:return e.next=28,l(s.url);case 28:A=e.sent,i[s.uuid]=new Gi(A);case 30:o++,e.next=8;break;case 33:return e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var a=0,l=e.length;a<l;a++){var r=e[a];void 0===r.image&&console.warn('THREE.ObjectLoader: No "image" specified for',r.uuid),void 0===t[r.image]&&console.warn("THREE.ObjectLoader: Undefined image",r.image);var o=t[r.image],g=o.data,s=void 0;Array.isArray(g)?(s=new Ul,6===g.length&&(s.needsUpdate=!0)):(s=g&&g.data?new ds:new xi,g&&(s.needsUpdate=!0)),s.source=o,s.uuid=r.uuid,void 0!==r.name&&(s.name=r.name),void 0!==r.mapping&&(s.mapping=n(r.mapping,RI)),void 0!==r.offset&&s.offset.fromArray(r.offset),void 0!==r.repeat&&s.repeat.fromArray(r.repeat),void 0!==r.center&&s.center.fromArray(r.center),void 0!==r.rotation&&(s.rotation=r.rotation),void 0!==r.wrap&&(s.wrapS=n(r.wrap[0],VI),s.wrapT=n(r.wrap[1],VI)),void 0!==r.format&&(s.format=r.format),void 0!==r.type&&(s.type=r.type),void 0!==r.encoding&&(s.encoding=r.encoding),void 0!==r.minFilter&&(s.minFilter=n(r.minFilter,XI)),void 0!==r.magFilter&&(s.magFilter=n(r.magFilter,XI)),void 0!==r.anisotropy&&(s.anisotropy=r.anisotropy),void 0!==r.flipY&&(s.flipY=r.flipY),void 0!==r.premultiplyAlpha&&(s.premultiplyAlpha=r.premultiplyAlpha),void 0!==r.unpackAlignment&&(s.unpackAlignment=r.unpackAlignment),void 0!==r.userData&&(s.userData=r.userData),i[r.uuid]=s}return i}},{key:"parseObject",value:function(e,t,n,i,a){var l,r,o;function g(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,a=e.length;i<a;i++){var l=e[i];void 0===n[l]&&console.warn("THREE.ObjectLoader: Undefined material",l),t.push(n[l])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":l=new Hg,void 0!==e.background&&(Number.isInteger(e.background)?l.background=new vi(e.background):l.background=u(e.background)),void 0!==e.environment&&(l.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?l.fog=new Ng(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(l.fog=new Kg(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":l=new Tl(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(l.focus=e.focus),void 0!==e.zoom&&(l.zoom=e.zoom),void 0!==e.filmGauge&&(l.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(l.filmOffset=e.filmOffset),void 0!==e.view&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new dr(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(l.zoom=e.zoom),void 0!==e.view&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new yI(e.color,e.intensity);break;case"DirectionalLight":l=new vI(e.color,e.intensity);break;case"PointLight":l=new fI(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new GI(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new dI(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new gI(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=(new ZI).fromJSON(e);break;case"SkinnedMesh":r=g(e.geometry),o=s(e.material),l=new Is(r,o),void 0!==e.bindMode&&(l.bindMode=e.bindMode),void 0!==e.bindMatrix&&l.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(l.skeleton=e.skeleton);break;case"Mesh":r=g(e.geometry),o=s(e.material),l=new zl(r,o);break;case"InstancedMesh":r=g(e.geometry),o=s(e.material);var c=e.count,I=e.instanceMatrix,C=e.instanceColor;(l=new Gs(r,o,c)).instanceMatrix=new ps(new Float32Array(I.array),16),void 0!==C&&(l.instanceColor=new ps(new Float32Array(C.array),C.itemSize));break;case"LOD":l=new rs;break;case"Line":l=new Ss(g(e.geometry),s(e.material));break;case"LineLoop":l=new ks(g(e.geometry),s(e.material));break;case"LineSegments":l=new Xs(g(e.geometry),s(e.material));break;case"PointCloud":case"Points":l=new Ms(g(e.geometry),s(e.material));break;case"Sprite":l=new ns(s(e.material));break;case"Group":l=new xg;break;case"Bone":l=new Cs;break;default:l=new Ka}if(l.uuid=e.uuid,void 0!==e.name&&(l.name=e.name),void 0!==e.matrix?(l.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(void 0!==e.position&&l.position.fromArray(e.position),void 0!==e.rotation&&l.rotation.fromArray(e.rotation),void 0!==e.quaternion&&l.quaternion.fromArray(e.quaternion),void 0!==e.scale&&l.scale.fromArray(e.scale)),void 0!==e.castShadow&&(l.castShadow=e.castShadow),void 0!==e.receiveShadow&&(l.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(l.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(l.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(l.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&l.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(l.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(l.visible=e.visible),void 0!==e.frustumCulled&&(l.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(l.renderOrder=e.renderOrder),void 0!==e.userData&&(l.userData=e.userData),void 0!==e.layers&&(l.layers.mask=e.layers),void 0!==e.children)for(var d=e.children,h=0;h<d.length;h++)l.add(this.parseObject(d[h],t,n,i,a));if(void 0!==e.animations)for(var A=e.animations,m=0;m<A.length;m++){var p=A[m];l.animations.push(a[p])}if("LOD"===e.type){void 0!==e.autoUpdate&&(l.autoUpdate=e.autoUpdate);for(var f=e.levels,b=0;b<f.length;b++){var v=f[b],y=l.getObjectByProperty("uuid",v.object);void 0!==y&&l.addLevel(y,v.distance)}}return l}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}]),n}(Oc),RI={UVMapping:Re,CubeReflectionMapping:Ve,CubeRefractionMapping:Xe,EquirectangularReflectionMapping:ke,EquirectangularRefractionMapping:Ye,CubeUVReflectionMapping:ze},VI={RepeatWrapping:Ke,ClampToEdgeWrapping:Ne,MirroredRepeatWrapping:He},XI={NearestFilter:Me,NearestMipmapNearestFilter:Fe,NearestMipmapLinearFilter:_e,LinearFilter:Ee,LinearMipmapNearestFilter:Je,LinearMipmapLinearFilter:De},kI=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this,e)).isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),i.options={premultiplyAlpha:"none"},i}return R(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,l=Dc.get(e);if(void 0!==l)return a.manager.itemStart(e),setTimeout((function(){t&&t(l),a.manager.itemEnd(e)}),0),l;var r={};r.credentials="anonymous"===this.crossOrigin?"same-origin":"include",r.headers=this.requestHeader,fetch(e,r).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(a.options,{colorSpaceConversion:"none"}))})).then((function(n){Dc.add(e,n),t&&t(n),a.manager.itemEnd(e)})).catch((function(t){i&&i(t),a.manager.itemError(e),a.manager.itemEnd(e)})),a.manager.itemStart(e)}}]),n}(Oc),YI={getContext:function(){return void 0===Uc&&(Uc=new(window.AudioContext||window.webkitAudioContext)),Uc},setContext:function(e){Uc=e}},zI=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){var a=this,l=new eI(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(n){try{var l=n.slice(0);YI.getContext().decodeAudioData(l,(function(e){t(e)}))}catch(cy){i?i(cy):console.error(cy),a.manager.itemError(e)}}),n,i)}}]),n}(Oc),KI=function(e){G(n,e);var t=x(n);function n(e,i){var a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;W(this,n),(a=t.call(this,void 0,l)).isHemisphereLightProbe=!0;var r=(new vi).set(e),o=(new vi).set(i),g=new Yi(r.r,r.g,r.b),s=new Yi(o.r,o.g,o.b),u=Math.sqrt(Math.PI),c=u*Math.sqrt(.75);return a.sh.coefficients[0].copy(g).add(s).multiplyScalar(u),a.sh.coefficients[1].copy(g).sub(s).multiplyScalar(c),a}return R(n)}(ZI),NI=function(e){G(n,e);var t=x(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;W(this,n),(i=t.call(this,void 0,a)).isAmbientLightProbe=!0;var l=(new vi).set(e);return i.sh.coefficients[0].set(l.r,l.g,l.b).multiplyScalar(2*Math.sqrt(Math.PI)),i}return R(n)}(ZI),HI=new Ia,MI=new Ia,FI=new Ia,LI=function(){function e(){W(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Tl,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Tl,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return R(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,FI.copy(e.projectionMatrix);var n,i,a=t.eyeSep/2,l=a*t.near/t.focus,r=t.near*Math.tan(Jn*t.fov*.5)/t.zoom;MI.elements[12]=-a,HI.elements[12]=a,n=-r*t.aspect+l,i=r*t.aspect+l,FI.elements[0]=2*t.near/(i-n),FI.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(FI),n=-r*t.aspect-l,i=r*t.aspect-l,FI.elements[0]=2*t.near/(i-n),FI.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(FI)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(MI),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(HI)}}]),e}(),_I=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];W(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return R(e,[{key:"start",value:function(){this.startTime=TI(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=TI();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function TI(){return("undefined"===typeof performance?Date:performance).now()}var EI=new Yi,JI=new ki,UI=new Yi,DI=new Yi,PI=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this)).type="AudioListener",e.context=YI.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new _I,e}return R(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){v(u(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(EI,JI,UI),DI.set(0,0,-1).applyQuaternion(JI),t.positionX){var a=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(EI.x,a),t.positionY.linearRampToValueAtTime(EI.y,a),t.positionZ.linearRampToValueAtTime(EI.z,a),t.forwardX.linearRampToValueAtTime(DI.x,a),t.forwardY.linearRampToValueAtTime(DI.y,a),t.forwardZ.linearRampToValueAtTime(DI.z,a),t.upX.linearRampToValueAtTime(i.x,a),t.upY.linearRampToValueAtTime(i.y,a),t.upZ.linearRampToValueAtTime(i.z,a)}else t.setPosition(EI.x,EI.y,EI.z),t.setOrientation(DI.x,DI.y,DI.z,i.x,i.y,i.z)}}]),n}(Ka),QI=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).type="Audio",i.listener=e,i.context=e.context,i.gain=i.context.createGain(),i.gain.connect(e.getInput()),i.autoplay=!1,i.buffer=null,i.detune=0,i.loop=!1,i.loopStart=0,i.loopEnd=0,i.offset=0,i.duration=void 0,i.playbackRate=1,i.isPlaying=!1,i.hasPlaybackControl=!0,i.source=null,i.sourceType="empty",i._startedAt=0,i._progress=0,i._connected=!1,i.filters=[],i}return R(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Ka),OI=new Yi,jI=new ki,$I=new Yi,eC=new Yi,tC=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this,e)).panner=i.context.createPanner(),i.panner.panningModel="HRTF",i.panner.connect(i.gain),i}return R(n,[{key:"disconnect",value:function(){v(u(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(v(u(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(OI,jI,$I),eC.set(0,0,1).applyQuaternion(jI);var t=this.panner;if(t.positionX){var i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(OI.x,i),t.positionY.linearRampToValueAtTime(OI.y,i),t.positionZ.linearRampToValueAtTime(OI.z,i),t.orientationX.linearRampToValueAtTime(eC.x,i),t.orientationY.linearRampToValueAtTime(eC.y,i),t.orientationZ.linearRampToValueAtTime(eC.z,i)}else t.setPosition(OI.x,OI.y,OI.z),t.setOrientation(eC.x,eC.y,eC.z)}}}]),n}(QI),nC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;W(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return R(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),iC=function(){function e(t,n,i){var a,l,r;switch(W(this,e),this.binding=t,this.valueSize=i,n){case"quaternion":a=this._slerp,l=this._slerpAdditive,r=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":a=this._select,l=this._select,r=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:a=this._lerp,l=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=l,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return R(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,i=this.valueSize,a=e*i+i,l=this.cumulativeWeight;if(0===l){for(var r=0;r!==i;++r)n[a+r]=n[r];l=t}else{var o=t/(l+=t);this._mixBufferRegion(n,a,0,o,i)}this.cumulativeWeight=l}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,a=this.cumulativeWeight,l=this.cumulativeWeightAdditive,r=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){var o=t*this._origIndex;this._mixBufferRegion(n,i,o,1-a,t)}l>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(var g=t,s=t+t;g!==s;++g)if(n[g]!==n[g+t]){r.setValue(n,i);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(var a=n,l=i;a!==l;++a)t[a]=t[i+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,i,a){if(i>=.5)for(var l=0;l!==a;++l)e[t+l]=e[n+l]}},{key:"_slerp",value:function(e,t,n,i){ki.slerpFlat(e,t,e,t,e,n,i)}},{key:"_slerpAdditive",value:function(e,t,n,i,a){var l=this._workIndex*a;ki.multiplyQuaternionsFlat(e,l,e,t,e,n),ki.slerpFlat(e,t,e,t,e,l,i)}},{key:"_lerp",value:function(e,t,n,i,a){for(var l=1-i,r=0;r!==a;++r){var o=t+r;e[o]=e[o]*l+e[n+r]*i}}},{key:"_lerpAdditive",value:function(e,t,n,i,a){for(var l=0;l!==a;++l){var r=t+l;e[r]=e[r]+e[n+l]*i}}}]),e}(),aC="\\[\\]\\.:\\/",lC=new RegExp("[\\[\\]\\.:\\/]","g"),rC="[^\\[\\]\\.:\\/]",oC="[^"+aC.replace("\\.","")+"]",gC=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",rC)+/(WCOD+)?/.source.replace("WCOD",oC)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",rC)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",rC)+"$"),sC=["material","materials","bones","map"],uC=function(){function e(t,n,i){W(this,e);var a=i||cC.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,a)}return R(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,a=n.length;i!==a;++i)n[i].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),cC=function(){function e(t,n,i){W(this,e),this.path=n,this.parsedPath=i||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return R(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,a=n.length;i!==a;++i)e[t++]=n[i]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,a=n.length;i!==a;++i)n[i]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,a=n.length;i!==a;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,a=n.length;i!==a;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,i=n.objectName,a=n.propertyName,l=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var r=n.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===r){r=o;break}break;case"map":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}var g=t[a];if(void 0!==g){var s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==l){if("morphTargetInfluences"===a){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[l]&&(l=t.morphTargetDictionary[l])}u=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=l}else void 0!==g.fromArray&&void 0!==g.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(u=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=a;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][s]}else{var c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+a+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,i){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,i):new e(t,n,i)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(lC,"")}},{key:"parseTrackName",value:function(e){var t=gC.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var a=n.nodeName.substring(i+1);-1!==sC.indexOf(a)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=a)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var a=n[i];if(a.name===t||a.uuid===t)return a;var l=e(a.children);if(l)return l}return null}(e.children);if(i)return i}return null}}]),e}();cC.Composite=uC,cC.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},cC.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},cC.prototype.GetterByBindingType=[cC.prototype._getValue_direct,cC.prototype._getValue_array,cC.prototype._getValue_arrayElement,cC.prototype._getValue_toArray],cC.prototype.SetterByBindingTypeAndVersioning=[[cC.prototype._setValue_direct,cC.prototype._setValue_direct_setNeedsUpdate,cC.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[cC.prototype._setValue_array,cC.prototype._setValue_array_setNeedsUpdate,cC.prototype._setValue_array_setMatrixWorldNeedsUpdate],[cC.prototype._setValue_arrayElement,cC.prototype._setValue_arrayElement_setNeedsUpdate,cC.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[cC.prototype._setValue_fromArray,cC.prototype._setValue_fromArray_setNeedsUpdate,cC.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var IC=function(){function e(){W(this,e),this.isAnimationObjectGroup=!0,this.uuid=Dn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}return R(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,a=this._bindings,l=a.length,r=void 0,o=e.length,g=this.nCachedObjects_,s=0,u=arguments.length;s!==u;++s){var c=arguments[s],I=c.uuid,C=t[I];if(void 0===C){C=o++,t[I]=C,e.push(c);for(var d=0,h=l;d!==h;++d)a[d].push(new cC(c,n[d],i[d]))}else if(C<g){r=e[C];var A=--g,m=e[A];t[m.uuid]=C,e[C]=m,t[I]=A,e[A]=c;for(var p=0,f=l;p!==f;++p){var b=a[p],v=b[A],y=b[C];b[C]=v,void 0===y&&(y=new cC(c,n[p],i[p])),b[A]=y}}else e[C]!==r&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=g}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,a=this.nCachedObjects_,l=0,r=arguments.length;l!==r;++l){var o=arguments[l],g=o.uuid,s=t[g];if(void 0!==s&&s>=a){var u=a++,c=e[u];t[c.uuid]=s,e[s]=c,t[g]=u,e[u]=o;for(var I=0,C=i;I!==C;++I){var d=n[I],h=d[u],A=d[s];d[s]=h,d[u]=A}}}this.nCachedObjects_=a}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,a=this.nCachedObjects_,l=e.length,r=0,o=arguments.length;r!==o;++r){var g=arguments[r],s=g.uuid,u=t[s];if(void 0!==u)if(delete t[s],u<a){var c=--a,I=e[c],C=--l,d=e[C];t[I.uuid]=u,e[u]=I,t[d.uuid]=c,e[c]=d,e.pop();for(var h=0,A=i;h!==A;++h){var m=n[h],p=m[c],f=m[C];m[u]=p,m[c]=f,m.pop()}}else{var b=--l,v=e[b];b>0&&(t[v.uuid]=u),e[u]=v,e.pop();for(var y=0,G=i;y!==G;++y){var B=n[y];B[u]=B[b],B.pop()}}}this.nCachedObjects_=a}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],a=this._bindings;if(void 0!==i)return a[i];var l=this._paths,r=this._parsedPaths,o=this._objects,g=o.length,s=this.nCachedObjects_,u=new Array(g);i=a.length,n[e]=i,l.push(e),r.push(t),a.push(u);for(var c=s,I=o.length;c!==I;++c){var C=o[c];u[c]=new cC(C,e,t)}return u}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,a=this._parsedPaths,l=this._bindings,r=l.length-1,o=l[r];t[e[r]]=n,l[n]=o,l.pop(),a[n]=a[r],a.pop(),i[n]=i[r],i.pop()}}}]),e}(),CC=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;W(this,e),this._mixer=t,this._clip=n,this._localRoot=i,this.blendMode=a;for(var l=n.tracks,r=l.length,o=new Array(r),g={endingStart:Ot,endingEnd:Ot},s=0;s!==r;++s){var u=l[s].createInterpolant(null);o[s]=u,u.settings=g}this._interpolantSettings=g,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Jt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return R(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,a=e._clip.duration,l=a/i,r=i/a;e.warp(1,l,t),this.warp(r,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var i=this._mixer,a=i.time,l=this.timeScale,r=this._timeScaleInterpolant;null===r&&(r=i._lendControlInterpolant(),this._timeScaleInterpolant=r);var o=r.parameterPositions,g=r.sampleValues;return o[0]=a,o[1]=a+n,g[0]=e/l,g[1]=t/l,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,i){if(this.enabled){var a=this._startTime;if(null!==a){var l=(e-a)*n;l<0||0===n?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);var r=this._updateTime(t),o=this._updateWeight(e);if(o>0){var g=this._interpolants,s=this._propertyBindings;if(this.blendMode===tn)for(var u=0,c=g.length;u!==c;++u)g[u].evaluate(r),s[u].accumulateAdditive(o);else for(var I=0,C=g.length;I!==C;++I)g[I].evaluate(r),s[I].accumulate(i,o)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,i=this.time+e,a=this._loopCount,l=n===Ut;if(0===e)return-1===a?i:l&&1===(1&a)?t-i:i;if(n===Et){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===a&&(e>=0?(a=0,this._setEndings(!0,0===this.repetitions,l)):this._setEndings(0===this.repetitions,!0,l)),i>=t||i<0){var r=Math.floor(i/t);i-=t*r,a+=Math.abs(r);var o=this.repetitions-a;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){var g=e<0;this._setEndings(g,!g,l)}else this._setEndings(!1,!1,l);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:r})}}else this.time=i;if(l&&1===(1&a))return t-i}return i}},{key:"_setEndings",value:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=jt,i.endingEnd=jt):(i.endingStart=e?this.zeroSlopeAtStart?jt:Ot:$t,i.endingEnd=t?this.zeroSlopeAtEnd?jt:Ot:$t)}},{key:"_scheduleFading",value:function(e,t,n){var i=this._mixer,a=i.time,l=this._weightInterpolant;null===l&&(l=i._lendControlInterpolant(),this._weightInterpolant=l);var r=l.parameterPositions,o=l.sampleValues;return r[0]=a,o[0]=t,r[1]=a+e,o[1]=n,this}}]),e}(),dC=new Float32Array(1),hC=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this))._root=e,i._initMemoryManager(),i._accuIndex=0,i.time=0,i.timeScale=1,i}return R(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,a=i.length,l=e._propertyBindings,r=e._interpolants,o=n.uuid,g=this._bindingsByRootAndName,s=g[o];void 0===s&&(s={},g[o]=s);for(var u=0;u!==a;++u){var c=i[u],I=c.name,C=s[I];if(void 0!==C)++C.referenceCount,l[u]=C;else{if(void 0!==(C=l[u])){null===C._cacheIndex&&(++C.referenceCount,this._addInactiveBinding(C,o,I));continue}var d=t&&t._propertyBindings[u].binding.parsedPath;++(C=new iC(cC.create(n,I,d),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(C,o,I),l[u]=C}r[u].resultBuffer=C.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var a=e._propertyBindings,l=0,r=a.length;l!==r;++l){var o=a[l];0===o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var a=t[n];0===--a.useCount&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var i=this._actions,a=this._actionsByClip,l=a[t];if(void 0===l)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=l;else{var r=l.knownActions;e._byClipCacheIndex=r.length,r.push(e)}e._cacheIndex=i.length,i.push(e),l.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var a=e._clip.uuid,l=this._actionsByClip,r=l[a],o=r.knownActions,g=o[o.length-1],s=e._byClipCacheIndex;g._byClipCacheIndex=s,o[s]=g,o.pop(),e._byClipCacheIndex=null,delete r.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete l[a],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var a=t[n];0===--a.referenceCount&&this._removeInactiveBinding(a)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}},{key:"_addInactiveBinding",value:function(e,t,n){var i=this._bindingsByRootAndName,a=this._bindings,l=i[t];void 0===l&&(l={},i[t]=l),l[n]=e,e._cacheIndex=a.length,a.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,a=n.path,l=this._bindingsByRootAndName,r=l[i],o=t[t.length-1],g=e._cacheIndex;o._cacheIndex=g,t[g]=o,t.pop(),delete r[a],0===Object.keys(r).length&&delete l[i]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=n,t[n]=a}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Yc(new Float32Array(2),new Float32Array(2),1,dC)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=n,t[n]=a}},{key:"clipAction",value:function(e,t,n){var i=t||this._root,a=i.uuid,l="string"===typeof e?Ec.findByName(i,e):e,r=null!==l?l.uuid:e,o=this._actionsByClip[r],g=null;if(void 0===n&&(n=null!==l?l.blendMode:en),void 0!==o){var s=o.actionByRoot[a];if(void 0!==s&&s.blendMode===n)return s;g=o.knownActions[0],null===l&&(l=g._clip)}if(null===l)return null;var u=new CC(this,l,t,n);return this._bindAction(u,g),this._addInactiveAction(u,r,a),u}},{key:"existingAction",value:function(e,t){var n=t||this._root,i=n.uuid,a="string"===typeof e?Ec.findByName(n,e):e,l=a?a.uuid:e,r=this._actionsByClip[l];return void 0!==r&&r.actionByRoot[i]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,a=Math.sign(e),l=this._accuIndex^=1,r=0;r!==n;++r){t[r]._update(i,e,a,l)}for(var o=this._bindings,g=this._nActiveBindings,s=0;s!==g;++s)o[s].apply(l);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,a=i[n];if(void 0!==a){for(var l=a.knownActions,r=0,o=l.length;r!==o;++r){var g=l[r];this._deactivateAction(g);var s=g._cacheIndex,u=t[t.length-1];g._cacheIndex=null,g._byClipCacheIndex=null,u._cacheIndex=s,t[s]=u,t.pop(),this._removeInactiveBindingsForAction(g)}delete i[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var a=n[i].actionByRoot[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var l=this._bindingsByRootAndName[t];if(void 0!==l)for(var r in l){var o=l[r];o.restoreOriginalState(),this._removeInactiveBinding(o)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(_n),AC=function(){function e(t){W(this,e),this.value=t}return R(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),mC=0,pC=function(e){G(n,e);var t=x(n);function n(){var e;return W(this,n),(e=t.call(this)).isUniformsGroup=!0,Object.defineProperty(y(e),"id",{value:mC++}),e.name="",e.usage=Rn,e.uniforms=[],e}return R(n,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(_n),fC=function(e){G(n,e);var t=x(n);function n(e,i){var a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return W(this,n),(a=t.call(this,e,i)).isInstancedInterleavedBuffer=!0,a.meshPerAttribute=l,a}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=v(u(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=v(u(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(Mg),bC=function(){function e(t,n,i,a,l){W(this,e),this.isGLBufferAttribute=!0,this.buffer=t,this.type=n,this.itemSize=i,this.elementSize=a,this.count=l,this.version=0}return R(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}(),vC=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;W(this,e),this.ray=new ca(t,n),this.near=i,this.far=a,this.camera=null,this.layers=new Ga,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return R(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return GC(e,this,n,t),n.sort(yC),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,a=e.length;i<a;i++)GC(e[i],this,n,t);return n.sort(yC),n}}]),e}();function yC(e,t){return e.distance-t.distance}function GC(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i)for(var a=e.children,l=0,r=a.length;l<r;l++)GC(a[l],t,n,!0)}var BC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return W(this,e),this.radius=t,this.phi=n,this.theta=i,this}return R(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Pn(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ZC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return W(this,e),this.radius=t,this.theta=n,this.y=i,this}return R(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),xC=new ai,wC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ai(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ai(-1/0,-1/0);W(this,e),this.isBox2=!0,this.min=t,this.max=n}return R(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=xC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return xC.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),qC=new Yi,WC=new Yi,SC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi;W(this,e),this.start=t,this.end=n}return R(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){qC.subVectors(e,this.start),WC.subVectors(this.end,this.start);var n=WC.dot(WC),i=WC.dot(qC)/n;return t&&(i=Pn(i,0,1)),i}},{key:"closestPointToPoint",value:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),RC=new Yi,VC=function(e){G(n,e);var t=x(n);function n(e,i){var a;W(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i;for(var l=new pl,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],o=0,g=1;o<32;o++,g++){var s=o/32*Math.PI*2,u=g/32*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(u),Math.sin(u),1)}l.setAttribute("position",new sl(r,3));var c=new Bs({fog:!1,toneMapped:!1});return a.cone=new Xs(l,c),a.add(a.cone),a.update(),a}return R(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),RC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(RC),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Ka),XC=new Yi,kC=new Ia,YC=new Ia,zC=function(e){G(n,e);var t=x(n);function n(e){var i;W(this,n);for(var a=KC(e),l=new pl,r=[],o=[],g=new vi(0,0,1),s=new vi(0,1,0),u=0;u<a.length;u++){var c=a[u];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(g.r,g.g,g.b),o.push(s.r,s.g,s.b))}l.setAttribute("position",new sl(r,3)),l.setAttribute("color",new sl(o,3));var I=new Bs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(i=t.call(this,l,I)).isSkeletonHelper=!0,i.type="SkeletonHelper",i.root=e,i.bones=a,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i}return R(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,i=this.geometry,a=i.getAttribute("position");YC.copy(this.root.matrixWorld).invert();for(var l=0,r=0;l<t.length;l++){var o=t[l];o.parent&&o.parent.isBone&&(kC.multiplyMatrices(YC,o.matrixWorld),XC.setFromMatrixPosition(kC),a.setXYZ(r,XC.x,XC.y,XC.z),kC.multiplyMatrices(YC,o.parent.matrixWorld),XC.setFromMatrixPosition(kC),a.setXYZ(r+1,XC.x,XC.y,XC.z),r+=2)}i.getAttribute("position").needsUpdate=!0,v(u(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Xs);function KC(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,KC(e.children[n]));return t}var NC=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;W(this,n);var r=new gc(i,4,2),o=new Oa({wireframe:!0,fog:!1,toneMapped:!1});return(l=t.call(this,r,o)).light=e,l.light.updateMatrixWorld(),l.color=a,l.type="PointLightHelper",l.matrix=l.light.matrixWorld,l.matrixAutoUpdate=!1,l.update(),l}return R(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(zl),HC=new Yi,MC=new vi,FC=new vi,LC=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;W(this,n),(l=t.call(this)).light=e,l.light.updateMatrixWorld(),l.matrix=e.matrixWorld,l.matrixAutoUpdate=!1,l.color=a;var r=new lc(i);r.rotateY(.5*Math.PI),l.material=new Oa({wireframe:!0,fog:!1,toneMapped:!1}),void 0===l.color&&(l.material.vertexColors=!0);var o=r.getAttribute("position"),g=new Float32Array(3*o.count);return r.setAttribute("color",new el(g,3)),l.add(new zl(r,l.material)),l.update(),l}return R(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");MC.copy(this.light.color),FC.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var a=n<i/2?MC:FC;t.setXYZ(n,a.r,a.g,a.b)}t.needsUpdate=!0}e.lookAt(HC.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Ka),_C=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;W(this,n),l=new vi(l),r=new vi(r);for(var o=a/2,g=i/a,s=i/2,u=[],c=[],I=0,C=0,d=-s;I<=a;I++,d+=g){u.push(-s,0,d,s,0,d),u.push(d,0,-s,d,0,s);var h=I===o?l:r;h.toArray(c,C),C+=3,h.toArray(c,C),C+=3,h.toArray(c,C),C+=3,h.toArray(c,C),C+=3}var A=new pl;A.setAttribute("position",new sl(u,3)),A.setAttribute("color",new sl(c,3));var m=new Bs({vertexColors:!0,toneMapped:!1});return(e=t.call(this,A,m)).type="GridHelper",e}return R(n)}(Xs),TC=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;W(this,n),o=new vi(o),g=new vi(g);var s=[],u=[];if(a>1)for(var c=0;c<a;c++){var I=c/a*(2*Math.PI),C=Math.sin(I)*i,d=Math.cos(I)*i;s.push(0,0,0),s.push(C,0,d);var h=1&c?o:g;u.push(h.r,h.g,h.b),u.push(h.r,h.g,h.b)}for(var A=0;A<l;A++)for(var m=1&A?o:g,p=i-i/l*A,f=0;f<r;f++){var b=f/r*(2*Math.PI),v=Math.sin(b)*p,y=Math.cos(b)*p;s.push(v,0,y),u.push(m.r,m.g,m.b),b=(f+1)/r*(2*Math.PI),v=Math.sin(b)*p,y=Math.cos(b)*p,s.push(v,0,y),u.push(m.r,m.g,m.b)}var G=new pl;G.setAttribute("position",new sl(s,3)),G.setAttribute("color",new sl(u,3));var B=new Bs({vertexColors:!0,toneMapped:!1});return(e=t.call(this,G,B)).type="PolarGridHelper",e}return R(n)}(Xs),EC=new Yi,JC=new Yi,UC=new Yi,DC=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;W(this,n),(l=t.call(this)).light=e,l.light.updateMatrixWorld(),l.matrix=e.matrixWorld,l.matrixAutoUpdate=!1,l.color=a,void 0===i&&(i=1);var r=new pl;r.setAttribute("position",new sl([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));var o=new Bs({fog:!1,toneMapped:!1});return l.lightPlane=new Ss(r,o),l.add(l.lightPlane),(r=new pl).setAttribute("position",new sl([0,0,0,0,0,1],3)),l.targetLine=new Ss(r,o),l.add(l.targetLine),l.update(),l}return R(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){EC.setFromMatrixPosition(this.light.matrixWorld),JC.setFromMatrixPosition(this.light.target.matrixWorld),UC.subVectors(JC,EC),this.lightPlane.lookAt(JC),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(JC),this.targetLine.scale.z=UC.length()}}]),n}(Ka),PC=new Yi,QC=new _l,OC=function(e){G(n,e);var t=x(n);function n(e){var i;W(this,n);var a=new pl,l=new Bs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],o=[],g={};function s(e,t){u(e),u(t)}function u(e){r.push(0,0,0),o.push(0,0,0),void 0===g[e]&&(g[e]=[]),g[e].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),a.setAttribute("position",new sl(r,3)),a.setAttribute("color",new sl(o,3)),(i=t.call(this,a,l)).type="CameraHelper",i.camera=e,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=g,i.update();var c=new vi(16755200),I=new vi(16711680),C=new vi(43775),d=new vi(16777215),h=new vi(3355443);return i.setColors(c,I,C,d,h),i}return R(n,[{key:"setColors",value:function(e,t,n,i,a){var l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,a.r,a.g,a.b),l.setXYZ(41,a.r,a.g,a.b),l.setXYZ(42,a.r,a.g,a.b),l.setXYZ(43,a.r,a.g,a.b),l.setXYZ(44,a.r,a.g,a.b),l.setXYZ(45,a.r,a.g,a.b),l.setXYZ(46,a.r,a.g,a.b),l.setXYZ(47,a.r,a.g,a.b),l.setXYZ(48,a.r,a.g,a.b),l.setXYZ(49,a.r,a.g,a.b),l.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap;QC.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),jC("c",t,e,QC,0,0,-1),jC("t",t,e,QC,0,0,1),jC("n1",t,e,QC,-1,-1,-1),jC("n2",t,e,QC,1,-1,-1),jC("n3",t,e,QC,-1,1,-1),jC("n4",t,e,QC,1,1,-1),jC("f1",t,e,QC,-1,-1,1),jC("f2",t,e,QC,1,-1,1),jC("f3",t,e,QC,-1,1,1),jC("f4",t,e,QC,1,1,1),jC("u1",t,e,QC,.7,1.1,-1),jC("u2",t,e,QC,-.7,1.1,-1),jC("u3",t,e,QC,0,2,-1),jC("cf1",t,e,QC,-1,0,1),jC("cf2",t,e,QC,1,0,1),jC("cf3",t,e,QC,0,-1,1),jC("cf4",t,e,QC,0,1,1),jC("cn1",t,e,QC,-1,0,-1),jC("cn2",t,e,QC,1,0,-1),jC("cn3",t,e,QC,0,-1,-1),jC("cn4",t,e,QC,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Xs);function jC(e,t,n,i,a,l,r){PC.set(a,l,r).unproject(i);var o=t[e];if(void 0!==o)for(var g=n.getAttribute("position"),s=0,u=o.length;s<u;s++)g.setXYZ(o[s],PC.x,PC.y,PC.z)}var $C,ed,td=new Ni,nd=function(e){G(n,e);var t=x(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;W(this,n);var l=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),o=new pl;return o.setIndex(new el(l,1)),o.setAttribute("position",new el(r,3)),(i=t.call(this,o,new Bs({color:a,toneMapped:!1}))).object=e,i.type="BoxHelper",i.matrixAutoUpdate=!1,i.update(),i}return R(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&td.setFromObject(this.object),!td.isEmpty()){var t=td.min,n=td.max,i=this.geometry.attributes.position,a=i.array;a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=t.x,a[4]=n.y,a[5]=n.z,a[6]=t.x,a[7]=t.y,a[8]=n.z,a[9]=n.x,a[10]=t.y,a[11]=n.z,a[12]=n.x,a[13]=n.y,a[14]=t.z,a[15]=t.x,a[16]=n.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=n.x,a[22]=t.y,a[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return v(u(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}}]),n}(Xs),id=function(e){G(n,e);var t=x(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;W(this,n);var l=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new pl;return o.setIndex(new el(l,1)),o.setAttribute("position",new sl(r,3)),(i=t.call(this,o,new Bs({color:a,toneMapped:!1}))).box=e,i.type="Box3Helper",i.geometry.computeBoundingSphere(),i}return R(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),v(u(n.prototype),"updateMatrixWorld",this).call(this,e))}}]),n}(Xs),ad=function(e){G(n,e);var t=x(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;W(this,n);var r=l,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],g=new pl;g.setAttribute("position",new sl(o,3)),g.computeBoundingSphere(),(i=t.call(this,g,new Bs({color:r,toneMapped:!1}))).type="PlaneHelper",i.plane=e,i.size=a;var s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new pl;return u.setAttribute("position",new sl(s,3)),u.computeBoundingSphere(),i.add(new zl(u,new Oa({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}return R(n,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),v(u(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Ss),ld=new Yi,rd=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yi(0,0,1),a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yi(0,0,0),l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*l,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*o;return W(this,n),(e=t.call(this)).type="ArrowHelper",void 0===$C&&(($C=new pl).setAttribute("position",new sl([0,0,0,0,1,0],3)),(ed=new mu(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(a),e.line=new Ss($C,new Bs({color:r,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new zl(ed,new Oa({color:r,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(i),e.setLength(l,o,g),e}return R(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ld.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ld,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}]),n}(Ka),od=function(e){G(n,e);var t=x(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;W(this,n);var a=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],l=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new pl;r.setAttribute("position",new sl(a,3)),r.setAttribute("color",new sl(l,3));var o=new Bs({vertexColors:!0,toneMapped:!1});return(e=t.call(this,r,o)).type="AxesHelper",e}return R(n,[{key:"setColors",value:function(e,t,n){var i=new vi,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(n),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Xs),gd=function(){function e(){W(this,e),this.type="ShapePath",this.color=new vi,this.subPaths=[],this.currentPath=null}return R(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new Cu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,a,l){return this.currentPath.bezierCurveTo(e,t,n,i,a,l),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e,t){for(var n=t.length,i=!1,a=n-1,l=0;l<n;a=l++){var r=t[a],o=t[l],g=o.x-r.x,s=o.y-r.y;if(Math.abs(s)>Number.EPSILON){if(s<0&&(r=t[l],g=-g,o=t[a],s=-s),e.y<r.y||e.y>o.y)continue;if(e.y===r.y){if(e.x===r.x)return!0}else{var u=s*(e.x-r.x)-g*(e.y-r.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(e.y!==r.y)continue;if(o.x<=e.x&&e.x<=r.x||r.x<=e.x&&e.x<=o.x)return!0}}return i}var n,i,a,l=$u.isClockWise,r=this.subPaths;if(0===r.length)return[];var o=[];if(1===r.length)return i=r[0],(a=new xu).curves=i.curves,o.push(a),o;var g=!l(r[0].getPoints());g=e?!g:g;var s,u,c=[],I=[],C=[],d=0;I[d]=void 0,C[d]=[];for(var h=0,A=r.length;h<A;h++)n=l(s=(i=r[h]).getPoints()),(n=e?!n:n)?(!g&&I[d]&&d++,I[d]={s:new xu,p:s},I[d].s.curves=i.curves,g&&d++,C[d]=[]):C[d].push({h:i,p:s[0]});if(!I[0])return function(e){for(var t=[],n=0,i=e.length;n<i;n++){var a=e[n],l=new xu;l.curves=a.curves,t.push(l)}return t}(r);if(I.length>1){for(var m=!1,p=0,f=0,b=I.length;f<b;f++)c[f]=[];for(var v=0,y=I.length;v<y;v++)for(var G=C[v],B=0;B<G.length;B++){for(var Z=G[B],x=!0,w=0;w<I.length;w++)t(Z.p,I[w].p)&&(v!==w&&p++,x?(x=!1,c[w].push(Z)):m=!0);x&&c[v].push(Z)}p>0&&!1===m&&(C=c)}for(var q=0,W=I.length;q<W;q++){a=I[q].s,o.push(a);for(var S=0,R=(u=C[q]).length;S<R;S++)a.holes.push(u[S].h)}return o}}]),e}(),sd=ud();function ud(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),a=new Uint32Array(512),l=0;l<256;++l){var r=l-127;r<-27?(i[l]=0,i[256|l]=32768,a[l]=24,a[256|l]=24):r<-14?(i[l]=1024>>-r-14,i[256|l]=1024>>-r-14|32768,a[l]=-r-1,a[256|l]=-r-1):r<=15?(i[l]=r+15<<10,i[256|l]=r+15<<10|32768,a[l]=13,a[256|l]=13):r<128?(i[l]=31744,i[256|l]=64512,a[l]=24,a[256|l]=24):(i[l]=31744,i[256|l]=64512,a[l]=13,a[256|l]=13)}for(var o=new Uint32Array(2048),g=new Uint32Array(64),s=new Uint32Array(64),u=1;u<1024;++u){for(var c=u<<13,I=0;0===(8388608&c);)c<<=1,I-=8388608;c&=-8388609,I+=947912704,o[u]=c|I}for(var C=1024;C<2048;++C)o[C]=939524096+(C-1024<<13);for(var d=1;d<31;++d)g[d]=d<<23;g[31]=1199570944,g[32]=2147483648;for(var h=33;h<63;++h)g[h]=2147483648+(h-32<<23);g[63]=3347054592;for(var A=1;A<64;++A)32!==A&&(s[A]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:a,mantissaTable:o,exponentTable:g,offsetTable:s}}var cd=Object.freeze({__proto__:null,toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Pn(e,-65504,65504),sd.floatView[0]=e;var t=sd.uint32View[0],n=t>>23&511;return sd.baseTable[n]+((8388607&t)>>sd.shiftTable[n])},fromHalfFloat:function(e){var t=e>>10;return sd.uint32View[0]=sd.mantissaTable[sd.offsetTable[t]+(1023&e)]+sd.exponentTable[t],sd.floatView[0]}});function Id(){console.error("THREE.ImmediateRenderObject has been removed.")}var Cd=function(e){G(n,e);var t=x(n);function n(e,i,a){var l;return W(this,n),console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),(l=t.call(this,e,i,a)).samples=4,l}return R(n)}(qi),dd=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),t.call(this,e,i,a,l)}return R(n)}(Wi),hd=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),t.call(this,e,i,a,l)}return R(n)}(Ri),Ad=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o){return W(this,n),console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),t.call(this,e,i,a,l,r,o)}return R(n)}(Nl),md=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),t.call(this,e,i,a,l)}return R(n)}(hu),pd=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),t.call(this,e,i,a,l)}return R(n)}(Au),fd=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o,g){return W(this,n),console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),t.call(this,e,i,a,l,r,o,g)}return R(n)}(pu),bd=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o,g,s){return W(this,n),console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),t.call(this,e,i,a,l,r,o,g,s)}return R(n)}(mu),vd=function(e){G(n,e);var t=x(n);function n(e,i){return W(this,n),console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),t.call(this,e,i)}return R(n)}(bu),yd=function(e){G(n,e);var t=x(n);function n(e,i){return W(this,n),console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),t.call(this,e,i)}return R(n)}(nc),Gd=function(e){G(n,e);var t=x(n);function n(e,i){return W(this,n),console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),t.call(this,e,i)}return R(n)}(ac),Bd=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),t.call(this,e,i,a,l)}return R(n)}(du),Zd=function(e){G(n,e);var t=x(n);function n(e,i){return W(this,n),console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),t.call(this,e,i)}return R(n)}(lc),xd=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),t.call(this,e,i,a,l)}return R(n)}(ar),wd=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),t.call(this,e,i,a,l)}return R(n)}(fu),qd=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o){return W(this,n),console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),t.call(this,e,i,a,l,r,o)}return R(n)}(rc),Wd=function(e){G(n,e);var t=x(n);function n(e,i){return W(this,n),console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),t.call(this,e,i)}return R(n)}(oc),Sd=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o,g){return W(this,n),console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),t.call(this,e,i,a,l,r,o,g)}return R(n)}(gc),Rd=function(e){G(n,e);var t=x(n);function n(e,i){return W(this,n),console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),t.call(this,e,i)}return R(n)}(sc),Vd=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r){return W(this,n),console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),t.call(this,e,i,a,l,r)}return R(n)}(uc),Xd=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r,o){return W(this,n),console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),t.call(this,e,i,a,l,r,o)}return R(n)}(cc),kd=function(e){G(n,e);var t=x(n);function n(e,i,a,l,r){return W(this,n),console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),t.call(this,e,i,a,l,r)}return R(n)}(Ic);function Yd(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Kd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zd(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nd(e){return l(e)||h(e)||o(e)||g()}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:V}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=V);var Hd=n(4585);function Md(e){var t,n=new Set,i=function(e,i){var a="function"===typeof e?e(t):e;if(a!==t){var l=t;t=i?a:Object.assign({},t,a),n.forEach((function(e){return e(t,l)}))}},a=function(){return t},l={setState:i,getState:a,subscribe:function(e,i,l){return i||l?function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var r=i(t);function o(){var n=i(t);if(!l(r,n)){var a=r;e(r=n,a)}}return n.add(o),function(){return n.delete(o)}}(e,i,l):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(i,a,l),l}var Fd="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?i.useEffect:i.useLayoutEffect;function Ld(e){var t="function"===typeof e?Md(e):e,n=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,l=(0,i.useReducer)((function(e){return e+1}),0),r=s(l,2),o=r[1],g=t.getState(),u=(0,i.useRef)(g),c=(0,i.useRef)(n),I=(0,i.useRef)(a),C=(0,i.useRef)(!1),d=(0,i.useRef)();void 0===d.current&&(d.current=n(g));var h=!1;(u.current!==g||c.current!==n||I.current!==a||C.current)&&(e=n(g),h=!a(d.current,e)),Fd((function(){h&&(d.current=e),u.current=g,c.current=n,I.current=a,C.current=!1}));var A=(0,i.useRef)(g);Fd((function(){var e=function(){try{var e=t.getState(),n=c.current(e);I.current(d.current,n)||(u.current=e,d.current=n,o())}catch(i){C.current=!0,o()}},n=t.subscribe(e);return t.getState()!==A.current&&e(),n}),[]);var m=h?e:d.current;return(0,i.useDebugValue)(m),m};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[n,t];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},n}var _d=n(258),Td=n.n(_d),Ed=n(4545);function Jd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};if(e===t)return!0;if(!e||!t)return!1;var i=e.length;if(t.length!==i)return!1;for(var a=0;a<i;a++)if(!n(e[a],t[a]))return!1;return!0}var Ud=[];function Dd(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=f(Ud);try{for(l.s();!(n=l.n()).done;){var r=n.value;if(Jd(t,r.keys,r.equal)){if(i)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return r.response;if(!i)throw r.promise}}}catch(g){l.e(g)}finally{l.f()}var o={keys:t,equal:a.equal,promise:e.apply(void 0,A(t)).then((function(e){return o.response=e})).then((function(){a.lifespan&&a.lifespan>0&&setTimeout((function(){var e=Ud.indexOf(o);-1!==e&&Ud.splice(e,1)}),a.lifespan)})).catch((function(e){return o.error=e}))};if(Ud.push(o),!i)throw o.promise}var Pd,Qd,Od=function(e,t,n){return Dd(e,t,!1,n)},jd=["children","key","ref"],$d=["children","key","ref"],eh=["args","attach"],th=["args","children"],nh=["args","children"],ih=["params"],ah=function(e){return e&&e.isOrthographicCamera},lh="undefined"!==typeof window&&(null!=(Pd=window.document)&&Pd.createElement||"ReactNative"===(null==(Qd=window.navigator)?void 0:Qd.product))?i.useLayoutEffect:i.useEffect;function rh(e){var t=i.useRef(e);return lh((function(){t.current=e}),[e]),t}function oh(e){var t=e.set;return lh((function(){return t(new Promise((function(){return null}))),function(){return t(!1)}}),[t]),null}var gh=function(e){G(n,e);var t=x(n);function n(){var e;W(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))).state={error:!1},e}return R(n,[{key:"componentDidCatch",value:function(e){this.props.set(e)}},{key:"render",value:function(){return this.state.error?null:this.props.children}}]),n}(i.Component);gh.getDerivedStateFromError=function(){return{error:!0}};var sh="__default";function uh(e){var t="undefined"!==typeof window?window.devicePixelRatio:1;return Array.isArray(e)?Math.min(Math.max(e[0],t),e[1]):e}var ch=function(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()},Ih={obj:function(e){return e===Object(e)&&!Ih.arr(e)&&"function"!==typeof e},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},boo:function(e){return"boolean"===typeof e},und:function(e){return void 0===e},arr:function(e){return Array.isArray(e)},equ:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.arrays,a=void 0===i?"shallow":i,l=n.objects,r=void 0===l?"reference":l,o=n.strict,g=void 0===o||o;if(typeof e!==typeof t||!!e!==!!t)return!1;if(Ih.str(e)||Ih.num(e))return e===t;var s=Ih.obj(e);if(s&&"reference"===r)return e===t;var u,c=Ih.arr(e);if(c&&"reference"===a)return e===t;if((c||s)&&e===t)return!0;for(u in e)if(!(u in t))return!1;for(u in g?t:e)if(e[u]!==t[u])return!1;if(Ih.und(u)){if(c&&0===e.length&&0===t.length)return!0;if(s&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function Ch(e){var t={nodes:{},materials:{}};return e&&e.traverse((function(e){e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function dh(e,t){var n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f=Kd({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t)),e}function hh(e,t){var n=e;if(t.includes("-")){var i=t.split("-"),a=i.pop();return n=i.reduce((function(e,t){return e[t]}),e),{target:n,key:a}}return{target:n,key:t}}var Ah=/-\d+$/;function mh(e,t,n){if(Ih.str(n)){if(Ah.test(n)){var i=hh(e,n.replace(Ah,"")),a=i.target,l=i.key;Array.isArray(a[l])||(a[l]=[])}var r=hh(e,n),o=r.target,g=r.key;t.__r3f.previousAttach=o[g],o[g]=t}else t.__r3f.previousAttach=n(e,t)}function ph(e,t,n){var i,a;if(Ih.str(n)){var l=hh(e,n),r=l.target,o=l.key,g=t.__r3f.previousAttach;void 0===g?delete r[o]:r[o]=g}else null==(i=t.__r3f)||null==i.previousAttach||i.previousAttach(e,t);null==(a=t.__r3f)||delete a.previousAttach}function fh(e,t){t.children,t.key,t.ref;var n,i=Yd(t,jd),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=(a.children,a.key,a.ref,Yd(a,$d)),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=null!=(n=null==e?void 0:e.__r3f)?n:{},g=Object.entries(i),u=[];if(r)for(var c=Object.keys(l),I=0;I<c.length;I++)i.hasOwnProperty(c[I])||g.unshift([c[I],sh+"remove"]);g.forEach((function(t){var n,i=s(t,2),a=i[0],r=i[1];if((null==(n=e.__r3f)||!n.primitive||"object"!==a)&&!Ih.equ(r,l[a])){if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(a))return u.push([a,r,!0,[]]);var o=[];a.includes("-")&&(o=a.split("-")),u.push([a,r,!1,o])}}));var C=Kd({},i);return o.memoizedProps&&o.memoizedProps.args&&(C.args=o.memoizedProps.args),o.memoizedProps&&o.memoizedProps.attach&&(C.attach=o.memoizedProps.attach),{memoized:C,changes:u}}function bh(e,t){var n,i,a,l=null!=(n=e.__r3f)?n:{},r=l.root,o=null!=(i=null==r||null==r.getState?void 0:r.getState())?i:{},g=(a=t)&&a.memoized&&a.changes?t:fh(e,t),u=g.memoized,c=g.changes,I=l.eventCount;if(e.__r3f&&(e.__r3f.memoizedProps=u),c.forEach((function(t){var n,i=s(t,4),a=i[0],r=i[1],g=i[2],c=i[3],I=e,d=I[a];if(c.length&&(d=c.reduce((function(e,t){return e[t]}),e),!d||!d.set)){var h=Nd(c.reverse()),m=h[0];I=h.slice(1).reverse().reduce((function(e,t){return e[t]}),e),a=m}if(r===sh+"remove")if(d&&d.constructor)r=C(d.constructor,A(null!=(n=u.args)?n:[]));else if(I.constructor){var p,f=C(I.constructor,A(null!=(p=I.__r3f.memoizedProps.args)?p:[]));r=f[d],f.dispose&&f.dispose()}else r=0;if(g)r?l.handlers[a]=r:delete l.handlers[a],l.eventCount=Object.keys(l.handlers).length;else if(d&&d.set&&(d.copy||d instanceof Ga)){var b;if(Array.isArray(r))d.fromArray?d.fromArray(r):(b=d).set.apply(b,A(r));else if(d.copy&&r&&r.constructor&&d.constructor.name===r.constructor.name)d.copy(r);else if(void 0!==r){var v=d instanceof vi;!v&&d.setScalar?d.setScalar(r):d instanceof Ga&&r instanceof Ga?d.mask=r.mask:d.set(r);0}}else I[a]=r,!o.linear&&I[a]instanceof xi&&(I[a].encoding=on);vh(e)})),l.parent&&o.internal&&e.raycast&&I!==l.eventCount){var d=o.internal.interaction.indexOf(e);d>-1&&o.internal.interaction.splice(d,1),l.eventCount&&o.internal.interaction.push(e)}return c.length&&e.parent&&yh(e),e}function vh(e){var t,n,i=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function yh(e){null==e.onUpdate||e.onUpdate(e)}function Gh(e,t){e.manual||(ah(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function Bh(e,t,n){var i=n.pop(),a=n.reduce((function(e,t){return e[t]}),e);return a[i]=t}function Zh(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function xh(e,t,n,i){var a=n.get(t);a&&(n.delete(t),0===n.size&&(e.delete(i),a.target.releasePointerCapture(i)))}function wh(e){function t(e){return e.filter((function(e){return["Move","Over","Enter","Out","Leave"].some((function(t){var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}))}function n(t){var n=e.getState().internal;Array.from(n.hovered.values()).forEach((function(e){if(!t.length||!t.find((function(t){return t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId}))){var i=e.eventObject.__r3f,a=null==i?void 0:i.handlers;if(n.hovered.delete(Zh(e)),null!=i&&i.eventCount){var l=Kd(Kd({},e),{},{intersections:t});null==a.onPointerOut||a.onPointerOut(l),null==a.onPointerLeave||a.onPointerLeave(l)}}}))}function i(e,t){t.forEach((function(t){var n;return null==(n=t.__r3f)||null==n.handlers.onPointerMissed?void 0:n.handlers.onPointerMissed(e)}))}return{handlePointer:function(a){switch(a){case"onPointerLeave":case"onPointerCancel":return function(){return n([])};case"onLostPointerCapture":return function(t){var i=e.getState().internal;"pointerId"in t&&!i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),n([]))}}return function(l){var r=e.getState(),o=r.onPointerMissed,g=r.internal;g.lastEvent.current=l;var s="onPointerMove"===a,u="onClick"===a||"onContextMenu"===a||"onDoubleClick"===a,c=function(t,n){var i=e.getState(),a=new Set,l=[],r=n?n(i.internal.interaction):i.internal.interaction;r.forEach((function(e){var t=ch(e);t&&(t.raycaster.camera=void 0)})),i.previousRoot||null==i.events.compute||i.events.compute(t,i);var o=r.flatMap((function(e){var n,i=ch(e);return i&&i.events.enabled&&null!==i.raycaster.camera?(void 0===i.raycaster.camera&&(null==i.events.compute||i.events.compute(t,i,null==(n=i.previousRoot)?void 0:n.getState()),void 0===i.raycaster.camera&&(i.raycaster.camera=null)),i.raycaster.camera?i.raycaster.intersectObject(e,!0):[]):[]})).sort((function(e,t){var n=ch(e.object),i=ch(t.object);return n&&i?i.events.priority-n.events.priority||e.distance-t.distance:0})).filter((function(e){var t=Zh(e);return!a.has(t)&&(a.add(t),!0)}));i.events.filter&&(o=i.events.filter(o,i));var g,s=f(o);try{for(s.s();!(g=s.n()).done;)for(var u=g.value,c=u.object;c;){var I;null!=(I=c.__r3f)&&I.eventCount&&l.push(Kd(Kd({},u),{},{eventObject:c})),c=c.parent}}catch(A){s.e(A)}finally{s.f()}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId)){var C,d=f(i.internal.capturedMap.get(t.pointerId).values());try{for(d.s();!(C=d.n()).done;){var h=C.value;l.push(h.intersection)}}catch(A){d.e(A)}finally{d.f()}}return l}(l,s?t:void 0),I=u?function(t){var n=e.getState().internal,i=t.offsetX-n.initialClick[0],a=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+a*a))}(l):0;"onPointerDown"===a&&(g.initialClick=[l.offsetX,l.offsetY],g.initialHits=c.map((function(e){return e.eventObject}))),u&&!c.length&&I<=2&&(i(l,g.interaction),o&&o(l)),s&&n(c),function(e,t,i,a){e.length&&function(){var l,r={stopped:!1},o=f(e);try{var g=function(){var o=l.value,g=ch(o.object);if(g){var s=g.raycaster,u=g.pointer,c=g.camera,I=g.internal,C=new Yi(u.x,u.y,0).unproject(c),d=function(e){var t,n;return null!=(t=null==(n=I.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},h=function(e){var n={intersection:o,target:t.target};I.capturedMap.has(e)?I.capturedMap.get(e).set(o.eventObject,n):I.capturedMap.set(e,new Map([[o.eventObject,n]])),t.target.setPointerCapture(e)},m=function(e){var t=I.capturedMap.get(e);t&&xh(I.capturedMap,o.eventObject,t,e)},p={};for(var f in t){var b=t[f];"function"!==typeof b&&(p[f]=b)}var v=Kd(Kd(Kd({},o),p),{},{pointer:u,intersections:e,stopped:r.stopped,delta:i,unprojectedPoint:C,ray:s.ray,camera:c,stopPropagation:function(){var i="pointerId"in t&&I.capturedMap.get(t.pointerId);if((!i||i.has(o.eventObject))&&(v.stopped=r.stopped=!0,I.hovered.size&&Array.from(I.hovered.values()).find((function(e){return e.eventObject===o.eventObject})))){var a=e.slice(0,e.indexOf(o));n([].concat(A(a),[o]))}},target:{hasPointerCapture:d,setPointerCapture:h,releasePointerCapture:m},currentTarget:{hasPointerCapture:d,setPointerCapture:h,releasePointerCapture:m},nativeEvent:t});if(a(v),!0===r.stopped)return"break"}};for(o.s();!(l=o.n()).done&&"break"!==g(););}catch(s){o.e(s)}finally{o.f()}}()}(c,l,I,(function(e){var t=e.eventObject,n=t.__r3f,r=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(s){if(r.onPointerOver||r.onPointerEnter||r.onPointerOut||r.onPointerLeave){var o=Zh(e),c=g.hovered.get(o);c?c.stopped&&e.stopPropagation():(g.hovered.set(o,e),null==r.onPointerOver||r.onPointerOver(e),null==r.onPointerEnter||r.onPointerEnter(e))}null==r.onPointerMove||r.onPointerMove(e)}else{var I=r[a];I?u&&!g.initialHits.includes(t)||(i(l,g.interaction.filter((function(e){return!g.initialHits.includes(e)}))),I(e)):u&&g.initialHits.includes(t)&&i(l,g.interaction.filter((function(e){return!g.initialHits.includes(e)})))}}))}}}}var qh={},Wh=function(e){qh=Kd(Kd({},qh),e)};var Sh,Rh=function(e){return!(null==e||!e.render)},Vh=i.createContext(null);function Xh(e,t){var n={callback:e};return t.add(n),function(){t.delete(n)}}var kh,Yh,zh=new Set,Kh=new Set,Nh=new Set;function Hh(e,t){e.size&&e.forEach((function(e){return(0,e.callback)(t)}))}function Mh(e,t){switch(e){case"before":return Hh(zh,t);case"after":return Hh(Kh,t);case"tail":return Hh(Nh,t)}}function Fh(e,t,n){var i=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),kh=t.internal.subscribers,Sh=0;Sh<kh.length;Sh++)(Yh=kh[Sh]).ref.current(Yh.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function Lh(){var e=i.useContext(Vh);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function _h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1?arguments[1]:void 0;return Lh()(e,t)}function Th(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Lh(),i=n.getState().internal.subscribe,a=rh(e);return lh((function(){return i(a,t,n)}),[t,i,n]),null}function Eh(e,t){return function(n){var i=new n;e&&e(i);for(var a=arguments.length,l=new Array(a>1?a-1:0),r=1;r<a;r++)l[r-1]=arguments[r];return Promise.all(l.map((function(e){return new Promise((function(n,a){return i.load(e,(function(e){e.scene&&Object.assign(e,Ch(e.scene)),n(e)}),t,(function(t){return a(new Error("Could not load ".concat(e,": ").concat(t.message,")")))}))}))})))}}function Jh(e,t,n,i){var a=Array.isArray(t)?t:[t],l=Od(Eh(n,i),[e].concat(A(a)),{equal:Ih.equ});return Array.isArray(t)?l:l[0]}Jh.preload=function(e,t,n){var i=Array.isArray(t)?t:[t];return function(e,t,n){Dd(e,t,!0,n)}(Eh(n),[e].concat(A(i)))},Jh.clear=function(e,t){var n=Array.isArray(t)?t:[t];return function(e){if(void 0===e||0===e.length)Ud.splice(0,Ud.length);else{var t=Ud.find((function(t){return Jd(e,t.keys,t.equal)}));if(t){var n=Ud.indexOf(t);-1!==n&&Ud.splice(n,1)}}}([e].concat(A(n)))};var Uh=new Map,Dh=function(e){var t,n,i,a=!1;function l(r){if(n=requestAnimationFrame(l),a=!0,t=0,Mh("before",r),e.forEach((function(e){var n;!(i=e.store.getState()).internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(n=i.gl.xr)&&n.isPresenting||(t+=Fh(r,i))})),Mh("after",r),0===t)return Mh("tail",r),a=!1,cancelAnimationFrame(n)}return{loop:l,invalidate:function t(n){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!n)return e.forEach((function(e){return t(e.store.getState())}),r);null!=(i=n.gl.xr)&&i.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+r),a||(a=!0,requestAnimationFrame(l)))},advance:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;n&&Mh("before",t),i?Fh(t,i,a):e.forEach((function(e){return Fh(t,e.store.getState())})),n&&Mh("after",t)}}}(Uh),Ph=Dh.invalidate,Qh=Dh.advance,Oh=function(e,t){function n(e,t,n){var i,a=t.args,l=void 0===a?[]:a,r=t.attach,o=Yd(t,eh),g="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===o.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=dh(o.object,{type:e,root:n,attach:r,primitive:!0})}else{var s=qh[g];if(!s)throw new Error("R3F: ".concat(g," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(l))throw new Error("R3F: The args prop must be an array!");i=dh(C(s,A(l)),{type:e,root:n,attach:r,memoizedProps:{args:l}})}return void 0===i.__r3f.attach&&(i instanceof pl?i.__r3f.attach="geometry":i instanceof Qa&&(i.__r3f.attach="material")),"inject"!==g&&bh(i,o),i}function i(e,t){var n,i,a=!1;t&&(null!=(n=t.__r3f)&&n.attach?mh(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),a=!0),a||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||dh(t,{}),t.__r3f.parent=e,yh(t),vh(t))}function a(e,t,n){var i=!1;if(t){var a,l;if(null!=(a=t.__r3f)&&a.attach)mh(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});var r=e.children.filter((function(e){return e!==t})),o=r.indexOf(n);e.children=[].concat(A(r.slice(0,o)),[t],A(r.slice(o))),i=!0}i||null==(l=e.__r3f)||l.objects.push(t),t.__r3f||dh(t,{}),t.__r3f.parent=e,yh(t),vh(t)}}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&A(e).forEach((function(e){return r(t,e,n)}))}function r(e,t,n){if(t){var i,a,r;if(t.__r3f&&(t.__r3f.parent=null),null!=(i=e.__r3f)&&i.objects&&(e.__r3f.objects=e.__r3f.objects.filter((function(e){return e!==t}))),null!=(a=t.__r3f)&&a.attach)ph(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var o;e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){var n=e.getState().internal;n.interaction=n.interaction.filter((function(e){return e!==t})),n.initialHits=n.initialHits.filter((function(e){return e!==t})),n.hovered.forEach((function(e,i){e.eventObject!==t&&e.object!==t||n.hovered.delete(i)})),n.capturedMap.forEach((function(e,i){xh(n.capturedMap,t,e,i)}))}(t.__r3f.root,t)}var g,s=null==(r=t.__r3f)?void 0:r.primitive,u=void 0===n?null!==t.dispose&&!s:n;if(!s)l(null==(g=t.__r3f)?void 0:g.objects,t,u),l(t.children,t,u);t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,s||delete t.__r3f),u&&t.dispose&&"Scene"!==t.type&&(0,Ed.unstable_scheduleCallback)(Ed.unstable_IdlePriority,(function(){try{t.dispose()}catch(cy){}})),vh(e)}}var o=function(){return console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.")};return{reconciler:Td()({createInstance:n,removeChild:r,appendChild:i,appendInitialChild:i,insertBefore:a,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:function(e,t){if(t){var n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,i(n,t))}},removeChildFromContainer:function(e,t){t&&r(e.getState().scene,t)},insertInContainerBefore:function(e,t,n){if(t&&n){var i=e.getState().scene;i.__r3f&&a(i,t,n)}},getRootHostContext:function(){return null},getChildHostContext:function(e){return e},finalizeInitialChildren:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate:function(e,t,n,i){if(e.__r3f.primitive&&i.object&&i.object!==e)return[!0];var a=i.args,l=void 0===a?[]:a,r=(i.children,Yd(i,th)),o=n.args,g=void 0===o?[]:o,s=(n.children,Yd(n,nh));if(!Array.isArray(l))throw new Error("R3F: the args prop must be an array!");if(l.some((function(e,t){return e!==g[t]})))return[!0];var u=fh(e,r,s,!0);return u.changes.length?[!1,u]:null},commitUpdate:function(e,t,a,l,o,g){var u=s(t,2),c=u[0],I=u[1];c?function(e,t,a,l){var o,g=null==(o=e.__r3f)?void 0:o.parent;if(g){var s=n(t,a,e.__r3f.root);if(e.children){var u,c=f(e.children);try{for(c.s();!(u=c.n()).done;){var I=u.value;I.__r3f&&i(s,I)}}catch(C){c.e(C)}finally{c.f()}e.children=e.children.filter((function(e){return!e.__r3f}))}e.__r3f.objects.forEach((function(e){return i(s,e)})),e.__r3f.objects=[],r(g,e),i(g,s),s.raycast&&s.__r3f.eventCount&&s.__r3f.root.getState().internal.interaction.push(s),[l,l.alternate].forEach((function(e){null!==e&&(e.stateNode=s,e.ref&&("function"===typeof e.ref?e.ref(s):e.ref.current=s))}))}}(e,a,o,g):bh(e,I)},commitMount:function(e,t,n,i){var a,l=null!=(a=e.__r3f)?a:{};e.raycast&&l.handlers&&l.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},preparePortalMount:function(e){return dh(e.getState().scene)},resetAfterCommit:function(){},shouldSetTextContent:function(){return!1},clearContainer:function(){return!1},hideInstance:function(e){var t,n=null!=(t=e.__r3f)?t:{},i=n.attach,a=n.parent;i&&a&&ph(a,e,i),e.isObject3D&&(e.visible=!1),vh(e)},unhideInstance:function(e,t){var n,i=null!=(n=e.__r3f)?n:{},a=i.attach,l=i.parent;a&&l&&mh(l,e,a),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),vh(e)},createTextInstance:o,hideTextInstance:o,unhideTextInstance:o,getCurrentEventPriority:function(){return t?t():Hd.DefaultEventPriority},beforeActiveInstanceBlur:function(){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},now:"undefined"!==typeof performance&&Ih.fun(performance.now)?performance.now:Ih.fun(Date.now)?Date.now:function(){return 0},scheduleTimeout:Ih.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ih.fun(clearTimeout)?clearTimeout:void 0}),applyProps:bh}}(0,(function(){var e,t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return Hd.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Hd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Hd.ContinuousEventPriority;default:return Hd.DefaultEventPriority}})),jh=Oh.reconciler,$h=Oh.applyProps,eA={objects:"shallow",strict:!1},tA=function(e,t){var n="function"===typeof e?e(t):e;return Rh(n)?n:new kg(Kd({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function nA(e,t){if(t)return t;if(e instanceof HTMLCanvasElement&&e.parentElement){var n=e.parentElement.getBoundingClientRect();return{width:n.width,height:n.height,top:n.top,left:n.left}}return{width:0,height:0,top:0,left:0}}function iA(t){var n=Uh.get(t),a=null==n?void 0:n.fiber,l=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");var r,o="function"===typeof reportError?reportError:console.error,g=l||function(e,t){var n=Ld((function(n,a){var l=new Yi,r=new Yi,o=new Yi;function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a().size,i=n.width,g=n.height,s=n.top,u=n.left,c=i/g;t instanceof Yi?o.copy(t):o.set.apply(o,A(t));var I=e.getWorldPosition(l).distanceTo(o);if(ah(e))return{width:i/e.zoom,height:g/e.zoom,top:s,left:u,factor:1,distance:I,aspect:c};var C=e.fov*Math.PI/180,d=2*Math.tan(C/2)*I,h=d*(i/g);return{width:h,height:d,top:s,left:u,factor:i/h,distance:I,aspect:c}}var s=void 0,u=function(e){return n((function(t){return{performance:Kd(Kd({},t.performance),{},{current:e})}}))},c=new ai,I={set:n,get:a,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(a(),t)},advance:function(e,n){return t(e,n,a())},legacy:!1,linear:!1,flat:!1,scene:dh(new Hg),controls:null,clock:new _I,pointer:c,mouse:c,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:function(){var e=a();s&&clearTimeout(s),e.performance.current!==e.performance.min&&u(e.performance.min),s=setTimeout((function(){return u(a().performance.max)}),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:function(e){return n((function(t){return Kd(Kd({},t),{},{events:Kd(Kd({},t.events),e)})}))},setSize:function(e,t,i,l,o){var s=a().camera,u={width:e,height:t,top:l||0,left:o||0,updateStyle:i};n((function(e){return{size:u,viewport:Kd(Kd({},e.viewport),g(s,r,u))}}))},setDpr:function(e){return n((function(t){var n=uh(e);return{viewport:Kd(Kd({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}))},setFrameloop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always",t=a().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((function(){return{frameloop:e}}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:i.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:function(e,t,n){var i=a().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((function(e,t){return e.priority-t.priority})),function(){var n=a().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((function(t){return t.ref!==e})))}}}};return I})),a=n.getState(),l=a.size,r=a.viewport.dpr,o=a.camera;return n.subscribe((function(){var e=n.getState(),t=e.camera,i=e.size,a=e.viewport,g=e.gl,s=e.set;i===l&&a.dpr===r||(l=i,r=a.dpr,Gh(t,i),g.setPixelRatio(a.dpr),g.setSize(i.width,i.height,i.updateStyle)),t!==o&&(o=t,s((function(e){return{viewport:Kd(Kd({},e.viewport),e.viewport.getCurrentViewport(t))}})))})),n.subscribe((function(t){return e(t)})),n}(Ph,Qh),s=a||jh.createContainer(g,Hd.ConcurrentRoot,null,!1,null,"",o,null);n||Uh.set(t,{fiber:s,store:g});var u=!1;return{configure:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.gl,a=n.size,l=n.events,o=n.onCreated,s=n.shadows,c=void 0!==s&&s,I=n.linear,C=void 0!==I&&I,d=n.flat,h=void 0!==d&&d,A=n.legacy,m=void 0!==A&&A,p=n.orthographic,f=void 0!==p&&p,b=n.frameloop,v=void 0===b?"always":b,y=n.dpr,G=void 0===y?[1,2]:y,B=n.performance,Z=n.raycaster,x=n.camera,w=n.onPointerMissed,q=g.getState(),W=q.gl;q.gl||q.set({gl:W=tA(i,t)});var S=q.raycaster;S||q.set({raycaster:S=new vC});var R=Z||{},V=R.params,X=Yd(R,ih);if(Ih.equ(X,S,eA)||$h(S,Kd({},X)),Ih.equ(V,S.params,eA)||$h(S,{params:Kd(Kd({},S.params),V)}),!q.camera){var k=x instanceof _l,Y=k?x:f?new dr(0,0,0,0,.1,1e3):new Tl(75,0,.1,1e3);k||(Y.position.z=5,x&&$h(Y,x),null!=x&&x.rotation||Y.lookAt(0,0,0)),q.set({camera:Y})}if(!q.xr){var z=function(e,t){var n=g.getState();"never"!==n.frameloop&&Qh(e,!0,n,t)},K=function(){var e=g.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?z:null),e.gl.xr.isPresenting||Ph(e)},N={connect:function(){var e=g.getState().gl;e.xr.addEventListener("sessionstart",K),e.xr.addEventListener("sessionend",K)},disconnect:function(){var e=g.getState().gl;e.xr.removeEventListener("sessionstart",K),e.xr.removeEventListener("sessionend",K)}};W.xr&&N.connect(),q.set({xr:N})}if(W.shadowMap){var H=Ih.boo(c);if(H&&W.shadowMap.enabled!==c||!Ih.equ(c,W.shadowMap,eA)){var M=W.shadowMap.enabled;W.shadowMap.enabled=!!c,H?W.shadowMap.type=F:Object.assign(W.shadowMap,c),M!==W.shadowMap.enabled&&(W.shadowMap.needsUpdate=!0)}}Bh(e,m,["ColorManagement","legacyMode"]);var L=C?rn:on,_=h?Ze:We;W.outputEncoding!==L&&(W.outputEncoding=L),W.toneMapping!==_&&(W.toneMapping=_),q.legacy!==m&&q.set((function(){return{legacy:m}})),q.linear!==C&&q.set((function(){return{linear:C}})),q.flat!==h&&q.set((function(){return{flat:h}})),!i||Ih.fun(i)||Rh(i)||Ih.equ(i,W,eA)||$h(W,i),l&&!q.events.handlers&&q.set({events:l(g)}),G&&q.viewport.dpr!==uh(G)&&q.setDpr(G);var T=nA(t,a);return Ih.equ(T,q.size,eA)||q.setSize(T.width,T.height,T.updateStyle,T.top,T.left),q.frameloop!==v&&q.setFrameloop(v),q.onPointerMissed||q.set({onPointerMissed:w}),B&&!Ih.equ(B,q.performance,eA)&&q.set((function(e){return{performance:Kd(Kd({},e.performance),B)}})),r=o,u=!0,this},render:function(e){return u||this.configure(),jh.updateContainer(i.createElement(aA,{store:g,children:e,onCreated:r,rootElement:t}),s,null,(function(){})),g},unmount:function(){lA(t)}}}function aA(e){var t=e.store,n=e.children,a=e.onCreated,l=e.rootElement;return lh((function(){var e=t.getState();e.set((function(e){return{internal:Kd(Kd({},e.internal),{},{active:!0})}})),a&&a(e),t.getState().events.connected||null==e.events.connect||e.events.connect(l)}),[]),i.createElement(Vh.Provider,{value:t},n)}function lA(e,t){var n=Uh.get(e),i=null==n?void 0:n.fiber;if(i){var a=null==n?void 0:n.store.getState();a&&(a.internal.active=!1),jh.updateContainer(null,i,null,(function(){a&&setTimeout((function(){try{var n,i,l,r;null==a.events.disconnect||a.events.disconnect(),null==(n=a.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(l=a.gl)||null==l.forceContextLoss||l.forceContextLoss(),null!=(r=a.gl)&&r.xr&&a.xr.disconnect(),function(e){for(var t in e.dispose&&"Scene"!==e.type&&e.dispose(),e)null==t.dispose||t.dispose(),delete e[t]}(a),Uh.delete(e),t&&t(e)}catch(cy){}}),500)}))}}jh.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:i.version});i.unstable_act;function rA(){return rA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},rA.apply(this,arguments)}var oA=n(7494),gA=n.n(oA);function sA(e){var t=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,n=t.debounce,a=t.scroll,l=t.polyfill,r=t.offsetSize,o=l||("undefined"===typeof window?R((function e(){W(this,e)})):window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var g=s((0,i.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),2),u=g[0],c=g[1],I=(0,i.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:u}),C=n?"number"===typeof n?n:n.scroll:null,d=n?"number"===typeof n?n:n.resize:null,h=(0,i.useRef)(!1);(0,i.useEffect)((function(){return h.current=!0,function(){h.current=!1}}));var A=s((0,i.useMemo)((function(){var e=function(){if(I.current.element){var e=I.current.element.getBoundingClientRect(),t={left:e.left,top:e.top,width:e.width,height:e.height,bottom:e.bottom,right:e.right,x:e.x,y:e.y};I.current.element instanceof HTMLElement&&r&&(t.height=I.current.element.offsetHeight,t.width=I.current.element.offsetWidth),Object.freeze(t),h.current&&!IA(I.current.lastBounds,t)&&c(I.current.lastBounds=t)}};return[e,d?gA()(e,d):e,C?gA()(e,C):e]}),[c,r,C,d]),3),m=A[0],p=A[1],f=A[2];function b(){I.current.scrollContainers&&(I.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",f,!0)})),I.current.scrollContainers=null),I.current.resizeObserver&&(I.current.resizeObserver.disconnect(),I.current.resizeObserver=null)}function v(){I.current.element&&(I.current.resizeObserver=new o(f),I.current.resizeObserver.observe(I.current.element),a&&I.current.scrollContainers&&I.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",f,{capture:!0,passive:!0})})))}var y,G,B;return y=f,G=Boolean(a),(0,i.useEffect)((function(){if(G){var e=y;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),function(){window.removeEventListener("scroll",e,!0)}}}),[y,G]),B=p,(0,i.useEffect)((function(){var e=B;return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[B]),(0,i.useEffect)((function(){b(),v()}),[a,f,p]),(0,i.useEffect)((function(){return b}),[]),[function(e){e&&e!==I.current.element&&(b(),I.current.element=e,I.current.scrollContainers=uA(e),v())},u,m]}function uA(e){var t=[];if(!e||e===document.body)return t;var n=window.getComputedStyle(e);return[n.overflow,n.overflowX,n.overflowY].some((function(e){return"auto"===e||"scroll"===e}))&&t.push(e),[].concat(t,A(uA(e.parentElement)))}var cA=["x","y","top","bottom","left","right","width","height"],IA=function(e,t){return cA.every((function(n){return e[n]===t[n]}))},CA=Object.defineProperty,dA=Object.defineProperties,hA=Object.getOwnPropertyDescriptors,AA=Object.getOwnPropertySymbols,mA=Object.prototype.hasOwnProperty,pA=Object.prototype.propertyIsEnumerable,fA=function(e,t,n){return t in e?CA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},bA=function(e,t){for(var n in t||(t={}))mA.call(t,n)&&fA(e,n,t[n]);if(AA){var i,a=f(AA(t));try{for(a.s();!(i=a.n()).done;){n=i.value;pA.call(t,n)&&fA(e,n,t[n])}}catch(l){a.e(l)}finally{a.f()}}return e};function vA(e,t,n){if(e){if(!0===n(e))return e;for(var i=t?e.return:e.child;i;){var a=vA(i,t,n);if(a)return a;i=i.sibling}}}function yA(e){return Object.defineProperties(e,{_currentRenderer:{get:function(){return null},set:function(){}},_currentRenderer2:{get:function(){return null},set:function(){}}})}var GA=yA(i.createContext(null)),BA=function(e){G(n,e);var t=x(n);function n(){return W(this,n),t.apply(this,arguments)}return R(n,[{key:"render",value:function(){return i.createElement(GA.Provider,{value:this._reactInternals},this.props.children)}}]),n}(i.Component),ZA=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xA=ZA.ReactCurrentOwner,wA=ZA.ReactCurrentDispatcher;function qA(){var e=i.useContext(GA);if(!e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");var t=i.useId();return i.useMemo((function(){var n;return null!=(n=xA.current)?n:vA(e,!1,(function(e){for(var n=e.memoizedState;n;){if(n.memoizedState===t)return!0;n=n.next}}))}),[e,t])}var WA=[];function SA(){return vA(qA(),!0,(function(e){var t,n=null==(t=e.type)?void 0:t._context;n&&n!==GA&&!WA.includes(n)&&WA.push(yA(n))})),WA.reduce((function(e,t){var n,a=null==(n=wA.current)?void 0:n.readContext(t);return function(n){return i.createElement(e,null,i.createElement(t.Provider,function(e,t){return dA(e,hA(t))}(bA({},n),{value:a})))}}),(function(e){return i.createElement(BA,bA({},e))}))}var RA=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"],VA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function XA(e){var t=wh(e).handlePointer;return{priority:1,enabled:!0,compute:function(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(VA).reduce((function(e,n){return Kd(Kd({},e),{},w({},n,t(n)))}),{}),connect:function(t){var n,i=e.getState(),a=i.set,l=i.events;null==l.disconnect||l.disconnect(),a((function(e){return{events:Kd(Kd({},e.events),{},{connected:t})}})),Object.entries(null!=(n=l.handlers)?n:[]).forEach((function(e){var n=s(e,2),i=n[0],a=n[1],l=s(VA[i],2),r=l[0],o=l[1];t.addEventListener(r,a,{passive:o})}))},disconnect:function(){var t,n=e.getState(),i=n.set,a=n.events;a.connected&&(Object.entries(null!=(t=a.handlers)?t:[]).forEach((function(e){var t=s(e,2),n=t[0],i=t[1];if(a&&a.connected instanceof HTMLElement){var l=s(VA[n],1)[0];a.connected.removeEventListener(l,i)}})),i((function(e){return{events:Kd(Kd({},e.events),{},{connected:void 0})}})))}}}var kA=i.forwardRef((function(t,n){var a=t.children,l=t.fallback,r=t.resize,o=t.style,g=t.gl,u=t.events,c=void 0===u?XA:u,I=t.eventSource,C=t.eventPrefix,d=t.shadows,h=t.linear,A=t.flat,m=t.legacy,p=t.orthographic,f=t.frameloop,b=t.dpr,v=t.performance,y=t.raycaster,G=t.camera,B=t.onPointerMissed,Z=t.onCreated,x=Yd(t,RA);i.useMemo((function(){return Wh(e)}),[]);var w=SA(),q=s(sA(Kd({scroll:!0,debounce:{scroll:50,resize:0}},r)),2),W=q[0],S=q[1],R=i.useRef(null),V=i.useRef(null),X=s(i.useState(null),2),k=X[0],Y=X[1];i.useImperativeHandle(n,(function(){return R.current}));var z=rh(B),K=s(i.useState(!1),2),N=K[0],H=K[1],M=s(i.useState(!1),2),F=M[0],L=M[1];if(N)throw N;if(F)throw F;var _=i.useRef(null);S.width>0&&S.height>0&&k&&(_.current||(_.current=iA(k)),_.current.configure({gl:g,events:c,shadows:d,linear:h,flat:A,legacy:m,orthographic:p,frameloop:f,dpr:b,performance:v,raycaster:y,camera:G,size:S,onPointerMissed:function(){return null==z.current?void 0:z.current.apply(z,arguments)},onCreated:function(e){var t;null==e.events.connect||e.events.connect(I?(t=I)&&t.hasOwnProperty("current")?I.current:I:V.current),C&&e.setEvents({compute:function(e,t){var n=e[C+"X"],i=e[C+"Y"];t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==Z||Z(e)}}),_.current.render(i.createElement(w,null,i.createElement(gh,{set:L},i.createElement(i.Suspense,{fallback:i.createElement(oh,{set:H})},a))))),lh((function(){Y(R.current)}),[]),i.useEffect((function(){if(k)return function(){return lA(k)}}),[k]);var T=I?"none":"auto";return i.createElement("div",rA({ref:V,style:Kd({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:T},o)},x),i.createElement("div",{ref:W,style:{width:"100%",height:"100%"}},i.createElement("canvas",{ref:R,style:{display:"block"}},l)))})),YA=i.forwardRef((function(e,t){return i.createElement(BA,null,i.createElement(kA,rA({},e,{ref:t})))})),zA=!1,KA=function(e,t){return(e%t+t)%t},NA=function(e){G(n,e);var t=x(n);function n(e,i){var a;W(this,n),w(y(a=t.call(this)),"object",void 0),w(y(a),"domElement",void 0),w(y(a),"enabled",!0),w(y(a),"target",new Yi),w(y(a),"minDistance",0),w(y(a),"maxDistance",1/0),w(y(a),"minZoom",0),w(y(a),"maxZoom",1/0),w(y(a),"minPolarAngle",0),w(y(a),"maxPolarAngle",Math.PI),w(y(a),"minAzimuthAngle",-1/0),w(y(a),"maxAzimuthAngle",1/0),w(y(a),"enableDamping",!1),w(y(a),"dampingFactor",.05),w(y(a),"enableZoom",!0),w(y(a),"zoomSpeed",1),w(y(a),"enableRotate",!0),w(y(a),"rotateSpeed",1),w(y(a),"enablePan",!0),w(y(a),"panSpeed",1),w(y(a),"screenSpacePanning",!0),w(y(a),"keyPanSpeed",7),w(y(a),"autoRotate",!1),w(y(a),"autoRotateSpeed",2),w(y(a),"reverseOrbit",!1),w(y(a),"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),w(y(a),"mouseButtons",{LEFT:X.ROTATE,MIDDLE:X.DOLLY,RIGHT:X.PAN}),w(y(a),"touches",{ONE:k.ROTATE,TWO:k.DOLLY_PAN}),w(y(a),"target0",void 0),w(y(a),"position0",void 0),w(y(a),"zoom0",void 0),w(y(a),"_domElementKeyEvents",null),w(y(a),"getPolarAngle",void 0),w(y(a),"getAzimuthalAngle",void 0),w(y(a),"setPolarAngle",void 0),w(y(a),"setAzimuthalAngle",void 0),w(y(a),"getDistance",void 0),w(y(a),"listenToKeyEvents",void 0),w(y(a),"saveState",void 0),w(y(a),"reset",void 0),w(y(a),"update",void 0),w(y(a),"connect",void 0),w(y(a),"dispose",void 0),a.object=e,a.domElement=i,a.target0=a.target.clone(),a.position0=a.object.position.clone(),a.zoom0=a.object instanceof Tl?a.object.zoom:1,a.getPolarAngle=function(){return I.phi},a.getAzimuthalAngle=function(){return I.theta},a.setPolarAngle=function(e){var t=KA(e,2*Math.PI),n=I.phi;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var i=Math.abs(t-n);2*Math.PI-i<i&&(t<n?t+=2*Math.PI:n+=2*Math.PI),C.phi=t-n,l.update()},a.setAzimuthalAngle=function(e){var t=KA(e,2*Math.PI),n=I.theta;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var i=Math.abs(t-n);2*Math.PI-i<i&&(t<n?t+=2*Math.PI:n+=2*Math.PI),C.theta=t-n,l.update()},a.getDistance=function(){return l.object.position.distanceTo(l.target)},a.listenToKeyEvents=function(e){e.addEventListener("keydown",ee),a._domElementKeyEvents=e},a.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object instanceof Tl?l.object.zoom:1},a.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object instanceof Tl&&(l.object.zoom=l.zoom0,l.object.updateProjectionMatrix()),l.dispatchEvent(r),l.update(),u=s.NONE},a.update=function(){var t=new Yi,n=(new ki).setFromUnitVectors(e.up,new Yi(0,1,0)),i=n.clone().invert(),a=new Yi,o=new ki,g=2*Math.PI;return function(){var e=l.object.position;t.copy(e).sub(l.target),t.applyQuaternion(n),I.setFromVector3(t),l.autoRotate&&u===s.NONE&&V(2*Math.PI/60/60*l.autoRotateSpeed),l.enableDamping?(I.theta+=C.theta*l.dampingFactor,I.phi+=C.phi*l.dampingFactor):(I.theta+=C.theta,I.phi+=C.phi);var m=l.minAzimuthAngle,p=l.maxAzimuthAngle;return isFinite(m)&&isFinite(p)&&(m<-Math.PI?m+=g:m>Math.PI&&(m-=g),p<-Math.PI?p+=g:p>Math.PI&&(p-=g),I.theta=m<=p?Math.max(m,Math.min(p,I.theta)):I.theta>(m+p)/2?Math.max(m,I.theta):Math.min(p,I.theta)),I.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,I.phi)),I.makeSafe(),I.radius*=d,I.radius=Math.max(l.minDistance,Math.min(l.maxDistance,I.radius)),!0===l.enableDamping?l.target.addScaledVector(h,l.dampingFactor):l.target.add(h),t.setFromSpherical(I),t.applyQuaternion(i),e.copy(l.target).add(t),l.object.lookAt(l.target),!0===l.enableDamping?(C.theta*=1-l.dampingFactor,C.phi*=1-l.dampingFactor,h.multiplyScalar(1-l.dampingFactor)):(C.set(0,0,0),h.set(0,0,0)),d=1,!!(A||a.distanceToSquared(l.object.position)>c||8*(1-o.dot(l.object.quaternion))>c)&&(l.dispatchEvent(r),a.copy(l.object.position),o.copy(l.object.quaternion),A=!1,!0)}}(),a.connect=function(e){e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),l.domElement=e,l.domElement.style.touchAction="none",l.domElement.addEventListener("contextmenu",te),l.domElement.addEventListener("pointerdown",P),l.domElement.addEventListener("pointercancel",j),l.domElement.addEventListener("wheel",$)},a.dispose=function(){var e,t,n,i,a,r;null===(e=l.domElement)||void 0===e||e.removeEventListener("contextmenu",te),null===(t=l.domElement)||void 0===t||t.removeEventListener("pointerdown",P),null===(n=l.domElement)||void 0===n||n.removeEventListener("pointercancel",j),null===(i=l.domElement)||void 0===i||i.removeEventListener("wheel",$),null===(a=l.domElement)||void 0===a||a.ownerDocument.removeEventListener("pointermove",Q),null===(r=l.domElement)||void 0===r||r.ownerDocument.removeEventListener("pointerup",O),null!==l._domElementKeyEvents&&l._domElementKeyEvents.removeEventListener("keydown",ee)};var l=y(a),r={type:"change"},o={type:"start"},g={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},u=s.NONE,c=1e-6,I=new BC,C=new BC,d=1,h=new Yi,A=!1,m=new ai,p=new ai,f=new ai,b=new ai,v=new ai,G=new ai,B=new ai,Z=new ai,x=new ai,q=[],S={};function R(){return Math.pow(.95,l.zoomSpeed)}function V(e){l.reverseOrbit?C.theta+=e:C.theta-=e}function Y(e){l.reverseOrbit?C.phi+=e:C.phi-=e}var z=function(){var e=new Yi;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),K=function(){var e=new Yi;return function(t,n){!0===l.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(l.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),N=function(){var e=new Yi;return function(t,n){var i=l.domElement;if(i&&l.object instanceof Tl&&l.object.isPerspectiveCamera){var a=l.object.position;e.copy(a).sub(l.target);var r=e.length();r*=Math.tan(l.object.fov/2*Math.PI/180),z(2*t*r/i.clientHeight,l.object.matrix),K(2*n*r/i.clientHeight,l.object.matrix)}else i&&l.object instanceof dr&&l.object.isOrthographicCamera?(z(t*(l.object.right-l.object.left)/l.object.zoom/i.clientWidth,l.object.matrix),K(n*(l.object.top-l.object.bottom)/l.object.zoom/i.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function H(e){l.object instanceof Tl&&l.object.isPerspectiveCamera?d/=e:l.object instanceof dr&&l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*e)),l.object.updateProjectionMatrix(),A=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function M(e){l.object instanceof Tl&&l.object.isPerspectiveCamera?d*=e:l.object instanceof dr&&l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/e)),l.object.updateProjectionMatrix(),A=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function F(e){m.set(e.clientX,e.clientY)}function L(e){b.set(e.clientX,e.clientY)}function _(){if(1==q.length)m.set(q[0].pageX,q[0].pageY);else{var e=.5*(q[0].pageX+q[1].pageX),t=.5*(q[0].pageY+q[1].pageY);m.set(e,t)}}function T(){if(1==q.length)b.set(q[0].pageX,q[0].pageY);else{var e=.5*(q[0].pageX+q[1].pageX),t=.5*(q[0].pageY+q[1].pageY);b.set(e,t)}}function E(){var e=q[0].pageX-q[1].pageX,t=q[0].pageY-q[1].pageY,n=Math.sqrt(e*e+t*t);B.set(0,n)}function J(e){if(1==q.length)p.set(e.pageX,e.pageY);else{var t=ae(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);p.set(n,i)}f.subVectors(p,m).multiplyScalar(l.rotateSpeed);var a=l.domElement;a&&(V(2*Math.PI*f.x/a.clientHeight),Y(2*Math.PI*f.y/a.clientHeight)),m.copy(p)}function U(e){if(1==q.length)v.set(e.pageX,e.pageY);else{var t=ae(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);v.set(n,i)}G.subVectors(v,b).multiplyScalar(l.panSpeed),N(G.x,G.y),b.copy(v)}function D(e){var t=ae(e),n=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(n*n+i*i);Z.set(0,a),x.set(0,Math.pow(Z.y/B.y,l.zoomSpeed)),H(x.y),B.copy(Z)}function P(e){if(!1!==l.enabled){var t,n;if(0===q.length)null===(t=l.domElement)||void 0===t||t.ownerDocument.addEventListener("pointermove",Q),null===(n=l.domElement)||void 0===n||n.ownerDocument.addEventListener("pointerup",O);!function(e){q.push(e)}(e),"touch"===e.pointerType?function(e){switch(ie(e),q.length){case 1:switch(l.touches.ONE){case k.ROTATE:if(!1===l.enableRotate)return;_(),u=s.TOUCH_ROTATE;break;case k.PAN:if(!1===l.enablePan)return;T(),u=s.TOUCH_PAN;break;default:u=s.NONE}break;case 2:switch(l.touches.TWO){case k.DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;l.enableZoom&&E(),l.enablePan&&T(),u=s.TOUCH_DOLLY_PAN;break;case k.DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;l.enableZoom&&E(),l.enableRotate&&_(),u=s.TOUCH_DOLLY_ROTATE;break;default:u=s.NONE}break;default:u=s.NONE}u!==s.NONE&&l.dispatchEvent(o)}(e):function(e){var t;switch(e.button){case 0:t=l.mouseButtons.LEFT;break;case 1:t=l.mouseButtons.MIDDLE;break;case 2:t=l.mouseButtons.RIGHT;break;default:t=-1}switch(t){case X.DOLLY:if(!1===l.enableZoom)return;!function(e){B.set(e.clientX,e.clientY)}(e),u=s.DOLLY;break;case X.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===l.enablePan)return;L(e),u=s.PAN}else{if(!1===l.enableRotate)return;F(e),u=s.ROTATE}break;case X.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===l.enableRotate)return;F(e),u=s.ROTATE}else{if(!1===l.enablePan)return;L(e),u=s.PAN}break;default:u=s.NONE}u!==s.NONE&&l.dispatchEvent(o)}(e)}}function Q(e){!1!==l.enabled&&("touch"===e.pointerType?function(e){switch(ie(e),u){case s.TOUCH_ROTATE:if(!1===l.enableRotate)return;J(e),l.update();break;case s.TOUCH_PAN:if(!1===l.enablePan)return;U(e),l.update();break;case s.TOUCH_DOLLY_PAN:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){l.enableZoom&&D(e),l.enablePan&&U(e)}(e),l.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===l.enableZoom&&!1===l.enableRotate)return;!function(e){l.enableZoom&&D(e),l.enableRotate&&J(e)}(e),l.update();break;default:u=s.NONE}}(e):function(e){if(!1===l.enabled)return;switch(u){case s.ROTATE:if(!1===l.enableRotate)return;!function(e){p.set(e.clientX,e.clientY),f.subVectors(p,m).multiplyScalar(l.rotateSpeed);var t=l.domElement;t&&(V(2*Math.PI*f.x/t.clientHeight),Y(2*Math.PI*f.y/t.clientHeight)),m.copy(p),l.update()}(e);break;case s.DOLLY:if(!1===l.enableZoom)return;!function(e){Z.set(e.clientX,e.clientY),x.subVectors(Z,B),x.y>0?H(R()):x.y<0&&M(R()),B.copy(Z),l.update()}(e);break;case s.PAN:if(!1===l.enablePan)return;!function(e){v.set(e.clientX,e.clientY),G.subVectors(v,b).multiplyScalar(l.panSpeed),N(G.x,G.y),b.copy(v),l.update()}(e)}}(e))}function O(e){var t,n,i;(ne(e),0===q.length)&&(null===(t=l.domElement)||void 0===t||t.releasePointerCapture(e.pointerId),null===(n=l.domElement)||void 0===n||n.ownerDocument.removeEventListener("pointermove",Q),null===(i=l.domElement)||void 0===i||i.ownerDocument.removeEventListener("pointerup",O));l.dispatchEvent(g),u=s.NONE}function j(e){ne(e)}function $(e){!1===l.enabled||!1===l.enableZoom||u!==s.NONE&&u!==s.ROTATE||(e.preventDefault(),l.dispatchEvent(o),function(e){e.deltaY<0?M(R()):e.deltaY>0&&H(R()),l.update()}(e),l.dispatchEvent(g))}function ee(e){!1!==l.enabled&&!1!==l.enablePan&&function(e){var t=!1;switch(e.code){case l.keys.UP:N(0,l.keyPanSpeed),t=!0;break;case l.keys.BOTTOM:N(0,-l.keyPanSpeed),t=!0;break;case l.keys.LEFT:N(l.keyPanSpeed,0),t=!0;break;case l.keys.RIGHT:N(-l.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),l.update())}(e)}function te(e){!1!==l.enabled&&e.preventDefault()}function ne(e){delete S[e.pointerId];for(var t=0;t<q.length;t++)if(q[t].pointerId==e.pointerId)return void q.splice(t,1)}function ie(e){var t=S[e.pointerId];void 0===t&&(t=new ai,S[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ae(e){var t=e.pointerId===q[0].pointerId?q[1]:q[0];return S[t.pointerId]}return void 0!==i&&a.connect(i),a.update(),a}return R(n)}(_n),HA=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],MA=i.forwardRef((function(e,t){var n=e.makeDefault,a=e.camera,l=e.regress,r=e.domElement,o=e.enableDamping,g=void 0===o||o,s=e.onChange,u=e.onStart,c=e.onEnd,I=Yd(e,HA),C=_h((function(e){return e.invalidate})),d=_h((function(e){return e.camera})),h=_h((function(e){return e.gl})),A=_h((function(e){return e.events})),m=_h((function(e){return e.set})),p=_h((function(e){return e.get})),f=_h((function(e){return e.performance})),b=a||d,v=r||A.connected||h.domElement,y=i.useMemo((function(){return new NA(b)}),[b]);return Th((function(){y.enabled&&y.update()}),-1),i.useEffect((function(){return y.connect(v),function(){y.dispose()}}),[v,l,y,C]),i.useEffect((function(){var e=function(e){C(),l&&f.regress(),s&&s(e)};return y.addEventListener("change",e),u&&y.addEventListener("start",u),c&&y.addEventListener("end",c),function(){u&&y.removeEventListener("start",u),c&&y.removeEventListener("end",c),y.removeEventListener("change",e)}}),[s,u,c,y,C]),i.useEffect((function(){if(n){var e=p().controls;return m({controls:y}),function(){return m({controls:e})}}}),[n,y]),i.createElement("primitive",rA({ref:t,object:y,enableDamping:g},I))})),FA=im(),LA=function(e){return $A(e,FA)},_A=im();LA.write=function(e){return $A(e,_A)};var TA=im();LA.onStart=function(e){return $A(e,TA)};var EA=im();LA.onFrame=function(e){return $A(e,EA)};var JA=im();LA.onFinish=function(e){return $A(e,JA)};var UA=[];LA.setTimeout=function(e,t){var n=LA.now()+t,i={time:n,handler:e,cancel:function e(){var t=UA.findIndex((function(t){return t.cancel==e}));~t&&UA.splice(t,1),OA-=~t?1:0}};return UA.splice(DA(n),0,i),OA+=1,em(),i};var DA=function(e){return~(~UA.findIndex((function(t){return t.time>e}))||~UA.length)};LA.cancel=function(e){TA.delete(e),EA.delete(e),JA.delete(e),FA.delete(e),_A.delete(e)},LA.sync=function(e){jA=!0,LA.batchedUpdates(e),jA=!1},LA.throttle=function(e){var t;function n(){try{e.apply(void 0,A(t))}finally{t=null}}function i(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];t=i,LA.onStart(n)}return i.handler=e,i.cancel=function(){TA.delete(n),t=null},i};var PA="undefined"!=typeof window?window.requestAnimationFrame:function(){};LA.use=function(e){return PA=e},LA.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,LA.batchedUpdates=function(e){return e()},LA.catch=console.error,LA.frameLoop="always",LA.advance=function(){"demand"!==LA.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):nm()};var QA=-1,OA=0,jA=!1;function $A(e,t){jA?(t.delete(e),e(0)):(t.add(e),em())}function em(){QA<0&&(QA=0,"demand"!==LA.frameLoop&&PA(tm))}function tm(){~QA&&(PA(tm),LA.batchedUpdates(nm))}function nm(){var e=QA;QA=LA.now();var t=DA(QA);t&&(am(UA.splice(0,t),(function(e){return e.handler()})),OA-=t),OA?(TA.flush(),FA.flush(e?Math.min(64,QA-e):16.667),EA.flush(),_A.flush(),JA.flush()):QA=-1}function im(){var e=new Set,t=e;return{add:function(n){OA+=t!=e||e.has(n)?0:1,e.add(n)},delete:function(n){return OA-=t==e&&e.has(n)?1:0,e.delete(n)},flush:function(n){t.size&&(e=new Set,OA-=t.size,am(t,(function(t){return t(n)&&e.add(t)})),OA+=e.size,t=e)}}}function am(e,t){e.forEach((function(e){try{t(e)}catch(cy){LA.catch(cy)}}))}var lm={arr:Array.isArray,obj:function(e){return!!e&&"Object"===e.constructor.name},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},und:function(e){return void 0===e}};var rm=function(e,t){return e.forEach(t)};function om(e,t,n){if(lm.arr(e))for(var i=0;i<e.length;i++)t.call(n,e[i],"".concat(i));else for(var a in e)e.hasOwnProperty(a)&&t.call(n,e[a],a)}var gm=function(e){return lm.und(e)?[]:lm.arr(e)?e:[e]};var sm,um,cm=function(){return"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)},Im=null,Cm=!1,dm=function(){},hm=function(e){e.to&&(um=e.to),e.now&&(LA.now=e.now),void 0!==e.colors&&(Im=e.colors),null!=e.skipAnimation&&(Cm=e.skipAnimation),e.createStringInterpolator&&(sm=e.createStringInterpolator),e.requestAnimationFrame&&LA.use(e.requestAnimationFrame),e.batchedUpdates&&(LA.batchedUpdates=e.batchedUpdates),e.willAdvance&&(dm=e.willAdvance),e.frameLoop&&(LA.frameLoop=e.frameLoop)},Am=Object.freeze({__proto__:null,get createStringInterpolator(){return sm},get to(){return um},get colors(){return Im},get skipAnimation(){return Cm},get willAdvance(){return dm},assign:hm}),mm=new Set,pm=[],fm=[],bm=0,vm={get idle(){return!mm.size&&!pm.length},start:function(e){bm>e.priority?(mm.add(e),LA.onStart(ym)):(Gm(e),LA(Zm))},advance:Zm,sort:function(e){if(bm)LA.onFrame((function(){return vm.sort(e)}));else{var t=pm.indexOf(e);~t&&(pm.splice(t,1),Bm(e))}},clear:function(){pm=[],mm.clear()}};function ym(){mm.forEach(Gm),mm.clear(),LA(Zm)}function Gm(e){pm.includes(e)||Bm(e)}function Bm(e){pm.splice(function(e,t){var n=e.findIndex(t);return n<0?e.length:n}(pm,(function(t){return t.priority>e.priority})),0,e)}function Zm(e){for(var t=fm,n=0;n<pm.length;n++){var i=pm[n];bm=i.priority,i.idle||(dm(i),i.advance(e),i.idle||t.push(i))}return bm=0,(fm=pm).length=0,(pm=t).length>0}var xm="[-+]?\\d*\\.?\\d+",wm=xm+"%";function qm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var Wm=new RegExp("rgb"+qm(xm,xm,xm)),Sm=new RegExp("rgba"+qm(xm,xm,xm,xm)),Rm=new RegExp("hsl"+qm(xm,wm,wm)),Vm=new RegExp("hsla"+qm(xm,wm,wm,xm)),Xm=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,km=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ym=/^#([0-9a-fA-F]{6})$/,zm=/^#([0-9a-fA-F]{8})$/;function Km(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Nm(e,t,n){var i=n<.5?n*(1+t):n+t-n*t,a=2*n-i,l=Km(a,i,e+1/3),r=Km(a,i,e),o=Km(a,i,e-1/3);return Math.round(255*l)<<24|Math.round(255*r)<<16|Math.round(255*o)<<8}function Hm(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function Mm(e){return(parseFloat(e)%360+360)%360/360}function Fm(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function Lm(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function _m(e){var t=function(e){var t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Ym.exec(e))?parseInt(t[1]+"ff",16)>>>0:Im&&void 0!==Im[e]?Im[e]:(t=Wm.exec(e))?(Hm(t[1])<<24|Hm(t[2])<<16|Hm(t[3])<<8|255)>>>0:(t=Sm.exec(e))?(Hm(t[1])<<24|Hm(t[2])<<16|Hm(t[3])<<8|Fm(t[4]))>>>0:(t=Xm.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=zm.exec(e))?parseInt(t[1],16)>>>0:(t=km.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Rm.exec(e))?(255|Nm(Mm(t[1]),Lm(t[2]),Lm(t[3])))>>>0:(t=Vm.exec(e))?(Nm(Mm(t[1]),Lm(t[2]),Lm(t[3]))|Fm(t[4]))>>>0:null}(e);if(null===t)return e;var n=(16711680&(t=t||0))>>>16,i=(65280&t)>>>8,a=(255&t)/255;return"rgba(".concat((4278190080&t)>>>24,", ").concat(n,", ").concat(i,", ").concat(a,")")}var Tm=function e(t,n,i){if(lm.fun(t))return t;if(lm.arr(t))return e({range:t,output:n,extrapolate:i});if(lm.str(t.output[0]))return sm(t);var a=t,l=a.output,r=a.range||[0,1],o=a.extrapolateLeft||a.extrapolate||"extend",g=a.extrapolateRight||a.extrapolate||"extend",s=a.easing||function(e){return e};return function(e){var t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,r);return function(e,t,n,i,a,l,r,o,g){var s=g?g(e):e;if(s<t){if("identity"===r)return s;"clamp"===r&&(s=t)}if(s>n){if("identity"===o)return s;"clamp"===o&&(s=n)}if(i===a)return i;if(t===n)return e<=t?i:a;t===-1/0?s=-s:n===1/0?s-=t:s=(s-t)/(n-t);s=l(s),i===-1/0?s=-s:a===1/0?s+=i:s=s*(a-i)+i;return s}(e,r[t],r[t+1],l[t],l[t+1],s,o,g,a.map)}};function Em(){return Em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Em.apply(this,arguments)}var Jm=Symbol.for("FluidValue.get"),Um=Symbol.for("FluidValue.observers"),Dm=function(e){return Boolean(e&&e[Jm])},Pm=function(e){return e&&e[Jm]?e[Jm]():e};function Qm(e,t){var n=e[Um];n&&n.forEach((function(e){!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var Om=R((function e(t){if(W(this,e),this[Jm]=void 0,this[Um]=void 0,!t&&!(t=this.get))throw Error("Unknown getter");jm(this,t)})),jm=function(e,t){return np(e,Jm,t)};function $m(e,t){if(e[Jm]){var n=e[Um];n||np(e,Um,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function ep(e,t){var n=e[Um];if(n&&n.has(t)){var i=n.size-1;i?n.delete(t):e[Um]=null,e.observerRemoved&&e.observerRemoved(i,t)}}var tp,np=function(e,t,n){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})},ip=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ap=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,lp=new RegExp("(".concat(ip.source,")(%|[a-z]+)"),"i"),rp=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,op=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,gp=function e(t){var n=s(sp(t),2),i=n[0],a=n[1];if(!i||cm())return t;var l=window.getComputedStyle(document.documentElement).getPropertyValue(i);if(l)return l.trim();if(a&&a.startsWith("--")){var r=window.getComputedStyle(document.documentElement).getPropertyValue(a);return r||t}return a&&op.test(a)?e(a):a||t},sp=function(e){var t=op.exec(e);if(!t)return[,];var n=s(t,3);return[n[1],n[2]]},up=function(e,t,n,i,a){return"rgba(".concat(Math.round(t),", ").concat(Math.round(n),", ").concat(Math.round(i),", ").concat(a,")")},cp=function(e){tp||(tp=Im?new RegExp("(".concat(Object.keys(Im).join("|"),")(?!\\w)"),"g"):/^\b$/);var t=e.output.map((function(e){return Pm(e).replace(op,gp).replace(ap,_m).replace(tp,_m)})),n=t.map((function(e){return e.match(ip).map(Number)})),i=n[0].map((function(e,t){return n.map((function(e){if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]}))})),a=i.map((function(t){return Tm(Em({},e,{output:t}))}));return function(e){var n,i=!lp.test(t[0])&&(null==(n=t.find((function(e){return lp.test(e)})))?void 0:n.replace(ip,"")),l=0;return t[0].replace(ip,(function(){return"".concat(a[l++](e)).concat(i||"")})).replace(rp,up)}},Ip="react-spring: ",Cp=function(e){var t=e,n=!1;if("function"!=typeof t)throw new TypeError("".concat(Ip,"once requires a function parameter"));return function(){n||(t.apply(void 0,arguments),n=!0)}},dp=Cp(console.warn);function hp(){dp("".concat(Ip,'The "interpolate" function is deprecated in v9 (use "to" instead)'))}Cp(console.warn);function Ap(e){return lm.str(e)&&("#"==e[0]||/\d/.test(e)||!cm()&&op.test(e)||e in(Im||{}))}var mp=cm()?i.useEffect:i.useLayoutEffect;function pp(){var e=(0,i.useState)()[1],t=function(){var e=(0,i.useRef)(!1);return mp((function(){return e.current=!0,function(){e.current=!1}}),[]),e}();return function(){t.current&&e(Math.random())}}var fp=[];var bp=Symbol.for("Animated:node"),vp=function(e){return e&&e[bp]},yp=function(e,t){return n=e,i=bp,a=t,Object.defineProperty(n,i,{value:a,writable:!0,configurable:!0});var n,i,a},Gp=function(e){return e&&e[bp]&&e[bp].getPayload()},Bp=function(){function e(){W(this,e),this.payload=void 0,yp(this,this)}return R(e,[{key:"getPayload",value:function(){return this.payload||[]}}]),e}(),Zp=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).done=!0,i.elapsedTime=void 0,i.lastPosition=void 0,i.lastVelocity=void 0,i.v0=void 0,i.durationProgress=0,i._value=e,lm.num(i._value)&&(i.lastPosition=i._value),i}return R(n,[{key:"getPayload",value:function(){return[this]}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e,t){return lm.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}},{key:"reset",value:function(){var e=this.done;this.done=!1,lm.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(Bp),xp=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this,0))._string=null,i._toString=void 0,i._toString=Tm({output:[e,e]}),i}return R(n,[{key:"getValue",value:function(){var e=this._string;return null==e?this._string=this._toString(this._value):e}},{key:"setValue",value:function(e){if(lm.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!v(u(n.prototype),"setValue",this).call(this,e))return!1;this._string=null}return!0}},{key:"reset",value:function(e){e&&(this._toString=Tm({output:[this.getValue(),e]})),this._value=0,v(u(n.prototype),"reset",this).call(this)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(Zp),wp={dependencies:null},qp=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this)).source=e,i.setValue(e),i}return R(n,[{key:"getValue",value:function(e){var t={};return om(this.source,(function(n,i){var a;(a=n)&&a[bp]===a?t[i]=n.getValue(e):Dm(n)?t[i]=Pm(n):e||(t[i]=n)})),t}},{key:"setValue",value:function(e){this.source=e,this.payload=this._makePayload(e)}},{key:"reset",value:function(){this.payload&&rm(this.payload,(function(e){return e.reset()}))}},{key:"_makePayload",value:function(e){if(e){var t=new Set;return om(e,this._addToPayload,t),Array.from(t)}}},{key:"_addToPayload",value:function(e){var t=this;wp.dependencies&&Dm(e)&&wp.dependencies.add(e);var n=Gp(e);n&&rm(n,(function(e){return t.add(e)}))}}]),n}(Bp),Wp=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"getValue",value:function(){return this.source.map((function(e){return e.getValue()}))}},{key:"setValue",value:function(e){var t=this.getPayload();return e.length==t.length?t.map((function(t,n){return t.setValue(e[n])})).some(Boolean):(v(u(n.prototype),"setValue",this).call(this,e.map(Sp)),!0)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(qp);function Sp(e){return(Ap(e)?xp:Zp).create(e)}function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Rp.apply(this,arguments)}var Vp=function(e,t){var n=!lm.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,i.forwardRef)((function(a,l){var r,o=(0,i.useRef)(null),g=n&&(0,i.useCallback)((function(e){o.current=function(e,t){e&&(lm.fun(e)?e(t):e.current=t);return t}(l,e)}),[l]),u=function(e,t){var n=new Set;wp.dependencies=n,e.style&&(e=Rp({},e,{style:t.createAnimatedStyle(e.style)}));return e=new qp(e),wp.dependencies=null,[e,n]}(a,t),c=s(u,2),I=c[0],C=c[1],d=pp(),h=function(){var e=o.current;n&&!e||!1===(!!e&&t.applyAnimatedValues(e,I.getValue(!0)))&&d()},A=new Xp(h,C),m=(0,i.useRef)();mp((function(){return m.current=A,rm(C,(function(e){return $m(e,A)})),function(){m.current&&(rm(m.current.deps,(function(e){return ep(e,m.current)})),LA.cancel(m.current.update))}})),(0,i.useEffect)(h,[]),r=function(){return function(){var e=m.current;rm(e.deps,(function(t){return ep(t,e)}))}},(0,i.useEffect)(r,fp);var p=t.getComponentProps(I.getValue());return i.createElement(e,Rp({},p,{ref:g}))}))},Xp=function(){function e(t,n){W(this,e),this.update=t,this.deps=n}return R(e,[{key:"eventObserved",value:function(e){"change"==e.type&&LA.write(this.update)}}]),e}();var kp=Symbol.for("AnimatedComponent"),Yp=function(e){return lm.str(e)?e:e&&lm.str(e.displayName)?e.displayName:lm.fun(e)&&e.name||null};function zp(){return zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zp.apply(this,arguments)}var Kp=1.70158,Np=1.525*Kp,Hp=Kp+1,Mp=2*Math.PI/3,Fp=2*Math.PI/4.5,Lp=function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},_p={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-Math.pow(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-Math.pow(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-Math.pow(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2},easeInCirc:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2},easeInBack:function(e){return Hp*e*e*e-Kp*e*e},easeOutBack:function(e){return 1+Hp*Math.pow(e-1,3)+Kp*Math.pow(e-1,2)},easeInOutBack:function(e){return e<.5?Math.pow(2*e,2)*(7.189819*e-Np)/2:(Math.pow(2*e-2,2)*((Np+1)*(2*e-2)+Np)+2)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*Mp)},easeOutElastic:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*Mp)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Fp)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Fp)/2+1},easeInBounce:function(e){return 1-Lp(1-e)},easeOutBounce:Lp,easeInOutBounce:function(e){return e<.5?(1-Lp(1-2*e))/2:(1+Lp(2*e-1))/2}};zp({},{tension:170,friction:26},{mass:1,damping:1,easing:_p.linear,clamp:!1});Error,Error;var Tp=function(e){return e instanceof Jp},Ep=1,Jp=function(e){G(n,e);var t=x(n);function n(){var e;W(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))).id=Ep++,e.key=void 0,e._priority=0,e}return R(n,[{key:"priority",get:function(){return this._priority},set:function(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}},{key:"get",value:function(){var e=vp(this);return e&&e.getValue()}},{key:"to",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Am.to(this,t)}},{key:"interpolate",value:function(){hp();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Am.to(this,t)}},{key:"toJSON",value:function(){return this.get()}},{key:"observerAdded",value:function(e){1==e&&this._attach()}},{key:"observerRemoved",value:function(e){0==e&&this._detach()}},{key:"_attach",value:function(){}},{key:"_detach",value:function(){}},{key:"_onChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Qm(this,{type:"change",parent:this,value:e,idle:t})}},{key:"_onPriorityChange",value:function(e){this.idle||vm.sort(this),Qm(this,{type:"priority",parent:this,priority:e})}}]),n}(Om);Symbol.for("SpringPhase");function Up(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Dp,Pp,Qp=["children"],Op=function(e){var t=e.children,n=Up(e,Qp),a=(0,i.useContext)(jp),l=n.pause||!!a.pause,r=n.immediate||!!a.immediate;n=function(e,t){var n=s((0,i.useState)((function(){return{inputs:t,result:e()}})),1)[0],a=(0,i.useRef)(),l=a.current,r=l;if(r){var o=Boolean(t&&r.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,r.inputs));o||(r={inputs:t,result:e()})}else r=n;return(0,i.useEffect)((function(){a.current=r,l==n&&(n.inputs=n.result=void 0)}),[r]),r.result}((function(){return{pause:l,immediate:r}}),[l,r]);var o=jp.Provider;return i.createElement(o,{value:n},t)},jp=(Dp=Op,Pp={},Object.assign(Dp,i.createContext(Pp)),Dp.Provider._context=Dp,Dp.Consumer._context=Dp,Dp);Op.Provider=jp.Provider,Op.Consumer=jp.Consumer;var $p;!function(e){e.MOUNT="mount",e.ENTER="enter",e.UPDATE="update",e.LEAVE="leave"}($p||($p={}));var ef=function(e){G(n,e);var t=x(n);function n(e,i){var a;W(this,n),(a=t.call(this)).key=void 0,a.idle=!0,a.calc=void 0,a._active=new Set,a.source=e,a.calc=Tm.apply(void 0,A(i));var l=a._get(),r=function(e){var t=vp(e);return t?t.constructor:lm.arr(e)?Wp:Ap(e)?xp:Zp}(l);return yp(y(a),r.create(l)),a}return R(n,[{key:"advance",value:function(e){var t=this._get();(function(e,t){if(lm.arr(e)){if(!lm.arr(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t})(t,this.get())||(vp(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&nf(this._active)&&af(this)}},{key:"_get",value:function(){var e=lm.arr(this.source)?this.source.map(Pm):gm(Pm(this.source));return this.calc.apply(this,A(e))}},{key:"_start",value:function(){var e=this;this.idle&&!nf(this._active)&&(this.idle=!1,rm(Gp(this),(function(e){e.done=!1})),Am.skipAnimation?(LA.batchedUpdates((function(){return e.advance()})),af(this)):vm.start(this))}},{key:"_attach",value:function(){var e=this,t=1;rm(gm(this.source),(function(n){Dm(n)&&$m(n,e),Tp(n)&&(n.idle||e._active.add(n),t=Math.max(t,n.priority+1))})),this.priority=t,this._start()}},{key:"_detach",value:function(){var e=this;rm(gm(this.source),(function(t){Dm(t)&&ep(t,e)})),this._active.clear(),af(this)}},{key:"eventObserved",value:function(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=gm(this.source).reduce((function(e,t){return Math.max(e,(Tp(t)?t.priority:0)+1)}),0))}}]),n}(Jp);function tf(e){return!1!==e.idle}function nf(e){return!e.size||Array.from(e).every(tf)}function af(e){e.idle||(e.idle=!0,rm(Gp(e),(function(e){e.done=!0})),Qm(e,{type:"idle",parent:e}))}Am.assign({createStringInterpolator:cp,to:function(e,t){return new ef(e,t)}});vm.advance;var lf=["primitive"].concat(Object.keys(e).filter((function(e){return/^[A-Z]/.test(e)})).map((function(e){return e[0].toLowerCase()+e.slice(1)})));Am.assign({createStringInterpolator:cp,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},frameLoop:"demand"}),Xh((function(){LA.advance()}),zh);var rf,of=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.applyAnimatedValues,i=void 0===n?function(){return!1}:n,a=t.createAnimatedStyle,l=void 0===a?function(e){return new qp(e)}:a,r=t.getComponentProps,o=void 0===r?function(e){return e}:r,g={applyAnimatedValues:i,createAnimatedStyle:l,getComponentProps:o},s=function e(t){var n=Yp(t)||"Anonymous";return(t=lm.str(t)?e[t]||(e[t]=Vp(t,g)):t[kp]||(t[kp]=Vp(t,g))).displayName="Animated(".concat(n,")"),t};return om(e,(function(t,n){lm.arr(e)&&(n=Yp(t)),s[n]=s(t)})),{animated:s}}(lf,{applyAnimatedValues:$h}),gf=(of.animated,function(e){G(n,e);var t=x(n);function n(){return W(this,n),t.call(this,{uniforms:{time:{value:0},fade:{value:1}},vertexShader:"\n      uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"\n      uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n\n        #include <tonemapping_fragment>\n\t      #include <encodings_fragment>\n      }"})}return R(n)}(Ll)),sf=function(e){return(new Yi).setFromSpherical(new BC(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI))},uf=i.forwardRef((function(e,t){var n=e.radius,a=void 0===n?100:n,l=e.depth,r=void 0===l?50:l,o=e.count,g=void 0===o?5e3:o,u=e.saturation,c=void 0===u?0:u,I=e.factor,C=void 0===I?4:I,d=e.fade,h=void 0!==d&&d,m=e.speed,p=void 0===m?1:m,f=i.useRef(),b=i.useMemo((function(){for(var e=[],t=[],n=Array.from({length:g},(function(){return(.5+.5*Math.random())*C})),i=new vi,l=a+r,o=r/g,s=0;s<g;s++)l-=o*Math.random(),e.push.apply(e,A(sf(l).toArray())),i.setHSL(s/g,c,.9),t.push(i.r,i.g,i.b);return[new Float32Array(e),new Float32Array(t),new Float32Array(n)]}),[g,r,C,a,c]),v=s(b,3),y=v[0],G=v[1],B=v[2];Th((function(e){return f.current&&(f.current.uniforms.time.value=e.clock.getElapsedTime()*p)}));var Z=s(i.useState((function(){return new gf})),1)[0];return i.createElement("points",{ref:t},i.createElement("bufferGeometry",null,i.createElement("bufferAttribute",{attach:"attributes-position",args:[y,3]}),i.createElement("bufferAttribute",{attach:"attributes-color",args:[G,3]}),i.createElement("bufferAttribute",{attach:"attributes-size",args:[B,1]})),i.createElement("primitive",{ref:f,object:Z,attach:"material",blending:D,"uniforms-fade-value":h,transparent:!0,vertexColors:!0}))})),cf=n(184),If=["onCollide","onCollideBegin","onCollideEnd"],Cf=["bi","bj"],df=["body","contact","target"],hf=["uuid"],Af=["body","ray"],mf={exports:{}},pf="object"===typeof Reflect?Reflect:null,ff=pf&&"function"===typeof pf.apply?pf.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};rf=pf&&"function"===typeof pf.ownKeys?pf.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var bf=Number.isNaN||function(e){return e!==e};function vf(){vf.init.call(this)}mf.exports=vf,mf.exports.once=function(e,t){return new Promise((function(n,i){function a(n){e.removeListener(t,l),i(n)}function l(){"function"===typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}Rf(e,t,l,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&Rf(e,"error",t,n)}(e,a,{once:!0})}))},vf.EventEmitter=vf,vf.prototype._events=void 0,vf.prototype._eventsCount=0,vf.prototype._maxListeners=void 0;var yf=10;function Gf(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function Bf(e){return void 0===e._maxListeners?vf.defaultMaxListeners:e._maxListeners}function Zf(e,t,n,i){var a,l,r;if(Gf(n),void 0===(l=e._events)?(l=e._events=Object.create(null),e._eventsCount=0):(void 0!==l.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),l=e._events),r=l[t]),void 0===r)r=l[t]=n,++e._eventsCount;else if("function"===typeof r?r=l[t]=i?[n,r]:[r,n]:i?r.unshift(n):r.push(n),(a=Bf(e))>0&&r.length>a&&!r.warned){r.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=r.length,function(e){console&&console.warn&&console.warn(e)}(o)}return e}function xf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wf(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=xf.bind(i);return a.listener=n,i.wrapFn=a,a}function qf(e,t,n){var i=e._events;if(void 0===i)return[];var a=i[t];return void 0===a?[]:"function"===typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):Sf(a,a.length)}function Wf(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function Sf(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function Rf(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(l){i.once&&e.removeEventListener(t,a),n(l)}))}}Object.defineProperty(vf,"defaultMaxListeners",{enumerable:!0,get:function(){return yf},set:function(e){if("number"!==typeof e||e<0||bf(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");yf=e}}),vf.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},vf.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||bf(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},vf.prototype.getMaxListeners=function(){return Bf(this)},vf.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var r=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw r.context=l,r}var o=a[e];if(void 0===o)return!1;if("function"===typeof o)ff(o,this,t);else{var g=o.length,s=Sf(o,g);for(n=0;n<g;++n)ff(s[n],this,t)}return!0},vf.prototype.addListener=function(e,t){return Zf(this,e,t,!1)},vf.prototype.on=vf.prototype.addListener,vf.prototype.prependListener=function(e,t){return Zf(this,e,t,!0)},vf.prototype.once=function(e,t){return Gf(t),this.on(e,wf(this,e,t)),this},vf.prototype.prependOnceListener=function(e,t){return Gf(t),this.prependListener(e,wf(this,e,t)),this},vf.prototype.removeListener=function(e,t){var n,i,a,l,r;if(Gf(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(a=-1,l=n.length-1;l>=0;l--)if(n[l]===t||n[l].listener===t){r=n[l].listener,a=l;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,r||t)}return this},vf.prototype.off=vf.prototype.removeListener,vf.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,l=Object.keys(n);for(i=0;i<l.length;++i)"removeListener"!==(a=l[i])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},vf.prototype.listeners=function(e){return qf(this,e,!0)},vf.prototype.rawListeners=function(e){return qf(this,e,!1)},vf.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):Wf.call(e,t)},vf.prototype.listenerCount=Wf,vf.prototype.eventNames=function(){return this._eventsCount>0?rf(this._events):[]};var Vf=mf.exports;function Xf(e,t,n){var i=void 0===t?null:t,a=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),a=0,l=n.length;a<l;++a)i[a]=n.charCodeAt(a);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),l=a.indexOf("\n",10)+1,r=a.substring(l)+(i?"//# sourceMappingURL="+i:""),o=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(o)}var kf=function(e,t,n){var i;return function(a){return i=i||Xf(e,t,n),new Worker(i,a)}}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KCiAgLyoqCiAgICogQSAzeDMgbWF0cml4LgogICAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9CiAgICovCiAgY2xhc3MgTWF0MyB7CiAgICAvKioKICAgICAqIEEgdmVjdG9yIG9mIGxlbmd0aCA5LCBjb250YWluaW5nIGFsbCBtYXRyaXggZWxlbWVudHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihlbGVtZW50cykgewogICAgICBpZiAoZWxlbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIGVsZW1lbnRzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdOwogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIG1hdHJpeCB0byBpZGVudGl0eQogICAgICogQHRvZG8gU2hvdWxkIHBlcmhhcHMgYmUgcmVuYW1lZCB0byBgc2V0SWRlbnRpdHkoKWAgdG8gYmUgbW9yZSBjbGVhci4KICAgICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWAKICAgICAqLwoKCiAgICBpZGVudGl0eSgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSAxOwogICAgICBlWzFdID0gMDsKICAgICAgZVsyXSA9IDA7CiAgICAgIGVbM10gPSAwOwogICAgICBlWzRdID0gMTsKICAgICAgZVs1XSA9IDA7CiAgICAgIGVbNl0gPSAwOwogICAgICBlWzddID0gMDsKICAgICAgZVs4XSA9IDE7CiAgICB9CiAgICAvKioKICAgICAqIFNldCBhbGwgZWxlbWVudHMgdG8gemVybwogICAgICovCgoKICAgIHNldFplcm8oKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMDsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDA7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMgZnJvbSBhIFZlYzMKICAgICAqLwoKCiAgICBzZXRUcmFjZSh2ZWN0b3IpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSB2ZWN0b3IueDsKICAgICAgZVs0XSA9IHZlY3Rvci55OwogICAgICBlWzhdID0gdmVjdG9yLno7CiAgICB9CiAgICAvKioKICAgICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50cwogICAgICovCgoKICAgIGdldFRyYWNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgdGFyZ2V0LnggPSBlWzBdOwogICAgICB0YXJnZXQueSA9IGVbNF07CiAgICAgIHRhcmdldC56ID0gZVs4XTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LVZlY3RvciBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIHYgVGhlIHZlY3RvciB0byBtdWx0aXBseSB3aXRoCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgeCA9IHYueDsKICAgICAgY29uc3QgeSA9IHYueTsKICAgICAgY29uc3QgeiA9IHYuejsKICAgICAgdGFyZ2V0LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHo7CiAgICAgIHRhcmdldC55ID0gZVszXSAqIHggKyBlWzRdICogeSArIGVbNV0gKiB6OwogICAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LXNjYWxhciBtdWx0aXBsaWNhdGlvbgogICAgICovCgoKICAgIHNtdWx0KHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIG1hdHJpeCBNYXRyaXggdG8gbXVsdGlwbHkgd2l0aCBmcm9tIGxlZnQgc2lkZS4KICAgICAqLwoKCiAgICBtbXVsdChtYXRyaXgsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICBjb25zdCBBID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50czsKICAgICAgY29uc3QgVCA9IHRhcmdldC5lbGVtZW50czsKICAgICAgY29uc3QgYTExID0gQVswXSwKICAgICAgICAgICAgYTEyID0gQVsxXSwKICAgICAgICAgICAgYTEzID0gQVsyXSwKICAgICAgICAgICAgYTIxID0gQVszXSwKICAgICAgICAgICAgYTIyID0gQVs0XSwKICAgICAgICAgICAgYTIzID0gQVs1XSwKICAgICAgICAgICAgYTMxID0gQVs2XSwKICAgICAgICAgICAgYTMyID0gQVs3XSwKICAgICAgICAgICAgYTMzID0gQVs4XTsKICAgICAgY29uc3QgYjExID0gQlswXSwKICAgICAgICAgICAgYjEyID0gQlsxXSwKICAgICAgICAgICAgYjEzID0gQlsyXSwKICAgICAgICAgICAgYjIxID0gQlszXSwKICAgICAgICAgICAgYjIyID0gQls0XSwKICAgICAgICAgICAgYjIzID0gQls1XSwKICAgICAgICAgICAgYjMxID0gQls2XSwKICAgICAgICAgICAgYjMyID0gQls3XSwKICAgICAgICAgICAgYjMzID0gQls4XTsKICAgICAgVFswXSA9IGExMSAqIGIxMSArIGExMiAqIGIyMSArIGExMyAqIGIzMTsKICAgICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjsKICAgICAgVFsyXSA9IGExMSAqIGIxMyArIGExMiAqIGIyMyArIGExMyAqIGIzMzsKICAgICAgVFszXSA9IGEyMSAqIGIxMSArIGEyMiAqIGIyMSArIGEyMyAqIGIzMTsKICAgICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjsKICAgICAgVFs1XSA9IGEyMSAqIGIxMyArIGEyMiAqIGIyMyArIGEyMyAqIGIzMzsKICAgICAgVFs2XSA9IGEzMSAqIGIxMSArIGEzMiAqIGIyMSArIGEzMyAqIGIzMTsKICAgICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjsKICAgICAgVFs4XSA9IGEzMSAqIGIxMyArIGEzMiAqIGIyMyArIGEzMyAqIGIzMzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2NhbGUgZWFjaCBjb2x1bW4gb2YgdGhlIG1hdHJpeAogICAgICovCgoKICAgIHNjYWxlKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykgewogICAgICAgIHRbMyAqIGkgKyAwXSA9IHZlY3Rvci54ICogZVszICogaSArIDBdOwogICAgICAgIHRbMyAqIGkgKyAxXSA9IHZlY3Rvci55ICogZVszICogaSArIDFdOwogICAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSBBeD1iCiAgICAgKiBAcGFyYW0gYiBUaGUgcmlnaHQgaGFuZCBzaWRlCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4CiAgICAgKiBAdG9kbyBzaG91bGQgcmV1c2UgYXJyYXlzCiAgICAgKi8KCgogICAgc29sdmUoYiwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IFtdOwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbnIgKiBuYzsgaSsrKSB7CiAgICAgICAgZXFucy5wdXNoKDApOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVxbnNbMyArIDQgKiAwXSA9IGIueDsKICAgICAgZXFuc1szICsgNCAqIDFdID0gYi55OwogICAgICBlcW5zWzMgKyA0ICogMl0gPSBiLno7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvbgoKICAgICAgbGV0IG4gPSAzOwogICAgICBjb25zdCBrID0gbjsKICAgICAgbGV0IG5wOwogICAgICBjb25zdCBrcCA9IDQ7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaWduZSggaSApID0gbGlnbmUoIGkgKSArIGxpZ25lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaWduZSggayApID0gbGlnbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaWduZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gR2V0IHRoZSBzb2x1dGlvbgoKCiAgICAgIHRhcmdldC56ID0gZXFuc1syICogbmMgKyAzXSAvIGVxbnNbMiAqIG5jICsgMl07CiAgICAgIHRhcmdldC55ID0gKGVxbnNbMSAqIG5jICsgM10gLSBlcW5zWzEgKiBuYyArIDJdICogdGFyZ2V0LnopIC8gZXFuc1sxICogbmMgKyAxXTsKICAgICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdOwoKICAgICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7CiAgICAgICAgdGhyb3cgYENvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9WyR7dGFyZ2V0LnRvU3RyaW5nKCl9XSwgYj1bJHtiLnRvU3RyaW5nKCl9XSwgQT1bJHt0aGlzLnRvU3RyaW5nKCl9XWA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIQogICAgICogQHBhcmFtIHZhbHVlIElmIHByb3ZpZGVkLCB0aGUgbWF0cml4IGVsZW1lbnQgd2lsbCBiZSBzZXQgdG8gdGhpcyB2YWx1ZS4KICAgICAqLwoKCiAgICBlKHJvdywgY29sdW1uLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB2YWx1ZQogICAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGFub3RoZXIgbWF0cml4IGludG8gdGhpcyBtYXRyaXggb2JqZWN0LgogICAgICovCgoKICAgIGNvcHkobWF0cml4KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0cml4LmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC4KICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgbGV0IHIgPSAnJzsKICAgICAgY29uc3Qgc2VwID0gJywnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHsKICAgICAgICByICs9IHRoaXMuZWxlbWVudHNbaV0gKyBzZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfQogICAgLyoqCiAgICAgKiByZXZlcnNlIHRoZSBtYXRyaXgKICAgICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICovCgoKICAgIHJldmVyc2UodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA2OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IHJldmVyc2VfZXFuczsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07CiAgICAgICAgfQogICAgICB9CgogICAgICBlcW5zWzMgKyA2ICogMF0gPSAxOwogICAgICBlcW5zWzMgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzMgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMV0gPSAxOwogICAgICBlcW5zWzQgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMl0gPSAxOyAvLyBDb21wdXRlIHJpZ2h0IHVwcGVyIHRyaWFuZ3VsYXIgdmVyc2lvbiBvZiB0aGUgbWF0cml4IC0gR2F1c3MgZWxpbWluYXRpb24KCiAgICAgIGxldCBuID0gMzsKICAgICAgY29uc3QgayA9IG47CiAgICAgIGxldCBucDsKICAgICAgY29uc3Qga3AgPSBuYzsgLy8gbnVtIHJvd3MKCiAgICAgIGxldCBwOwoKICAgICAgZG8gewogICAgICAgIGkgPSBrIC0gbjsKCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gPT09IDApIHsKICAgICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzCiAgICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykgewogICAgICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBqXSAhPT0gMCkgewogICAgICAgICAgICAgIG5wID0ga3A7CgogICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGkgKSA9IGxpbmUoIGkgKSArIGxpbmUoIGsgKQogICAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07CiAgICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkgewogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGsgKSA9IGxpbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaW5lKCBpICkKICAgICAgICAgICAgICBwID0ga3AgLSBucDsKICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IHdoaWxlICgtLW4pOyAvLyBlbGltaW5hdGUgdGhlIHVwcGVyIGxlZnQgdHJpYW5nbGUgb2YgdGhlIG1hdHJpeAoKCiAgICAgIGkgPSAyOwoKICAgICAgZG8gewogICAgICAgIGogPSBpIC0gMTsKCiAgICAgICAgZG8gewogICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgfSB3aGlsZSAoai0tKTsKICAgICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWwKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07CiAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IG5jIC0gbnA7CiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgIH0gd2hpbGUgKGktLSk7CgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gMjsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IGVxbnNbbnIgKyBqICsgbmMgKiBpXTsKCiAgICAgICAgICBpZiAoaXNOYU4ocCkgfHwgcCA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgdGhyb3cgYENvdWxkIG5vdCByZXZlcnNlISBBPVske3RoaXMudG9TdHJpbmcoKX1dYDsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgTSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFscwoKICAgICAgVFswXSA9IE1bMF07CiAgICAgIFRbNF0gPSBNWzRdOwogICAgICBUWzhdID0gTVs4XTsKICAgICAgdG1wID0gTVsxXTsKICAgICAgVFsxXSA9IE1bM107CiAgICAgIFRbM10gPSB0bXA7CiAgICAgIHRtcCA9IE1bMl07CiAgICAgIFRbMl0gPSBNWzZdOwogICAgICBUWzZdID0gdG1wOwogICAgICB0bXAgPSBNWzVdOwogICAgICBUWzVdID0gTVs3XTsKICAgICAgVFs3XSA9IHRtcDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgfQogIGNvbnN0IHJldmVyc2VfZXFucyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKCiAgLyoqCiAgICogMy1kaW1lbnNpb25hbCB2ZWN0b3IKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCB2ID0gbmV3IFZlYzMoMSwgMiwgMykKICAgKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xCiAgICovCgogIGNsYXNzIFZlYzMgewogICAgY29uc3RydWN0b3IoeCwgeSwgeikgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDAuMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwLjA7CiAgICAgIH0KCiAgICAgIGlmICh6ID09PSB2b2lkIDApIHsKICAgICAgICB6ID0gMC4wOwogICAgICB9CgogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgY3Jvc3MgcHJvZHVjdAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi4KICAgICAqLwoKCiAgICBjcm9zcyh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB2eCA9IHZlY3Rvci54OwogICAgICBjb25zdCB2eSA9IHZlY3Rvci55OwogICAgICBjb25zdCB2eiA9IHZlY3Rvci56OwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTsKICAgICAgdGFyZ2V0LnkgPSB6ICogdnggLSB4ICogdno7CiAgICAgIHRhcmdldC56ID0geCAqIHZ5IC0geSAqIHZ4OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHMKICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeikgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFsbCBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3IgdG8gemVyby4KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgYWRkaXRpb24KICAgICAqLwoKCiAgICB2YWRkKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICsgdGhpcy54OwogICAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKyB0aGlzLnk7CiAgICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55LCB0aGlzLnogKyB2ZWN0b3Iueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIHN1YnRyYWN0aW9uCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluLgogICAgICovCgoKICAgIHZzdWIodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgdGFyZ2V0LnkgPSB0aGlzLnkgLSB2ZWN0b3IueTsKICAgICAgICB0YXJnZXQueiA9IHRoaXMueiAtIHZlY3Rvci56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLSB2ZWN0b3IueCwgdGhpcy55IC0gdmVjdG9yLnksIHRoaXMueiAtIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNyb3NzIHByb2R1Y3QgbWF0cml4IGFfY3Jvc3MgZnJvbSBhIHZlY3Rvciwgc3VjaCB0aGF0IGEgeCBiID0gYV9jcm9zcyAqIGIgPSBjCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci9UREJEMjQvVlQwNi9sZWN0dXJlcy9MZWN0dXJlNi5wZGYgVW1lw6UgVW5pdmVyc2l0eSBMZWN0dXJlfQogICAgICovCgoKICAgIGNyb3NzbWF0KCkgewogICAgICByZXR1cm4gbmV3IE1hdDMoWzAsIC10aGlzLnosIHRoaXMueSwgdGhpcy56LCAwLCAtdGhpcy54LCAtdGhpcy55LCB0aGlzLngsIDBdKTsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSB2ZWN0b3IuIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBpbiB0aGUgdmVjdG9yLgogICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7CgogICAgICBpZiAobiA+IDAuMCkgewogICAgICAgIGNvbnN0IGludk4gPSAxIC8gbjsKICAgICAgICB0aGlzLnggKj0gaW52TjsKICAgICAgICB0aGlzLnkgKj0gaW52TjsKICAgICAgICB0aGlzLnogKj0gaW52TjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yIHRoYXQgaXMgb2YgbGVuZ3RoIDEuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHVuaXQgdmVjdG9yCiAgICAgKi8KCgogICAgdW5pdCh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7CiAgICAgIHRhcmdldC55ID0gc2NhbGFyICogeTsKICAgICAgdGFyZ2V0LnogPSBzY2FsYXIgKiB6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS4KICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHZlY3RvciB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bCh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICogdGhpcy54OwogICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICogdGhpcy55OwogICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTY2FsZSBhIHZlY3RvciBhbmQgYWRkIGl0IHRvIHRoaXMgdmVjdG9yLiBTYXZlIHRoZSByZXN1bHQgaW4gInRhcmdldCIuICh0YXJnZXQgPSB0aGlzICsgdmVjdG9yICogc2NhbGFyKQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnggPSAtdGhpcy54OwogICAgICB0YXJnZXQueSA9IC10aGlzLnk7CiAgICAgIHRhcmdldC56ID0gLXRoaXMuejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0d28gYXJ0aWZpY2lhbCB0YW5nZW50cyB0byB0aGUgdmVjdG9yCiAgICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluCiAgICAgKiBAcGFyYW0gdDIgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBzZWNvbmQgdGFuZ2VudCBpbgogICAgICovCgoKICAgIHRhbmdlbnRzKHQxLCB0MikgewogICAgICBjb25zdCBub3JtID0gdGhpcy5sZW5ndGgoKTsKCiAgICAgIGlmIChub3JtID4gMC4wKSB7CiAgICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjsKICAgICAgICBjb25zdCBpbm9ybSA9IDEgLyBub3JtOwogICAgICAgIG4uc2V0KHRoaXMueCAqIGlub3JtLCB0aGlzLnkgKiBpbm9ybSwgdGhpcy56ICogaW5vcm0pOwogICAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7CgogICAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7CiAgICAgICAgICByYW5kVmVjLnNldCgxLCAwLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5kVmVjLnNldCgwLCAxLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0KCiAgICAgICAgbi5jcm9zcyh0MSwgdDIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoZSBub3JtYWwgbGVuZ3RoIGlzIHplcm8sIG1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdDEuc2V0KDEsIDAsIDApOwogICAgICAgIHQyLnNldCgwLCAxLCAwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0CiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen1gOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyB2ZWN0b3IuCiAgICAgKi8KCgogICAgY29weSh2ZWN0b3IpIHsKICAgICAgdGhpcy54ID0gdmVjdG9yLng7CiAgICAgIHRoaXMueSA9IHZlY3Rvci55OwogICAgICB0aGlzLnogPSB2ZWN0b3IuejsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycwogICAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS4KICAgICAqLwoKCiAgICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geCArICh2ZWN0b3IueCAtIHgpICogdDsKICAgICAgdGFyZ2V0LnkgPSB5ICsgKHZlY3Rvci55IC0geSkgKiB0OwogICAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuCiAgICAgKi8KCgogICAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIGlmIChwcmVjaXNpb24gPT09IHZvaWQgMCkgewogICAgICAgIHByZWNpc2lvbiA9IDFlLTY7CiAgICAgIH0KCiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGlzIGFsbW9zdCB6ZXJvCiAgICAgKi8KCgogICAgYWxtb3N0WmVybyhwcmVjaXNpb24pIHsKICAgICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJlY2lzaW9uID0gMWUtNjsKICAgICAgfQoKICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnopID4gcHJlY2lzaW9uKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIHZlY3RvciBpcyBhbnRpLXBhcmFsbGVsIHRvIGFub3RoZXIgdmVjdG9yLgogICAgICogQHBhcmFtIHByZWNpc2lvbiBTZXQgdG8gemVybyBmb3IgZXhhY3QgY29tcGFyaXNvbnMKICAgICAqLwoKCiAgICBpc0FudGlwYXJhbGxlbFRvKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7CiAgICAgIHJldHVybiBhbnRpcF9uZWcuYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKTsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgdGhlIHZlY3RvcgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54LCB0aGlzLnksIHRoaXMueik7CiAgICB9CgogIH0KICBWZWMzLlpFUk8gPSBuZXcgVmVjMygwLCAwLCAwKTsKICBWZWMzLlVOSVRfWCA9IG5ldyBWZWMzKDEsIDAsIDApOwogIFZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7CiAgVmVjMy5VTklUX1ogPSBuZXcgVmVjMygwLCAwLCAxKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYW50aXBfbmVnID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KICBjbGFzcyBBQUJCIHsKICAgIC8qKgogICAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHVwcGVyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLmxvd2VyQm91bmQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnVwcGVyQm91bmQgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG93ZXJCb3VuZCkgewogICAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnVwcGVyQm91bmQpIHsKICAgICAgICB0aGlzLnVwcGVyQm91bmQuY29weShvcHRpb25zLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuCiAgICAgKiBAcGFyYW0gcG9pbnRzIEFuIGFycmF5IG9mIFZlYzMncy4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0CiAgICAgKi8KCgogICAgc2V0RnJvbVBvaW50cyhwb2ludHMsIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBza2luU2l6ZSkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBxID0gcXVhdGVybmlvbjsgLy8gU2V0IHRvIHRoZSBmaXJzdCBwb2ludAoKICAgICAgbC5jb3B5KHBvaW50c1swXSk7CgogICAgICBpZiAocSkgewogICAgICAgIHEudm11bHQobCwgbCk7CiAgICAgIH0KCiAgICAgIHUuY29weShsKTsKCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IHAgPSBwb2ludHNbaV07CgogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTsKICAgICAgICAgIHAgPSB0bXAkMTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPiB1LngpIHsKICAgICAgICAgIHUueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPCBsLnkpIHsKICAgICAgICAgIGwueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHAuejsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHAuejsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIG9mZnNldAoKCiAgICAgIGlmIChwb3NpdGlvbikgewogICAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7CiAgICAgICAgcG9zaXRpb24udmFkZCh1LCB1KTsKICAgICAgfQoKICAgICAgaWYgKHNraW5TaXplKSB7CiAgICAgICAgbC54IC09IHNraW5TaXplOwogICAgICAgIGwueSAtPSBza2luU2l6ZTsKICAgICAgICBsLnogLT0gc2tpblNpemU7CiAgICAgICAgdS54ICs9IHNraW5TaXplOwogICAgICAgIHUueSArPSBza2luU2l6ZTsKICAgICAgICB1LnogKz0gc2tpblNpemU7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCCiAgICAgKiBAcGFyYW0gYWFiYiBTb3VyY2UgdG8gY29weSBmcm9tCiAgICAgKiBAcmV0dXJuIFRoZSB0aGlzIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eQogICAgICovCgoKICAgIGNvcHkoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpOwogICAgICB0aGlzLnVwcGVyQm91bmQuY29weShhYWJiLnVwcGVyQm91bmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgYW4gQUFCQgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby4KICAgICAqLwoKCiAgICBleHRlbmQoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQueCA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC54ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC54KTsKICAgICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpOwogICAgICB0aGlzLnVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC55LCBhYWJiLnVwcGVyQm91bmQueSk7CiAgICAgIHRoaXMubG93ZXJCb3VuZC56ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLnosIGFhYmIubG93ZXJCb3VuZC56KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLgogICAgICovCgoKICAgIG92ZXJsYXBzKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tfAogICAgICAvLyBsMSAgICAgICB1MQoKICAgICAgY29uc3Qgb3ZlcmxhcHNYID0gbDIueCA8PSB1MS54ICYmIHUxLnggPD0gdTIueCB8fCBsMS54IDw9IHUyLnggJiYgdTIueCA8PSB1MS54OwogICAgICBjb25zdCBvdmVybGFwc1kgPSBsMi55IDw9IHUxLnkgJiYgdTEueSA8PSB1Mi55IHx8IGwxLnkgPD0gdTIueSAmJiB1Mi55IDw9IHUxLnk7CiAgICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejsKICAgICAgcmV0dXJuIG92ZXJsYXBzWCAmJiBvdmVybGFwc1kgJiYgb3ZlcmxhcHNaOwogICAgfSAvLyBNb3N0bHkgZm9yIGRlYnVnZ2luZwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIHJldHVybiAodS54IC0gbC54KSAqICh1LnkgLSBsLnkpICogKHUueiAtIGwueik7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gQUFCQiBpcyBmdWxseSBjb250YWluZWQgaW4gdGhpcyBBQUJCLgogICAgICovCgoKICAgIGNvbnRhaW5zKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tLS0tLS0tLXwKICAgICAgLy8gbDEgICAgICAgICAgICAgIHUxCgogICAgICByZXR1cm4gbDEueCA8PSBsMi54ICYmIHUxLnggPj0gdTIueCAmJiBsMS55IDw9IGwyLnkgJiYgdTEueSA+PSB1Mi55ICYmIGwxLnogPD0gbDIueiAmJiB1MS56ID49IHUyLno7CiAgICB9CgogICAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGEuY29weShsKTsKICAgICAgYi5zZXQodS54LCBsLnksIGwueik7CiAgICAgIGMuc2V0KHUueCwgdS55LCBsLnopOwogICAgICBkLnNldChsLngsIHUueSwgdS56KTsKICAgICAgZS5zZXQodS54LCBsLnksIHUueik7CiAgICAgIGYuc2V0KGwueCwgdS55LCBsLnopOwogICAgICBnLnNldChsLngsIGwueSwgdS56KTsKICAgICAgaC5jb3B5KHUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gYW5vdGhlciBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb0xvY2FsKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvV29ybGRGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb1dvcmxkKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgQUFCQiBpcyBoaXQgYnkgYSByYXkuCiAgICAgKi8KCgogICAgb3ZlcmxhcHNSYXkocmF5KSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkaXJlY3Rpb24sCiAgICAgICAgZnJvbQogICAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMAogICAgICAvLyByYXkuZGlyZWN0aW9uIGlzIHVuaXQgZGlyZWN0aW9uIHZlY3RvciBvZiByYXkKCiAgICAgIGNvbnN0IGRpckZyYWNYID0gMSAvIGRpcmVjdGlvbi54OwogICAgICBjb25zdCBkaXJGcmFjWSA9IDEgLyBkaXJlY3Rpb24ueTsKICAgICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyCgogICAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDsKICAgICAgY29uc3QgdDIgPSAodGhpcy51cHBlckJvdW5kLnggLSBmcm9tLngpICogZGlyRnJhY1g7CiAgICAgIGNvbnN0IHQzID0gKHRoaXMubG93ZXJCb3VuZC55IC0gZnJvbS55KSAqIGRpckZyYWNZOwogICAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTsKICAgICAgY29uc3QgdDUgPSAodGhpcy5sb3dlckJvdW5kLnogLSBmcm9tLnopICogZGlyRnJhY1o7CiAgICAgIGNvbnN0IHQ2ID0gKHRoaXMudXBwZXJCb3VuZC56IC0gZnJvbS56KSAqIGRpckZyYWNaOyAvLyBjb25zdCB0bWluID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4odDEsIHQyKSwgTWF0aC5taW4odDMsIHQ0KSkpOwogICAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpOwoKICAgICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTsKICAgICAgY29uc3QgdG1heCA9IE1hdGgubWluKE1hdGgubWluKE1hdGgubWF4KHQxLCB0MiksIE1hdGgubWF4KHQzLCB0NCkpLCBNYXRoLm1heCh0NSwgdDYpKTsgLy8gaWYgdG1heCA8IDAsIHJheSAobGluZSkgaXMgaW50ZXJzZWN0aW5nIEFBQkIsIGJ1dCB3aG9sZSBBQUJCIGlzIGJlaGluZyB1cwoKICAgICAgaWYgKHRtYXggPCAwKSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gaWYgdG1pbiA+IHRtYXgsIHJheSBkb2Vzbid0IGludGVyc2VjdCBBQUJCCgoKICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICB9CiAgY29uc3QgdG1wJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBDb2xsaXNpb24gIm1hdHJpeCIuCiAgICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcAogICAqLwogIGNsYXNzIEFycmF5Q29sbGlzaW9uTWF0cml4IHsKICAgIC8qKgogICAgICogVGhlIG1hdHJpeCBzdG9yYWdlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXRyaXggPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBnZXQoYmksIGJqKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYW4gZWxlbWVudAogICAgICovCgoKICAgIHNldChiaSwgYmosIHZhbHVlKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5tYXRyaXgubGVuZ3RoOyBpICE9PSBsOyBpKyspIHsKICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzCiAgICAgKi8KCgogICAgc2V0TnVtT2JqZWN0cyhuKSB7CiAgICAgIHRoaXMubWF0cml4Lmxlbmd0aCA9IG4gKiAobiAtIDEpID4+IDE7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLgogICAqLwogIGNsYXNzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwogICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdID0gW107CiAgICAgIH0KCiAgICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGV2ZW50IGxpc3RlbmVyIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gIT09IHVuZGVmaW5lZCAmJiBsaXN0ZW5lcnNbdHlwZV0uaW5jbHVkZXMobGlzdGVuZXIpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW55IGV2ZW50IGxpc3RlbmVyIG9mIHRoZSBnaXZlbiB0eXBlIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzQW55RXZlbnRMaXN0ZW5lcih0eXBlKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwogICAgICByZXR1cm4gbGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQ7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lcgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogRW1pdCBhbiBldmVudC4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKICAgICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTsKCiAgICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBldmVudC50YXJnZXQgPSB0aGlzOwoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpc3RlbmVyQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBsaXN0ZW5lckFycmF5W2ldLmNhbGwodGhpcywgZXZlbnQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uCiAgICogQHBhcmFtIHggTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBpLgogICAqIEBwYXJhbSB5IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3Igai4KICAgKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuCiAgICogQHBhcmFtIHcgTXVsdGlwbGllciBvZiB0aGUgcmVhbCBwYXJ0LgogICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWF0ZXJuaW9uCiAgICovCgogIGNsYXNzIFF1YXRlcm5pb24gewogICAgY29uc3RydWN0b3IoeCwgeSwgeiwgdykgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh5ID09PSB2b2lkIDApIHsKICAgICAgICB5ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHogPT09IHZvaWQgMCkgewogICAgICAgIHogPSAwOwogICAgICB9CgogICAgICBpZiAodyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdyA9IDE7CiAgICAgIH0KCiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHRoaXMudyA9IHc7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgc2V0KHgsIHksIHosIHcpIHsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgICAgdGhpcy53ID0gdzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdG8gYSByZWFkYWJsZSBmb3JtYXQKICAgICAqIEByZXR1cm4gIngseSx6LHciCiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen0sJHt0aGlzLnd9YDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhbiBBcnJheQogICAgICogQHJldHVybiBbeCwgeSwgeiwgd10KICAgICAqLwoKCiAgICB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud107CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIGFuIGF4aXMgYW5kIGFuIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgc2V0RnJvbUF4aXNBbmdsZSh2ZWN0b3IsIGFuZ2xlKSB7CiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7CiAgICAgIHRoaXMueCA9IHZlY3Rvci54ICogczsKICAgICAgdGhpcy55ID0gdmVjdG9yLnkgKiBzOwogICAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7CiAgICAgIHRoaXMudyA9IE1hdGguY29zKGFuZ2xlICogMC41KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIFsgYXhpcywgYW5nbGUgXSByZXByZXNlbnRhdGlvbi4KICAgICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy4KICAgICAqIEByZXR1cm4gQW4gYXJyYXksIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGF4aXMgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgdG9BeGlzQW5nbGUodGFyZ2V0QXhpcykgewogICAgICBpZiAodGFyZ2V0QXhpcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0QXhpcyA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkCgogICAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTsKICAgICAgY29uc3QgcyA9IE1hdGguc3FydCgxIC0gdGhpcy53ICogdGhpcy53KTsgLy8gYXNzdW1pbmcgcXVhdGVybmlvbiBub3JtYWxpc2VkIHRoZW4gdyBpcyBsZXNzIHRoYW4gMSwgc28gdGVybSBhbHdheXMgcG9zaXRpdmUuCgogICAgICBpZiAocyA8IDAuMDAxKSB7CiAgICAgICAgLy8gdGVzdCB0byBhdm9pZCBkaXZpZGUgYnkgemVybywgcyBpcyBhbHdheXMgcG9zaXRpdmUgZHVlIHRvIHNxcnQKICAgICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50CiAgICAgICAgdGFyZ2V0QXhpcy54ID0gdGhpcy54OyAvLyBpZiBpdCBpcyBpbXBvcnRhbnQgdGhhdCBheGlzIGlzIG5vcm1hbGlzZWQgdGhlbiByZXBsYWNlIHdpdGggeD0xOyB5PXo9MDsKCiAgICAgICAgdGFyZ2V0QXhpcy55ID0gdGhpcy55OwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLnggLyBzOyAvLyBub3JtYWxpc2UgYXhpcwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnkgLyBzOwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMueiAvIHM7CiAgICAgIH0KCiAgICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuCiAgICAgKi8KCgogICAgc2V0RnJvbVZlY3RvcnModSwgdikgewogICAgICBpZiAodS5pc0FudGlwYXJhbGxlbFRvKHYpKSB7CiAgICAgICAgY29uc3QgdDEgPSBzZnZfdDE7CiAgICAgICAgY29uc3QgdDIgPSBzZnZfdDI7CiAgICAgICAgdS50YW5nZW50cyh0MSwgdDIpOwogICAgICAgIHRoaXMuc2V0RnJvbUF4aXNBbmdsZSh0MSwgTWF0aC5QSSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgYSA9IHUuY3Jvc3Modik7CiAgICAgICAgdGhpcy54ID0gYS54OwogICAgICAgIHRoaXMueSA9IGEueTsKICAgICAgICB0aGlzLnogPSBhLno7CiAgICAgICAgdGhpcy53ID0gTWF0aC5zcXJ0KHUubGVuZ3RoKCkgKiogMiAqIHYubGVuZ3RoKCkgKiogMikgKyB1LmRvdCh2KTsKICAgICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgdGhlIHF1YXRlcm5pb24gd2l0aCBhbiBvdGhlciBxdWF0ZXJuaW9uLgogICAgICovCgoKICAgIG11bHQocXVhdCwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBjb25zdCBieCA9IHF1YXQueDsKICAgICAgY29uc3QgYnkgPSBxdWF0Lnk7CiAgICAgIGNvbnN0IGJ6ID0gcXVhdC56OwogICAgICBjb25zdCBidyA9IHF1YXQudzsKICAgICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5OwogICAgICB0YXJnZXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7CiAgICAgIHRhcmdldC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDsKICAgICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludmVyc2UgcXVhdGVybmlvbiByb3RhdGlvbi4KICAgICAqLwoKCiAgICBpbnZlcnNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCB3ID0gdGhpcy53OwogICAgICB0aGlzLmNvbmp1Z2F0ZSh0YXJnZXQpOwogICAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTsKICAgICAgdGFyZ2V0LnggKj0gaW5vcm0yOwogICAgICB0YXJnZXQueSAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC56ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LncgKj0gaW5vcm0yOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHF1YXRlcm5pb24gY29uanVnYXRlCiAgICAgKi8KCgogICAgY29uanVnYXRlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IC10aGlzLng7CiAgICAgIHRhcmdldC55ID0gLXRoaXMueTsKICAgICAgdGFyZ2V0LnogPSAtdGhpcy56OwogICAgICB0YXJnZXQudyA9IHRoaXMudzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBsZXQgbCA9IE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpOwoKICAgICAgaWYgKGwgPT09IDApIHsKICAgICAgICB0aGlzLnggPSAwOwogICAgICAgIHRoaXMueSA9IDA7CiAgICAgICAgdGhpcy56ID0gMDsKICAgICAgICB0aGlzLncgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGwgPSAxIC8gbDsKICAgICAgICB0aGlzLnggKj0gbDsKICAgICAgICB0aGlzLnkgKj0gbDsKICAgICAgICB0aGlzLnogKj0gbDsKICAgICAgICB0aGlzLncgKj0gbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLgogICAgICogQGF1dGhvciB1bnBoYXNlZCwgaHR0cHM6Ly9naXRodWIuY29tL3VucGhhc2VkCiAgICAgKi8KCgogICAgbm9ybWFsaXplRmFzdCgpIHsKICAgICAgY29uc3QgZiA9ICgzLjAgLSAodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53KSkgLyAyLjA7CgogICAgICBpZiAoZiA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy54ICo9IGY7CiAgICAgICAgdGhpcy55ICo9IGY7CiAgICAgICAgdGhpcy56ICo9IGY7CiAgICAgICAgdGhpcy53ICo9IGY7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvcgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdi54OwogICAgICBjb25zdCB5ID0gdi55OwogICAgICBjb25zdCB6ID0gdi56OwogICAgICBjb25zdCBxeCA9IHRoaXMueDsKICAgICAgY29uc3QgcXkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHF6ID0gdGhpcy56OwogICAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2CgogICAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTsKICAgICAgY29uc3QgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7CiAgICAgIGNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwogICAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CiAgICAgIHRhcmdldC54ID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTsKICAgICAgdGFyZ2V0LnkgPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6OwogICAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyBxdWF0ZXJuaW9uLgogICAgICogQHJldHVybiB0aGlzCiAgICAgKi8KCgogICAgY29weShxdWF0KSB7CiAgICAgIHRoaXMueCA9IHF1YXQueDsKICAgICAgdGhpcy55ID0gcXVhdC55OwogICAgICB0aGlzLnogPSBxdWF0Lno7CiAgICAgIHRoaXMudyA9IHF1YXQudzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24uIE9yZGVyOiBZWlgsIGFzIHRoaXMgcGFnZSBkZXNjcmliZXM6IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9zdGFuZGFyZHMvaW5kZXguaHRtCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhyZWUtY2hhcmFjdGVyIHN0cmluZywgZGVmYXVsdHMgdG8gIllaWCIKICAgICAqLwoKCiAgICB0b0V1bGVyKHRhcmdldCwgb3JkZXIpIHsKICAgICAgaWYgKG9yZGVyID09PSB2b2lkIDApIHsKICAgICAgICBvcmRlciA9ICdZWlgnOwogICAgICB9CgogICAgICBsZXQgaGVhZGluZzsKICAgICAgbGV0IGF0dGl0dWRlOwogICAgICBsZXQgYmFuazsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKCiAgICAgIHN3aXRjaCAob3JkZXIpIHsKICAgICAgICBjYXNlICdZWlgnOgogICAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7CgogICAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBub3J0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAyICogTWF0aC5hdGFuMih4LCB3KTsKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlc3QgPCAtMC40OTkpIHsKICAgICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZQogICAgICAgICAgICBoZWFkaW5nID0gLTIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IC1NYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGhlYWRpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBzcXggPSB4ICogeDsKICAgICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7CiAgICAgICAgICAgIGNvbnN0IHNxeiA9IHogKiB6OwogICAgICAgICAgICBoZWFkaW5nID0gTWF0aC5hdGFuMigyICogeSAqIHcgLSAyICogeCAqIHosIDEgLSAyICogc3F5IC0gMiAqIHNxeik7IC8vIEhlYWRpbmcKCiAgICAgICAgICAgIGF0dGl0dWRlID0gTWF0aC5hc2luKDIgKiB0ZXN0KTsgLy8gYXR0aXR1ZGUKCiAgICAgICAgICAgIGJhbmsgPSBNYXRoLmF0YW4yKDIgKiB4ICogdyAtIDIgKiB5ICogeiwgMSAtIDIgKiBzcXggLSAyICogc3F6KTsgLy8gYmFuawogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFdWxlciBvcmRlciAke29yZGVyfSBub3Qgc3VwcG9ydGVkIHlldC5gKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnkgPSBoZWFkaW5nOwogICAgICB0YXJnZXQueiA9IGF0dGl0dWRlOwogICAgICB0YXJnZXQueCA9IGJhbms7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIEV1bGVyIGFuZ2xlIHJlcHJlc2VudGF0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBvcmRlciBUaGUgb3JkZXIgdG8gYXBwbHkgYW5nbGVzOiAnWFlaJyBvciAnWVhaJyBvciBhbnkgb3RoZXIgY29tYmluYXRpb24uCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlCiAgICAgKi8KCgogICAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyKSB7CiAgICAgIGlmIChvcmRlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3JkZXIgPSAnWFlaJzsKICAgICAgfQoKICAgICAgY29uc3QgYzEgPSBNYXRoLmNvcyh4IC8gMik7CiAgICAgIGNvbnN0IGMyID0gTWF0aC5jb3MoeSAvIDIpOwogICAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTsKICAgICAgY29uc3QgczEgPSBNYXRoLnNpbih4IC8gMik7CiAgICAgIGNvbnN0IHMyID0gTWF0aC5zaW4oeSAvIDIpOwogICAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTsKCiAgICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWFonKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWlhZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWlgnKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWFpZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgUXVhdGVybmlvbih0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLncpOwogICAgfQogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0CiAgICAgKgogICAgICogQHBhcmFtIHRvUXVhdCBzZWNvbmQgb3BlcmFuZAogICAgICogQHBhcmFtIHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgc2VsZiBxdWF0ZXJuaW9uIGFuZCB0b1F1YXQKICAgICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC4KICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBUaGUgInRhcmdldCIgb2JqZWN0CiAgICAgKi8KCgogICAgc2xlcnAodG9RdWF0LCB0LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGxldCBieCA9IHRvUXVhdC54OwogICAgICBsZXQgYnkgPSB0b1F1YXQueTsKICAgICAgbGV0IGJ6ID0gdG9RdWF0Lno7CiAgICAgIGxldCBidyA9IHRvUXVhdC53OwogICAgICBsZXQgb21lZ2E7CiAgICAgIGxldCBjb3NvbTsKICAgICAgbGV0IHNpbm9tOwogICAgICBsZXQgc2NhbGUwOwogICAgICBsZXQgc2NhbGUxOyAvLyBjYWxjIGNvc2luZQoKICAgICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSkKCiAgICAgIGlmIChjb3NvbSA8IDAuMCkgewogICAgICAgIGNvc29tID0gLWNvc29tOwogICAgICAgIGJ4ID0gLWJ4OwogICAgICAgIGJ5ID0gLWJ5OwogICAgICAgIGJ6ID0gLWJ6OwogICAgICAgIGJ3ID0gLWJ3OwogICAgICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHMKCgogICAgICBpZiAoMS4wIC0gY29zb20gPiAwLjAwMDAwMSkgewogICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKQogICAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTsKICAgICAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTsKICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTsKICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlCiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbgogICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7CiAgICAgICAgc2NhbGUxID0gdDsKICAgICAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzCgoKICAgICAgdGFyZ2V0LnggPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4OwogICAgICB0YXJnZXQueSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7CiAgICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejsKICAgICAgdGFyZ2V0LncgPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBSb3RhdGUgYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gcXVhdGVybmlvbiBnaXZlbiBhbiBhbmd1bGFyIHZlbG9jaXR5IGFuZCBhIHRpbWUgc3RlcC4KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoYW5ndWxhclZlbG9jaXR5LCBkdCwgYW5ndWxhckZhY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gYW5ndWxhclZlbG9jaXR5LnggKiBhbmd1bGFyRmFjdG9yLngsCiAgICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksCiAgICAgICAgICAgIGF6ID0gYW5ndWxhclZlbG9jaXR5LnogKiBhbmd1bGFyRmFjdG9yLnosCiAgICAgICAgICAgIGJ4ID0gdGhpcy54LAogICAgICAgICAgICBieSA9IHRoaXMueSwKICAgICAgICAgICAgYnogPSB0aGlzLnosCiAgICAgICAgICAgIGJ3ID0gdGhpcy53OwogICAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7CiAgICAgIHRhcmdldC54ICs9IGhhbGZfZHQgKiAoYXggKiBidyArIGF5ICogYnogLSBheiAqIGJ5KTsKICAgICAgdGFyZ2V0LnkgKz0gaGFsZl9kdCAqIChheSAqIGJ3ICsgYXogKiBieCAtIGF4ICogYnopOwogICAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7CiAgICAgIHRhcmdldC53ICs9IGhhbGZfZHQgKiAoLWF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBieik7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogIH0KICBjb25zdCBzZnZfdDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNmdl90MiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuCiAgICovCiAgY29uc3QgU0hBUEVfVFlQRVMgPSB7CiAgICAvKiogU1BIRVJFICovCiAgICBTUEhFUkU6IDEsCgogICAgLyoqIFBMQU5FICovCiAgICBQTEFORTogMiwKCiAgICAvKiogQk9YICovCiAgICBCT1g6IDQsCgogICAgLyoqIENPTVBPVU5EICovCiAgICBDT01QT1VORDogOCwKCiAgICAvKiogQ09OVkVYUE9MWUhFRFJPTiAqLwogICAgQ09OVkVYUE9MWUhFRFJPTjogMTYsCgogICAgLyoqIEhFSUdIVEZJRUxEICovCiAgICBIRUlHSFRGSUVMRDogMzIsCgogICAgLyoqIFBBUlRJQ0xFICovCiAgICBQQVJUSUNMRTogNjQsCgogICAgLyoqIENZTElOREVSICovCiAgICBDWUxJTkRFUjogMTI4LAoKICAgIC8qKiBUUklNRVNIICovCiAgICBUUklNRVNIOiAyNTYKICB9OwogIC8qKgogICAqIFNoYXBlVHlwZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBzaGFwZXMKICAgKi8KICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IFNoYXBlLmlkQ291bnRlcisrOwogICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgPyBvcHRpb25zLm1hdGVyaWFsIDogbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuCiAgICAgKiBUaGUgcmVzdWx0IGlzIHN0b3JlZCBpbiB0aGUgcHJvcGVydHkgYC5ib3VuZGluZ1NwaGVyZVJhZGl1c2AKICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhyb3cgYGNvbXB1dGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICB0aHJvdyBgdm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIGluZXJ0aWEgaW4gdGhlIGxvY2FsIGZyYW1lIGZvciB0aGlzIHNoYXBlLgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICB0aHJvdyBgY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdCBmb3IgdGhlc2Uga2luZCBvZiBtZXRob2RzCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgdGhyb3cgYGNhbGN1bGF0ZVdvcmxkQUFCQigpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQoKICB9CiAgU2hhcGUuaWRDb3VudGVyID0gMDsKICBTaGFwZS50eXBlcyA9IFNIQVBFX1RZUEVTOwoKICAvKioKICAgKiBUcmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXMuCiAgICovCiAgY2xhc3MgVHJhbnNmb3JtIHsKICAgIC8qKgogICAgICogcG9zaXRpb24KICAgICAqLwoKICAgIC8qKgogICAgICogcXVhdGVybmlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGdsb2JhbCBwb2ludCBpbiBsb2NhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIHJldHVybiBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5wb3NpdGlvbiwgdGhpcy5xdWF0ZXJuaW9uLCBsb2NhbFBvaW50LCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHBvaW50VG9Mb2NhbEZyYW1lCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb1dvcmxkRnJhbWUocXVhdGVybmlvbiwgbG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CiAgY29uc3QgdG1wUXVhdCQxID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwogIGNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogdmVydGljZXMgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggZmFjZSBjb25zaXN0cyBvZgogICAgICovCgogICAgLyoqIGZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkVmVydGljZXMgKi8KCiAgICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi8KCiAgICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovCgogICAgLyoqCiAgICAgKiBJZiBnaXZlbiwgdGhlc2UgbG9jYWxseSBkZWZpbmVkLCBub3JtYWxpemVkIGF4ZXMgYXJlIHRoZSBvbmx5IG9uZXMgYmVpbmcgY2hlY2tlZCB3aGVuIGRvaW5nIHNlcGFyYXRpbmcgYXhpcyBjaGVjay4KICAgICAqLwoKICAgIC8qKiB1bmlxdWVFZGdlcyAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMncwogICAgICogQHBhcmFtIGZhY2VzIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBkZXNjcmliaW5nIHdoaWNoIHZlcnRpY2VzIHRoYXQgaXMgaW5jbHVkZWQgaW4gZWFjaCBmYWNlLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkgewogICAgICAgIHByb3BzID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IHsKICAgICAgICB2ZXJ0aWNlcyA9IFtdLAogICAgICAgIGZhY2VzID0gW10sCiAgICAgICAgbm9ybWFscyA9IFtdLAogICAgICAgIGF4ZXMsCiAgICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMKICAgICAgfSA9IHByb3BzOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTgogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZlcnRleCAke3RoaXMuZmFjZXNbaV1bal19IG5vdCBmb3VuZCFgKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ldIHx8IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5nZXRGYWNlTm9ybWFsKGksIG4pOwogICAgICAgIG4ubmVnYXRlKG4pOwogICAgICAgIHRoaXMuZmFjZU5vcm1hbHNbaV0gPSBuOwogICAgICAgIGNvbnN0IHZlcnRleCA9IHRoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVswXV07CgogICAgICAgIGlmIChuLmRvdCh2ZXJ0ZXgpIDwgMCkgewogICAgICAgICAgY29uc29sZS5lcnJvcihgLmZhY2VOb3JtYWxzWyR7aX1dID0gVmVjMygke24udG9TdHJpbmcoKX0pIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuYCk7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybihgLnZlcnRpY2VzWyR7dGhpcy5mYWNlc1tpXVtqXX1dID0gVmVjMygke3RoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVtqXV0udG9TdHJpbmcoKX0pYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiBhIGZhY2UgZnJvbSBpdHMgdmVydGljZXMKICAgICAqLwoKCiAgICBnZXRGYWNlTm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTsKICAgICAgY29uc3QgdmEgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCB2YiA9IHRoaXMudmVydGljZXNbZlsxXV07CiAgICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTsKICAgICAgQ29udmV4UG9seWhlZHJvbi5jb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWIgPSBuZXcgVmVjMygpOwogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gbWluRGlzdCBDbGFtcCBkaXN0YW5jZQogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbAogICAgICovCgoKICAgIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgV29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBsZXQgY2xvc2VzdEZhY2VCID0gLTE7CiAgICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7CgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgV29ybGROb3JtYWwuY29weShodWxsQi5mYWNlTm9ybWFsc1tmYWNlXSk7CiAgICAgICAgcXVhdEIudm11bHQoV29ybGROb3JtYWwsIFdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpOwoKICAgICAgICBpZiAoZCA+IGRtYXgpIHsKICAgICAgICAgIGRtYXggPSBkOwogICAgICAgICAgY2xvc2VzdEZhY2VCID0gZmFjZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkVmVydHNCMSA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGh1bGxCLnZlcnRpY2VzW2h1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl1baV1dOwogICAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7CiAgICAgICAgd29ybGRiLmNvcHkoYik7CiAgICAgICAgcXVhdEIudm11bHQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7CiAgICAgICAgd29ybGRWZXJ0c0IxLnB1c2god29ybGRiKTsKICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQiA+PSAwKSB7CiAgICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRmluZCB0aGUgc2VwYXJhdGluZyBheGlzIGJldHdlZW4gdGhpcyBodWxsIGFuZCBhbm90aGVyCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgdmVjdG9yIHRvIHNhdmUgdGhlIGF4aXMgaW4KICAgICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZQogICAgICovCgoKICAgIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MzID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRub3JtYWwxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwoKICAgICAgaWYgKCFodWxsQS51bmlxdWVBeGVzKSB7CiAgICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQQoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QVtpXSA6IGk7IC8vIEdldCB3b3JsZCBmYWNlIG5vcm1hbAoKICAgICAgICAgIGZhY2VBTm9ybWFsV1MzLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MzLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGF4aXMKICAgICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUF4ZXNbaV0sIGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghaHVsbEIudW5pcXVlQXhlcykgewogICAgICAgIC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEIKICAgICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QiA/IGZhY2VMaXN0QltpXSA6IGk7CiAgICAgICAgICBXb3JsZG5vcm1hbDEuY29weShodWxsQi5mYWNlTm9ybWFsc1tmaV0pOwogICAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBodWxsQi51bmlxdWVBeGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVBeGVzW2ldLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRlc3QgZWRnZXMKCgogICAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgZWRnZQogICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUVkZ2VzW2UwXSwgd29ybGRFZGdlMCk7CgogICAgICAgIGZvciAobGV0IGUxID0gMDsgZTEgIT09IGh1bGxCLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgZTErKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMgogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlRWRnZXNbZTFdLCB3b3JsZEVkZ2UxKTsKICAgICAgICAgIHdvcmxkRWRnZTAuY3Jvc3Mod29ybGRFZGdlMSwgQ3Jvc3MpOwoKICAgICAgICAgIGlmICghQ3Jvc3MuYWxtb3N0WmVybygpKSB7CiAgICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBjb25zdCBkaXN0ID0gaHVsbEEudGVzdFNlcEF4aXMoQ3Jvc3MsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgICAgaWYgKGRpc3QgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHsKICAgICAgICAgICAgICBkbWluID0gZGlzdDsKICAgICAgICAgICAgICB0YXJnZXQuY29weShDcm9zcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpOwoKICAgICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkgewogICAgICAgIHRhcmdldC5uZWdhdGUodGFyZ2V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFRlc3Qgc2VwYXJhdGluZyBheGlzIGFnYWluc3QgdHdvIGh1bGxzLiBCb3RoIGh1bGxzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgYXhpcyBhbmQgdGhlIG92ZXJsYXAgc2l6ZSBpcyByZXR1cm5lZCBpZiB0aGVyZSBpcyBvbmUuCiAgICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi4KICAgICAqLwoKCiAgICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgQ29udmV4UG9seWhlZHJvbi5wcm9qZWN0KGh1bGxBLCBheGlzLCBwb3NBLCBxdWF0QSwgbWF4bWluQSk7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpOwogICAgICBjb25zdCBtYXhBID0gbWF4bWluQVswXTsKICAgICAgY29uc3QgbWluQSA9IG1heG1pbkFbMV07CiAgICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdOwogICAgICBjb25zdCBtaW5CID0gbWF4bWluQlsxXTsKCiAgICAgIGlmIChtYXhBIDwgbWluQiB8fCBtYXhCIDwgbWluQSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gU2VwYXJhdGVkCiAgICAgIH0KCiAgICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7CiAgICAgIGNvbnN0IGQxID0gbWF4QiAtIG1pbkE7CiAgICAgIGNvbnN0IGRlcHRoID0gZDAgPCBkMSA/IGQwIDogZDE7CiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWFiYm1pbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29tcHV0ZUxvY2FsQUFCQihhYWJibWluLCBhYWJibWF4KTsKICAgICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDsKICAgICAgY29uc3QgeSA9IGFhYmJtYXgueSAtIGFhYmJtaW4ueTsKICAgICAgY29uc3QgeiA9IGFhYmJtYXgueiAtIGFhYmJtaW4uejsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHggKiAyICogeCArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueiA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIGZhY2VfaSBJbmRleCBvZiB0aGUgZmFjZQogICAgICovCgoKICAgIGdldFBsYW5lQ29uc3RhbnRPZkZhY2UoZmFjZV9pKSB7CiAgICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07CiAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ZhY2VfaV07CiAgICAgIGNvbnN0IHYgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCBjID0gLW4uZG90KHYpOwogICAgICByZXR1cm4gYzsKICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgYWdhaW5zdCBhIGh1bGwuCiAgICAgKiBAcGFyYW0gd29ybGRWZXJ0c0IxIEFuIGFycmF5IG9mIFZlYzMgd2l0aCB2ZXJ0aWNlcyBpbiB0aGUgd29ybGQgZnJhbWUuCiAgICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZwogICAgICogQHBhcmFtIEFycmF5IHJlc3VsdCBBcnJheSB0byBzdG9yZSByZXN1bHRpbmcgY29udGFjdCBwb2ludHMgaW4uIFdpbGwgYmUgb2JqZWN0cyB3aXRoIHByb3BlcnRpZXM6IHBvaW50LCBkZXB0aCwgbm9ybWFsLiBUaGVzZSBhcmUgcmVwcmVzZW50ZWQgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgZmFjZUFOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkUGxhbmVBbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRBMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwogICAgICBjb25zdCB3b3JsZFZlcnRzQjIgPSBbXTsKICAgICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxOwogICAgICBjb25zdCBwVnR4T3V0ID0gd29ybGRWZXJ0c0IyOwogICAgICBsZXQgY2xvc2VzdEZhY2VBID0gLTE7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXMKCiAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHsKICAgICAgICBmYWNlQU5vcm1hbFdTLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MsIGZhY2VBTm9ybWFsV1MpOwogICAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQSA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY2xvc2VzdEZhY2VBIDwgMCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXMKCgogICAgICBjb25zdCBwb2x5QSA9IGh1bGxBLmZhY2VzW2Nsb3Nlc3RGYWNlQV07CiAgICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBodWxsQS5mYWNlc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKAogICAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovCiAgICAgICAgICBwb2x5QS5pbmRleE9mKGh1bGxBLmZhY2VzW2ldW2pdKSAhPT0gLTEgJiYKICAgICAgICAgIC8qIE5vdCB0aGUgb25lIHdlIGFyZSBsb29raW5nIGZvciBjb25uZWN0aW9ucyBmcm9tICovCiAgICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiYKICAgICAgICAgIC8qIE5vdCBhbHJlYWR5IGFkZGVkICovCiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5pbmRleE9mKGkpID09PSAtMSkgewogICAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSwKICAgICAgLy8gdGhhdCBhcmUgYWRqYWNlbnQgdG8gdGhlIHdpdG5lc3MgZmFjZQoKCiAgICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHsKICAgICAgICBjb25zdCBhID0gaHVsbEEudmVydGljZXNbcG9seUFbaV1dOwogICAgICAgIGNvbnN0IGIgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVsoaSArIDEpICUgbnVtVmVydGljZXNBXV07CiAgICAgICAgYS52c3ViKGIsIGVkZ2UwKTsKICAgICAgICBXb3JsZEVkZ2UwLmNvcHkoZWRnZTApOwogICAgICAgIHF1YXRBLnZtdWx0KFdvcmxkRWRnZTAsIFdvcmxkRWRnZTApOwogICAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICB3b3JsZFBsYW5lQW5vcm1hbDEuY29weSh0aGlzLmZhY2VOb3JtYWxzW2Nsb3Nlc3RGYWNlQV0pOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpOwogICAgICAgIFdvcmxkRWRnZTAuY3Jvc3Mod29ybGRQbGFuZUFub3JtYWwxLCBwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgcGxhbmVOb3JtYWxXUzEubmVnYXRlKHBsYW5lTm9ybWFsV1MxKTsKICAgICAgICB3b3JsZEExLmNvcHkoYSk7CiAgICAgICAgcXVhdEEudm11bHQod29ybGRBMSwgd29ybGRBMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldOwogICAgICAgIGxvY2FsUGxhbmVOb3JtYWwuY29weSh0aGlzLmZhY2VOb3JtYWxzW290aGVyRmFjZV0pOwogICAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShvdGhlckZhY2UpOwogICAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgICBxdWF0QS52bXVsdChwbGFuZU5vcm1hbFdTLCBwbGFuZU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsgLy8gQ2xpcCBmYWNlIGFnYWluc3Qgb3VyIGNvbnN0cnVjdGVkIHBsYW5lCgogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0UGxhbmUocFZ0eEluLCBwVnR4T3V0LCBwbGFuZU5vcm1hbFdTLCBwbGFuZUVxV1MpOyAvLyBUaHJvdyBhd2F5IGFsbCBjbGlwcGVkIHBvaW50cywgYnV0IHNhdmUgdGhlIHJlbWFpbmluZyB1bnRpbCBuZXh0IGNsaXAKCiAgICAgICAgd2hpbGUgKHBWdHhJbi5sZW5ndGgpIHsKICAgICAgICAgIHBWdHhJbi5zaGlmdCgpOwogICAgICAgIH0KCiAgICAgICAgd2hpbGUgKHBWdHhPdXQubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4ucHVzaChwVnR4T3V0LnNoaWZ0KCkpOwogICAgICAgIH0KICAgICAgfSAvLyBvbmx5IGtlZXAgY29udGFjdCBwb2ludHMgdGhhdCBhcmUgYmVoaW5kIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgY29uc3QgbG9jYWxQbGFuZUVxID0gdGhpcy5nZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGNsb3Nlc3RGYWNlQSk7CiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgIGNvbnN0IHBsYW5lRXFXUyA9IGxvY2FsUGxhbmVFcSAtIHBsYW5lTm9ybWFsV1MuZG90KHBvc0EpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwVnR4SW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgZGVwdGggPSBwbGFuZU5vcm1hbFdTLmRvdChwVnR4SW5baV0pICsgcGxhbmVFcVdTOyAvLyA/Pz8KCiAgICAgICAgaWYgKGRlcHRoIDw9IG1pbkRpc3QpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBjbGFtcGVkOiBkZXB0aD0ke2RlcHRofSB0byBtaW5EaXN0PSR7bWluRGlzdH1gKTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0YXJnZXQudmFkZCh2ZXJ0c1tpXSwgdGFyZ2V0KTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zZm9ybSBhbGwgbG9jYWwgcG9pbnRzLiBXaWxsIGNoYW5nZSB0aGUgLnZlcnRpY2VzCiAgICAgKi8KCgogICAgdHJhbnNmb3JtQWxsUG9pbnRzKG9mZnNldCwgcXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb24KCiAgICAgIGlmIChxdWF0KSB7CiAgICAgICAgLy8gUm90YXRlIHZlcnRpY2VzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfSAvLyBSb3RhdGUgZmFjZSBub3JtYWxzCgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmZhY2VOb3JtYWxzW2ldOwogICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXMKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudW5pcXVlRWRnZXNbaV07CiAgICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTsKICAgICAgICAgICAgICB9Ki8KCiAgICAgIH0gLy8gQXBwbHkgb2Zmc2V0CgoKICAgICAgaWYgKG9mZnNldCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgcCBpcyBpbnNpZGUgdGhlIHBvbHloZWRyYS4gTXVzdCBiZSBpbiBsb2NhbCBjb29yZHMuCiAgICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb24KICAgICAqIG9mIGFsbCB0aGUgdmVjdG9ycyBmcm9tIGl0IHRvIHRob3NlIG90aGVyIHBvaW50cyBhcmUgb24gbGVzcyB0aGFuIG9uZSBoYWxmIG9mIGEgc3BoZXJlIGFyb3VuZCBpdC4KICAgICAqIEBwYXJhbSBwIEEgcG9pbnQgZ2l2ZW4gaW4gbG9jYWwgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBwb2ludElzSW5zaWRlKHApIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuZ2V0QXZlcmFnZVBvaW50TG9jYWwocG9pbnRJbnNpZGUpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IG4gPSBub3JtYWxzW2ldOwogICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2UKICAgICAgICAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgICAgY29uc3QgdlRvUCA9IG5ldyBWZWMzKCk7CiAgICAgICAgcC52c3ViKHYsIHZUb1ApOwogICAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7CiAgICAgICAgY29uc3QgdlRvUG9pbnRJbnNpZGUgPSBuZXcgVmVjMygpOwogICAgICAgIHBvaW50SW5zaWRlLnZzdWIodiwgdlRvUG9pbnRJbnNpZGUpOwogICAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpOwoKICAgICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC4KICAgICAgICB9CiAgICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICAgIHJldHVybiAtMTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG1heCBhbmQgbWluIGRvdCBwcm9kdWN0IG9mIGEgY29udmV4IGh1bGwgYXQgcG9zaXRpb24gKHBvcyxxdWF0KSBwcm9qZWN0ZWQgb250byBhbiBheGlzLgogICAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi4KICAgICAqIEBwYXJhbSByZXN1bHQgcmVzdWx0WzBdIGFuZCByZXN1bHRbMV0gd2lsbCBiZSBzZXQgdG8gbWF4aW11bSBhbmQgbWluaW11bSwgcmVzcGVjdGl2ZWx5LgogICAgICovCgoKICAgIHN0YXRpYyBwcm9qZWN0KHNoYXBlLCBheGlzLCBwb3MsIHF1YXQsIHJlc3VsdCkgewogICAgICBjb25zdCBuID0gc2hhcGUudmVydGljZXMubGVuZ3RoOwogICAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpczsKICAgICAgbGV0IG1heCA9IDA7CiAgICAgIGxldCBtaW4gPSAwOwogICAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47CiAgICAgIGNvbnN0IHZzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGxvY2FsT3JpZ2luLnNldFplcm8oKTsgLy8gVHJhbnNmb3JtIHRoZSBheGlzIHRvIGxvY2FsCgogICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgYXhpcywgbG9jYWxBeGlzKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTsKICAgICAgY29uc3QgYWRkID0gbG9jYWxPcmlnaW4uZG90KGxvY2FsQXhpcyk7CiAgICAgIG1pbiA9IG1heCA9IHZzWzBdLmRvdChsb2NhbEF4aXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuOyBpKyspIHsKICAgICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTsKCiAgICAgICAgaWYgKHZhbCA+IG1heCkgewogICAgICAgICAgbWF4ID0gdmFsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbCA8IG1pbikgewogICAgICAgICAgbWluID0gdmFsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbWluIC09IGFkZDsKICAgICAgbWF4IC09IGFkZDsKCiAgICAgIGlmIChtaW4gPiBtYXgpIHsKICAgICAgICAvLyBJbmNvbnNpc3RlbnQgLSBzd2FwCiAgICAgICAgY29uc3QgdGVtcCA9IG1pbjsKICAgICAgICBtaW4gPSBtYXg7CiAgICAgICAgbWF4ID0gdGVtcDsKICAgICAgfSAvLyBPdXRwdXQKCgogICAgICByZXN1bHRbMF0gPSBtYXg7CiAgICAgIHJlc3VsdFsxXSA9IG1pbjsKICAgIH0KCiAgfQogIGNvbnN0IG1heG1pbkEgPSBbXTsKICBjb25zdCBtYXhtaW5CID0gW107CiAgbmV3IFZlYzMoKTsKICBjb25zdCBwcm9qZWN0X2xvY2FsQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEEgM2QgYm94IHNoYXBlLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNpemUgPSAxCiAgICogICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gbmV3IENBTk5PTi5WZWMzKHNpemUsIHNpemUsIHNpemUpCiAgICogICAgIGNvbnN0IGJveFNoYXBlID0gbmV3IENBTk5PTi5Cb3goaGFsZkV4dGVudHMpCiAgICogICAgIGNvbnN0IGJveEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogYm94U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShib3hCb2R5KQogICAqLwogIGNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogVGhlIGhhbGYgZXh0ZW50cyBvZiB0aGUgYm94LgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIGJ5IHRoZSBjb250YWN0IGdlbmVyYXRvciB0byBtYWtlIGNvbnRhY3RzIHdpdGggb3RoZXIgY29udmV4IHBvbHloZWRyYSBmb3IgZXhhbXBsZS4KICAgICAqLwogICAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkJPWAogICAgICB9KTsKICAgICAgdGhpcy5oYWxmRXh0ZW50cyA9IGhhbGZFeHRlbnRzOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7CiAgICAgIHRoaXMudXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgbG9jYWwgY29udmV4IHBvbHloZWRyb24gcmVwcmVzZW50YXRpb24gdXNlZCBmb3Igc29tZSBjb2xsaXNpb25zLgogICAgICovCgoKICAgIHVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbigpIHsKICAgICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7CiAgICAgIGNvbnN0IHN5ID0gdGhpcy5oYWxmRXh0ZW50cy55OwogICAgICBjb25zdCBzeiA9IHRoaXMuaGFsZkV4dGVudHMuejsKICAgICAgY29uc3QgViA9IFZlYzM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW25ldyBWKC1zeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgLXN5LCBzeiksIG5ldyBWKHN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIHN5LCBzeiksIG5ldyBWKC1zeCwgc3ksIHN6KV07CiAgICAgIGNvbnN0IGZhY2VzID0gW1szLCAyLCAxLCAwXSwgLy8gLXoKICAgICAgWzQsIDUsIDYsIDddLCAvLyAregogICAgICBbNSwgNCwgMCwgMV0sIC8vIC15CiAgICAgIFsyLCAzLCA3LCA2XSwgLy8gK3kKICAgICAgWzAsIDQsIDcsIDNdLCAvLyAteAogICAgICBbMSwgMiwgNiwgNV0gLy8gK3gKICAgICAgXTsKICAgICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTsKICAgICAgY29uc3QgaCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKHsKICAgICAgICB2ZXJ0aWNlcywKICAgICAgICBmYWNlcywKICAgICAgICBheGVzCiAgICAgIH0pOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7CiAgICAgIGgubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgdGhlIGluZXJ0aWEgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKHRoaXMuaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkgewogICAgICBjb25zdCBlID0gaGFsZkV4dGVudHM7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC56ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS54ICogMiAqIGUueCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYm94IDYgc2lkZSBub3JtYWxzCiAgICAgKiBAcGFyYW0gc2l4VGFyZ2V0VmVjdG9ycyBBbiBhcnJheSBvZiA2IHZlY3RvcnMsIHRvIHN0b3JlIHRoZSByZXN1bHRpbmcgc2lkZSBub3JtYWxzIGluLgogICAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuCiAgICAgKi8KCgogICAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkgewogICAgICBjb25zdCBzaWRlcyA9IHNpeFRhcmdldFZlY3RvcnM7CiAgICAgIGNvbnN0IGV4ID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApOwogICAgICBzaWRlc1sxXS5zZXQoMCwgZXgueSwgMCk7CiAgICAgIHNpZGVzWzJdLnNldCgwLCAwLCBleC56KTsKICAgICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTsKICAgICAgc2lkZXNbNF0uc2V0KDAsIC1leC55LCAwKTsKICAgICAgc2lkZXNbNV0uc2V0KDAsIDAsIC1leC56KTsKCiAgICAgIGlmIChxdWF0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHF1YXQudm11bHQoc2lkZXNbaV0sIHNpZGVzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzaWRlczsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gOC4wICogdGhpcy5oYWxmRXh0ZW50cy54ICogdGhpcy5oYWxmRXh0ZW50cy55ICogdGhpcy5oYWxmRXh0ZW50cy56OwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cwogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdGhpcy5oYWxmRXh0ZW50cy5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogZm9yRWFjaFdvcmxkQ29ybmVyCiAgICAgKi8KCgogICAgZm9yRWFjaFdvcmxkQ29ybmVyKHBvcywgcXVhdCwgY2FsbGJhY2spIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSBbW2UueCwgZS55LCBlLnpdLCBbLWUueCwgZS55LCBlLnpdLCBbLWUueCwgLWUueSwgZS56XSwgWy1lLngsIC1lLnksIC1lLnpdLCBbZS54LCAtZS55LCAtZS56XSwgW2UueCwgZS55LCAtZS56XSwgWy1lLngsIGUueSwgLWUuel0sIFtlLngsIC1lLnksIGUuel1dOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3JuZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgd29ybGRDb3JuZXJUZW1wUG9zLnNldChjb3JuZXJzW2ldWzBdLCBjb3JuZXJzW2ldWzFdLCBjb3JuZXJzW2ldWzJdKTsKICAgICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBwb3MudmFkZCh3b3JsZENvcm5lclRlbXBQb3MsIHdvcmxkQ29ybmVyVGVtcFBvcyk7CiAgICAgICAgY2FsbGJhY2sod29ybGRDb3JuZXJUZW1wUG9zLngsIHdvcmxkQ29ybmVyVGVtcFBvcy55LCB3b3JsZENvcm5lclRlbXBQb3Mueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMF0uc2V0KGUueCwgZS55LCBlLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMl0uc2V0KC1lLngsIC1lLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbM10uc2V0KC1lLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzVdLnNldChlLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNl0uc2V0KC1lLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTsKICAgICAgY29uc3Qgd2MgPSB3b3JsZENvcm5lcnNUZW1wWzBdOwogICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgIG1heC5jb3B5KHdjKTsKICAgICAgbWluLmNvcHkod2MpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA4OyBpKyspIHsKICAgICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07CiAgICAgICAgcXVhdC52bXVsdCh3Yywgd2MpOwogICAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgICAgY29uc3QgeCA9IHdjLng7CiAgICAgICAgY29uc3QgeSA9IHdjLnk7CiAgICAgICAgY29uc3QgeiA9IHdjLno7CgogICAgICAgIGlmICh4ID4gbWF4LngpIHsKICAgICAgICAgIG1heC54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5ID4gbWF4LnkpIHsKICAgICAgICAgIG1heC55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6ID4gbWF4LnopIHsKICAgICAgICAgIG1heC56ID0gejsKICAgICAgICB9CgogICAgICAgIGlmICh4IDwgbWluLngpIHsKICAgICAgICAgIG1pbi54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5IDwgbWluLnkpIHsKICAgICAgICAgIG1pbi55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6IDwgbWluLnopIHsKICAgICAgICAgIG1pbi56ID0gejsKICAgICAgICB9CiAgICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXgKICAgICAgLy8gbWluLnNldChJbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eSk7CiAgICAgIC8vIG1heC5zZXQoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpOwogICAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7CiAgICAgIC8vICAgICBpZih4ID4gbWF4LngpewogICAgICAvLyAgICAgICAgIG1heC54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPiBtYXgueSl7CiAgICAgIC8vICAgICAgICAgbWF4LnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA+IG1heC56KXsKICAgICAgLy8gICAgICAgICBtYXgueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih4IDwgbWluLngpewogICAgICAvLyAgICAgICAgIG1pbi54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPCBtaW4ueSl7CiAgICAgIC8vICAgICAgICAgbWluLnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA8IG1pbi56KXsKICAgICAgLy8gICAgICAgICBtaW4ueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vIH0pOwoKICAgIH0KCiAgfQogIGNvbnN0IHdvcmxkQ29ybmVyVGVtcFBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTsKCiAgLyoqCiAgICogQk9EWV9UWVBFUwogICAqLwogIGNvbnN0IEJPRFlfVFlQRVMgPSB7CiAgICAvKiogRFlOQU1JQyAqLwogICAgRFlOQU1JQzogMSwKCiAgICAvKiogU1RBVElDICovCiAgICBTVEFUSUM6IDIsCgogICAgLyoqIEtJTkVNQVRJQyAqLwogICAgS0lORU1BVElDOiA0CiAgfTsKICAvKioKICAgKiBCb2R5VHlwZQogICAqLwoKICAvKioKICAgKiBCT0RZX1NMRUVQX1NUQVRFUwogICAqLwogIGNvbnN0IEJPRFlfU0xFRVBfU1RBVEVTID0gewogICAgLyoqIEFXQUtFICovCiAgICBBV0FLRTogMCwKCiAgICAvKiogU0xFRVBZICovCiAgICBTTEVFUFk6IDEsCgogICAgLyoqIFNMRUVQSU5HICovCiAgICBTTEVFUElORzogMgogIH07CiAgLyoqCiAgICogQm9keVNsZWVwU3RhdGUKICAgKi8KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3IgYWxsIGJvZHkgdHlwZXMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc2hhcGUgPSBuZXcgQ0FOTk9OLlNwaGVyZSgxKQogICAqICAgICBjb25zdCBib2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsKICAgKiAgICAgICBtYXNzOiAxLAogICAqICAgICAgIHNoYXBlLAogICAqICAgICB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHkpCiAgICovCiAgY2xhc3MgQm9keSBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciB0d28gYm9kaWVzIGNvbGxpZGUuIFRoaXMgZXZlbnQgaXMgZGlzcGF0Y2hlZCBvbiBlYWNoCiAgICAgKiBvZiB0aGUgdHdvIGJvZGllcyBpbnZvbHZlZCBpbiB0aGUgY29sbGlzaW9uLgogICAgICogQGV2ZW50IGNvbGxpZGUKICAgICAqIEBwYXJhbSBib2R5IFRoZSBib2R5IHRoYXQgd2FzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAcGFyYW0gY29udGFjdCBUaGUgZGV0YWlscyBvZiB0aGUgY29sbGlzaW9uLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGR5bmFtaWMgYm9keSBpcyBmdWxseSBzaW11bGF0ZWQuIENhbiBiZSBtb3ZlZCBtYW51YWxseSBieSB0aGUgdXNlciwgYnV0IG5vcm1hbGx5IHRoZXkgbW92ZSBhY2NvcmRpbmcgdG8gZm9yY2VzLiBBIGR5bmFtaWMgYm9keSBjYW4gY29sbGlkZSB3aXRoIGFsbCBib2R5IHR5cGVzLiBBIGR5bmFtaWMgYm9keSBhbHdheXMgaGFzIGZpbml0ZSwgbm9uLXplcm8gbWFzcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBraW5lbWF0aWMgYm9keSBtb3ZlcyB1bmRlciBzaW11bGF0aW9uIGFjY29yZGluZyB0byBpdHMgdmVsb2NpdHkuIFRoZXkgZG8gbm90IHJlc3BvbmQgdG8gZm9yY2VzLiBUaGV5IGNhbiBiZSBtb3ZlZCBtYW51YWxseSwgYnV0IG5vcm1hbGx5IGEga2luZW1hdGljIGJvZHkgaXMgbW92ZWQgYnkgc2V0dGluZyBpdHMgdmVsb2NpdHkuIEEga2luZW1hdGljIGJvZHkgYmVoYXZlcyBhcyBpZiBpdCBoYXMgaW5maW5pdGUgbWFzcy4gS2luZW1hdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBV0FLRQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUFkKICAgICAqLwoKICAgIC8qKgogICAgICogU0xFRVBJTkcKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIHNsZWVwaW5nIGJvZHkgaGFzIHdva2VuIHVwLgogICAgICogQGV2ZW50IHdha2V1cAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZ29uZSBpbiB0byB0aGUgc2xlZXB5IHN0YXRlLgogICAgICogQGV2ZW50IHNsZWVweQogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZmFsbGVuIGFzbGVlcC4KICAgICAqIEBldmVudCBzbGVlcAogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaWQgPSBCb2R5LmlkQ291bnRlcisrOwogICAgICB0aGlzLmluZGV4ID0gLTE7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnZsYW1iZGEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPT09ICdudW1iZXInID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA6IDE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgPT09ICdudW1iZXInID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrIDogLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbml0UG9zaXRpb24gPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICAgIHRoaXMuaW5pdFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMudmVsb2NpdHkpIHsKICAgICAgICB0aGlzLnZlbG9jaXR5LmNvcHkob3B0aW9ucy52ZWxvY2l0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5mb3JjZSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG1hc3MgPSB0eXBlb2Ygb3B0aW9ucy5tYXNzID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubWFzcyA6IDA7CiAgICAgIHRoaXMubWFzcyA9IG1hc3M7CiAgICAgIHRoaXMuaW52TWFzcyA9IG1hc3MgPiAwID8gMS4wIC8gbWFzcyA6IDA7CiAgICAgIHRoaXMubWF0ZXJpYWwgPSBvcHRpb25zLm1hdGVyaWFsIHx8IG51bGw7CiAgICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHR5cGVvZiBvcHRpb25zLmxpbmVhckRhbXBpbmcgPT09ICdudW1iZXInID8gb3B0aW9ucy5saW5lYXJEYW1waW5nIDogMC4wMTsKICAgICAgdGhpcy50eXBlID0gbWFzcyA8PSAwLjAgPyBCb2R5LlNUQVRJQyA6IEJvZHkuRFlOQU1JQzsKCiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09PSB0eXBlb2YgQm9keS5TVEFUSUMpIHsKICAgICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGU7CiAgICAgIH0KCiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9IHR5cGVvZiBvcHRpb25zLmFsbG93U2xlZXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbGxvd1NsZWVwIDogdHJ1ZTsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTsKICAgICAgdGhpcy5zbGVlcFNwZWVkTGltaXQgPSB0eXBlb2Ygb3B0aW9ucy5zbGVlcFNwZWVkTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFNwZWVkTGltaXQgOiAwLjE7CiAgICAgIHRoaXMuc2xlZXBUaW1lTGltaXQgPSB0eXBlb2Ygb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwVGltZUxpbWl0IDogMTsKICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IDA7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgICB0aGlzLnRvcnF1ZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMuaW5pdFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogICAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7CiAgICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLmluaXRRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KSB7CiAgICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY29weShvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdEFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuc2hhcGVzID0gW107CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gW107CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMgPSBbXTsKICAgICAgdGhpcy5pbmVydGlhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQgPSBuZXcgTWF0MygpOwogICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IDA7CiAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZSA9IG5ldyBNYXQzKCk7CiAgICAgIHRoaXMuZml4ZWRSb3RhdGlvbiA9IHR5cGVvZiBvcHRpb25zLmZpeGVkUm90YXRpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5maXhlZFJvdGF0aW9uIDogZmFsc2U7CiAgICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5hbmd1bGFyRGFtcGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ3VsYXJEYW1waW5nIDogMC4wMTsKICAgICAgdGhpcy5saW5lYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTsKCiAgICAgIGlmIChvcHRpb25zLmxpbmVhckZhY3RvcikgewogICAgICAgIHRoaXMubGluZWFyRmFjdG9yLmNvcHkob3B0aW9ucy5saW5lYXJGYWN0b3IpOwogICAgICB9CgogICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTsKCiAgICAgIGlmIChvcHRpb25zLmFuZ3VsYXJGYWN0b3IpIHsKICAgICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IuY29weShvcHRpb25zLmFuZ3VsYXJGYWN0b3IpOwogICAgICB9CgogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSAwOwogICAgICB0aGlzLndsYW1iZGEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmlzVHJpZ2dlciA9IEJvb2xlYW4ob3B0aW9ucy5pc1RyaWdnZXIpOwoKICAgICAgaWYgKG9wdGlvbnMuc2hhcGUpIHsKICAgICAgICB0aGlzLmFkZFNoYXBlKG9wdGlvbnMuc2hhcGUpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICB9CiAgICAvKioKICAgICAqIFdha2UgdGhlIGJvZHkgdXAuCiAgICAgKi8KCgogICAgd2FrZVVwKCkgewogICAgICBjb25zdCBwcmV2U3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuQVdBS0U7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwoKICAgICAgaWYgKHByZXZTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5Lndha2V1cEV2ZW50KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBGb3JjZSBib2R5IHNsZWVwCiAgICAgKi8KCgogICAgc2xlZXAoKSB7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuU0xFRVBJTkc7CiAgICAgIHRoaXMudmVsb2NpdHkuc2V0KDAsIDAsIDApOwogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5zZXQoMCwgMCwgMCk7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsZWQgZXZlcnkgdGltZXN0ZXAgdG8gdXBkYXRlIGludGVybmFsIHNsZWVwIHRpbWVyIGFuZCBjaGFuZ2Ugc2xlZXAgc3RhdGUgaWYgbmVlZGVkLgogICAgICogQHBhcmFtIHRpbWUgVGhlIHdvcmxkIHRpbWUgaW4gc2Vjb25kcwogICAgICovCgoKICAgIHNsZWVwVGljayh0aW1lKSB7CiAgICAgIGlmICh0aGlzLmFsbG93U2xlZXApIHsKICAgICAgICBjb25zdCBzbGVlcFN0YXRlID0gdGhpcy5zbGVlcFN0YXRlOwogICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZCA9IHRoaXMudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgdGhpcy5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpOwogICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkID0gdGhpcy5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuQVdBS0UgJiYgc3BlZWRTcXVhcmVkIDwgc3BlZWRMaW1pdFNxdWFyZWQpIHsKICAgICAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuU0xFRVBZOyAvLyBTbGVlcHkKCiAgICAgICAgICB0aGlzLnRpbWVMYXN0U2xlZXB5ID0gdGltZTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVweUV2ZW50KTsKICAgICAgICB9IGVsc2UgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBZICYmIHNwZWVkU3F1YXJlZCA+IHNwZWVkTGltaXRTcXVhcmVkKSB7CiAgICAgICAgICB0aGlzLndha2VVcCgpOyAvLyBXYWtlIHVwCiAgICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiB0aW1lIC0gdGhpcy50aW1lTGFzdFNsZWVweSA+IHRoaXMuc2xlZXBUaW1lTGltaXQpIHsKICAgICAgICAgIHRoaXMuc2xlZXAoKTsgLy8gU2xlZXBpbmcKCiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoQm9keS5zbGVlcEV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogSWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcsIGl0IHNob3VsZCBiZSBpbW1vdmFibGUgLyBoYXZlIGluZmluaXRlIG1hc3MgZHVyaW5nIHNvbHZlLiBXZSBzb2x2ZSBpdCBieSBoYXZpbmcgYSBzZXBhcmF0ZSAic29sdmUgbWFzcyIuCiAgICAgKi8KCgogICAgdXBkYXRlU29sdmVNYXNzUHJvcGVydGllcygpIHsKICAgICAgaWYgKHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB7CiAgICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlLnNldFplcm8oKTsKICAgICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlLnNldFplcm8oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IHRoaXMuaW52TWFzczsKICAgICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYSk7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYVdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgd29ybGQgcG9pbnQgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICBwb2ludFRvTG9jYWxGcmFtZSh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHRoaXMucXVhdGVybmlvbi5jb25qdWdhdGUoKS52bXVsdChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQod29ybGRWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSBsb2NhbCBib2R5IHBvaW50IHRvIHdvcmxkIGZyYW1lLgogICAgICovCgoKICAgIHBvaW50VG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuCiAgICAgKi8KCgogICAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBzaGFwZSB0byB0aGUgYm9keSB3aXRoIGEgbG9jYWwgb2Zmc2V0IGFuZCBvcmllbnRhdGlvbi4KICAgICAqIEByZXR1cm4gVGhlIGJvZHkgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGFkZFNoYXBlKHNoYXBlLCBfb2Zmc2V0LCBfb3JpZW50YXRpb24pIHsKICAgICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKF9vZmZzZXQpIHsKICAgICAgICBvZmZzZXQuY29weShfb2Zmc2V0KTsKICAgICAgfQoKICAgICAgaWYgKF9vcmllbnRhdGlvbikgewogICAgICAgIG9yaWVudGF0aW9uLmNvcHkoX29yaWVudGF0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSk7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucy5wdXNoKG9yaWVudGF0aW9uKTsKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgc2hhcGUuYm9keSA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LgogICAgICogQHJldHVybiBUaGUgYm9keSBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlU2hhcGUoc2hhcGUpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNoYXBlcy5pbmRleE9mKHNoYXBlKTsKCiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICB0aGlzLnNoYXBlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHNoYXBlLmJvZHkgPSBudWxsOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLgogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoOwogICAgICBsZXQgcmFkaXVzID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tpXTsKICAgICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICAgIGNvbnN0IG9mZnNldCA9IHNoYXBlT2Zmc2V0c1tpXS5sZW5ndGgoKTsKICAgICAgICBjb25zdCByID0gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7CgogICAgICAgIGlmIChvZmZzZXQgKyByID4gcmFkaXVzKSB7CiAgICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IHJhZGl1czsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgLmFhYmIKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IHNoYXBlT3JpZW50YXRpb25zID0gdGhpcy5zaGFwZU9yaWVudGF0aW9uczsKICAgICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7CiAgICAgIGNvbnN0IG9mZnNldCA9IHRtcFZlYzsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSB0bXBRdWF0OwogICAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgYWFiYiA9IHRoaXMuYWFiYjsKICAgICAgY29uc3Qgc2hhcGVBQUJCID0gdXBkYXRlQUFCQl9zaGFwZUFBQkI7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvbgoKICAgICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7CiAgICAgICAgb2Zmc2V0LnZhZGQodGhpcy5wb3NpdGlvbiwgb2Zmc2V0KTsgLy8gR2V0IHNoYXBlIHdvcmxkIHF1YXRlcm5pb24KCiAgICAgICAgYm9keVF1YXQubXVsdChzaGFwZU9yaWVudGF0aW9uc1tpXSwgb3JpZW50YXRpb24pOyAvLyBHZXQgc2hhcGUgQUFCQgoKICAgICAgICBzaGFwZS5jYWxjdWxhdGVXb3JsZEFBQkIob2Zmc2V0LCBvcmllbnRhdGlvbiwgc2hhcGVBQUJCLmxvd2VyQm91bmQsIHNoYXBlQUFCQi51cHBlckJvdW5kKTsKCiAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgIGFhYmIuY29weShzaGFwZUFBQkIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhYWJiLmV4dGVuZChzaGFwZUFBQkIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgCiAgICAgKi8KCgogICAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmludkluZXJ0aWE7CgogICAgICBpZiAoSS54ID09PSBJLnkgJiYgSS55ID09PSBJLnogJiYgIWZvcmNlKSA7IGVsc2UgewogICAgICAgIGNvbnN0IG0xID0gdWl3X20xOwogICAgICAgIGNvbnN0IG0yID0gdWl3X20yOwogICAgICAgIG0xLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24odGhpcy5xdWF0ZXJuaW9uKTsKICAgICAgICBtMS50cmFuc3Bvc2UobTIpOwogICAgICAgIG0xLnNjYWxlKEksIG0xKTsKICAgICAgICBtMS5tbXVsdChtMiwgdGhpcy5pbnZJbmVydGlhV29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGZvcmNlIHRvIGEgcG9pbnQgb2YgdGhlIGJvZHkuIFRoaXMgY291bGQgZm9yIGV4YW1wbGUgYmUgYSBwb2ludCBvbiB0aGUgQm9keSBzdXJmYWNlLgogICAgICogQXBwbHlpbmcgZm9yY2UgdGhpcyB3YXkgd2lsbCBhZGQgdG8gQm9keS5mb3JjZSBhbmQgQm9keS50b3JxdWUuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGFtb3VudCBvZiBmb3JjZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlGb3JjZShmb3JjZSwgcmVsYXRpdmVQb2ludCkgewogICAgICBpZiAocmVsYXRpdmVQb2ludCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIE5lZWRlZD8KICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2UKCgogICAgICBjb25zdCByb3RGb3JjZSA9IEJvZHlfYXBwbHlGb3JjZV9yb3RGb3JjZTsKICAgICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlCgogICAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKICAgICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxGb3JjZShsb2NhbEZvcmNlLCBsb2NhbFBvaW50KSB7CiAgICAgIGlmIChsb2NhbFBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICBsb2NhbFBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB3b3JsZEZvcmNlID0gQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZTsKICAgICAgY29uc3QgcmVsYXRpdmVQb2ludFdvcmxkID0gQm9keV9hcHBseUxvY2FsRm9yY2VfcmVsYXRpdmVQb2ludFdvcmxkOyAvLyBUcmFuc2Zvcm0gdGhlIGZvcmNlIHZlY3RvciB0byB3b3JsZCBzcGFjZQoKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxGb3JjZSwgd29ybGRGb3JjZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlGb3JjZSh3b3JsZEZvcmNlLCByZWxhdGl2ZVBvaW50V29ybGQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0b3JxdWUgdG8gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gdG9ycXVlIFRoZSBhbW91bnQgb2YgdG9ycXVlIHRvIGFkZC4KICAgICAqLwoKCiAgICBhcHBseVRvcnF1ZSh0b3JxdWUpIHsKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKCiAgICAgIHRoaXMudG9ycXVlLnZhZGQodG9ycXVlLCB0aGlzLnRvcnF1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGltcHVsc2UgdG8gYSBwb2ludCBvZiB0aGUgYm9keS4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBiZSBhIHBvaW50IG9uIHRoZSBCb2R5IHN1cmZhY2UuCiAgICAgKiBBbiBpbXB1bHNlIGlzIGEgZm9yY2UgYWRkZWQgdG8gYSBib2R5IGR1cmluZyBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIChpbXB1bHNlID0gZm9yY2UgKiB0aW1lKS4KICAgICAqIEltcHVsc2VzIHdpbGwgYmUgYWRkZWQgdG8gQm9keS52ZWxvY2l0eSBhbmQgQm9keS5hbmd1bGFyVmVsb2NpdHkuCiAgICAgKiBAcGFyYW0gaW1wdWxzZSBUaGUgYW1vdW50IG9mIGltcHVsc2UgdG8gYWRkLgogICAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxhdGl2ZVBvaW50KSB7CiAgICAgIGlmIChyZWxhdGl2ZVBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHBvaW50IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBib2R5IGNlbnRlcgoKCiAgICAgIGNvbnN0IHIgPSByZWxhdGl2ZVBvaW50OyAvLyBDb21wdXRlIHByb2R1Y2VkIGNlbnRyYWwgaW1wdWxzZSB2ZWxvY2l0eQoKICAgICAgY29uc3QgdmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3ZlbG87CiAgICAgIHZlbG8uY29weShpbXB1bHNlKTsKICAgICAgdmVsby5zY2FsZSh0aGlzLmludk1hc3MsIHZlbG8pOyAvLyBBZGQgbGluZWFyIGltcHVsc2UKCiAgICAgIHRoaXMudmVsb2NpdHkudmFkZCh2ZWxvLCB0aGlzLnZlbG9jaXR5KTsgLy8gQ29tcHV0ZSBwcm9kdWNlZCByb3RhdGlvbmFsIGltcHVsc2UgdmVsb2NpdHkKCiAgICAgIGNvbnN0IHJvdFZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvOwogICAgICByLmNyb3NzKGltcHVsc2UsIHJvdFZlbG8pOwogICAgICAvKgogICAgICAgcm90VmVsby54ICo9IHRoaXMuaW52SW5lcnRpYS54OwogICAgICAgcm90VmVsby55ICo9IHRoaXMuaW52SW5lcnRpYS55OwogICAgICAgcm90VmVsby56ICo9IHRoaXMuaW52SW5lcnRpYS56OwogICAgICAgKi8KCiAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkLnZtdWx0KHJvdFZlbG8sIHJvdFZlbG8pOyAvLyBBZGQgcm90YXRpb25hbCBJbXB1bHNlCgogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS52YWRkKHJvdFZlbG8sIHRoaXMuYW5ndWxhclZlbG9jaXR5KTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgbG9jYWxseS1kZWZpbmVkIGltcHVsc2UgdG8gYSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keS4KICAgICAqIEBwYXJhbSBmb3JjZSBUaGUgZm9yY2UgdmVjdG9yIHRvIGFwcGx5LCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIGJvZHkgZnJhbWUuCiAgICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi4KICAgICAqLwoKCiAgICBhcHBseUxvY2FsSW1wdWxzZShsb2NhbEltcHVsc2UsIGxvY2FsUG9pbnQpIHsKICAgICAgaWYgKGxvY2FsUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkSW1wdWxzZSA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEltcHVsc2UsIHdvcmxkSW1wdWxzZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlJbXB1bHNlKHdvcmxkSW1wdWxzZSwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogU2hvdWxkIGJlIGNhbGxlZCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBib2R5IHNoYXBlIG9yIG1hc3MuCiAgICAgKi8KCgogICAgdXBkYXRlTWFzc1Byb3BlcnRpZXMoKSB7CiAgICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50czsKICAgICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmluZXJ0aWE7CiAgICAgIGNvbnN0IGZpeGVkID0gdGhpcy5maXhlZFJvdGF0aW9uOyAvLyBBcHByb3hpbWF0ZSB3aXRoIEFBQkIgYm94CgogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpOwogICAgICBCb3guY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgdGhpcy5tYXNzLCBJKTsKICAgICAgdGhpcy5pbnZJbmVydGlhLnNldChJLnggPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueCA6IDAsIEkueSA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS55IDogMCwgSS56ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnogOiAwKTsKICAgICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIHdvcmxkUG9pbnQKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuCiAgICAgKi8KCgogICAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IHIgPSBuZXcgVmVjMygpOwogICAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcik7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7CiAgICAgIHRoaXMudmVsb2NpdHkudmFkZChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIE1vdmUgdGhlIGJvZHkgZm9yd2FyZCBpbiB0aW1lLgogICAgICogQHBhcmFtIGR0IFRpbWUgc3RlcAogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemUgU2V0IHRvIHRydWUgdG8gbm9ybWFsaXplIHRoZSBib2R5IHF1YXRlcm5pb24KICAgICAqIEBwYXJhbSBxdWF0Tm9ybWFsaXplRmFzdCBJZiB0aGUgcXVhdGVybmlvbiBzaG91bGQgYmUgbm9ybWFsaXplZCB1c2luZyAiZmFzdCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uCiAgICAgKi8KCgogICAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAvLyBTYXZlIHByZXZpb3VzIHBvc2l0aW9uCiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbi5jb3B5KHRoaXMucG9zaXRpb24pOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7CgogICAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTsKICAgICAgY29uc3QgYW5ndWxhclZlbG8gPSB0aGlzLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgY29uc3QgcG9zID0gdGhpcy5wb3NpdGlvbjsKICAgICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlOwogICAgICBjb25zdCB0b3JxdWUgPSB0aGlzLnRvcnF1ZTsKICAgICAgY29uc3QgcXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzczsKICAgICAgY29uc3QgaW52SW5lcnRpYSA9IHRoaXMuaW52SW5lcnRpYVdvcmxkOwogICAgICBjb25zdCBsaW5lYXJGYWN0b3IgPSB0aGlzLmxpbmVhckZhY3RvcjsKICAgICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDsKICAgICAgdmVsby54ICs9IGZvcmNlLnggKiBpTWR0ICogbGluZWFyRmFjdG9yLng7CiAgICAgIHZlbG8ueSArPSBmb3JjZS55ICogaU1kdCAqIGxpbmVhckZhY3Rvci55OwogICAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejsKICAgICAgY29uc3QgZSA9IGludkluZXJ0aWEuZWxlbWVudHM7CiAgICAgIGNvbnN0IGFuZ3VsYXJGYWN0b3IgPSB0aGlzLmFuZ3VsYXJGYWN0b3I7CiAgICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7CiAgICAgIGNvbnN0IHR5ID0gdG9ycXVlLnkgKiBhbmd1bGFyRmFjdG9yLnk7CiAgICAgIGNvbnN0IHR6ID0gdG9ycXVlLnogKiBhbmd1bGFyRmFjdG9yLno7CiAgICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTsKICAgICAgYW5ndWxhclZlbG8ueSArPSBkdCAqIChlWzNdICogdHggKyBlWzRdICogdHkgKyBlWzVdICogdHopOwogICAgICBhbmd1bGFyVmVsby56ICs9IGR0ICogKGVbNl0gKiB0eCArIGVbN10gKiB0eSArIGVbOF0gKiB0eik7IC8vIFVzZSBuZXcgdmVsb2NpdHkgIC0gbGVhcCBmcm9nCgogICAgICBwb3MueCArPSB2ZWxvLnggKiBkdDsKICAgICAgcG9zLnkgKz0gdmVsby55ICogZHQ7CiAgICAgIHBvcy56ICs9IHZlbG8ueiAqIGR0OwogICAgICBxdWF0LmludGVncmF0ZSh0aGlzLmFuZ3VsYXJWZWxvY2l0eSwgZHQsIHRoaXMuYW5ndWxhckZhY3RvciwgcXVhdCk7CgogICAgICBpZiAocXVhdE5vcm1hbGl6ZSkgewogICAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAgICAgcXVhdC5ub3JtYWxpemVGYXN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHF1YXQubm9ybWFsaXplKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7IC8vIFVwZGF0ZSB3b3JsZCBpbmVydGlhCgogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCgpOwogICAgfQoKICB9CiAgQm9keS5pZENvdW50ZXIgPSAwOwogIEJvZHkuQ09MTElERV9FVkVOVF9OQU1FID0gJ2NvbGxpZGUnOwogIEJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQzsKICBCb2R5LlNUQVRJQyA9IEJPRFlfVFlQRVMuU1RBVElDOwogIEJvZHkuS0lORU1BVElDID0gQk9EWV9UWVBFUy5LSU5FTUFUSUM7CiAgQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFOwogIEJvZHkuU0xFRVBZID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBZOwogIEJvZHkuU0xFRVBJTkcgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUElORzsKICBCb2R5Lndha2V1cEV2ZW50ID0gewogICAgdHlwZTogJ3dha2V1cCcKICB9OwogIEJvZHkuc2xlZXB5RXZlbnQgPSB7CiAgICB0eXBlOiAnc2xlZXB5JwogIH07CiAgQm9keS5zbGVlcEV2ZW50ID0gewogICAgdHlwZTogJ3NsZWVwJwogIH07CiAgY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBRdWF0ID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB1cGRhdGVBQUJCX3NoYXBlQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTsKICBjb25zdCB1aXdfbTIgPSBuZXcgTWF0MygpOwogIG5ldyBNYXQzKCk7CiAgY29uc3QgQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlJbXB1bHNlX3ZlbG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHMgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9ucwogICAqIEBhdXRob3Igc2NodGVwcGUKICAgKi8KICBjbGFzcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogVGhlIHdvcmxkIHRvIHNlYXJjaCBmb3IgY29sbGlzaW9ucyBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogSWYgc2V0IHRvIHRydWUsIHRoZSBicm9hZHBoYXNlIHVzZXMgYm91bmRpbmcgYm94ZXMgZm9yIGludGVyc2VjdGlvbiB0ZXN0cywgZWxzZSBpdCB1c2VzIGJvdW5kaW5nIHNwaGVyZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIGlmIHRoZSBvYmplY3RzIGluIHRoZSB3b3JsZCBtb3ZlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnVzZUJvdW5kaW5nQm94ZXMgPSBmYWxzZTsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkCiAgICAgKiBAcGFyYW0gd29ybGQgVGhlIHdvcmxkIHRvIHNlYXJjaCBpbgogICAgICogQHBhcmFtIHAxIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb2xsaXNpb25QYWlycyBub3QgaW1wbGVtZW50ZWQgZm9yIHRoaXMgQnJvYWRQaGFzZSBjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSBib2R5IHBhaXIgbmVlZHMgdG8gYmUgaW50ZXJzZWN0aW9uIHRlc3RlZCBhdCBhbGwuCiAgICAgKi8KCgogICAgbmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYm9keUEsIGJvZHlCKSB7CiAgICAgIC8vIENoZWNrIGNvbGxpc2lvbiBmaWx0ZXIgbWFza3MKICAgICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIENoZWNrIHR5cGVzCgoKICAgICAgaWYgKCgoYm9keUEudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5QS5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSAmJiAoKGJvZHlCLnR5cGUgJiBCb2R5LlNUQVRJQykgIT09IDAgfHwgYm9keUIuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykpIHsKICAgICAgICAvLyBCb3RoIGJvZGllcyBhcmUgc3RhdGljIG9yIHNsZWVwaW5nLiBTa2lwLgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyB2b2x1bWVzIG9mIHR3byBib2RpZXMgaW50ZXJzZWN0LgogICAgICovCgoKICAgIGludGVyc2VjdGlvblRlc3QoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBpZiAodGhpcy51c2VCb3VuZGluZ0JveGVzKSB7CiAgICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqIEBwYXJhbSBwYWlyczEgYm9keUEgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqIEBwYXJhbSBwYWlyczIgYm9keUIgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIHIpOwogICAgICBjb25zdCBib3VuZGluZ1JhZGl1c1N1bTIgPSAoYm9keUEuYm91bmRpbmdSYWRpdXMgKyBib2R5Qi5ib3VuZGluZ1JhZGl1cykgKiogMjsKICAgICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGlmIChib2R5QS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5QS51cGRhdGVBQUJCKCk7CiAgICAgIH0KCiAgICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5Qi51cGRhdGVBQUJCKCk7CiAgICAgIH0gLy8gQ2hlY2sgQUFCQiAvIEFBQkIKCgogICAgICBpZiAoYm9keUEuYWFiYi5vdmVybGFwcyhib2R5Qi5hYWJiKSkgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBkdXBsaWNhdGUgcGFpcnMgZnJvbSB0aGUgcGFpciBhcnJheXMuCiAgICAgKi8KCgogICAgbWFrZVBhaXJzVW5pcXVlKHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHQgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wOwogICAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxOwogICAgICBjb25zdCBwMiA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyOwogICAgICBjb25zdCBOID0gcGFpcnMxLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBwMVtpXSA9IHBhaXJzMVtpXTsKICAgICAgICBwMltpXSA9IHBhaXJzMltpXTsKICAgICAgfQoKICAgICAgcGFpcnMxLmxlbmd0aCA9IDA7CiAgICAgIHBhaXJzMi5sZW5ndGggPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGlkMSA9IHAxW2ldLmlkOwogICAgICAgIGNvbnN0IGlkMiA9IHAyW2ldLmlkOwogICAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGAke2lkMX0sJHtpZDJ9YCA6IGAke2lkMn0sJHtpZDF9YDsKICAgICAgICB0W2tleV0gPSBpOwogICAgICAgIHQua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0LmtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7CiAgICAgICAgY29uc3QgcGFpckluZGV4ID0gdFtrZXldOwogICAgICAgIHBhaXJzMS5wdXNoKHAxW3BhaXJJbmRleF0pOwogICAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pOwogICAgICAgIGRlbGV0ZSB0W2tleV07CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2Fzc2VzCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHt9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgb3ZlcmxhcC4KICAgICAqLwoKCiAgICBzdGF0aWMgYm91bmRpbmdTcGhlcmVDaGVjayhib2R5QSwgYm9keUIpIHsKICAgICAgY29uc3QgZGlzdCA9IG5ldyBWZWMzKCk7IC8vIGJzY19kaXN0OwoKICAgICAgYm9keUEucG9zaXRpb24udnN1Yihib2R5Qi5wb3NpdGlvbiwgZGlzdCk7CiAgICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdOwogICAgICBjb25zdCBzYiA9IGJvZHlCLnNoYXBlc1swXTsKICAgICAgcmV0dXJuIE1hdGgucG93KHNhLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2IuYm91bmRpbmdTcGhlcmVSYWRpdXMsIDIpID4gZGlzdC5sZW5ndGhTcXVhcmVkKCk7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIHRoZSBBQUJCLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpOwogICAgICByZXR1cm4gW107CiAgICB9CgogIH0gLy8gVGVtcCBvYmplY3RzCgogIGNvbnN0IEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfciA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgUXVhdGVybmlvbigpOwogIG5ldyBWZWMzKCk7CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCA9IHsKICAgIGtleXM6IFtdCiAgfTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMSA9IFtdOwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyID0gW107CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIE5haXZlIGJyb2FkcGhhc2UgaW1wbGVtZW50YXRpb24sIHVzZWQgaW4gbGFjayBvZiBiZXR0ZXIgb25lcy4KICAgKgogICAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV8KICAgKi8KICBjbGFzcyBOYWl2ZUJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgdGhlIGNvbGxpc2lvbiBwYWlycyBpbiB0aGUgcGh5c2ljcyB3b3JsZAogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwYWlyczEsIHBhaXJzMikgewogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IG4gPSBib2RpZXMubGVuZ3RoOwogICAgICBsZXQgYmk7CiAgICAgIGxldCBiajsgLy8gTmFpdmUgTl4yIGZ0dyEKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gaTsgaisrKSB7CiAgICAgICAgICBiaSA9IGJvZGllc1tpXTsKICAgICAgICAgIGJqID0gYm9kaWVzW2pdOwoKICAgICAgICAgIGlmICghdGhpcy5uZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihiaSwgYmopKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGVzdChiaSwgYmosIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGJvZGllcyBpbi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gd29ybGQuYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0gLy8gVWdseSBoYWNrIHVudGlsIEJvZHkgZ2V0cyBhYWJiCgoKICAgICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogIH0KCiAgLyoqCiAgICogU3RvcmFnZSBmb3IgUmF5IGNhc3RpbmcgZGF0YQogICAqLwogIGNsYXNzIFJheWNhc3RSZXN1bHQgewogICAgLyoqCiAgICAgKiByYXlGcm9tV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogcmF5VG9Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoaXROb3JtYWxXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoaXRQb2ludFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhhc0hpdAogICAgICovCgogICAgLyoqCiAgICAgKiBzaGFwZQogICAgICovCgogICAgLyoqCiAgICAgKiBib2R5CiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbmRleCBvZiB0aGUgaGl0IHRyaWFuZ2xlLCBpZiB0aGUgaGl0IHNoYXBlIHdhcyBhIHRyaW1lc2gKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzdGFuY2UgdG8gdGhlIGhpdC4gV2lsbCBiZSBzZXQgdG8gLTEgaWYgdGhlcmUgd2FzIG5vIGhpdAogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgcmF5IHNob3VsZCBzdG9wIHRyYXZlcnNpbmcgdGhlIGJvZGllcwogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFJlc2V0IGFsbCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLnJheVRvV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIGFib3J0CiAgICAgKi8KCgogICAgYWJvcnQoKSB7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICBzZXQocmF5RnJvbVdvcmxkLCByYXlUb1dvcmxkLCBoaXROb3JtYWxXb3JsZCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkLmNvcHkocmF5RnJvbVdvcmxkKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQuY29weShoaXROb3JtYWxXb3JsZCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZC5jb3B5KGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnNoYXBlID0gc2hhcGU7CiAgICAgIHRoaXMuYm9keSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKICAgIH0KCiAgfQoKICBsZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDsKCiAgLyoqCiAgICogUkFZX01PREVTCiAgICovCiAgY29uc3QgUkFZX01PREVTID0gewogICAgLyoqIENMT1NFU1QgKi8KICAgIENMT1NFU1Q6IDEsCgogICAgLyoqIEFOWSAqLwogICAgQU5ZOiAyLAoKICAgIC8qKiBBTEwgKi8KICAgIEFMTDogNAogIH07CiAgLyoqCiAgICogUmF5TW9kZQogICAqLwoKICBfU2hhcGUkdHlwZXMkU1BIRVJFID0gU2hhcGUudHlwZXMuU1BIRVJFOwogIF9TaGFwZSR0eXBlcyRQTEFORSA9IFNoYXBlLnR5cGVzLlBMQU5FOwogIF9TaGFwZSR0eXBlcyRCT1ggPSBTaGFwZS50eXBlcy5CT1g7CiAgX1NoYXBlJHR5cGVzJENZTElOREVSID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgX1NoYXBlJHR5cGVzJENPTlZFWFBPID0gU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTjsKICBfU2hhcGUkdHlwZXMkSEVJR0hURkkgPSBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRDsKICBfU2hhcGUkdHlwZXMkVFJJTUVTSCA9IFNoYXBlLnR5cGVzLlRSSU1FU0g7CgogIC8qKgogICAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLgogICAqLwogIGNsYXNzIFJheSB7CiAgICAvKioKICAgICAqIGZyb20KICAgICAqLwoKICAgIC8qKgogICAgICogdG8KICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBwcmVjaXNpb24gb2YgdGhlIHJheS4gVXNlZCB3aGVuIGNoZWNraW5nIHBhcmFsbGVsaXR5IGV0Yy4KICAgICAqIEBkZWZhdWx0IDAuMDAwMQogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gYGZhbHNlYCBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgUmF5IHRvIHRha2UgYGNvbGxpc2lvblJlc3BvbnNlYCBmbGFncyBpbnRvIGFjY291bnQgb24gYm9kaWVzIGFuZCBzaGFwZXMuCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHRoZSByYXkgc2tpcHMgYW55IGhpdHMgd2l0aCBub3JtYWwuZG90KHJheURpcmVjdGlvbikgPCAwLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uRmlsdGVyTWFzawogICAgICogQGRlZmF1bHQgLTEKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uRmlsdGVyR3JvdXAKICAgICAqIEBkZWZhdWx0IC0xCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbnRlcnNlY3Rpb24gbW9kZS4gU2hvdWxkIGJlIFJheS5BTlksIFJheS5BTEwgb3IgUmF5LkNMT1NFU1QuCiAgICAgKiBAZGVmYXVsdCBSQVkuQU5ZCiAgICAgKi8KCiAgICAvKioKICAgICAqIEN1cnJlbnQgcmVzdWx0IG9iamVjdC4KICAgICAqLwoKICAgIC8qKgogICAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGR1cmluZyBpbnRlcnNlY3RXb3JsZCgpIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VyLXByb3ZpZGVkIHJlc3VsdCBjYWxsYmFjay4gV2lsbCBiZSB1c2VkIGlmIG1vZGUgaXMgUmF5LkFMTC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ0xPU0VTVAogICAgICovCgogICAgLyoqCiAgICAgKiBBTlkKICAgICAqLwoKICAgIC8qKgogICAgICogQUxMCiAgICAgKi8KICAgIGdldCBbX1NoYXBlJHR5cGVzJFNQSEVSRV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkUExBTkVdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0UGxhbmU7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQk9YXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEJveDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRDWUxJTkRFUl0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQ09OVkVYUE9dKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJEhFSUdIVEZJXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJFRSSU1FU0hdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0VHJpbWVzaDsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bykgewogICAgICBpZiAoZnJvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZnJvbSA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0byA9PT0gdm9pZCAwKSB7CiAgICAgICAgdG8gPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLmZyb20gPSBmcm9tLmNsb25lKCk7CiAgICAgIHRoaXMudG8gPSB0by5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucHJlY2lzaW9uID0gMC4wMDAxOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0cnVlOwogICAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSBmYWxzZTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSAtMTsKICAgICAgdGhpcy5tb2RlID0gUmF5LkFOWTsKICAgICAgdGhpcy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwoKICAgICAgdGhpcy5jYWxsYmFjayA9IHJlc3VsdCA9PiB7fTsKICAgIH0KICAgIC8qKgogICAgICogRG8gaXRlcnNlY3Rpb24gYWdhaW5zdCBhbGwgYm9kaWVzIGluIHRoZSBnaXZlbiBXb3JsZC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgcmF5IGhpdCBhbnl0aGluZywgb3RoZXJ3aXNlIGZhbHNlLgogICAgICovCgoKICAgIGludGVyc2VjdFdvcmxkKHdvcmxkLCBvcHRpb25zKSB7CiAgICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCBSYXkuQU5ZOwogICAgICB0aGlzLnJlc3VsdCA9IG9wdGlvbnMucmVzdWx0IHx8IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9ICEhb3B0aW9ucy5za2lwQmFja2ZhY2VzOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA6IC0xOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jaGVja0NvbGxpc2lvblJlc3BvbnNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CgogICAgICBpZiAob3B0aW9ucy5mcm9tKSB7CiAgICAgICAgdGhpcy5mcm9tLmNvcHkob3B0aW9ucy5mcm9tKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMudG8pIHsKICAgICAgICB0aGlzLnRvLmNvcHkob3B0aW9ucy50byk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrIHx8ICgoKSA9PiB7fSk7CgogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnJlc3VsdC5yZXNldCgpOwogICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpOwogICAgICB0aGlzLmdldEFBQkIodG1wQUFCQiQxKTsKICAgICAgdG1wQXJyYXkubGVuZ3RoID0gMDsKICAgICAgd29ybGQuYnJvYWRwaGFzZS5hYWJiUXVlcnkod29ybGQsIHRtcEFBQkIkMSwgdG1wQXJyYXkpOwogICAgICB0aGlzLmludGVyc2VjdEJvZGllcyh0bXBBcnJheSk7CiAgICAgIHJldHVybiB0aGlzLmhhc0hpdDsKICAgIH0KICAgIC8qKgogICAgICogU2hvb3QgYSByYXkgYXQgYSBib2R5LCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LgogICAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0Qm9keShib2R5LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2U7CgogICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhYm9keS5jb2xsaXNpb25SZXNwb25zZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCh0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCB8fCAoYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHhpID0gaW50ZXJzZWN0Qm9keV94aTsKICAgICAgY29uc3QgcWkgPSBpbnRlcnNlY3RCb2R5X3FpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSBib2R5LnNoYXBlcy5sZW5ndGg7IGkgPCBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IGJvZHkuc2hhcGVzW2ldOwoKICAgICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhc2hhcGUuY29sbGlzaW9uUmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwCiAgICAgICAgfQoKICAgICAgICBib2R5LnF1YXRlcm5pb24ubXVsdChib2R5LnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7CiAgICAgICAgYm9keS5xdWF0ZXJuaW9uLnZtdWx0KGJvZHkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7CiAgICAgICAgeGkudmFkZChib2R5LnBvc2l0aW9uLCB4aSk7CiAgICAgICAgdGhpcy5pbnRlcnNlY3RTaGFwZShzaGFwZSwgcWksIHhpLCBib2R5KTsKCiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTaG9vdCBhIHJheSBhdCBhbiBhcnJheSBib2RpZXMsIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuCiAgICAgKiBAcGFyYW0gYm9kaWVzIEFuIGFycmF5IG9mIEJvZHkgb2JqZWN0cy4KICAgICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLgogICAgICoKICAgICAqLwoKCiAgICBpbnRlcnNlY3RCb2RpZXMoYm9kaWVzLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYm9kaWVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGw7IGkrKykgewogICAgICAgIHRoaXMuaW50ZXJzZWN0Qm9keShib2RpZXNbaV0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgdGhlIGRpcmVjdGlvbiB2ZWN0b3IuCiAgICAgKi8KCgogICAgdXBkYXRlRGlyZWN0aW9uKCkgewogICAgICB0aGlzLnRvLnZzdWIodGhpcy5mcm9tLCB0aGlzLmRpcmVjdGlvbik7CiAgICAgIHRoaXMuZGlyZWN0aW9uLm5vcm1hbGl6ZSgpOwogICAgfQoKICAgIGludGVyc2VjdFNoYXBlKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOyAvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZQoKICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgdGhpcy5kaXJlY3Rpb24sIHBvc2l0aW9uKTsKCiAgICAgIGlmIChkaXN0YW5jZSA+IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBpbnRlcnNlY3RNZXRob2QgPSB0aGlzW3NoYXBlLnR5cGVdOwoKICAgICAgaWYgKGludGVyc2VjdE1ldGhvZCkgewogICAgICAgIGludGVyc2VjdE1ldGhvZC5jYWxsKHRoaXMsIHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgc2hhcGUpOwogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdEJveChib3gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXgoYm94LmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpOwogICAgfQoKICAgIF9pbnRlcnNlY3RQbGFuZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsgLy8gR2V0IHBsYW5lIG5vcm1hbAoKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBuZXcgVmVjMygwLCAwLCAxKTsKICAgICAgcXVhdC52bXVsdCh3b3JsZE5vcm1hbCwgd29ybGROb3JtYWwpOwogICAgICBjb25zdCBsZW4gPSBuZXcgVmVjMygpOwogICAgICBmcm9tLnZzdWIocG9zaXRpb24sIGxlbik7CiAgICAgIGNvbnN0IHBsYW5lVG9Gcm9tID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgIHRvLnZzdWIocG9zaXRpb24sIGxlbik7CiAgICAgIGNvbnN0IHBsYW5lVG9UbyA9IGxlbi5kb3Qod29ybGROb3JtYWwpOwoKICAgICAgaWYgKHBsYW5lVG9Gcm9tICogcGxhbmVUb1RvID4gMCkgewogICAgICAgIC8vICJmcm9tIiBhbmQgInRvIiBhcmUgb24gdGhlIHNhbWUgc2lkZSBvZiB0aGUgcGxhbmUuLi4gYmFpbCBvdXQKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChmcm9tLmRpc3RhbmNlVG8odG8pIDwgcGxhbmVUb0Zyb20pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IG5fZG90X2RpciA9IHdvcmxkTm9ybWFsLmRvdChkaXJlY3Rpb24pOwoKICAgICAgaWYgKE1hdGguYWJzKG5fZG90X2RpcikgPCB0aGlzLnByZWNpc2lvbikgewogICAgICAgIC8vIE5vIGludGVyc2VjdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgcGxhbmVQb2ludFRvRnJvbSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGRpcl9zY2FsZWRfd2l0aF90ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIGZyb20udnN1Yihwb3NpdGlvbiwgcGxhbmVQb2ludFRvRnJvbSk7CiAgICAgIGNvbnN0IHQgPSAtd29ybGROb3JtYWwuZG90KHBsYW5lUG9pbnRUb0Zyb20pIC8gbl9kb3RfZGlyOwogICAgICBkaXJlY3Rpb24uc2NhbGUodCwgZGlyX3NjYWxlZF93aXRoX3QpOwogICAgICBmcm9tLnZhZGQoZGlyX3NjYWxlZF93aXRoX3QsIGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHdvcmxkIEFBQkIgb2YgdGhlIHJheS4KICAgICAqLwoKCiAgICBnZXRBQUJCKGFhYmIpIHsKICAgICAgY29uc3QgewogICAgICAgIGxvd2VyQm91bmQsCiAgICAgICAgdXBwZXJCb3VuZAogICAgICB9ID0gYWFiYjsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBsb3dlckJvdW5kLnggPSBNYXRoLm1pbih0by54LCBmcm9tLngpOwogICAgICBsb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0by55LCBmcm9tLnkpOwogICAgICBsb3dlckJvdW5kLnogPSBNYXRoLm1pbih0by56LCBmcm9tLnopOwogICAgICB1cHBlckJvdW5kLnggPSBNYXRoLm1heCh0by54LCBmcm9tLngpOwogICAgICB1cHBlckJvdW5kLnkgPSBNYXRoLm1heCh0by55LCBmcm9tLnkpOwogICAgICB1cHBlckJvdW5kLnogPSBNYXRoLm1heCh0by56LCBmcm9tLnopOwogICAgfQoKICAgIF9pbnRlcnNlY3RIZWlnaHRmaWVsZChzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgc2hhcGUuZGF0YTsKICAgICAgc2hhcGUuZWxlbWVudFNpemU7IC8vIENvbnZlcnQgdGhlIHJheSB0byBsb2NhbCBoZWlnaHRmaWVsZCBjb29yZGluYXRlcwoKICAgICAgY29uc3QgbG9jYWxSYXkgPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheTsgLy9uZXcgUmF5KHRoaXMuZnJvbSwgdGhpcy50byk7CgogICAgICBsb2NhbFJheS5mcm9tLmNvcHkodGhpcy5mcm9tKTsKICAgICAgbG9jYWxSYXkudG8uY29weSh0aGlzLnRvKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS5mcm9tLCBsb2NhbFJheS5mcm9tKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS50bywgbG9jYWxSYXkudG8pOwogICAgICBsb2NhbFJheS51cGRhdGVEaXJlY3Rpb24oKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBjb25zdCBpbmRleCA9IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4OwogICAgICBsZXQgaU1pblg7CiAgICAgIGxldCBpTWluWTsKICAgICAgbGV0IGlNYXhYOwogICAgICBsZXQgaU1heFk7IC8vIFNldCB0byBtYXgKCiAgICAgIGlNaW5YID0gaU1pblkgPSAwOwogICAgICBpTWF4WCA9IGlNYXhZID0gc2hhcGUuZGF0YS5sZW5ndGggLSAxOwogICAgICBjb25zdCBhYWJiID0gbmV3IEFBQkIoKTsKICAgICAgbG9jYWxSYXkuZ2V0QUFCQihhYWJiKTsKICAgICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSwgaW5kZXgsIHRydWUpOwogICAgICBpTWluWCA9IE1hdGgubWF4KGlNaW5YLCBpbmRleFswXSk7CiAgICAgIGlNaW5ZID0gTWF0aC5tYXgoaU1pblksIGluZGV4WzFdKTsKICAgICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSwgaW5kZXgsIHRydWUpOwogICAgICBpTWF4WCA9IE1hdGgubWluKGlNYXhYLCBpbmRleFswXSArIDEpOwogICAgICBpTWF4WSA9IE1hdGgubWluKGlNYXhZLCBpbmRleFsxXSArIDEpOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBzaGFwZS5nZXRBYWJiQXRJbmRleChpLCBqLCBhYWJiKTsKCiAgICAgICAgICBpZiAoIWFhYmIub3ZlcmxhcHNSYXkobG9jYWxSYXkpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfSAvLyBMb3dlciB0cmlhbmdsZQoKCiAgICAgICAgICBzaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTsKCiAgICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdFNwaGVyZShzcGhlcmUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgciA9IHNwaGVyZS5yYWRpdXM7CiAgICAgIGNvbnN0IGEgPSAodG8ueCAtIGZyb20ueCkgKiogMiArICh0by55IC0gZnJvbS55KSAqKiAyICsgKHRvLnogLSBmcm9tLnopICoqIDI7CiAgICAgIGNvbnN0IGIgPSAyICogKCh0by54IC0gZnJvbS54KSAqIChmcm9tLnggLSBwb3NpdGlvbi54KSArICh0by55IC0gZnJvbS55KSAqIChmcm9tLnkgLSBwb3NpdGlvbi55KSArICh0by56IC0gZnJvbS56KSAqIChmcm9tLnogLSBwb3NpdGlvbi56KSk7CiAgICAgIGNvbnN0IGMgPSAoZnJvbS54IC0gcG9zaXRpb24ueCkgKiogMiArIChmcm9tLnkgLSBwb3NpdGlvbi55KSAqKiAyICsgKGZyb20ueiAtIHBvc2l0aW9uLnopICoqIDIgLSByICoqIDI7CiAgICAgIGNvbnN0IGRlbHRhID0gYiAqKiAyIC0gNCAqIGEgKiBjOwogICAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQ7CiAgICAgIGNvbnN0IG5vcm1hbCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsOwoKICAgICAgaWYgKGRlbHRhIDwgMCkgewogICAgICAgIC8vIE5vIGludGVyc2VjdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChkZWx0YSA9PT0gMCkgewogICAgICAgIC8vIHNpbmdsZSBpbnRlcnNlY3Rpb24gcG9pbnQKICAgICAgICBmcm9tLmxlcnAodG8sIGRlbHRhLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGQxID0gKC1iIC0gTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpOwogICAgICAgIGNvbnN0IGQyID0gKC1iICsgTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpOwoKICAgICAgICBpZiAoZDEgPj0gMCAmJiBkMSA8PSAxKSB7CiAgICAgICAgICBmcm9tLmxlcnAodG8sIGQxLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChkMiA+PSAwICYmIGQyIDw9IDEpIHsKICAgICAgICAgIGZyb20ubGVycCh0bywgZDIsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdENvbnZleChzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUsIG9wdGlvbnMpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0Q29udmV4X25vcm1hbDsKICAgICAgY29uc3QgdmVjdG9yID0gaW50ZXJzZWN0Q29udmV4X3ZlY3RvcjsKICAgICAgY29uc3QgZmFjZUxpc3QgPSBvcHRpb25zICYmIG9wdGlvbnMuZmFjZUxpc3QgfHwgbnVsbDsgLy8gQ2hlY2tpbmcgZmFjZXMKCiAgICAgIGNvbnN0IGZhY2VzID0gc2hhcGUuZmFjZXM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSBzaGFwZS5mYWNlTm9ybWFsczsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZnJvbVRvRGlzdGFuY2UgPSBmcm9tLmRpc3RhbmNlVG8odG8pOwogICAgICBjb25zdCBOZmFjZXMgPSBmYWNlTGlzdCA/IGZhY2VMaXN0Lmxlbmd0aCA6IGZhY2VzLmxlbmd0aDsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7CgogICAgICBmb3IgKGxldCBqID0gMDsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGogPCBOZmFjZXM7IGorKykgewogICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3QgPyBmYWNlTGlzdFtqXSA6IGo7CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ZpXTsKICAgICAgICBjb25zdCBmYWNlTm9ybWFsID0gbm9ybWFsc1tmaV07CiAgICAgICAgY29uc3QgcSA9IHF1YXQ7CiAgICAgICAgY29uc3QgeCA9IHBvc2l0aW9uOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlCiAgICAgICAgLy8gbm90ZTogdGhpcyB3b3JrcyByZWdhcmRsZXNzIG9mIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGZhY2Ugbm9ybWFsCiAgICAgICAgLy8gR2V0IHBsYW5lIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLi4uCgogICAgICAgIHZlY3Rvci5jb3B5KHZlcnRpY2VzW2ZhY2VbMF1dKTsKICAgICAgICBxLnZtdWx0KHZlY3RvciwgdmVjdG9yKTsKICAgICAgICB2ZWN0b3IudmFkZCh4LCB2ZWN0b3IpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLgoKICAgICAgICB2ZWN0b3IudnN1Yihmcm9tLCB2ZWN0b3IpOyAvLyBHZXQgcGxhbmUgbm9ybWFsCgogICAgICAgIHEudm11bHQoZmFjZU5vcm1hbCwgbm9ybWFsKTsgLy8gSWYgdGhpcyBkb3QgcHJvZHVjdCBpcyBuZWdhdGl2ZSwgd2UgaGF2ZSBzb21ldGhpbmcgaW50ZXJlc3RpbmcKCiAgICAgICAgY29uc3QgZG90ID0gZGlyZWN0aW9uLmRvdChub3JtYWwpOyAvLyBCYWlsIG91dCBpZiByYXkgYW5kIHBsYW5lIGFyZSBwYXJhbGxlbAoKICAgICAgICBpZiAoTWF0aC5hYnMoZG90KSA8IHRoaXMucHJlY2lzaW9uKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmUKCgogICAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheQoKICAgICAgICBpZiAoc2NhbGFyIDwgMCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyBpZiAoZG90IDwgMCkgewogICAgICAgIC8vIEludGVyc2VjdGlvbiBwb2ludCBpcyBmcm9tICsgZGlyZWN0aW9uICogc2NhbGFyCgoKICAgICAgICBkaXJlY3Rpb24uc2NhbGUoc2NhbGFyLCBpbnRlcnNlY3RQb2ludCk7CiAgICAgICAgaW50ZXJzZWN0UG9pbnQudmFkZChmcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIGEgaXMgdGhlIHBvaW50IHdlIGNvbXBhcmUgcG9pbnRzIGIgYW5kIGMgd2l0aC4KCiAgICAgICAgYS5jb3B5KHZlcnRpY2VzW2ZhY2VbMF1dKTsKICAgICAgICBxLnZtdWx0KGEsIGEpOwogICAgICAgIHgudmFkZChhLCBhKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDE7ICFyZXN1bHQuc2hvdWxkU3RvcCAmJiBpIDwgZmFjZS5sZW5ndGggLSAxOyBpKyspIHsKICAgICAgICAgIC8vIFRyYW5zZm9ybSAzIHZlcnRpY2VzIHRvIHdvcmxkIGNvb3JkcwogICAgICAgICAgYi5jb3B5KHZlcnRpY2VzW2ZhY2VbaV1dKTsKICAgICAgICAgIGMuY29weSh2ZXJ0aWNlc1tmYWNlW2kgKyAxXV0pOwogICAgICAgICAgcS52bXVsdChiLCBiKTsKICAgICAgICAgIHEudm11bHQoYywgYyk7CiAgICAgICAgICB4LnZhZGQoYiwgYik7CiAgICAgICAgICB4LnZhZGQoYywgYyk7CiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlVG8oZnJvbSk7CgogICAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykpIHx8IGRpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2UpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3RQb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgZmkpOwogICAgICAgIH0gLy8gfQoKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAdG9kbyBPcHRpbWl6ZSBieSB0cmFuc2Zvcm1pbmcgdGhlIHdvcmxkIHRvIGxvY2FsIHNwYWNlIGZpcnN0LgogICAgICogQHRvZG8gVXNlIE9jdHJlZSBsb29rdXAKICAgICAqLwoKCiAgICBfaW50ZXJzZWN0VHJpbWVzaChtZXNoLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgb3B0aW9ucykgewogICAgICBjb25zdCBub3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX25vcm1hbDsKICAgICAgY29uc3QgdHJpYW5nbGVzID0gaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXM7CiAgICAgIGNvbnN0IHRyZWVUcmFuc2Zvcm0gPSBpbnRlcnNlY3RUcmltZXNoX3RyZWVUcmFuc2Zvcm07CiAgICAgIGNvbnN0IHZlY3RvciA9IGludGVyc2VjdENvbnZleF92ZWN0b3I7CiAgICAgIGNvbnN0IGxvY2FsRGlyZWN0aW9uID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbjsKICAgICAgY29uc3QgbG9jYWxGcm9tID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb207CiAgICAgIGNvbnN0IGxvY2FsVG8gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsVG87CiAgICAgIGNvbnN0IHdvcmxkSW50ZXJzZWN0UG9pbnQgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQ7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbDsgLy8gQ2hlY2tpbmcgZmFjZXMKCiAgICAgIGNvbnN0IGluZGljZXMgPSBtZXNoLmluZGljZXM7CiAgICAgIG1lc2gudmVydGljZXM7IC8vIGNvbnN0IG5vcm1hbHMgPSBtZXNoLmZhY2VOb3JtYWxzCgogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOwogICAgICB0cmVlVHJhbnNmb3JtLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pOwogICAgICB0cmVlVHJhbnNmb3JtLnF1YXRlcm5pb24uY29weShxdWF0KTsgLy8gVHJhbnNmb3JtIHJheSB0byBsb2NhbCBzcGFjZSEKCiAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGRpcmVjdGlvbiwgbG9jYWxEaXJlY3Rpb24pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGZyb20sIGxvY2FsRnJvbSk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgdG8sIGxvY2FsVG8pOwogICAgICBsb2NhbFRvLnggKj0gbWVzaC5zY2FsZS54OwogICAgICBsb2NhbFRvLnkgKj0gbWVzaC5zY2FsZS55OwogICAgICBsb2NhbFRvLnogKj0gbWVzaC5zY2FsZS56OwogICAgICBsb2NhbEZyb20ueCAqPSBtZXNoLnNjYWxlLng7CiAgICAgIGxvY2FsRnJvbS55ICo9IG1lc2guc2NhbGUueTsKICAgICAgbG9jYWxGcm9tLnogKj0gbWVzaC5zY2FsZS56OwogICAgICBsb2NhbFRvLnZzdWIobG9jYWxGcm9tLCBsb2NhbERpcmVjdGlvbik7CiAgICAgIGxvY2FsRGlyZWN0aW9uLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBmcm9tVG9EaXN0YW5jZVNxdWFyZWQgPSBsb2NhbEZyb20uZGlzdGFuY2VTcXVhcmVkKGxvY2FsVG8pOwogICAgICBtZXNoLnRyZWUucmF5UXVlcnkodGhpcywgdHJlZVRyYW5zZm9ybSwgdHJpYW5nbGVzKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdHJpYW5nbGVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgdHJpYW5nbGVzSW5kZXggPSB0cmlhbmdsZXNbaV07CiAgICAgICAgbWVzaC5nZXROb3JtYWwodHJpYW5nbGVzSW5kZXgsIG5vcm1hbCk7IC8vIGRldGVybWluZSBpZiByYXkgaW50ZXJzZWN0cyB0aGUgcGxhbmUgb2YgdGhlIGZhY2UKICAgICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWwKICAgICAgICAvLyBHZXQgcGxhbmUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMuLi4KCiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDNdLCBhKTsgLy8gLi4uYnV0IG1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIHJheSBmcm9tLiBXZSdsbCBmaXggdGhpcyBsYXRlci4KCiAgICAgICAgYS52c3ViKGxvY2FsRnJvbSwgdmVjdG9yKTsgLy8gSWYgdGhpcyBkb3QgcHJvZHVjdCBpcyBuZWdhdGl2ZSwgd2UgaGF2ZSBzb21ldGhpbmcgaW50ZXJlc3RpbmcKCiAgICAgICAgY29uc3QgZG90ID0gbG9jYWxEaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsCiAgICAgICAgLy8gaWYgKE1hdGguYWJzKCBkb3QgKSA8IHRoaXMucHJlY2lzaW9uKXsKICAgICAgICAvLyAgICAgY29udGludWU7CiAgICAgICAgLy8gfQogICAgICAgIC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmUKCiAgICAgICAgY29uc3Qgc2NhbGFyID0gbm9ybWFsLmRvdCh2ZWN0b3IpIC8gZG90OyAvLyBpZiBuZWdhdGl2ZSBkaXN0YW5jZSwgdGhlbiBwbGFuZSBpcyBiZWhpbmQgcmF5CgogICAgICAgIGlmIChzY2FsYXIgPCAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIEludGVyc2VjdGlvbiBwb2ludCBpcyBmcm9tICsgZGlyZWN0aW9uICogc2NhbGFyCgoKICAgICAgICBsb2NhbERpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTsKICAgICAgICBpbnRlcnNlY3RQb2ludC52YWRkKGxvY2FsRnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBHZXQgdHJpYW5nbGUgdmVydGljZXMKCiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDMgKyAxXSwgYik7CiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDMgKyAyXSwgYyk7CiAgICAgICAgY29uc3Qgc3F1YXJlZERpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VTcXVhcmVkKGxvY2FsRnJvbSk7CgogICAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpKSB8fCBzcXVhcmVkRGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZVNxdWFyZWQpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gdHJhbnNmb3JtIGludGVyc2VjdHBvaW50IGFuZCBub3JtYWwgdG8gd29ybGQKCgogICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUocXVhdCwgbm9ybWFsLCB3b3JsZE5vcm1hbCk7CiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBpbnRlcnNlY3RQb2ludCwgd29ybGRJbnRlcnNlY3RQb2ludCk7CiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIHdvcmxkSW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIHRyaWFuZ2xlc0luZGV4KTsKICAgICAgfQoKICAgICAgdHJpYW5nbGVzLmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgaW50ZXJzZWN0aW9ucyBzaG91bGQgY29udGludWUKICAgICAqLwoKCiAgICByZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgaGl0RmFjZUluZGV4KSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlzdGFuY2UgPSBmcm9tLmRpc3RhbmNlVG8oaGl0UG9pbnRXb3JsZCk7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0OyAvLyBTa2lwIGJhY2sgZmFjZXM/CgogICAgICBpZiAodGhpcy5za2lwQmFja2ZhY2VzICYmIG5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pID4gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmVzdWx0LmhpdEZhY2VJbmRleCA9IHR5cGVvZiBoaXRGYWNlSW5kZXggIT09ICd1bmRlZmluZWQnID8gaGl0RmFjZUluZGV4IDogLTE7CgogICAgICBzd2l0Y2ggKHRoaXMubW9kZSkgewogICAgICAgIGNhc2UgUmF5LkFMTDoKICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgdGhpcy5jYWxsYmFjayhyZXN1bHQpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUmF5LkNMT1NFU1Q6CiAgICAgICAgICAvLyBTdG9yZSBpZiBjbG9zZXIgdGhhbiBjdXJyZW50IGNsb3Nlc3QKICAgICAgICAgIGlmIChkaXN0YW5jZSA8IHJlc3VsdC5kaXN0YW5jZSB8fCAhcmVzdWx0Lmhhc0hpdCkgewogICAgICAgICAgICB0aGlzLmhhc0hpdCA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUmF5LkFOWToKICAgICAgICAgIC8vIFJlcG9ydCBhbmQgc3RvcC4KICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgcmVzdWx0LnNob3VsZFN0b3AgPSB0cnVlOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQXMgcGVyICJCYXJ5Y2VudHJpYyBUZWNobmlxdWUiIGFzIG5hbWVkCiAgICAgKiB7QGxpbmsgaHR0cHM6Ly93d3cuYmxhY2twYXduLmNvbS90ZXh0cy9wb2ludGlucG9seS9kZWZhdWx0Lmh0bWwgaGVyZX0gYnV0IHdpdGhvdXQgdGhlIGRpdmlzaW9uCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50SW5UcmlhbmdsZShwLCBhLCBiLCBjKSB7CiAgICAgIGMudnN1YihhLCB2MCk7CiAgICAgIGIudnN1YihhLCB2MSk7CiAgICAgIHAudnN1YihhLCB2Mik7CiAgICAgIGNvbnN0IGRvdDAwID0gdjAuZG90KHYwKTsKICAgICAgY29uc3QgZG90MDEgPSB2MC5kb3QodjEpOwogICAgICBjb25zdCBkb3QwMiA9IHYwLmRvdCh2Mik7CiAgICAgIGNvbnN0IGRvdDExID0gdjEuZG90KHYxKTsKICAgICAgY29uc3QgZG90MTIgPSB2MS5kb3QodjIpOwogICAgICBsZXQgdTsKICAgICAgbGV0IHY7CiAgICAgIHJldHVybiAodSA9IGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSA+PSAwICYmICh2ID0gZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpID49IDAgJiYgdSArIHYgPCBkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMTsKICAgIH0KCiAgfQogIFJheS5DTE9TRVNUID0gUkFZX01PREVTLkNMT1NFU1Q7CiAgUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7CiAgUmF5LkFMTCA9IFJBWV9NT0RFUy5BTEw7CiAgY29uc3QgdG1wQUFCQiQxID0gbmV3IEFBQkIoKTsKICBjb25zdCB0bXBBcnJheSA9IFtdOwogIGNvbnN0IHYxID0gbmV3IFZlYzMoKTsKICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV9xaSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgaW50ZXJzZWN0UG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGMgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFJheWNhc3RSZXN1bHQoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhPcHRpb25zID0gewogICAgZmFjZUxpc3Q6IFswXQogIH07CiAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5ID0gbmV3IFJheSgpOwogIGNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4ID0gW107CiAgY29uc3QgUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdENvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhfdmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb20gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZEludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTsKICBuZXcgQUFCQigpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzID0gW107CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmVlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpOwogIGNvbnN0IHYwID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3QgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgZGlyZWN0aW9uLCBwb3NpdGlvbikgewogICAgLy8gdjAgaXMgdmVjdG9yIGZyb20gZnJvbSB0byBwb3NpdGlvbgogICAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7CiAgICBjb25zdCBkb3QgPSB2MC5kb3QoZGlyZWN0aW9uKTsgLy8gaW50ZXJzZWN0ID0gZGlyZWN0aW9uKmRvdCArIGZyb20KCiAgICBkaXJlY3Rpb24uc2NhbGUoZG90LCBpbnRlcnNlY3QpOwogICAgaW50ZXJzZWN0LnZhZGQoZnJvbSwgaW50ZXJzZWN0KTsKICAgIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpOwogICAgcmV0dXJuIGRpc3RhbmNlOwogIH0KCiAgLyoqCiAgICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuCiAgICovCiAgY2xhc3MgU0FQQnJvYWRwaGFzZSBleHRlbmRzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBMaXN0IG9mIGJvZGllcyBjdXJyZW50bHkgaW4gdGhlIGJyb2FkcGhhc2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEF4aXMgdG8gc29ydCB0aGUgYm9kaWVzIGFsb25nLgogICAgICogU2V0IHRvIDAgZm9yIHggYXhpcywgYW5kIDEgZm9yIHkgYXhpcy4KICAgICAqIEZvciBiZXN0IHBlcmZvcm1hbmNlLCBwaWNrIHRoZSBheGlzIHdoZXJlIGJvZGllcyBhcmUgbW9zdCBkaXN0cmlidXRlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAsIGFsb25nIHRoZSBnaXZlbiBTQVAgYXhpcy4KICAgICAqLwogICAgc3RhdGljIGNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSB7CiAgICAgIGxldCBiaVBvczsKICAgICAgbGV0IGJqUG9zOwoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMCkgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueDsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLng7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi55OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLno7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi56OwogICAgICB9CgogICAgICBjb25zdCByaSA9IGJpLmJvdW5kaW5nUmFkaXVzLAogICAgICAgICAgICByaiA9IGJqLmJvdW5kaW5nUmFkaXVzLAogICAgICAgICAgICBib3VuZEEyID0gYmlQb3MgKyByaSwKICAgICAgICAgICAgYm91bmRCMSA9IGJqUG9zIC0gcmo7CiAgICAgIHJldHVybiBib3VuZEIxIDwgYm91bmRBMjsKICAgIH0gLy8gTm90ZTogdGhlc2UgYXJlIGlkZW50aWNhbCwgc2F2ZSBmb3IgeC95L3ogbG93ZXJib3VuZAoKICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFgKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFgoYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnggPD0gdi5hYWJiLmxvd2VyQm91bmQueCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WQogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WShhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueSA8PSB2LmFhYmIubG93ZXJCb3VuZC55KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRaCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRaKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC56IDw9IHYuYWFiYi5sb3dlckJvdW5kLnopIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcih3b3JsZCkgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLmF4aXNMaXN0ID0gW107CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLmF4aXNJbmRleCA9IDA7CiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKCiAgICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gZXZlbnQgPT4gewogICAgICAgIGF4aXNMaXN0LnB1c2goZXZlbnQuYm9keSk7CiAgICAgIH07CgogICAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IGV2ZW50ID0+IHsKICAgICAgICBjb25zdCBpZHggPSBheGlzTGlzdC5pbmRleE9mKGV2ZW50LmJvZHkpOwoKICAgICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgICAgYXhpc0xpc3Quc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHdvcmxkKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZCh3b3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hhbmdlIHRoZSB3b3JsZAogICAgICovCgoKICAgIHNldFdvcmxkKHdvcmxkKSB7CiAgICAgIC8vIENsZWFyIHRoZSBvbGQgYXhpcyBhcnJheQogICAgICB0aGlzLmF4aXNMaXN0Lmxlbmd0aCA9IDA7IC8vIEFkZCBhbGwgYm9kaWVzIGZyb20gdGhlIG5ldyB3b3JsZAoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmF4aXNMaXN0LnB1c2god29ybGQuYm9kaWVzW2ldKTsKICAgICAgfSAvLyBSZW1vdmUgb2xkIGhhbmRsZXJzLCBpZiBhbnkKCgogICAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRCb2R5JywgdGhpcy5fYWRkQm9keUhhbmRsZXIpOwogICAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOyAvLyBBZGQgaGFuZGxlcnMgdG8gdXBkYXRlIHRoZSBsaXN0IG9mIGJvZGllcy4KCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7CiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZUJvZHknLCB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlcik7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbGxlY3QgYWxsIGNvbGxpc2lvbiBwYWlycwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgTiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4OwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBpZiAodGhpcy5kaXJ0eSkgewogICAgICAgIHRoaXMuc29ydExpc3QoKTsKICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIH0gLy8gTG9vayB0aHJvdWdoIHRoZSBsaXN0CgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgTjsgaisrKSB7CiAgICAgICAgICBjb25zdCBiaiA9IGJvZGllc1tqXTsKCiAgICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIVNBUEJyb2FkcGhhc2UuY2hlY2tCb3VuZHMoYmksIGJqLCBheGlzSW5kZXgpKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGVzdChiaSwgYmosIHAxLCBwMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc29ydExpc3QoKSB7CiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGNvbnN0IE4gPSBheGlzTGlzdC5sZW5ndGg7IC8vIFVwZGF0ZSBBQUJCcwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYXhpc0xpc3RbaV07CgogICAgICAgIGlmIChiaS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGJpLnVwZGF0ZUFBQkIoKTsKICAgICAgICB9CiAgICAgIH0gLy8gU29ydCB0aGUgbGlzdAoKCiAgICAgIGlmIChheGlzSW5kZXggPT09IDApIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRYKGF4aXNMaXN0KTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRZKGF4aXNMaXN0KTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRaKGF4aXNMaXN0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgdmFyaWFuY2Ugb2YgdGhlIGJvZHkgcG9zaXRpb25zIGFuZCBlc3RpbWF0ZXMgdGhlIGJlc3QgYXhpcyB0byB1c2UuCiAgICAgKiBXaWxsIGF1dG9tYXRpY2FsbHkgc2V0IHByb3BlcnR5IGBheGlzSW5kZXhgLgogICAgICovCgoKICAgIGF1dG9EZXRlY3RBeGlzKCkgewogICAgICBsZXQgc3VtWCA9IDA7CiAgICAgIGxldCBzdW1YMiA9IDA7CiAgICAgIGxldCBzdW1ZID0gMDsKICAgICAgbGV0IHN1bVkyID0gMDsKICAgICAgbGV0IHN1bVogPSAwOwogICAgICBsZXQgc3VtWjIgPSAwOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaW52TiA9IDEgLyBOOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgY29uc3QgY2VudGVyWCA9IGIucG9zaXRpb24ueDsKICAgICAgICBzdW1YICs9IGNlbnRlclg7CiAgICAgICAgc3VtWDIgKz0gY2VudGVyWCAqIGNlbnRlclg7CiAgICAgICAgY29uc3QgY2VudGVyWSA9IGIucG9zaXRpb24ueTsKICAgICAgICBzdW1ZICs9IGNlbnRlclk7CiAgICAgICAgc3VtWTIgKz0gY2VudGVyWSAqIGNlbnRlclk7CiAgICAgICAgY29uc3QgY2VudGVyWiA9IGIucG9zaXRpb24uejsKICAgICAgICBzdW1aICs9IGNlbnRlclo7CiAgICAgICAgc3VtWjIgKz0gY2VudGVyWiAqIGNlbnRlclo7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZhcmlhbmNlWCA9IHN1bVgyIC0gc3VtWCAqIHN1bVggKiBpbnZOOwogICAgICBjb25zdCB2YXJpYW5jZVkgPSBzdW1ZMiAtIHN1bVkgKiBzdW1ZICogaW52TjsKICAgICAgY29uc3QgdmFyaWFuY2VaID0gc3VtWjIgLSBzdW1aICogc3VtWiAqIGludk47CgogICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VZKSB7CiAgICAgICAgaWYgKHZhcmlhbmNlWCA+IHZhcmlhbmNlWikgewogICAgICAgICAgdGhpcy5heGlzSW5kZXggPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDI7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHZhcmlhbmNlWSA+IHZhcmlhbmNlWikgewogICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDI7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGJvZGllcyBpbi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGlydHkpIHsKICAgICAgICB0aGlzLnNvcnRMaXN0KCk7CiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgbGV0IGF4aXMgPSAneCc7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYXhpcyA9ICd5JzsKICAgICAgfQoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGF4aXMgPSAneic7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgYWFiYi5sb3dlckJvdW5kW2F4aXNdOwogICAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGF4aXNMaXN0W2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkgewogICAgICAgICAgcmVzdWx0LnB1c2goYik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNsYXNzIFV0aWxzIHsKICAgIC8qKgogICAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBvYmplY3QuIE1heSBiZSBmYWxzeTogaW4gdGhpcyBjYXNlLCBhIG5ldyBvYmplY3QgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuCiAgICAgKiBAcGFyYW0gZGVmYXVsdHMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC4KICAgICAqLwogICAgc3RhdGljIGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRzKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGtleSBpbiBkZWZhdWx0cykgewogICAgICAgIGlmICghKGtleSBpbiBvcHRpb25zKSkgewogICAgICAgICAgb3B0aW9uc1trZXldID0gZGVmYXVsdHNba2V5XTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvcHRpb25zOwogICAgfQoKICB9CgogIC8qKgogICAqIENvbnN0cmFpbnQgYmFzZSBjbGFzcwogICAqLwogIGNsYXNzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBFcXVhdGlvbnMgdG8gYmUgc29sdmVkIGluIHRoaXMgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogQm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBmYWxzZSBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgYm9kaWVzIHRvIGNvbGxpZGUgd2hlbiB0aGV5IGFyZSBjb25uZWN0ZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRydWUsCiAgICAgICAgd2FrZVVwQm9kaWVzOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgICB0aGlzLmJvZHlBID0gYm9keUE7CiAgICAgIHRoaXMuYm9keUIgPSBib2R5QjsKICAgICAgdGhpcy5pZCA9IENvbnN0cmFpbnQuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuY29sbGlkZUNvbm5lY3RlZCA9IG9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKCiAgICAgIGlmIChvcHRpb25zLndha2VVcEJvZGllcykgewogICAgICAgIGlmIChib2R5QSkgewogICAgICAgICAgYm9keUEud2FrZVVwKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYm9keUIpIHsKICAgICAgICAgIGJvZHlCLndha2VVcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgYWxsIHRoZSBlcXVhdGlvbnMgd2l0aCBkYXRhLgogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRob2QgdXBkYXRlKCkgbm90IGltcGxtZW1lbnRlZCBpbiB0aGlzIENvbnN0cmFpbnQgc3ViY2xhc3MhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEVuYWJsZXMgYWxsIGVxdWF0aW9ucyBpbiB0aGUgY29uc3RyYWludC4KICAgICAqLwoKCiAgICBlbmFibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRGlzYWJsZXMgYWxsIGVxdWF0aW9ucyBpbiB0aGUgY29uc3RyYWludC4KICAgICAqLwoKCiAgICBkaXNhYmxlKCkgewogICAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9uczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXFzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZXFzW2ldLmVuYWJsZWQgPSBmYWxzZTsKICAgICAgfQogICAgfQoKICB9CiAgQ29uc3RyYWludC5pZENvdW50ZXIgPSAwOwoKICAvKioKICAgKiBBbiBlbGVtZW50IGNvbnRhaW5pbmcgNiBlbnRyaWVzLCAzIHNwYXRpYWwgYW5kIDMgcm90YXRpb25hbCBkZWdyZWVzIG9mIGZyZWVkb20uCiAgICovCgogIGNsYXNzIEphY29iaWFuRWxlbWVudCB7CiAgICAvKioKICAgICAqIHNwYXRpYWwKICAgICAqLwoKICAgIC8qKgogICAgICogcm90YXRpb25hbAogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5zcGF0aWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnQKICAgICAqLwoKCiAgICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgZWxlbWVudC5yb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIHR3byB2ZWN0b3JzCiAgICAgKi8KCgogICAgbXVsdGlwbHlWZWN0b3JzKHNwYXRpYWwsIHJvdGF0aW9uYWwpIHsKICAgICAgcmV0dXJuIHNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyByb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQoKICB9CgogIC8qKgogICAqIEVxdWF0aW9uIGJhc2UgY2xhc3MuCiAgICoKICAgKiBgYWAsIGBiYCBhbmQgYGVwc2AgYXJlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQxNS9sZWN0dXJlcy9TUE9PS2xhYm5vdGVzLnBkZiBTUE9PS30gcGFyYW1ldGVycyB0aGF0IGRlZmF1bHQgdG8gYDAuMGAuIFNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlL2Nhbm5vbi5qcy9pc3N1ZXMvMjM4I2lzc3VlY29tbWVudC0xNDcxNzIzMjcgdGhpcyBleGNoYW5nZX0gZm9yIG1vcmUgZGV0YWlscyBvbiBDYW5ub24ncyBwaHlzaWNzIGltcGxlbWVudGF0aW9uLgogICAqLwogIGNsYXNzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogTWluaW11bSAocmVhZDogbmVnYXRpdmUgbWF4KSBmb3JjZSB0byBiZSBhcHBsaWVkIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXhpbXVtIChyZWFkOiBwb3NpdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgbnVtYmVyLCBwcm9wb3J0aW9uYWwgdG8gdGhlIGZvcmNlIGFkZGVkIHRvIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJpLCBiaiwgbWluRm9yY2UsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtaW5Gb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWluRm9yY2UgPSAtMWU2OwogICAgICB9CgogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICB0aGlzLmlkID0gRXF1YXRpb24uaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWluRm9yY2UgPSBtaW5Gb3JjZTsKICAgICAgdGhpcy5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgICB0aGlzLmJpID0gYmk7CiAgICAgIHRoaXMuYmogPSBiajsKICAgICAgdGhpcy5hID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuYiA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyCgogICAgICB0aGlzLmVwcyA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyCgogICAgICB0aGlzLmphY29iaWFuRWxlbWVudEEgPSBuZXcgSmFjb2JpYW5FbGVtZW50KCk7CiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5tdWx0aXBsaWVyID0gMDsKICAgICAgdGhpcy5zZXRTcG9va1BhcmFtcygxZTcsIDQsIDEgLyA2MCk7IC8vIFNldCB0eXBpY2FsIHNwb29rIHBhcmFtcwogICAgfQogICAgLyoqCiAgICAgKiBSZWNhbGN1bGF0ZXMgYSwgYiwgYW5kIGVwcy4KICAgICAqCiAgICAgKiBUaGUgRXF1YXRpb24gY29uc3RydWN0b3Igc2V0cyB0eXBpY2FsIFNQT09LIHBhcmFtZXRlcnMgYXMgc3VjaDoKICAgICAqICogYHN0aWZmbmVzc2AgPSAxZTcKICAgICAqICogYHJlbGF4YXRpb25gID0gNAogICAgICogKiBgdGltZVN0ZXBgPSAxIC8gNjAsIF9ub3RlIHRoZSBoYXJkY29kZWQgcmVmcmVzaCByYXRlLl8KICAgICAqLwoKCiAgICBzZXRTcG9va1BhcmFtcyhzdGlmZm5lc3MsIHJlbGF4YXRpb24sIHRpbWVTdGVwKSB7CiAgICAgIGNvbnN0IGQgPSByZWxheGF0aW9uOwogICAgICBjb25zdCBrID0gc3RpZmZuZXNzOwogICAgICBjb25zdCBoID0gdGltZVN0ZXA7CiAgICAgIHRoaXMuYSA9IDQuMCAvIChoICogKDEgKyA0ICogZCkpOwogICAgICB0aGlzLmIgPSA0LjAgKiBkIC8gKDEgKyA0ICogZCk7CiAgICAgIHRoaXMuZXBzID0gNC4wIC8gKGggKiBoICogayAqICgxICsgNCAqIGQpKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIHJpZ2h0IGhhbmQgc2lkZSBvZiB0aGUgU1BPT0sgZXF1YXRpb24KICAgICAqLwoKCiAgICBjb21wdXRlQihhLCBiLCBoKSB7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR3EgPSB0aGlzLmNvbXB1dGVHcSgpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICByZXR1cm4gLUdxICogYSAtIEdXICogYiAtIEdpTWYgKiBoOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKnEsIHdoZXJlIHEgYXJlIHRoZSBnZW5lcmFsaXplZCBib2R5IGNvb3JkaW5hdGVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdxKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB4aSA9IGJpLnBvc2l0aW9uOwogICAgICBjb25zdCB4aiA9IGJqLnBvc2l0aW9uOwogICAgICByZXR1cm4gR0Euc3BhdGlhbC5kb3QoeGkpICsgR0Iuc3BhdGlhbC5kb3QoeGopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKlcsIHdoZXJlIFcgYXJlIHRoZSBib2R5IHZlbG9jaXRpZXMKICAgICAqLwoKCiAgICBjb21wdXRlR1coKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7CiAgICAgIGNvbnN0IHZqID0gYmoudmVsb2NpdHk7CiAgICAgIGNvbnN0IHdpID0gYmkuYW5ndWxhclZlbG9jaXR5OwogICAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgcmV0dXJuIEdBLm11bHRpcGx5VmVjdG9ycyh2aSwgd2kpICsgR0IubXVsdGlwbHlWZWN0b3JzKHZqLCB3aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqV2xhbWJkYSwgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHV2xhbWJkYSgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52bGFtYmRhOwogICAgICBjb25zdCB2aiA9IGJqLnZsYW1iZGE7CiAgICAgIGNvbnN0IHdpID0gYmkud2xhbWJkYTsKICAgICAgY29uc3Qgd2ogPSBiai53bGFtYmRhOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRyppbnYoTSkqZiwgd2hlcmUgTSBpcyB0aGUgbWFzcyBtYXRyaXggd2l0aCBkaWFnb25hbCBibG9ja3MgZm9yIGVhY2ggYm9keSwgYW5kIGYgYXJlIHRoZSBmb3JjZXMgb24gdGhlIGJvZGllcy4KICAgICAqLwoKCiAgICBjb21wdXRlR2lNZigpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgZmkgPSBiaS5mb3JjZTsKICAgICAgY29uc3QgdGkgPSBiaS50b3JxdWU7CiAgICAgIGNvbnN0IGZqID0gYmouZm9yY2U7CiAgICAgIGNvbnN0IHRqID0gYmoudG9ycXVlOwogICAgICBjb25zdCBpbnZNYXNzaSA9IGJpLmludk1hc3NTb2x2ZTsKICAgICAgY29uc3QgaW52TWFzc2ogPSBiai5pbnZNYXNzU29sdmU7CiAgICAgIGZpLnNjYWxlKGludk1hc3NpLCBpTWZpKTsKICAgICAgZmouc2NhbGUoaW52TWFzc2osIGlNZmopOwogICAgICBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdCh0aSwgaW52SWlfdm11bHRfdGF1aSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRqLCBpbnZJal92bXVsdF90YXVqKTsKICAgICAgcmV0dXJuIEdBLm11bHRpcGx5VmVjdG9ycyhpTWZpLCBpbnZJaV92bXVsdF90YXVpKSArIEdCLm11bHRpcGx5VmVjdG9ycyhpTWZqLCBpbnZJal92bXVsdF90YXVqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRyppbnYoTSkqRycKICAgICAqLwoKCiAgICBjb21wdXRlR2lNR3QoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgY29uc3QgaW52SWkgPSBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZTsKICAgICAgY29uc3QgaW52SWogPSBiai5pbnZJbmVydGlhV29ybGRTb2x2ZTsKICAgICAgbGV0IHJlc3VsdCA9IGludk1hc3NpICsgaW52TWFzc2o7CiAgICAgIGludklpLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdBLnJvdGF0aW9uYWwpOwogICAgICBpbnZJai52bXVsdChHQi5yb3RhdGlvbmFsLCB0bXApOwogICAgICByZXN1bHQgKz0gdG1wLmRvdChHQi5yb3RhdGlvbmFsKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGNvbnN0cmFpbnQgdmVsb2NpdHkgdG8gdGhlIGJvZGllcy4KICAgICAqLwoKCiAgICBhZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdGVtcCA9IGFkZFRvV2xhbWJkYV90ZW1wOyAvLyBBZGQgdG8gbGluZWFyIHZlbG9jaXR5CiAgICAgIC8vIHZfbGFtYmRhICs9IGludihNKSAqIGRlbHRhX2xhbWJhICogRwoKICAgICAgYmkudmxhbWJkYS5hZGRTY2FsZWRWZWN0b3IoYmkuaW52TWFzc1NvbHZlICogZGVsdGFsYW1iZGEsIEdBLnNwYXRpYWwsIGJpLnZsYW1iZGEpOwogICAgICBiai52bGFtYmRhLmFkZFNjYWxlZFZlY3Rvcihiai5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Iuc3BhdGlhbCwgYmoudmxhbWJkYSk7IC8vIEFkZCB0byBhbmd1bGFyIHZlbG9jaXR5CgogICAgICBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQS5yb3RhdGlvbmFsLCB0ZW1wKTsKICAgICAgYmkud2xhbWJkYS5hZGRTY2FsZWRWZWN0b3IoZGVsdGFsYW1iZGEsIHRlbXAsIGJpLndsYW1iZGEpOwogICAgICBiai5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQi5yb3RhdGlvbmFsLCB0ZW1wKTsKICAgICAgYmoud2xhbWJkYS5hZGRTY2FsZWRWZWN0b3IoZGVsdGFsYW1iZGEsIHRlbXAsIGJqLndsYW1iZGEpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBkZW5vbWluYXRvciBwYXJ0IG9mIHRoZSBTUE9PSyBlcXVhdGlvbjogQyA9IEcqaW52KE0pKkcnICsgZXBzCiAgICAgKi8KCgogICAgY29tcHV0ZUMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVHaU1HdCgpICsgdGhpcy5lcHM7CiAgICB9CgogIH0KICBFcXVhdGlvbi5pZENvdW50ZXIgPSAwOwogIGNvbnN0IGlNZmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGlNZmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklpX3ZtdWx0X3RhdWkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklqX3ZtdWx0X3RhdWogPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWRkVG9XbGFtYmRhX3RlbXAgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb250YWN0L25vbi1wZW5ldHJhdGlvbiBjb25zdHJhaW50IGVxdWF0aW9uCiAgICovCiAgY2xhc3MgQ29udGFjdEVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiAiYm91bmNpbmVzcyI6IHUxID0gLWUqdTAKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkLW9yaWVudGVkIHZlY3RvciB0aGF0IHN0YXJ0cyBpbiBib2R5IGogcG9zaXRpb24gYW5kIGdvZXMgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbnRhY3Qgbm9ybWFsLCBwb2ludGluZyBvdXQgb2YgYm9keSBpLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgMCwgbWF4Rm9yY2UpOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wOwogICAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yaiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubmkgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHJpID0gdGhpcy5yaTsKICAgICAgY29uc3QgcmogPSB0aGlzLnJqOwogICAgICBjb25zdCByaXhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB2aSA9IGJpLnZlbG9jaXR5OwogICAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmkuZm9yY2U7CiAgICAgIGJpLnRvcnF1ZTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGJqLmZvcmNlOwogICAgICBiai50b3JxdWU7CiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKG4sIHJpeG4pOwogICAgICByai5jcm9zcyhuLCByanhuKTsgLy8gZyA9IHhqK3JqIC0oeGkrcmkpCiAgICAgIC8vIEcgPSBbIC1uaSAgLXJpeG4gIG5pICByanhuIF0KCiAgICAgIG4ubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KG4pOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4bik7IC8vIENhbGN1bGF0ZSB0aGUgcGVuZXRyYXRpb24gdmVjdG9yCgogICAgICBwZW5ldHJhdGlvblZlYy5jb3B5KGJqLnBvc2l0aW9uKTsKICAgICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpOwogICAgICBwZW5ldHJhdGlvblZlYy52c3ViKGJpLnBvc2l0aW9uLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIocmksIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7CiAgICAgIGNvbnN0IEdXID0gZVBsdXNPbmUgKiB2ai5kb3QobikgLSBlUGx1c09uZSAqIHZpLmRvdChuKSArIHdqLmRvdChyanhuKSAtIHdpLmRvdChyaXhuKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjdXJyZW50IHJlbGF0aXZlIHZlbG9jaXR5IGluIHRoZSBjb250YWN0IHBvaW50LgogICAgICovCgoKICAgIGdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSB7CiAgICAgIGNvbnN0IHZpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmk7CiAgICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7CiAgICAgIGNvbnN0IHhpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGk7CiAgICAgIGNvbnN0IHhqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGo7CiAgICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDsKICAgICAgdGhpcy5iaS5wb3NpdGlvbi52YWRkKHRoaXMucmksIHhpKTsKICAgICAgdGhpcy5iai5wb3NpdGlvbi52YWRkKHRoaXMucmosIHhqKTsKICAgICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpOwogICAgICB0aGlzLmJqLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhqLCB2aik7CiAgICAgIHZpLnZzdWIodmosIHJlbFZlbCk7CiAgICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpOwogICAgfQoKICB9CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzCgogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmogPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hpID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfcmVsVmVsID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGJvZHlBID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGJvZHlBLnBvc2l0aW9uLnNldCgtMSwgMCwgMCkKICAgKiAgICAgYm9keUIucG9zaXRpb24uc2V0KDEsIDAsIDApCiAgICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSkKICAgKiAgICAgYm9keUIuYWRkU2hhcGUoc2hhcGVCKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlBKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKQogICAqICAgICBjb25zdCBsb2NhbFBpdm90QSA9IG5ldyBWZWMzKDEsIDAsIDApCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RCID0gbmV3IFZlYzMoLTEsIDAsIDApCiAgICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QikKICAgKiAgICAgd29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KQogICAqLwogIGNsYXNzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUGl2b3QsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5QS4KICAgICAqLwoKICAgIC8qKgogICAgICogUGl2b3QsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5Qi4KICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHBpdm90QSBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlBIHdoaWNoIGJvZHlBIGlzIGNvbnN0cmFpbmVkIHRvLgogICAgICogQHBhcmFtIGJvZHlCIEJvZHkgdGhhdCB3aWxsIGJlIGNvbnN0cmFpbmVkIGluIGEgc2ltaWxhciB3YXkgdG8gdGhlIHNhbWUgcG9pbnQgYXMgYm9keUEuIFdlIHdpbGwgdGhlcmVmb3JlIGdldCBhIGxpbmsgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuIElmIG5vdCBzcGVjaWZpZWQsIGJvZHlBIHdpbGwgYmUgY29uc3RyYWluZWQgdG8gYSBzdGF0aWMgcG9pbnQuCiAgICAgKiBAcGFyYW0gcGl2b3RCIFRoZSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3Mgb2YgYm9keUIgd2hpY2ggYm9keUIgaXMgY29uc3RyYWluZWQgdG8uCiAgICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKHBpdm90QSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHBpdm90QiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5waXZvdEEgPSBwaXZvdEEuY2xvbmUoKTsKICAgICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTsKICAgICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICBjb25zdCB5ID0gdGhpcy5lcXVhdGlvblkgPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyCgogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbAoKICAgICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICB4Lm1heEZvcmNlID0geS5tYXhGb3JjZSA9IHoubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgeC5uaS5zZXQoMSwgMCwgMCk7CiAgICAgIHkubmkuc2V0KDAsIDEsIDApOwogICAgICB6Lm5pLnNldCgwLCAwLCAxKTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblg7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aOyAvLyBSb3RhdGUgdGhlIHBpdm90cyB0byB3b3JsZCBzcGFjZQoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QSwgeC5yaSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5waXZvdEIsIHgucmopOwogICAgICB5LnJpLmNvcHkoeC5yaSk7CiAgICAgIHkucmouY29weSh4LnJqKTsKICAgICAgei5yaS5jb3B5KHgucmkpOwogICAgICB6LnJqLmNvcHkoeC5yaik7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uZSBlcXVhdGlvbi4gV29ya3MgdG8ga2VlcCB0aGUgZ2l2ZW4gYm9keSB3b3JsZCB2ZWN0b3JzIGFsaWduZWQsIG9yIHRpbHRlZCB3aXRoaW4gYSBnaXZlbiBhbmdsZSBmcm9tIGVhY2ggb3RoZXIuCiAgICovCiAgY2xhc3MgQ29uZUVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBMb2NhbCBheGlzIGluIEEKICAgICAqLwoKICAgIC8qKgogICAgICogTG9jYWwgYXhpcyBpbiBCCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSAiY29uZSBhbmdsZSIgdG8ga2VlcAogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OwogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApOwogICAgICB0aGlzLmFuZ2xlID0gdHlwZW9mIG9wdGlvbnMuYW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmdsZSA6IDA7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBuaSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjsKICAgICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDI7CiAgICAgIGNvbnN0IG5qeG5pID0gdG1wVmVjMiQyOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgbmkuY3Jvc3MobmosIG5peG5qKTsKICAgICAgbmouY3Jvc3MobmksIG5qeG5pKTsgLy8gVGhlIGFuZ2xlIGJldHdlZW4gdHdvIHZlY3RvciBpczoKICAgICAgLy8gY29zKHRoZXRhKSA9IGEgKiBiIC8gKGxlbmd0aChhKSAqIGxlbmd0aChiKSA9IHsgbGVuKGEpID0gbGVuKGIpID0gMSB9ID0gYSAqIGIKICAgICAgLy8gZyA9IGEgKiBiCiAgICAgIC8vIGdkb3QgPSAoYiB4IGEpICogd2kgKyAoYSB4IGIpICogd2oKICAgICAgLy8gRyA9IFswIGJ4YSAwIGF4Yl0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiQyID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogUm90YXRpb25hbCBjb25zdHJhaW50LiBXb3JrcyB0byBrZWVwIHRoZSBsb2NhbCB2ZWN0b3JzIG9ydGhvZ29uYWwgdG8gZWFjaCBvdGhlciBpbiB3b3JsZCBzcGFjZS4KICAgKi8KICBjbGFzcyBSb3RhdGlvbmFsRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBtYXhBbmdsZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OwogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApOwogICAgICB0aGlzLm1heEFuZ2xlID0gTWF0aC5QSSAvIDI7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBuaSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjsKICAgICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDE7CiAgICAgIGNvbnN0IG5qeG5pID0gdG1wVmVjMiQxOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgbmkuY3Jvc3MobmosIG5peG5qKTsKICAgICAgbmouY3Jvc3MobmksIG5qeG5pKTsgLy8gZyA9IG5pICogbmoKICAgICAgLy8gZ2RvdCA9IChuaiB4IG5pKSAqIHdpICsgKG5pIHggbmopICogd2oKICAgICAgLy8gRyA9IFswIG5qeG5pIDAgbml4bmpdCiAgICAgIC8vIFcgPSBbdmkgd2kgdmogd2pdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkobmp4bmkpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopOwogICAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5tYXhBbmdsZSkgLSBuaS5kb3QobmopOwogICAgICBjb25zdCBHVyA9IHRoaXMuY29tcHV0ZUdXKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICBjb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIkMSA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEEgQ29uZSBUd2lzdCBjb25zdHJhaW50LCB1c2VmdWwgZm9yIHJhZ2RvbGxzLgogICAqLwogIGNsYXNzIENvbmVUd2lzdENvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBhcGVydHVyZSBhbmdsZSBvZiB0aGUgY29uZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsgLy8gU2V0IHBpdm90IHBvaW50IGluIGJldHdlZW4KCiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygpOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29sbGlkZUNvbm5lY3RlZCA9ICEhb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwogICAgICB0aGlzLmFuZ2xlID0gdHlwZW9mIG9wdGlvbnMuYW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmdsZSA6IDA7CiAgICAgIGNvbnN0IGMgPSB0aGlzLmNvbmVFcXVhdGlvbiA9IG5ldyBDb25lRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgdCA9IHRoaXMudHdpc3RFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgdGhpcy50d2lzdEFuZ2xlID0gdHlwZW9mIG9wdGlvbnMudHdpc3RBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnR3aXN0QW5nbGUgOiAwOyAvLyBNYWtlIHRoZSBjb25lIGVxdWF0aW9uIHB1c2ggdGhlIGJvZGllcyB0b3dhcmQgdGhlIGNvbmUgYXhpcywgbm90IG91dHdhcmQKCiAgICAgIGMubWF4Rm9yY2UgPSAwOwogICAgICBjLm1pbkZvcmNlID0gLW1heEZvcmNlOyAvLyBNYWtlIHRoZSB0d2lzdCBlcXVhdGlvbiBhZGQgdG9ycXVlIHRvd2FyZCB0aGUgaW5pdGlhbCBwb3NpdGlvbgoKICAgICAgdC5tYXhGb3JjZSA9IDA7CiAgICAgIHQubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goYywgdCk7CiAgICB9CgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgY29uZSA9IHRoaXMuY29uZUVxdWF0aW9uOwogICAgICBjb25zdCB0d2lzdCA9IHRoaXMudHdpc3RFcXVhdGlvbjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIFVwZGF0ZSB0aGUgYXhlcyB0byB0aGUgY29uZSBjb25zdHJhaW50CgogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy5heGlzQSwgY29uZS5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNCLCBjb25lLmF4aXNCKTsgLy8gVXBkYXRlIHRoZSB3b3JsZCBheGVzIGluIHRoZSB0d2lzdCBjb25zdHJhaW50CgogICAgICB0aGlzLmF4aXNBLnRhbmdlbnRzKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7CiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQSwgdHdpc3QuYXhpc0EpOwogICAgICB0aGlzLmF4aXNCLnRhbmdlbnRzKHR3aXN0LmF4aXNCLCB0d2lzdC5heGlzQik7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpOwogICAgICBjb25lLmFuZ2xlID0gdGhpcy5hbmdsZTsKICAgICAgdHdpc3QubWF4QW5nbGUgPSB0aGlzLnR3aXN0QW5nbGU7CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnMgdHdvIGJvZGllcyB0byBiZSBhdCBhIGNvbnN0YW50IGRpc3RhbmNlIGZyb20gZWFjaCBvdGhlcnMgY2VudGVyIG9mIG1hc3MuCiAgICovCiAgY2xhc3MgRGlzdGFuY2VDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkaXN0YW5jZSBUaGUgZGlzdGFuY2UgdG8ga2VlcC4gSWYgdW5kZWZpbmVkLCBpdCB3aWxsIGJlIHNldCB0byB0aGUgY3VycmVudCBkaXN0YW5jZSBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4KICAgICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIGRpc3RhbmNlLCBtYXhGb3JjZSkgewogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICBzdXBlcihib2R5QSwgYm9keUIpOwoKICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBkaXN0YW5jZSA9IGJvZHlBLnBvc2l0aW9uLmRpc3RhbmNlVG8oYm9keUIucG9zaXRpb24pOwogICAgICB9CgogICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsgLy8gTWFrZSBpdCBiaWRpcmVjdGlvbmFsCgogICAgICBlcS5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgZXEubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgZXEgPSB0aGlzLmRpc3RhbmNlRXF1YXRpb247CiAgICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTsKICAgICAgY29uc3Qgbm9ybWFsID0gZXEubmk7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIG5vcm1hbCk7CiAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgbm9ybWFsLnNjYWxlKGhhbGZEaXN0LCBlcS5yaSk7CiAgICAgIG5vcm1hbC5zY2FsZSgtaGFsZkRpc3QsIGVxLnJqKTsKICAgIH0KCiAgfQoKICAvKioKICAgKiBMb2NrIGNvbnN0cmFpbnQuIFdpbGwgcmVtb3ZlIGFsbCBkZWdyZWVzIG9mIGZyZWVkb20gYmV0d2VlbiB0aGUgYm9kaWVzLgogICAqLwogIGNsYXNzIExvY2tDb25zdHJhaW50IGV4dGVuZHMgUG9pbnRUb1BvaW50Q29uc3RyYWludCB7CiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGFsZldheSA9IG5ldyBWZWMzKCk7CiAgICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpOwogICAgICBoYWxmV2F5LnNjYWxlKDAuNSwgaGFsZldheSk7CiAgICAgIGJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90Qik7CiAgICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXMKCiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXMKCiAgICAgIHRoaXMueEEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1gpOwogICAgICB0aGlzLnhCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTsKICAgICAgdGhpcy55QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWSk7CiAgICAgIHRoaXMueUIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1kpOwogICAgICB0aGlzLnpBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsKICAgICAgdGhpcy56QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWik7IC8vIC4uLmFuZCB0aGUgZm9sbG93aW5nIHJvdGF0aW9uYWwgZXF1YXRpb25zIHdpbGwga2VlcCBhbGwgcm90YXRpb25hbCBET0YncyBpbiBwbGFjZQoKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyMSwgcjIsIHIzKTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uOwogICAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMTsKICAgICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjI7CiAgICAgIGNvbnN0IHIzID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zOwogICAgICBzdXBlci51cGRhdGUoKTsgLy8gVGhlc2UgdmVjdG9yIHBhaXJzIG11c3QgYmUgb3J0aG9nb25hbAoKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueEEsIHIxLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUIsIHIxLmF4aXNCKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUEsIHIyLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekIsIHIyLmF4aXNCKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekEsIHIzLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueEIsIHIzLmF4aXNCKTsKICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogUm90YXRpb25hbCBtb3RvciBjb25zdHJhaW50LiBUcmllcyB0byBrZWVwIHRoZSByZWxhdGl2ZSBhbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2RpZXMgdG8gYSBnaXZlbiB2YWx1ZS4KICAgKi8KICBjbGFzcyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1vdG9yIHZlbG9jaXR5LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmF4aXNCID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IDA7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIHRoaXMuYmk7CiAgICAgIHRoaXMuYmo7CiAgICAgIGNvbnN0IGF4aXNBID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIGcgPSAwCiAgICAgIC8vIGdkb3QgPSBheGlzQSAqIHdpIC0gYXhpc0IgKiB3agogICAgICAvLyBnZG90ID0gRyAqIFcgPSBHICogW3ZpIHdpIHZqIHdqXQogICAgICAvLyA9PgogICAgICAvLyBHID0gWzAgYXhpc0EgMCAtYXhpc0JdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkoYXhpc0EpOwogICAgICBheGlzQi5uZWdhdGUoR0Iucm90YXRpb25hbCk7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKSAtIHRoaXMudGFyZ2V0VmVsb2NpdHk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQoKICB9CgogIC8qKgogICAqIEhpbmdlIGNvbnN0cmFpbnQuIFRoaW5rIG9mIGl0IGFzIGEgZG9vciBoaW5nZS4gSXQgdHJpZXMgdG8ga2VlcCB0aGUgZG9vciBpbiB0aGUgY29ycmVjdCBwbGFjZSBhbmQgd2l0aCB0aGUgY29ycmVjdCBvcmllbnRhdGlvbi4KICAgKi8KICBjbGFzcyBIaW5nZUNvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLgogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICBheGlzQS5ub3JtYWxpemUoKTsKICAgICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICBheGlzQi5ub3JtYWxpemUoKTsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByb3RhdGlvbmFsMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgbW90b3IgPSB0aGlzLm1vdG9yRXF1YXRpb24gPSBuZXcgUm90YXRpb25hbE1vdG9yRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtYXhGb3JjZSk7CiAgICAgIG1vdG9yLmVuYWJsZWQgPSBmYWxzZTsgLy8gTm90IGVuYWJsZWQgYnkgZGVmYXVsdAogICAgICAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXIKCiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocm90YXRpb25hbDEsIHJvdGF0aW9uYWwyLCBtb3Rvcik7CiAgICB9CiAgICAvKioKICAgICAqIGVuYWJsZU1vdG9yCiAgICAgKi8KCgogICAgZW5hYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogZGlzYWJsZU1vdG9yCiAgICAgKi8KCgogICAgZGlzYWJsZU1vdG9yKCkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3RvclNwZWVkCiAgICAgKi8KCgogICAgc2V0TW90b3JTcGVlZChzcGVlZCkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24udGFyZ2V0VmVsb2NpdHkgPSBzcGVlZDsKICAgIH0KICAgIC8qKgogICAgICogc2V0TW90b3JNYXhGb3JjZQogICAgICovCgoKICAgIHNldE1vdG9yTWF4Rm9yY2UobWF4Rm9yY2UpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgbW90b3IgPSB0aGlzLm1vdG9yRXF1YXRpb247CiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMjsKICAgICAgY29uc3Qgd29ybGRBeGlzQSA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMTsKICAgICAgY29uc3Qgd29ybGRBeGlzQiA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMjsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBHZXQgd29ybGQgYXhlcwoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdChheGlzQSwgd29ybGRBeGlzQSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQoYXhpc0IsIHdvcmxkQXhpc0IpOwogICAgICB3b3JsZEF4aXNBLnRhbmdlbnRzKHIxLmF4aXNBLCByMi5heGlzQSk7CiAgICAgIHIxLmF4aXNCLmNvcHkod29ybGRBeGlzQik7CiAgICAgIHIyLmF4aXNCLmNvcHkod29ybGRBeGlzQik7CgogICAgICBpZiAodGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQpIHsKICAgICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0EsIG1vdG9yLmF4aXNBKTsKICAgICAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0IsIG1vdG9yLmF4aXNCKTsKICAgICAgfQogICAgfQoKICB9CiAgY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb25zdHJhaW5zIHRoZSBzbGlwcGluZyBpbiBhIGNvbnRhY3QgYWxvbmcgYSB0YW5nZW50CiAgICovCiAgY2xhc3MgRnJpY3Rpb25FcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8vIFRhbmdlbnQKCiAgICAvKioKICAgICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIHNsaXBGb3JjZSkgewogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7CiAgICAgIHRoaXMucmkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy50ID0gbmV3IFZlYzMoKTsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgdGhpcy5iaTsKICAgICAgdGhpcy5iajsKICAgICAgY29uc3QgcmkgPSB0aGlzLnJpOwogICAgICBjb25zdCByaiA9IHRoaXMucmo7CiAgICAgIGNvbnN0IHJpeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanh0ID0gRnJpY3Rpb25FcXVhdGlvbl9jb21wdXRlQl90ZW1wMjsKICAgICAgY29uc3QgdCA9IHRoaXMudDsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICByaS5jcm9zcyh0LCByaXh0KTsKICAgICAgcmouY3Jvc3ModCwgcmp4dCk7IC8vIEcgPSBbLXQgLXJpeHQgdCByanh0XQogICAgICAvLyBBbmQgcmVtZW1iZXIsIHRoaXMgaXMgYSBwdXJlIHZlbG9jaXR5IGNvbnN0cmFpbnQsIGcgaXMgYWx3YXlzIHplcm8hCgogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIHQubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXh0Lm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KHQpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4dCk7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogRGVmaW5lcyB3aGF0IGhhcHBlbnMgd2hlbiB0d28gbWF0ZXJpYWxzIG1lZXQuCiAgICogQHRvZG8gUmVmYWN0b3IgbWF0ZXJpYWxzIHRvIG1hdGVyaWFsQSBhbmQgbWF0ZXJpYWxCCiAgICovCiAgY2xhc3MgQ29udGFjdE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogSWRlbnRpZmllciBvZiB0aGlzIG1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucwogICAgICogQGRlZmF1bHQgMwogICAgICovCiAgICBjb25zdHJ1Y3RvcihtMSwgbTIsIG9wdGlvbnMpIHsKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjMsCiAgICAgICAgY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb246IDMKICAgICAgfSk7CiAgICAgIHRoaXMuaWQgPSBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW20xLCBtMl07CiAgICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gb3B0aW9ucy5yZXN0aXR1dGlvbjsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOwogICAgfQoKICB9CiAgQ29udGFjdE1hdGVyaWFsLmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIERlZmluZXMgYSBwaHlzaWNzIG1hdGVyaWFsLgogICAqLwogIGNsYXNzIE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogTWF0ZXJpYWwgbmFtZS4KICAgICAqIElmIG9wdGlvbnMgaXMgYSBzdHJpbmcsIG5hbWUgd2lsbCBiZSBzZXQgdG8gdGhhdCBzdHJpbmcuCiAgICAgKiBAdG9kbyBEZXByZWNhdGUgdGhpcwogICAgICovCgogICAgLyoqIE1hdGVyaWFsIGlkLiAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gZm9yIHRoaXMgbWF0ZXJpYWwuCiAgICAgKiBJZiBub24tbmVnYXRpdmUsIGl0IHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBmcmljdGlvbiBnaXZlbiBieSBDb250YWN0TWF0ZXJpYWxzLiBJZiB0aGVyZSdzIG5vIG1hdGNoaW5nIENvbnRhY3RNYXRlcmlhbCwgdGhlIHZhbHVlIGZyb20gYGRlZmF1bHRDb250YWN0TWF0ZXJpYWxgIGluIHRoZSBXb3JsZCB3aWxsIGJlIHVzZWQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlc3RpdHV0aW9uIGZvciB0aGlzIG1hdGVyaWFsLgogICAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgcmVzdGl0dXRpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGxldCBuYW1lID0gJyc7IC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZpeAoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgewogICAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApCiAgICAgICAgbmFtZSA9IG9wdGlvbnM7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmlkID0gTWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5mcmljdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZyaWN0aW9uIDogLTE7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7CiAgICB9CgogIH0KICBNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwoKICAvKioKICAgKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNwcmluZyA9IG5ldyBTcHJpbmcoYm94Qm9keSwgc3BoZXJlQm9keSwgewogICAqICAgICAgIHJlc3RMZW5ndGg6IDAsCiAgICogICAgICAgc3RpZmZuZXNzOiA1MCwKICAgKiAgICAgICBkYW1waW5nOiAxLAogICAqICAgICB9KQogICAqCiAgICogICAgIC8vIENvbXB1dGUgdGhlIGZvcmNlIGFmdGVyIGVhY2ggc3RlcAogICAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4gewogICAqICAgICAgIHNwcmluZy5hcHBseUZvcmNlKCkKICAgKiAgICAgfSkKICAgKi8KICBjbGFzcyBTcHJpbmcgewogICAgLyoqCiAgICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLgogICAgICogQGRlZmF1bHQgMTAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNlY29uZCBjb25uZWN0ZWQgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogQW5jaG9yIGZvciBib2R5QSBpbiBsb2NhbCBib2R5QSBjb29yZGluYXRlcy4KICAgICAqIFdoZXJlIHRvIGhvb2sgdGhlIHNwcmluZyB0byBib2R5IEEsIGluIGxvY2FsIGJvZHkgY29vcmRpbmF0ZXMuCiAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuY2hvciBmb3IgYm9keUIgaW4gbG9jYWwgYm9keUIgY29vcmRpbmF0ZXMuCiAgICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLgogICAgICogQGRlZmF1bHQgbmV3IFZlYzMoKQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yZXN0TGVuZ3RoID0gdHlwZW9mIG9wdGlvbnMucmVzdExlbmd0aCA9PT0gJ251bWJlcicgPyBvcHRpb25zLnJlc3RMZW5ndGggOiAxOwogICAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDsKICAgICAgdGhpcy5kYW1waW5nID0gb3B0aW9ucy5kYW1waW5nIHx8IDE7CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubG9jYWxBbmNob3JCID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQSkgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckIpIHsKICAgICAgICB0aGlzLmxvY2FsQW5jaG9yQi5jb3B5KG9wdGlvbnMubG9jYWxBbmNob3JCKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZEFuY2hvckEob3B0aW9ucy53b3JsZEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckIpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBBLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JBLCB0aGlzLmxvY2FsQW5jaG9yQSk7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgdXNpbmcgd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgc2V0V29ybGRBbmNob3JCKHdvcmxkQW5jaG9yQikgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JBKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlBLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JBLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0aGUgc3ByaW5nIGZvcmNlIHRvIHRoZSBjb25uZWN0ZWQgYm9kaWVzLgogICAgICovCgoKICAgIGFwcGx5Rm9yY2UoKSB7CiAgICAgIGNvbnN0IGsgPSB0aGlzLnN0aWZmbmVzczsKICAgICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZzsKICAgICAgY29uc3QgbCA9IHRoaXMucmVzdExlbmd0aDsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHIgPSBhcHBseUZvcmNlX3I7CiAgICAgIGNvbnN0IHJfdW5pdCA9IGFwcGx5Rm9yY2Vfcl91bml0OwogICAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91OwogICAgICBjb25zdCBmID0gYXBwbHlGb3JjZV9mOwogICAgICBjb25zdCB0bXAgPSBhcHBseUZvcmNlX3RtcDsKICAgICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7CiAgICAgIGNvbnN0IHdvcmxkQW5jaG9yQiA9IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCOwogICAgICBjb25zdCByaSA9IGFwcGx5Rm9yY2Vfcmk7CiAgICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajsKICAgICAgY29uc3QgcmlfeF9mID0gYXBwbHlGb3JjZV9yaV94X2Y7CiAgICAgIGNvbnN0IHJqX3hfZiA9IGFwcGx5Rm9yY2VfcmpfeF9mOyAvLyBHZXQgd29ybGQgYW5jaG9ycwoKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKTsKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHMKCiAgICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7CiAgICAgIHdvcmxkQW5jaG9yQi52c3ViKGJvZHlCLnBvc2l0aW9uLCByaik7IC8vIENvbXB1dGUgZGlzdGFuY2UgdmVjdG9yIGJldHdlZW4gd29ybGQgYW5jaG9yIHBvaW50cwoKICAgICAgd29ybGRBbmNob3JCLnZzdWIod29ybGRBbmNob3JBLCByKTsKICAgICAgY29uc3QgcmxlbiA9IHIubGVuZ3RoKCk7CiAgICAgIHJfdW5pdC5jb3B5KHIpOwogICAgICByX3VuaXQubm9ybWFsaXplKCk7IC8vIENvbXB1dGUgcmVsYXRpdmUgdmVsb2NpdHkgb2YgdGhlIGFuY2hvciBwb2ludHMsIHUKCiAgICAgIGJvZHlCLnZlbG9jaXR5LnZzdWIoYm9keUEudmVsb2NpdHksIHUpOyAvLyBBZGQgcm90YXRpb25hbCB2ZWxvY2l0eQoKICAgICAgYm9keUIuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJqLCB0bXApOwogICAgICB1LnZhZGQodG1wLCB1KTsKICAgICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApOwogICAgICB1LnZzdWIodG1wLCB1KTsgLy8gRiA9IC0gayAqICggeCAtIEwgKSAtIEQgKiAoIHUgKQoKICAgICAgcl91bml0LnNjYWxlKC1rICogKHJsZW4gLSBsKSAtIGQgKiB1LmRvdChyX3VuaXQpLCBmKTsgLy8gQWRkIGZvcmNlcyB0byBib2RpZXMKCiAgICAgIGJvZHlBLmZvcmNlLnZzdWIoZiwgYm9keUEuZm9yY2UpOwogICAgICBib2R5Qi5mb3JjZS52YWRkKGYsIGJvZHlCLmZvcmNlKTsgLy8gQW5ndWxhciBmb3JjZQoKICAgICAgcmkuY3Jvc3MoZiwgcmlfeF9mKTsKICAgICAgcmouY3Jvc3MoZiwgcmpfeF9mKTsKICAgICAgYm9keUEudG9ycXVlLnZzdWIocmlfeF9mLCBib2R5QS50b3JxdWUpOwogICAgICBib2R5Qi50b3JxdWUudmFkZChyal94X2YsIGJvZHlCLnRvcnF1ZSk7CiAgICB9CgogIH0KICBjb25zdCBhcHBseUZvcmNlX3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfcl91bml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV93b3JsZEFuY2hvckEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JqID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yal94X2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfdG1wID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogV2hlZWxJbmZvCiAgICovCiAgY2xhc3MgV2hlZWxJbmZvIHsKICAgIC8qKgogICAgICogTWF4IHRyYXZlbCBkaXN0YW5jZSBvZiB0aGUgc3VzcGVuc2lvbiwgaW4gbWV0ZXJzLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBTcGVlZCB0byBhcHBseSB0byB0aGUgd2hlZWwgcm90YXRpb24gd2hlbiB0aGUgd2hlZWwgaXMgc2xpZGluZy4KICAgICAqIEBkZWZhdWx0IC0wLjEKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgc2hvdWxkIGJlIHVzZWQuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlkaW5nCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLgogICAgICovCgogICAgLyoqCiAgICAgKiBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uTG9jYWwKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogYXhsZUxvY2FsCiAgICAgKi8KCiAgICAvKioKICAgICAqIGF4bGVXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aAogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAyCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJhZGl1cwogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzCiAgICAgKiBAZGVmYXVsdCAxMDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGFtcGluZ0NvbXByZXNzaW9uCiAgICAgKiBAZGVmYXVsdCAxMAogICAgICovCgogICAgLyoqCiAgICAgKiBkYW1waW5nUmVsYXhhdGlvbgogICAgICogQGRlZmF1bHQgMTAKICAgICAqLwoKICAgIC8qKgogICAgICogZnJpY3Rpb25TbGlwCiAgICAgKiBAZGVmYXVsdCAxMC41CiAgICAgKi8KCiAgICAvKiogZm9yd2FyZEFjY2VsZXJhdGlvbiAqLwoKICAgIC8qKiBzaWRlQWNjZWxlcmF0aW9uICovCgogICAgLyoqCiAgICAgKiBzdGVlcmluZwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy4KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGVsdGFSb3RhdGlvbgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiByb2xsSW5mbHVlbmNlCiAgICAgKiBAZGVmYXVsdCAwLjAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heFN1c3BlbnNpb25Gb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBlbmdpbmVGb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBicmFrZQogICAgICovCgogICAgLyoqCiAgICAgKiBpc0Zyb250V2hlZWwKICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5CiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25Gb3JjZQogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlwSW5mbwogICAgICovCgogICAgLyoqCiAgICAgKiBza2lkSW5mbwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNpZGVJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGZvcndhcmRJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVlbCB3b3JsZCB0cmFuc2Zvcm0uCiAgICAgKi8KCiAgICAvKioKICAgICAqIGlzSW5Db250YWN0CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkOiBuZXcgVmVjMygpLAogICAgICAgIGRpcmVjdGlvbkxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGRpcmVjdGlvbldvcmxkOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBheGxlV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgc3VzcGVuc2lvblJlc3RMZW5ndGg6IDEsCiAgICAgICAgc3VzcGVuc2lvbk1heExlbmd0aDogMiwKICAgICAgICByYWRpdXM6IDEsCiAgICAgICAgc3VzcGVuc2lvblN0aWZmbmVzczogMTAwLAogICAgICAgIGRhbXBpbmdDb21wcmVzc2lvbjogMTAsCiAgICAgICAgZGFtcGluZ1JlbGF4YXRpb246IDEwLAogICAgICAgIGZyaWN0aW9uU2xpcDogMTAuNSwKICAgICAgICBmb3J3YXJkQWNjZWxlcmF0aW9uOiAxLAogICAgICAgIHNpZGVBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc3RlZXJpbmc6IDAsCiAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgZGVsdGFSb3RhdGlvbjogMCwKICAgICAgICByb2xsSW5mbHVlbmNlOiAwLjAxLAogICAgICAgIG1heFN1c3BlbnNpb25Gb3JjZTogTnVtYmVyLk1BWF9WQUxVRSwKICAgICAgICBpc0Zyb250V2hlZWw6IHRydWUsCiAgICAgICAgY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOiAxLAogICAgICAgIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5OiAwLAogICAgICAgIHN1c3BlbnNpb25Gb3JjZTogMCwKICAgICAgICBzbGlwSW5mbzogMCwKICAgICAgICBza2lkSW5mbzogMCwKICAgICAgICBzdXNwZW5zaW9uTGVuZ3RoOiAwLAogICAgICAgIG1heFN1c3BlbnNpb25UcmF2ZWw6IDEsCiAgICAgICAgdXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDogZmFsc2UsCiAgICAgICAgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDogLTAuMQogICAgICB9KTsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uVHJhdmVsID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSBvcHRpb25zLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQ7CiAgICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsID0gb3B0aW9ucy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbkxvY2FsID0gb3B0aW9ucy5kaXJlY3Rpb25Mb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbldvcmxkID0gb3B0aW9ucy5kaXJlY3Rpb25Xb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLmF4bGVMb2NhbCA9IG9wdGlvbnMuYXhsZUxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZVdvcmxkID0gb3B0aW9ucy5heGxlV29ybGQuY2xvbmUoKTsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgIHRoaXMuc3VzcGVuc2lvbk1heExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvbk1heExlbmd0aDsKICAgICAgdGhpcy5yYWRpdXMgPSBvcHRpb25zLnJhZGl1czsKICAgICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gb3B0aW9ucy5zdXNwZW5zaW9uU3RpZmZuZXNzOwogICAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IG9wdGlvbnMuZGFtcGluZ0NvbXByZXNzaW9uOwogICAgICB0aGlzLmRhbXBpbmdSZWxheGF0aW9uID0gb3B0aW9ucy5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgdGhpcy5mcmljdGlvblNsaXAgPSBvcHRpb25zLmZyaWN0aW9uU2xpcDsKICAgICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gb3B0aW9ucy5mb3J3YXJkQWNjZWxlcmF0aW9uOwogICAgICB0aGlzLnNpZGVBY2NlbGVyYXRpb24gPSBvcHRpb25zLnNpZGVBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc3RlZXJpbmcgPSAwOwogICAgICB0aGlzLnJvdGF0aW9uID0gMDsKICAgICAgdGhpcy5kZWx0YVJvdGF0aW9uID0gMDsKICAgICAgdGhpcy5yb2xsSW5mbHVlbmNlID0gb3B0aW9ucy5yb2xsSW5mbHVlbmNlOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IG9wdGlvbnMubWF4U3VzcGVuc2lvbkZvcmNlOwogICAgICB0aGlzLmVuZ2luZUZvcmNlID0gMDsKICAgICAgdGhpcy5icmFrZSA9IDA7CiAgICAgIHRoaXMuaXNGcm9udFdoZWVsID0gb3B0aW9ucy5pc0Zyb250V2hlZWw7CiAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMTsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgdGhpcy5zbGlwSW5mbyA9IDA7CiAgICAgIHRoaXMuc2tpZEluZm8gPSAwOwogICAgICB0aGlzLnN1c3BlbnNpb25MZW5ndGggPSAwOwogICAgICB0aGlzLnNpZGVJbXB1bHNlID0gMDsKICAgICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgIHRoaXMucmF5Y2FzdFJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKCk7CiAgICAgIHRoaXMuaXNJbkNvbnRhY3QgPSBmYWxzZTsKICAgIH0KCiAgICB1cGRhdGVXaGVlbChjaGFzc2lzKSB7CiAgICAgIGNvbnN0IHJheWNhc3RSZXN1bHQgPSB0aGlzLnJheWNhc3RSZXN1bHQ7CgogICAgICBpZiAodGhpcy5pc0luQ29udGFjdCkgewogICAgICAgIGNvbnN0IHByb2plY3QgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChyYXljYXN0UmVzdWx0LmRpcmVjdGlvbldvcmxkKTsKICAgICAgICByYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNoYXNzaXMuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocmVscG9zLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CiAgICAgICAgY29uc3QgcHJvalZlbCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKCiAgICAgICAgaWYgKHByb2plY3QgPj0gLTAuMSkgewogICAgICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIHByb2plY3Q7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gcHJvalZlbCAqIGludjsKICAgICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBOb3QgaW4gY29udGFjdCA6IHBvc2l0aW9uIHdoZWVsIGluIGEgbmljZSAocmVzdCBsZW5ndGgpIHBvc2l0aW9uCiAgICAgICAgcmF5Y2FzdFJlc3VsdC5zdXNwZW5zaW9uTGVuZ3RoID0gdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgIHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQuc2NhbGUoLTEsIHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpOwogICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CiAgICB9CgogIH0KICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogVmVoaWNsZSBoZWxwZXIgY2xhc3MgdGhhdCBjYXN0cyByYXlzIGZyb20gdGhlIHdoZWVsIHBvc2l0aW9ucyB0b3dhcmRzIHRoZSBncm91bmQgYW5kIGFwcGxpZXMgZm9yY2VzLgogICAqLwogIGNsYXNzIFJheWNhc3RWZWhpY2xlIHsKICAgIC8qKiBUaGUgY2FyIGNoYXNzaXMgYm9keS4gKi8KCiAgICAvKiogVGhlIHdoZWVscy4gKi8KCiAgICAvKiogV2lsbCBiZSBzZXQgdG8gdHJ1ZSBpZiB0aGUgY2FyIGlzIHNsaWRpbmcuICovCgogICAgLyoqIEluZGV4IG9mIHRoZSByaWdodCBheGlzLiB4PTAsIHk9MSwgej0yICovCgogICAgLyoqIEluZGV4IG9mIHRoZSBmb3J3YXJkIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHVwIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogVGhlIGNvbnN0cmFpbnRzLiAqLwoKICAgIC8qKiBPcHRpb25hbCBwcmUtc3RlcCBjYWxsYmFjay4gKi8KCiAgICAvKiogTnVtYmVyIG9mIHdoZWVscyBvbiB0aGUgZ3JvdW5kLiAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTsKICAgICAgdGhpcy53aGVlbEluZm9zID0gW107CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4UmlnaHRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgOiAyOwogICAgICB0aGlzLmluZGV4Rm9yd2FyZEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyA6IDA7CiAgICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7fTsKCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDA7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSB3aGVlbC4gRm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgYFdoZWVsSW5mb2AuCiAgICAgKi8KCgogICAgYWRkV2hlZWwob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBpbmZvID0gbmV3IFdoZWVsSW5mbyhvcHRpb25zKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLndoZWVsSW5mb3MubGVuZ3RoOwogICAgICB0aGlzLndoZWVsSW5mb3MucHVzaChpbmZvKTsKICAgICAgcmV0dXJuIGluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHN0ZWVyaW5nIHZhbHVlIG9mIGEgd2hlZWwuCiAgICAgKi8KCgogICAgc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgd2hlZWwuc3RlZXJpbmcgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcAogICAgICovCgoKICAgIGFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmVuZ2luZUZvcmNlID0gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYnJha2luZyBmb3JjZSBvZiBhIHdoZWVsCiAgICAgKi8KCgogICAgc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmJyYWtlID0gYnJha2U7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICBhZGRUb1dvcmxkKHdvcmxkKSB7CiAgICAgIHdvcmxkLmFkZEJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7CiAgICAgICAgdGhhdC51cGRhdGVWZWhpY2xlKHdvcmxkLmR0KTsKICAgICAgfTsKCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG9uZSBvZiB0aGUgd2hlZWwgYXhsZXMsIHdvcmxkLW9yaWVudGVkLgogICAgICovCgoKICAgIGdldFZlaGljbGVBeGlzV29ybGQoYXhpc0luZGV4LCByZXN1bHQpIHsKICAgICAgcmVzdWx0LnNldChheGlzSW5kZXggPT09IDAgPyAxIDogMCwgYXhpc0luZGV4ID09PSAxID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMiA/IDEgOiAwKTsKICAgICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVzdWx0LCByZXN1bHQpOwogICAgfQoKICAgIHVwZGF0ZVZlaGljbGUodGltZVN0ZXApIHsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpOwogICAgICB9CgogICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAzLjYgKiBjaGFzc2lzQm9keS52ZWxvY2l0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZm9yd2FyZFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5nZXRWZWhpY2xlQXhpc1dvcmxkKHRoaXMuaW5kZXhGb3J3YXJkQXhpcywgZm9yd2FyZFdvcmxkKTsKCiAgICAgIGlmIChmb3J3YXJkV29ybGQuZG90KGNoYXNzaXNCb2R5LnZlbG9jaXR5KSA8IDApIHsKICAgICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgKj0gLTE7CiAgICAgIH0gLy8gc2ltdWxhdGUgc3VzcGVuc2lvbgoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLmNhc3RSYXkod2hlZWxJbmZvc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlU3VzcGVuc2lvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGltcHVsc2UgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIC8vYXBwbHkgc3VzcGVuc2lvbiBmb3JjZQogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBsZXQgc3VzcGVuc2lvbkZvcmNlID0gd2hlZWwuc3VzcGVuc2lvbkZvcmNlOwoKICAgICAgICBpZiAoc3VzcGVuc2lvbkZvcmNlID4gd2hlZWwubWF4U3VzcGVuc2lvbkZvcmNlKSB7CiAgICAgICAgICBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwLCBpbXB1bHNlKTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVscG9zKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVGcmljdGlvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2ogPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBmd2QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB2ZWwgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsgLy9jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwogICAgICAgIC8vd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbHBvcyk7CgogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgdmVsKTsgLy8gSGFjayB0byBnZXQgdGhlIHJvdGF0aW9uIGluIHRoZSBjb3JyZWN0IGRpcmVjdGlvbgoKICAgICAgICBsZXQgbSA9IDE7CgogICAgICAgIHN3aXRjaCAodGhpcy5pbmRleFVwQXhpcykgewogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBtID0gLTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvaiA9IGZ3ZC5kb3Qod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHByb2osIGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2opOwogICAgICAgICAgZndkLnZzdWIoaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiwgZndkKTsKICAgICAgICAgIGNvbnN0IHByb2oyID0gZndkLmRvdCh2ZWwpOwogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IG0gKiBwcm9qMiAqIHRpbWVTdGVwIC8gd2hlZWwucmFkaXVzOwogICAgICAgIH0KCiAgICAgICAgaWYgKCh3aGVlbC5zbGlkaW5nIHx8ICF3aGVlbC5pc0luQ29udGFjdCkgJiYgd2hlZWwuZW5naW5lRm9yY2UgIT09IDAgJiYgd2hlZWwudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCkgewogICAgICAgICAgLy8gQXBwbHkgY3VzdG9tIHJvdGF0aW9uIHdoZW4gYWNjZWxlcmF0aW5nIGFuZCBzbGlkaW5nCiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gKHdoZWVsLmVuZ2luZUZvcmNlID4gMCA/IDEgOiAtMSkgKiB3aGVlbC5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkICogdGltZVN0ZXA7CiAgICAgICAgfSAvLyBMb2NrIHdoZWVscwoKCiAgICAgICAgaWYgKE1hdGguYWJzKHdoZWVsLmJyYWtlKSA+IE1hdGguYWJzKHdoZWVsLmVuZ2luZUZvcmNlKSkgewogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IDA7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yb3RhdGlvbiArPSB3aGVlbC5kZWx0YVJvdGF0aW9uOyAvLyBVc2UgdGhlIG9sZCB2YWx1ZQoKICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uICo9IDAuOTk7IC8vIGRhbXBpbmcgb2Ygcm90YXRpb24gd2hlbiBub3QgaW4gY29udGFjdAogICAgICB9CiAgICB9CgogICAgdXBkYXRlU3VzcGVuc2lvbihkZWx0YVRpbWUpIHsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBjaGFzc2lzTWFzcyA9IGNoYXNzaXNCb2R5Lm1hc3M7CiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgd19pdCA9IDA7IHdfaXQgPCBudW1XaGVlbHM7IHdfaXQrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1t3X2l0XTsKCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICBsZXQgZm9yY2U7IC8vIFNwcmluZwoKICAgICAgICAgIGNvbnN0IHN1c3BfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgICAgICBjb25zdCBjdXJyZW50X2xlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICBjb25zdCBsZW5ndGhfZGlmZiA9IHN1c3BfbGVuZ3RoIC0gY3VycmVudF9sZW5ndGg7CiAgICAgICAgICBmb3JjZSA9IHdoZWVsLnN1c3BlbnNpb25TdGlmZm5lc3MgKiBsZW5ndGhfZGlmZiAqIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbjsgLy8gRGFtcGVyCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkX3JlbF92ZWwgPSB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eTsKICAgICAgICAgIGxldCBzdXNwX2RhbXBpbmc7CgogICAgICAgICAgaWYgKHByb2plY3RlZF9yZWxfdmVsIDwgMCkgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3JjZSAtPSBzdXNwX2RhbXBpbmcgKiBwcm9qZWN0ZWRfcmVsX3ZlbDsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IGZvcmNlICogY2hhc3Npc01hc3M7CgogICAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA8IDApIHsKICAgICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KCgogICAgcmVtb3ZlRnJvbVdvcmxkKHdvcmxkKSB7CiAgICAgIHRoaXMuY29uc3RyYWludHM7CiAgICAgIHdvcmxkLnJlbW92ZUJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgfQoKICAgIGNhc3RSYXkod2hlZWwpIHsKICAgICAgY29uc3QgcmF5dmVjdG9yID0gY2FzdFJheV9yYXl2ZWN0b3I7CiAgICAgIGNvbnN0IHRhcmdldCA9IGNhc3RSYXlfdGFyZ2V0OwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGxldCBkZXB0aCA9IC0xOwogICAgICBjb25zdCByYXlsZW4gPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLnJhZGl1czsKICAgICAgd2hlZWwuZGlyZWN0aW9uV29ybGQuc2NhbGUocmF5bGVuLCByYXl2ZWN0b3IpOwogICAgICBjb25zdCBzb3VyY2UgPSB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ7CiAgICAgIHNvdXJjZS52YWRkKHJheXZlY3RvciwgdGFyZ2V0KTsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQ7CiAgICAgIHJheWNhc3RSZXN1bHQucmVzZXQoKTsgLy8gVHVybiBvZmYgcmF5IGNvbGxpc2lvbiB3aXRoIHRoZSBjaGFzc2lzIHRlbXBvcmFyaWx5CgogICAgICBjb25zdCBvbGRTdGF0ZSA9IGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlOyAvLyBDYXN0IHJheSBhZ2FpbnN0IHdvcmxkCgogICAgICB0aGlzLndvcmxkLnJheVRlc3Qoc291cmNlLCB0YXJnZXQsIHJheWNhc3RSZXN1bHQpOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IG9sZFN0YXRlOwogICAgICBjb25zdCBvYmplY3QgPSByYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuZ3JvdW5kT2JqZWN0ID0gMDsKCiAgICAgIGlmIChvYmplY3QpIHsKICAgICAgICBkZXB0aCA9IHJheWNhc3RSZXN1bHQuZGlzdGFuY2U7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgd2hlZWwuaXNJbkNvbnRhY3QgPSB0cnVlOwogICAgICAgIGNvbnN0IGhpdERpc3RhbmNlID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gaGl0RGlzdGFuY2UgLSB3aGVlbC5yYWRpdXM7IC8vIGNsYW1wIG9uIG1heCBzdXNwZW5zaW9uIHRyYXZlbAoKICAgICAgICBjb25zdCBtaW5TdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggLSB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIGNvbnN0IG1heFN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoIDwgbWluU3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1pblN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA+IG1heFN1c3BlbnNpb25MZW5ndGgpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtYXhTdXNwZW5zaW9uTGVuZ3RoOwogICAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5yZXNldCgpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGVub21pbmF0b3IgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdCh3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgICAgY29uc3QgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQgPSBuZXcgVmVjMygpOwogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwogICAgICAgIGNvbnN0IHByb2pWZWwgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CgogICAgICAgIGlmIChkZW5vbWluYXRvciA+PSAtMC4xKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIGRlbm9taW5hdG9yOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL3B1dCB3aGVlbCBpbmZvIGFzIGluIHJlc3QgcG9zaXRpb24KICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggKyAwICogd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CgogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CgogICAgdXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCkgewogICAgICB3aGVlbC5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNoYXNzaXNCb2R5LnBvaW50VG9Xb3JsZEZyYW1lKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCwgd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmRpcmVjdGlvbkxvY2FsLCB3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZSh3aGVlbC5heGxlTG9jYWwsIHdoZWVsLmF4bGVXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBvbmUgb2YgdGhlIHdoZWVsIHRyYW5zZm9ybS4KICAgICAqIE5vdGUgd2hlbiByZW5kZXJpbmcgd2hlZWxzOiBkdXJpbmcgZWFjaCBzdGVwLCB3aGVlbCB0cmFuc2Zvcm1zIGFyZSB1cGRhdGVkIEJFRk9SRSB0aGUgY2hhc3NpczsgaWUuIHRoZWlyIHBvc2l0aW9uIGJlY29tZXMgaW52YWxpZCBhZnRlciB0aGUgc3RlcC4gVGh1cyB3aGVuIHlvdSByZW5kZXIgd2hlZWxzLCB5b3UgbXVzdCB1cGRhdGUgd2hlZWwgdHJhbnNmb3JtcyBiZWZvcmUgcmVuZGVyaW5nIHRoZW0uIFNlZSByYXljYXN0VmVoaWNsZSBkZW1vIGZvciBhbiBleGFtcGxlLgogICAgICogQHBhcmFtIHdoZWVsSW5kZXggVGhlIHdoZWVsIGluZGV4IHRvIHVwZGF0ZS4KICAgICAqLwoKCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybSh3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHVwID0gdG1wVmVjNDsKICAgICAgY29uc3QgcmlnaHQgPSB0bXBWZWM1OwogICAgICBjb25zdCBmd2QgPSB0bXBWZWM2OwogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKTsKICAgICAgd2hlZWwuZGlyZWN0aW9uTG9jYWwuc2NhbGUoLTEsIHVwKTsKICAgICAgcmlnaHQuY29weSh3aGVlbC5heGxlTG9jYWwpOwogICAgICB1cC5jcm9zcyhyaWdodCwgZndkKTsKICAgICAgZndkLm5vcm1hbGl6ZSgpOwogICAgICByaWdodC5ub3JtYWxpemUoKTsgLy8gUm90YXRlIGFyb3VuZCBzdGVlcmluZyBvdmVyIHRoZSB3aGVlbEF4bGUKCiAgICAgIGNvbnN0IHN0ZWVyaW5nID0gd2hlZWwuc3RlZXJpbmc7CiAgICAgIGNvbnN0IHN0ZWVyaW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgc3RlZXJpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZSh1cCwgc3RlZXJpbmcpOwogICAgICBjb25zdCByb3RhdGluZ09ybiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHJvdGF0aW5nT3JuLnNldEZyb21BeGlzQW5nbGUocmlnaHQsIHdoZWVsLnJvdGF0aW9uKTsgLy8gV29ybGQgcm90YXRpb24gb2YgdGhlIHdoZWVsCgogICAgICBjb25zdCBxID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucXVhdGVybmlvbjsKICAgICAgdGhpcy5jaGFzc2lzQm9keS5xdWF0ZXJuaW9uLm11bHQoc3RlZXJpbmdPcm4sIHEpOwogICAgICBxLm11bHQocm90YXRpbmdPcm4sIHEpOwogICAgICBxLm5vcm1hbGl6ZSgpOyAvLyB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHAgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5wb3NpdGlvbjsKICAgICAgcC5jb3B5KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgcC5zY2FsZSh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoLCBwKTsKICAgICAgcC52YWRkKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgcCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgdHJhbnNmb3JtIG9mIG9uZSBvZiB0aGUgd2hlZWxzCiAgICAgKi8KCgogICAgZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbEluZGV4KSB7CiAgICAgIHJldHVybiB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0ud29ybGRUcmFuc2Zvcm07CiAgICB9CgogICAgdXBkYXRlRnJpY3Rpb24odGltZVN0ZXApIHsKICAgICAgY29uc3Qgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qOyAvL2NhbGN1bGF0ZSB0aGUgaW1wdWxzZSwgc28gdGhhdCB0aGUgd2hlZWxzIGRvbid0IG1vdmUgc2lkZXdhcmRzCgogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBmb3J3YXJkV1MgPSB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1M7CiAgICAgIGNvbnN0IGF4bGUgPSB1cGRhdGVGcmljdGlvbl9heGxlOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kKys7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwOwoKICAgICAgICBpZiAoIWZvcndhcmRXU1tpXSkgewogICAgICAgICAgZm9yd2FyZFdTW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CgogICAgICAgIGlmICghYXhsZVtpXSkgewogICAgICAgICAgYXhsZVtpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgYXhsZWkgPSBheGxlW2ldOwogICAgICAgICAgY29uc3Qgd2hlZWxUcmFucyA9IHRoaXMuZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZChpKTsgLy8gR2V0IHdvcmxkIGF4bGUKCiAgICAgICAgICB3aGVlbFRyYW5zLnZlY3RvclRvV29ybGRGcmFtZShkaXJlY3Rpb25zW3RoaXMuaW5kZXhSaWdodEF4aXNdLCBheGxlaSk7CiAgICAgICAgICBjb25zdCBzdXJmTm9ybWFsV1MgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkOwogICAgICAgICAgY29uc3QgcHJvaiA9IGF4bGVpLmRvdChzdXJmTm9ybWFsV1MpOwogICAgICAgICAgc3VyZk5vcm1hbFdTLnNjYWxlKHByb2osIHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaik7CiAgICAgICAgICBheGxlaS52c3ViKHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiwgYXhsZWkpOwogICAgICAgICAgYXhsZWkubm9ybWFsaXplKCk7CiAgICAgICAgICBzdXJmTm9ybWFsV1MuY3Jvc3MoYXhsZWksIGZvcndhcmRXU1tpXSk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0ubm9ybWFsaXplKCk7CiAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoY2hhc3Npc0JvZHksIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGF4bGVpKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHNpZGVGcmljdGlvblN0aWZmbmVzczI7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBzaWRlRmFjdG9yID0gMTsKICAgICAgY29uc3QgZndkRmFjdG9yID0gMC41OwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwogICAgICAgIGxldCByb2xsaW5nRnJpY3Rpb24gPSAwOwogICAgICAgIHdoZWVsLnNsaXBJbmZvID0gMTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UgPSAwOwogICAgICAgICAgY29uc3QgbWF4SW1wdWxzZSA9IHdoZWVsLmJyYWtlID8gd2hlZWwuYnJha2UgOiBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZTsgLy8gYnRXaGVlbENvbnRhY3RQb2ludCBjb250YWN0UHQoY2hhc3Npc0JvZHksZ3JvdW5kT2JqZWN0LHdoZWVsSW5mcmF5Y2FzdEluZm8uaGl0UG9pbnRXb3JsZCxmb3J3YXJkV1Nbd2hlZWxdLG1heEltcHVsc2UpOwogICAgICAgICAgLy8gcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjb250YWN0UHQpOwoKICAgICAgICAgIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY2hhc3Npc0JvZHksIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBmb3J3YXJkV1NbaV0sIG1heEltcHVsc2UpOwogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uICs9IHdoZWVsLmVuZ2luZUZvcmNlICogdGltZVN0ZXA7IC8vIHJvbGxpbmdGcmljdGlvbiA9IDA7CgogICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4SW1wdWxzZSAvIHJvbGxpbmdGcmljdGlvbjsKICAgICAgICAgIHdoZWVsLnNsaXBJbmZvICo9IGZhY3RvcjsKICAgICAgICB9IC8vc3dpdGNoIGJldHdlZW4gYWN0aXZlIHJvbGxpbmcgKHRocm90dGxlKSwgYnJha2luZyBhbmQgbm9uLWFjdGl2ZSByb2xsaW5nIGZyaWN0aW9uIChudGhyb3R0bGUvYnJlYWspCgoKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuc2tpZEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CiAgICAgICAgICBjb25zdCBtYXhpbXAgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgKiB0aW1lU3RlcCAqIHdoZWVsLmZyaWN0aW9uU2xpcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNpZGUgPSBtYXhpbXA7CiAgICAgICAgICBjb25zdCBtYXhpbXBTcXVhcmVkID0gbWF4aW1wICogbWF4aW1wU2lkZTsKICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gcm9sbGluZ0ZyaWN0aW9uOyAvL3doZWVsSW5mby5lbmdpbmVGb3JjZSogdGltZVN0ZXA7CgogICAgICAgICAgY29uc3QgeCA9IHdoZWVsLmZvcndhcmRJbXB1bHNlICogZndkRmFjdG9yIC8gd2hlZWwuZm9yd2FyZEFjY2VsZXJhdGlvbjsKICAgICAgICAgIGNvbnN0IHkgPSB3aGVlbC5zaWRlSW1wdWxzZSAqIHNpZGVGYWN0b3IgLyB3aGVlbC5zaWRlQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgaW1wdWxzZVNxdWFyZWQgPSB4ICogeCArIHkgKiB5OwogICAgICAgICAgd2hlZWwuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgICAgIGlmIChpbXB1bHNlU3F1YXJlZCA+IG1heGltcFNxdWFyZWQpIHsKICAgICAgICAgICAgdGhpcy5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgd2hlZWwuc2xpZGluZyA9IHRydWU7CiAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IG1heGltcCAvIE1hdGguc3FydChpbXB1bHNlU3F1YXJlZCk7CiAgICAgICAgICAgIHdoZWVsLnNraWRJbmZvICo9IGZhY3RvcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsaWRpbmcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CgogICAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICAgIGlmICh3aGVlbC5za2lkSW5mbyA8IDEpIHsKICAgICAgICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBhcHBseSB0aGUgaW1wdWxzZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IHJlbF9wb3MgPSBuZXcgVmVjMygpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxfcG9zKTsgLy8gY2Fubm9ucyBhcHBseWltcHVsc2UgaXMgdXNpbmcgd29ybGQgY29vcmQgZm9yIHRoZSBwb3NpdGlvbgogICAgICAgIC8vcmVsX3Bvcy5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgIGlmICh3aGVlbC5mb3J3YXJkSW1wdWxzZSAhPT0gMCkgewogICAgICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0uc2NhbGUod2hlZWwuZm9yd2FyZEltcHVsc2UsIGltcHVsc2UpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbF9wb3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgICBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1Yihncm91bmRPYmplY3QucG9zaXRpb24sIHJlbF9wb3MyKTsgLy9yZWxfcG9zMi5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgICAgY29uc3Qgc2lkZUltcCA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBheGxlW2ldLnNjYWxlKHdoZWVsLnNpZGVJbXB1bHNlLCBzaWRlSW1wKTsgLy8gU2NhbGUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIGluIHRoZSB1cCBkaXJlY3Rpb24gd2l0aCByb2xsSW5mbHVlbmNlLgogICAgICAgICAgLy8gSWYgcm9sbEluZmx1ZW5jZSBpcyAxLCB0aGUgaW1wdWxzZSB3aWxsIGJlIGFwcGxpZWQgb24gdGhlIGhpdFBvaW50IChlYXN5IHRvIHJvbGwgb3ZlciksIGlmIGl0IGlzIHplcm8gaXQgd2lsbCBiZSBhcHBsaWVkIGluIHRoZSBzYW1lIHBsYW5lIGFzIHRoZSBjZW50ZXIgb2YgbWFzcyAobm90IGVhc3kgdG8gcm9sbCBvdmVyKS4KCiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb0xvY2FsRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICByZWxfcG9zWyd4eXonW3RoaXMuaW5kZXhVcEF4aXNdXSAqPSB3aGVlbC5yb2xsSW5mbHVlbmNlOwogICAgICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHJlbF9wb3MsIHJlbF9wb3MpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MpOyAvL2FwcGx5IGZyaWN0aW9uIGltcHVsc2Ugb24gdGhlIGdyb3VuZAoKICAgICAgICAgIHNpZGVJbXAuc2NhbGUoLTEsIHNpZGVJbXApOwogICAgICAgICAgZ3JvdW5kT2JqZWN0LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM0ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM1ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM2ID0gbmV3IFZlYzMoKTsKICBuZXcgUmF5KCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBjYXN0UmF5X3JheXZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FzdFJheV90YXJnZXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGRpcmVjdGlvbnMgPSBbbmV3IFZlYzMoMSwgMCwgMCksIG5ldyBWZWMzKDAsIDEsIDApLCBuZXcgVmVjMygwLCAwLCAxKV07CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gbmV3IFZlYzMoKTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9heGxlID0gW107CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTID0gW107CiAgY29uc3Qgc2lkZUZyaWN0aW9uU3RpZmZuZXNzMiA9IDE7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gY2FsY1JvbGxpbmdGcmljdGlvbihib2R5MCwgYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQsIG1heEltcHVsc2UpIHsKICAgIGxldCBqMSA9IDA7CiAgICBjb25zdCBjb250YWN0UG9zV29ybGQgPSBmcmljdGlvblBvc1dvcmxkOyAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7CiAgICAvLyBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CgogICAgY29uc3QgdmVsMSA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMTsKICAgIGNvbnN0IHZlbDIgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDI7CiAgICBjb25zdCB2ZWwgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDsgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTAucG9zaXRpb24sIHJlbF9wb3MxKTsKICAgIC8vIGNvbnRhY3RQb3NXb3JsZC52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMik7CgogICAgYm9keTAuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoY29udGFjdFBvc1dvcmxkLCB2ZWwxKTsKICAgIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KGNvbnRhY3RQb3NXb3JsZCwgdmVsMik7CiAgICB2ZWwxLnZzdWIodmVsMiwgdmVsKTsKICAgIGNvbnN0IHZyZWwgPSBmcmljdGlvbkRpcmVjdGlvbldvcmxkLmRvdCh2ZWwpOwogICAgY29uc3QgZGVub20wID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5MCwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCk7CiAgICBjb25zdCBkZW5vbTEgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTsKICAgIGNvbnN0IHJlbGF4YXRpb24gPSAxOwogICAgY29uc3QgamFjRGlhZ0FCSW52ID0gcmVsYXhhdGlvbiAvIChkZW5vbTAgKyBkZW5vbTEpOyAvLyBjYWxjdWxhdGUgaiB0aGF0IG1vdmVzIHVzIHRvIHplcm8gcmVsYXRpdmUgdmVsb2NpdHkKCiAgICBqMSA9IC12cmVsICogamFjRGlhZ0FCSW52OwoKICAgIGlmIChtYXhJbXB1bHNlIDwgajEpIHsKICAgICAgajEgPSBtYXhJbXB1bHNlOwogICAgfQoKICAgIGlmIChqMSA8IC1tYXhJbXB1bHNlKSB7CiAgICAgIGoxID0gLW1heEltcHVsc2U7CiAgICB9CgogICAgcmV0dXJuIGoxOwogIH0KCiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbSA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keSwgcG9zLCBub3JtYWwpIHsKICAgIGNvbnN0IHIwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMDsKICAgIGNvbnN0IGMwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMDsKICAgIGNvbnN0IHZlYyA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfdmVjOwogICAgY29uc3QgbSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbTsKICAgIHBvcy52c3ViKGJvZHkucG9zaXRpb24sIHIwKTsKICAgIHIwLmNyb3NzKG5vcm1hbCwgYzApOwogICAgYm9keS5pbnZJbmVydGlhV29ybGQudm11bHQoYzAsIG0pOwogICAgbS5jcm9zcyhyMCwgdmVjKTsKICAgIHJldHVybiBib2R5Lmludk1hc3MgKyBub3JtYWwuZG90KHZlYyk7CiAgfQoKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwgPSBuZXcgVmVjMygpOyAvLyBiaWxhdGVyYWwgY29uc3RyYWludCBiZXR3ZWVuIHR3byBkeW5hbWljIG9iamVjdHMKCiAgZnVuY3Rpb24gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbChib2R5MSwgcG9zMSwgYm9keTIsIHBvczIsIG5vcm1hbCkgewogICAgY29uc3Qgbm9ybWFsTGVuU3FyID0gbm9ybWFsLmxlbmd0aFNxdWFyZWQoKTsKCiAgICBpZiAobm9ybWFsTGVuU3FyID4gMS4xKSB7CiAgICAgIHJldHVybiAwOyAvLyBubyBpbXB1bHNlCiAgICB9IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTsKICAgIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKICAgIC8vIHBvczEudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczEpOwogICAgLy8gcG9zMi52c3ViKGJvZHkyLnBvc2l0aW9uLCByZWxfcG9zMik7CgoKICAgIGNvbnN0IHZlbDEgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDE7CiAgICBjb25zdCB2ZWwyID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyOwogICAgY29uc3QgdmVsID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWw7CiAgICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MxLCB2ZWwxKTsKICAgIGJvZHkyLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczIsIHZlbDIpOwogICAgdmVsMS52c3ViKHZlbDIsIHZlbCk7CiAgICBjb25zdCByZWxfdmVsID0gbm9ybWFsLmRvdCh2ZWwpOwogICAgY29uc3QgY29udGFjdERhbXBpbmcgPSAwLjI7CiAgICBjb25zdCBtYXNzVGVybSA9IDEgLyAoYm9keTEuaW52TWFzcyArIGJvZHkyLmludk1hc3MpOwogICAgY29uc3QgaW1wdWxzZSA9IC1jb250YWN0RGFtcGluZyAqIHJlbF92ZWwgKiBtYXNzVGVybTsKICAgIHJldHVybiBpbXB1bHNlOwogIH0KCiAgLyoqCiAgICogU3BoZXJpY2FsIHNoYXBlCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzID0gMQogICAqICAgICBjb25zdCBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKHJhZGl1cykKICAgKiAgICAgY29uc3Qgc3BoZXJlQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBzcGhlcmVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHNwaGVyZUJvZHkpCiAgICovCiAgY2xhc3MgU3BoZXJlIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqCiAgICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSwgYSBub24tbmVnYXRpdmUgbnVtYmVyLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihyYWRpdXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlNQSEVSRQogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXMgIT09IHVuZGVmaW5lZCA/IHJhZGl1cyA6IDEuMDsKCiAgICAgIGlmICh0aGlzLnJhZGl1cyA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGhlcmUgcmFkaXVzIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYSAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IEkgPSAyLjAgKiBtYXNzICogdGhpcy5yYWRpdXMgKiB0aGlzLnJhZGl1cyAvIDUuMDsKICAgICAgdGFyZ2V0LnggPSBJOwogICAgICB0YXJnZXQueSA9IEk7CiAgICAgIHRhcmdldC56ID0gSTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKiB2b2x1bWUgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIE1hdGgucG93KHRoaXMucmFkaXVzLCAzKSAvIDMuMDsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHRoaXMucmFkaXVzOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIGNvbnN0IHIgPSB0aGlzLnJhZGl1czsKICAgICAgY29uc3QgYXhlcyA9IFsneCcsICd5JywgJ3onXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGF4ID0gYXhlc1tpXTsKICAgICAgICBtaW5bYXhdID0gcG9zW2F4XSAtIHI7CiAgICAgICAgbWF4W2F4XSA9IHBvc1theF0gKyByOwogICAgICB9CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzIGZvciBjYWxjdWxhdGlvbgoKICBuZXcgVmVjMygpOyAvLyBSZWxhdGl2ZSB2ZWxvY2l0eQoKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEN5bGluZGVyIGNsYXNzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHJhZGl1c1RvcCA9IDAuNQogICAqICAgICBjb25zdCByYWRpdXNCb3R0b20gPSAwLjUKICAgKiAgICAgY29uc3QgaGVpZ2h0ID0gMgogICAqICAgICBjb25zdCBudW1TZWdtZW50cyA9IDEyCiAgICogICAgIGNvbnN0IGN5bGluZGVyU2hhcGUgPSBuZXcgQ0FOTk9OLkN5bGluZGVyKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKQogICAqICAgICBjb25zdCBjeWxpbmRlckJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY3lsaW5kZXJTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGN5bGluZGVyQm9keSkKICAgKi8KCiAgY2xhc3MgQ3lsaW5kZXIgZXh0ZW5kcyBDb252ZXhQb2x5aGVkcm9uIHsKICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4gKi8KCiAgICAvKiogVGhlIG51bWJlciBvZiBzZWdtZW50cyB0byBidWlsZCB0aGUgY3lsaW5kZXIgb3V0IG9mLiAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHJhZGl1c1RvcCBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIHJhZGl1c0JvdHRvbSBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4KICAgICAqIEBwYXJhbSBudW1TZWdtZW50cyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKSB7CiAgICAgIGlmIChyYWRpdXNUb3AgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1c1RvcCA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNCb3R0b20gPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1c0JvdHRvbSA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChoZWlnaHQgPT09IHZvaWQgMCkgewogICAgICAgIGhlaWdodCA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChudW1TZWdtZW50cyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbnVtU2VnbWVudHMgPSA4OwogICAgICB9CgogICAgICBpZiAocmFkaXVzVG9wIDwgMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGN5bGluZGVyIHJhZGl1c1RvcCBjYW5ub3QgYmUgbmVnYXRpdmUuJyk7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNCb3R0b20gPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzQm90dG9tIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgY29uc3QgTiA9IG51bVNlZ21lbnRzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBheGVzID0gW107CiAgICAgIGNvbnN0IGZhY2VzID0gW107CiAgICAgIGNvbnN0IGJvdHRvbWZhY2UgPSBbXTsKICAgICAgY29uc3QgdG9wZmFjZSA9IFtdOwogICAgICBjb25zdCBjb3MgPSBNYXRoLmNvczsKICAgICAgY29uc3Qgc2luID0gTWF0aC5zaW47IC8vIEZpcnN0IGJvdHRvbSBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKDApLCAtaGVpZ2h0ICogMC41LCByYWRpdXNCb3R0b20gKiBjb3MoMCkpKTsKICAgICAgYm90dG9tZmFjZS5wdXNoKDApOyAvLyBGaXJzdCB0b3AgcG9pbnQKCiAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbigwKSwgaGVpZ2h0ICogMC41LCByYWRpdXNUb3AgKiBjb3MoMCkpKTsKICAgICAgdG9wZmFjZS5wdXNoKDEpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICBjb25zdCB0aGV0YSA9IDIgKiBNYXRoLlBJIC8gTiAqIChpICsgMSk7CiAgICAgICAgY29uc3QgdGhldGFOID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAwLjUpOwoKICAgICAgICBpZiAoaSA8IE4gLSAxKSB7CiAgICAgICAgICAvLyBCb3R0b20KICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c0JvdHRvbSAqIHNpbih0aGV0YSksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcyh0aGV0YSkpKTsKICAgICAgICAgIGJvdHRvbWZhY2UucHVzaCgyICogaSArIDIpOyAvLyBUb3AKCiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNUb3AgKiBzaW4odGhldGEpLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcyh0aGV0YSkpKTsKICAgICAgICAgIHRvcGZhY2UucHVzaCgyICogaSArIDMpOyAvLyBGYWNlCgogICAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMiAqIGkgKyAzLCAyICogaSArIDJdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMSwgMF0pOyAvLyBDb25uZWN0CiAgICAgICAgfSAvLyBBeGlzOiB3ZSBjYW4gY3V0IG9mZiBoYWxmIG9mIHRoZW0gaWYgd2UgaGF2ZSBldmVuIG51bWJlciBvZiBzZWdtZW50cwoKCiAgICAgICAgaWYgKE4gJSAyID09PSAxIHx8IGkgPCBOIC8gMikgewogICAgICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKC1zaW4odGhldGFOKSwgMCwgY29zKHRoZXRhTikpKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZhY2VzLnB1c2goYm90dG9tZmFjZSk7CiAgICAgIGF4ZXMucHVzaChuZXcgVmVjMygwLCAxLCAwKSk7IC8vIFJlb3JkZXIgdG9wIGZhY2UKCiAgICAgIGNvbnN0IHRlbXAgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9wZmFjZS5sZW5ndGg7IGkrKykgewogICAgICAgIHRlbXAucHVzaCh0b3BmYWNlW3RvcGZhY2UubGVuZ3RoIC0gaSAtIDFdKTsKICAgICAgfQoKICAgICAgZmFjZXMucHVzaCh0ZW1wKTsKICAgICAgc3VwZXIoewogICAgICAgIHZlcnRpY2VzLAogICAgICAgIGZhY2VzLAogICAgICAgIGF4ZXMKICAgICAgfSk7CiAgICAgIHRoaXMudHlwZSA9IFNoYXBlLnR5cGVzLkNZTElOREVSOwogICAgICB0aGlzLnJhZGl1c1RvcCA9IHJhZGl1c1RvcDsKICAgICAgdGhpcy5yYWRpdXNCb3R0b20gPSByYWRpdXNCb3R0b207CiAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICB0aGlzLm51bVNlZ21lbnRzID0gbnVtU2VnbWVudHM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogUGFydGljbGUgc2hhcGUuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGFydGljbGVTaGFwZSA9IG5ldyBDQU5OT04uUGFydGljbGUoKQogICAqICAgICBjb25zdCBwYXJ0aWNsZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogcGFydGljbGVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHBhcnRpY2xlQm9keSkKICAgKi8KICBjbGFzcyBQYXJ0aWNsZSBleHRlbmRzIFNoYXBlIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUEFSVElDTEUKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICBtaW4uY29weShwb3MpOwogICAgICBtYXguY29weShwb3MpOwogICAgfQoKICB9CgogIC8qKgogICAqIEEgcGxhbmUsIGZhY2luZyBpbiB0aGUgWiBkaXJlY3Rpb24uIFRoZSBwbGFuZSBoYXMgaXRzIHN1cmZhY2UgYXQgej0wIGFuZCBldmVyeXRoaW5nIGJlbG93IHo9MCBpcyBhc3N1bWVkIHRvIGJlIHNvbGlkIHBsYW5lLiBUbyBtYWtlIHRoZSBwbGFuZSBmYWNlIGluIHNvbWUgb3RoZXIgZGlyZWN0aW9uIHRoYW4geiwgeW91IG11c3QgcHV0IGl0IGluc2lkZSBhIEJvZHkgYW5kIHJvdGF0ZSB0aGF0IGJvZHkuIFNlZSB0aGUgZGVtb3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGxhbmVTaGFwZSA9IG5ldyBDQU5OT04uUGxhbmUoKQogICAqICAgICBjb25zdCBwbGFuZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAwLCBzaGFwZTogIHBsYW5lU2hhcGUgfSkKICAgKiAgICAgcGxhbmVCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKC1NYXRoLlBJIC8gMiwgMCwgMCkgLy8gbWFrZSBpdCBmYWNlIHVwCiAgICogICAgIHdvcmxkLmFkZEJvZHkocGxhbmVCb2R5KQogICAqLwogIGNsYXNzIFBsYW5lIGV4dGVuZHMgU2hhcGUgewogICAgLyoqIHdvcmxkTm9ybWFsICovCgogICAgLyoqIHdvcmxkTm9ybWFsTmVlZHNVcGRhdGUgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUExBTkUKICAgICAgfSk7IC8vIFdvcmxkIG9yaWVudGVkIG5vcm1hbAoKICAgICAgdGhpcy53b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgfQogICAgLyoqIGNvbXB1dGVXb3JsZE5vcm1hbCAqLwoKCiAgICBjb21wdXRlV29ybGROb3JtYWwocXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy53b3JsZE5vcm1hbDsKICAgICAgbi5zZXQoMCwgMCwgMSk7CiAgICAgIHF1YXQudm11bHQobiwgbik7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHBsYW5lIGlzIGluZmluaXRlLi4uCiAgICAgICAgTnVtYmVyLk1BWF9WQUxVRQogICAgICApOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8vIFRoZSBwbGFuZSBBQUJCIGlzIGluZmluaXRlLCBleGNlcHQgaWYgdGhlIG5vcm1hbCBpcyBwb2ludGluZyBhbG9uZyBhbnkgYXhpcwogICAgICB0ZW1wTm9ybWFsLnNldCgwLCAwLCAxKTsgLy8gRGVmYXVsdCBwbGFuZSBub3JtYWwgaXMgegoKICAgICAgcXVhdC52bXVsdCh0ZW1wTm9ybWFsLCB0ZW1wTm9ybWFsKTsKICAgICAgY29uc3QgbWF4VmFsID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgbWluLnNldCgtbWF4VmFsLCAtbWF4VmFsLCAtbWF4VmFsKTsKICAgICAgbWF4LnNldChtYXhWYWwsIG1heFZhbCwgbWF4VmFsKTsKCiAgICAgIGlmICh0ZW1wTm9ybWFsLnggPT09IDEpIHsKICAgICAgICBtYXgueCA9IHBvcy54OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueCA9PT0gLTEpIHsKICAgICAgICBtaW4ueCA9IHBvcy54OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC55ID09PSAxKSB7CiAgICAgICAgbWF4LnkgPSBwb3MueTsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnkgPT09IC0xKSB7CiAgICAgICAgbWluLnkgPSBwb3MueTsKICAgICAgfQoKICAgICAgaWYgKHRlbXBOb3JtYWwueiA9PT0gMSkgewogICAgICAgIG1heC56ID0gcG9zLno7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC56ID09PSAtMSkgewogICAgICAgIG1pbi56ID0gcG9zLno7CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICB9CgogIH0KICBjb25zdCB0ZW1wTm9ybWFsID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogSGVpZ2h0ZmllbGQgc2hhcGUgY2xhc3MuIEhlaWdodCBkYXRhIGlzIGdpdmVuIGFzIGFuIGFycmF5LiBUaGVzZSBkYXRhIHBvaW50cyBhcmUgc3ByZWFkIG91dCBldmVubHkgd2l0aCBhIGdpdmVuIGRpc3RhbmNlLgogICAqIEB0b2RvIFNob3VsZCBiZSBwb3NzaWJsZSB0byB1c2UgYWxvbmcgYWxsIGF4ZXMsIG5vdCBqdXN0IHkKICAgKiBAdG9kbyBzaG91bGQgYmUgcG9zc2libGUgdG8gc2NhbGUgYWxvbmcgYWxsIGF4ZXMKICAgKiBAdG9kbyBSZWZhY3RvciBlbGVtZW50U2l6ZSB0byBlbGVtZW50U2l6ZVggYW5kIGVsZW1lbnRTaXplWQogICAqCiAgICogQGV4YW1wbGUKICAgKiAgICAgLy8gR2VuZXJhdGUgc29tZSBoZWlnaHQgZGF0YSAoeS12YWx1ZXMpLgogICAqICAgICBjb25zdCBkYXRhID0gW10KICAgKiAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDAwOyBpKyspIHsKICAgKiAgICAgICAgIGNvbnN0IHkgPSAwLjUgKiBNYXRoLmNvcygwLjIgKiBpKQogICAqICAgICAgICAgZGF0YS5wdXNoKHkpCiAgICogICAgIH0KICAgKgogICAqICAgICAvLyBDcmVhdGUgdGhlIGhlaWdodGZpZWxkIHNoYXBlCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkU2hhcGUgPSBuZXcgQ0FOTk9OLkhlaWdodGZpZWxkKGRhdGEsIHsKICAgKiAgICAgICAgIGVsZW1lbnRTaXplOiAxIC8vIERpc3RhbmNlIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9ucwogICAqICAgICB9KQogICAqICAgICBjb25zdCBoZWlnaHRmaWVsZEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBzaGFwZTogaGVpZ2h0ZmllbGRTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGhlaWdodGZpZWxkQm9keSkKICAgKi8KICBjbGFzcyBIZWlnaHRmaWVsZCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXggdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LgogICAgICovCgogICAgLyoqCiAgICAgKiBNaW5pbXVtIHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2luZyBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbi4KICAgICAqIEB0b2RvIGVsZW1lbnRTaXplWCBhbmQgWQogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkYXRhIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZGF0YSwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIG1heFZhbHVlOiBudWxsLAogICAgICAgIG1pblZhbHVlOiBudWxsLAogICAgICAgIGVsZW1lbnRTaXplOiAxCiAgICAgIH0pOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuSEVJR0hURklFTEQKICAgICAgfSk7CiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgIHRoaXMubWF4VmFsdWUgPSBvcHRpb25zLm1heFZhbHVlOwogICAgICB0aGlzLm1pblZhbHVlID0gb3B0aW9ucy5taW5WYWx1ZTsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG9wdGlvbnMuZWxlbWVudFNpemU7CgogICAgICBpZiAob3B0aW9ucy5taW5WYWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTWluVmFsdWUoKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMubWF4VmFsdWUgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FjaGVFbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsgLy8gImlfal9pc1VwcGVyIiA9PiB7IGNvbnZleDogLi4uLCBvZmZzZXQ6IC4uLiB9CiAgICAgIC8vIGZvciBleGFtcGxlOgogICAgICAvLyBfY2FjaGVkUGlsbGFyc1siMF8yXzEiXQoKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFycyA9IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1pblZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1pblZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWluVmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPCBtaW5WYWx1ZSkgewogICAgICAgICAgICBtaW5WYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1pblZhbHVlID0gbWluVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1heFZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1heFZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWF4VmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPiBtYXhWYWx1ZSkgewogICAgICAgICAgICBtYXhWYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1heFZhbHVlID0gbWF4VmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgaGVpZ2h0IHZhbHVlIGF0IGFuIGluZGV4LiBEb24ndCBmb3JnZXQgdG8gdXBkYXRlIG1heFZhbHVlIGFuZCBtaW5WYWx1ZSBhZnRlciB5b3UncmUgZG9uZS4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRWYWx1ZUF0SW5kZXgoeGksIHlpLCB2YWx1ZSkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBkYXRhW3hpXVt5aV0gPSB2YWx1ZTsgLy8gSW52YWxpZGF0ZSBjYWNoZQoKICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZmFsc2UpOwoKICAgICAgaWYgKHhpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpLCB0cnVlKTsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgZmFsc2UpOwogICAgICB9CgogICAgICBpZiAoeWkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSAtIDEsIHRydWUpOwogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGlmICh5aSA+IDAgJiYgeGkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWkgLSAxLCB0cnVlKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbWF4L21pbiBpbiBhIHJlY3RhbmdsZSBpbiB0aGUgbWF0cml4IGRhdGEKICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHQgYXJyYXksIGlmIGl0IHdhcyBwYXNzZWQgaW4uIE1pbmltdW0gd2lsbCBiZSBhdCBwb3NpdGlvbiAwIGFuZCBtYXggYXQgMS4KICAgICAqLwoKCiAgICBnZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIC8vIEdldCBtYXggYW5kIG1pbiBvZiB0aGUgZGF0YQogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOyAvLyBTZXQgZmlyc3QgdmFsdWUKCiAgICAgIGxldCBtYXggPSB0aGlzLm1pblZhbHVlOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDw9IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPD0gaU1heFk7IGorKykgewogICAgICAgICAgY29uc3QgaGVpZ2h0ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4KSB7CiAgICAgICAgICAgIG1heCA9IGhlaWdodDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJlc3VsdFswXSA9IHRoaXMubWluVmFsdWU7CiAgICAgIHJlc3VsdFsxXSA9IG1heDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBpbmRleCBvZiBhIGxvY2FsIHBvc2l0aW9uIG9uIHRoZSBoZWlnaHRmaWVsZC4gVGhlIGluZGV4ZXMgaW5kaWNhdGUgdGhlIHJlY3RhbmdsZXMsIHNvIGlmIHlvdXIgdGVycmFpbiBpcyBtYWRlIG9mIE4geCBOIGhlaWdodCBkYXRhIHBvaW50cywgeW91IHdpbGwgaGF2ZSByZWN0YW5nbGUgaW5kZXhlcyByYW5naW5nIGZyb20gMCB0byBOLTEuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFR3by1lbGVtZW50IGFycmF5CiAgICAgKiBAcGFyYW0gY2xhbXAgSWYgdGhlIHBvc2l0aW9uIHNob3VsZCBiZSBjbGFtcGVkIHRvIHRoZSBoZWlnaHRmaWVsZCBlZGdlLgogICAgICovCgoKICAgIGdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCByZXN1bHQsIGNsYW1wKSB7CiAgICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAogICAgICBjb25zdCB3ID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IHhpID0gTWF0aC5mbG9vcih4IC8gdyk7CiAgICAgIGxldCB5aSA9IE1hdGguZmxvb3IoeSAvIHcpOwogICAgICByZXN1bHRbMF0gPSB4aTsKICAgICAgcmVzdWx0WzFdID0geWk7CgogICAgICBpZiAoY2xhbXApIHsKICAgICAgICAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwogICAgICAgIGlmICh4aSA8IDApIHsKICAgICAgICAgIHhpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh5aSA8IDApIHsKICAgICAgICAgIHlpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh4aSA+PSBkYXRhLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHhpID0gZGF0YS5sZW5ndGggLSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpID49IGRhdGFbMF0ubGVuZ3RoIC0gMSkgewogICAgICAgICAgeWkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgICAgfQogICAgICB9IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCgogICAgICBpZiAoeGkgPCAwIHx8IHlpIDwgMCB8fCB4aSA+PSBkYXRhLmxlbmd0aCAtIDEgfHwgeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBnZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYykgewogICAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7CiAgICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTsKICAgICAgbGV0IHhpID0gaWR4WzBdOwogICAgICBsZXQgeWkgPSBpZHhbMV07CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CgogICAgICBpZiAoZWRnZUNsYW1wKSB7CiAgICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7CiAgICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgbG93ZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSB4aSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSB5aSkgKiogMjsKICAgICAgY29uc3QgdXBwZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSAoeGkgKyAxKSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSAoeWkgKyAxKSkgKiogMjsKICAgICAgY29uc3QgdXBwZXIgPSBsb3dlckRpc3QyID4gdXBwZXJEaXN0MjsKICAgICAgdGhpcy5nZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKTsKICAgICAgcmV0dXJuIHVwcGVyOwogICAgfQoKICAgIGdldE5vcm1hbEF0KHgsIHksIGVkZ2VDbGFtcCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGEgPSBnZXROb3JtYWxBdF9hOwogICAgICBjb25zdCBiID0gZ2V0Tm9ybWFsQXRfYjsKICAgICAgY29uc3QgYyA9IGdldE5vcm1hbEF0X2M7CiAgICAgIGNvbnN0IGUwID0gZ2V0Tm9ybWFsQXRfZTA7CiAgICAgIGNvbnN0IGUxID0gZ2V0Tm9ybWFsQXRfZTE7CiAgICAgIHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiLnZzdWIoYSwgZTApOwogICAgICBjLnZzdWIoYSwgZTEpOwogICAgICBlMC5jcm9zcyhlMSwgcmVzdWx0KTsKICAgICAgcmVzdWx0Lm5vcm1hbGl6ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gQUFCQiBvZiBhIHNxdWFyZSBpbiB0aGUgaGVpZ2h0ZmllbGQKICAgICAqIEBwYXJhbSB4aQogICAgICogQHBhcmFtIHlpCiAgICAgKiBAcGFyYW0gcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0QWFiYkF0SW5kZXgoeGksIHlpLCBfcmVmKSB7CiAgICAgIGxldCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBfcmVmOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgIHVwcGVyQm91bmQuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBoZWlnaHQgaW4gdGhlIGhlaWdodGZpZWxkIGF0IGEgZ2l2ZW4gcG9zaXRpb24KICAgICAqLwoKCiAgICBnZXRIZWlnaHRBdCh4LCB5LCBlZGdlQ2xhbXApIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXRIZWlnaHRBdF9iOwogICAgICBjb25zdCBjID0gZ2V0SGVpZ2h0QXRfYzsKICAgICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4OwogICAgICB0aGlzLmdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCBpZHgsIGVkZ2VDbGFtcCk7CiAgICAgIGxldCB4aSA9IGlkeFswXTsKICAgICAgbGV0IHlpID0gaWR4WzFdOwoKICAgICAgaWYgKGVkZ2VDbGFtcCkgewogICAgICAgIHhpID0gTWF0aC5taW4oZGF0YS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB4aSkpOwogICAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpOwogICAgICB9CgogICAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyk7CiAgICAgIGNvbnN0IHcgPSBnZXRIZWlnaHRBdF93ZWlnaHRzOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGkgKyAxXVt5aSArIDFdICogdy54ICsgZGF0YVt4aV1beWkgKyAxXSAqIHcueSArIGRhdGFbeGkgKyAxXVt5aV0gKiB3Lno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGldW3lpXSAqIHcueCArIGRhdGFbeGkgKyAxXVt5aV0gKiB3LnkgKyBkYXRhW3hpXVt5aSArIDFdICogdy56OwogICAgICB9CiAgICB9CgogICAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIGAke3hpfV8ke3lpfV8ke2dldFVwcGVyVHJpYW5nbGUgPyAxIDogMH1gOwogICAgfQoKICAgIGdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV07CiAgICB9CgogICAgc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCBjb252ZXgsIG9mZnNldCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXSA9IHsKICAgICAgICBjb252ZXgsCiAgICAgICAgb2Zmc2V0CiAgICAgIH07CiAgICB9CgogICAgY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgZGVsZXRlIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB0cmlhbmdsZSBmcm9tIHRoZSBoZWlnaHRmaWVsZAogICAgICovCgoKICAgIGdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgYS5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pOwogICAgICAgIGIuc2V0KHhpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0pOwogICAgICAgIGMuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGEuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgICAgYi5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7CiAgICAgICAgYy5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdHJpYW5nbGUgaW4gdGhlIHRlcnJhaW4gaW4gdGhlIGZvcm0gb2YgYSB0cmlhbmd1bGFyIGNvbnZleCBzaGFwZS4KICAgICAqLwoKCiAgICBnZXRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgbGV0IHJlc3VsdCA9IHRoaXMucGlsbGFyQ29udmV4OwogICAgICBsZXQgb2Zmc2V0UmVzdWx0ID0gdGhpcy5waWxsYXJPZmZzZXQ7CgogICAgICBpZiAodGhpcy5jYWNoZUVuYWJsZWQpIHsKICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpOwoKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBkYXRhLmNvbnZleDsKICAgICAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gZGF0YS5vZmZzZXQ7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICByZXN1bHQgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICAgIG9mZnNldFJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSByZXN1bHQ7CiAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBvZmZzZXRSZXN1bHQ7CiAgICAgIH0KCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZmFjZXMgPSByZXN1bHQuZmFjZXM7IC8vIFJldXNlIHZlcnRzIGlmIHBvc3NpYmxlCgogICAgICByZXN1bHQudmVydGljZXMubGVuZ3RoID0gNjsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgICAgaWYgKCFyZXN1bHQudmVydGljZXNbaV0pIHsKICAgICAgICAgIHJlc3VsdC52ZXJ0aWNlc1tpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFJldXNlIGZhY2VzIGlmIHBvc3NpYmxlCgoKICAgICAgZmFjZXMubGVuZ3RoID0gNTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgaWYgKCFmYWNlc1tpXSkgewogICAgICAgICAgZmFjZXNbaV0gPSBbXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gcmVzdWx0LnZlcnRpY2VzOwogICAgICBjb25zdCBoID0gKE1hdGgubWluKGRhdGFbeGldW3lpXSwgZGF0YVt4aSArIDFdW3lpXSwgZGF0YVt4aV1beWkgKyAxXSwgZGF0YVt4aSArIDFdW3lpICsgMV0pIC0gdGhpcy5taW5WYWx1ZSkgLyAyICsgdGhpcy5taW5WYWx1ZTsKCiAgICAgIGlmICghZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZQogICAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC4yNSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZQogICAgICAgICh5aSArIDAuMjUpICogZWxlbWVudFNpemUsIGggLy8gdmVydGljYWwgY2VudGVyCiAgICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzBdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0gLSBoKTsKICAgICAgICB2ZXJ0c1sxXS5zZXQoMC43NSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7CiAgICAgICAgdmVydHNbMl0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSAtIGgpOyAvLyBib3R0b20gdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbM10uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzRdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzVdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyB0b3AgdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMF1bMF0gPSAwOwogICAgICAgIGZhY2VzWzBdWzFdID0gMTsKICAgICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZQoKICAgICAgICBmYWNlc1sxXVswXSA9IDU7CiAgICAgICAgZmFjZXNbMV1bMV0gPSA0OwogICAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gLXggZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbMl1bMF0gPSAwOwogICAgICAgIGZhY2VzWzJdWzFdID0gMjsKICAgICAgICBmYWNlc1syXVsyXSA9IDU7CiAgICAgICAgZmFjZXNbMl1bM10gPSAzOyAvLyAteSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1szXVswXSA9IDE7CiAgICAgICAgZmFjZXNbM11bMV0gPSAwOwogICAgICAgIGZhY2VzWzNdWzJdID0gMzsKICAgICAgICBmYWNlc1szXVszXSA9IDQ7IC8vICt4eSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1s0XVswXSA9IDQ7CiAgICAgICAgZmFjZXNbNF1bMV0gPSA1OwogICAgICAgIGZhY2VzWzRdWzJdID0gMjsKICAgICAgICBmYWNlc1s0XVszXSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ2VudGVyIG9mIHRoZSB0cmlhbmdsZSBwaWxsYXIgLSBhbGwgcG9seWdvbnMgYXJlIGdpdmVuIHJlbGF0aXZlIHRvIHRoaXMgb25lCiAgICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjc1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlCiAgICAgICAgKHlpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXIKICAgICAgICApOyAvLyBUb3AgdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbMF0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWkgKyAxXSAtIGgpOwogICAgICAgIHZlcnRzWzFdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsKICAgICAgICB2ZXJ0c1syXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1szXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzRdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzVdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIC0wLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyBUb3AgdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMF1bMF0gPSAwOwogICAgICAgIGZhY2VzWzBdWzFdID0gMTsKICAgICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZQoKICAgICAgICBmYWNlc1sxXVswXSA9IDU7CiAgICAgICAgZmFjZXNbMV1bMV0gPSA0OwogICAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gK3ggZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbMl1bMF0gPSAyOwogICAgICAgIGZhY2VzWzJdWzFdID0gNTsKICAgICAgICBmYWNlc1syXVsyXSA9IDM7CiAgICAgICAgZmFjZXNbMl1bM10gPSAwOyAvLyAreSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1szXVswXSA9IDM7CiAgICAgICAgZmFjZXNbM11bMV0gPSA0OwogICAgICAgIGZhY2VzWzNdWzJdID0gMTsKICAgICAgICBmYWNlc1szXVszXSA9IDA7IC8vIC14eSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1s0XVswXSA9IDE7CiAgICAgICAgZmFjZXNbNF1bMV0gPSA0OwogICAgICAgIGZhY2VzWzRdWzJdID0gNTsKICAgICAgICBmYWNlc1s0XVszXSA9IDI7CiAgICAgIH0KCiAgICAgIHJlc3VsdC5jb21wdXRlTm9ybWFscygpOwogICAgICByZXN1bHQuY29tcHV0ZUVkZ2VzKCk7CiAgICAgIHJlc3VsdC51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB0aGlzLnNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgcmVzdWx0LCBvZmZzZXRSZXN1bHQpOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHRlcnJhaW4gaXMgaW5maW5pdGUKICAgICAgICBOdW1iZXIuTUFYX1ZBTFVFCiAgICAgICk7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoqIEBUT0RPIGRvIGl0IHByb3Blcmx5ICovCiAgICAgIG1pbi5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CiAgICAgIG1heC5zZXQoTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSk7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIFVzZSB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBtaW4vbWF4IHZhbHVlcwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBzID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IG5ldyBWZWMzKGRhdGEubGVuZ3RoICogcywgZGF0YVswXS5sZW5ndGggKiBzLCBNYXRoLm1heChNYXRoLmFicyh0aGlzLm1heFZhbHVlKSwgTWF0aC5hYnModGhpcy5taW5WYWx1ZSkpKS5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgaGVpZ2h0IHZhbHVlcyBmcm9tIGFuIGltYWdlLiBDdXJyZW50bHkgb25seSBzdXBwb3J0ZWQgaW4gYnJvd3Nlci4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRzRnJvbUltYWdlKGltYWdlLCBzY2FsZSkgewogICAgICBjb25zdCB7CiAgICAgICAgeCwKICAgICAgICB6LAogICAgICAgIHkKICAgICAgfSA9IHNjYWxlOwogICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7CiAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApOwogICAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTsKICAgICAgY29uc3QgbWF0cml4ID0gdGhpcy5kYXRhOwogICAgICBtYXRyaXgubGVuZ3RoID0gMDsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IE1hdGguYWJzKHgpIC8gaW1hZ2VEYXRhLndpZHRoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZURhdGEuaGVpZ2h0OyBpKyspIHsKICAgICAgICBjb25zdCByb3cgPSBbXTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbWFnZURhdGEud2lkdGg7IGorKykgewogICAgICAgICAgY29uc3QgYSA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNF07CiAgICAgICAgICBjb25zdCBiID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMV07CiAgICAgICAgICBjb25zdCBjID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMl07CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSAoYSArIGIgKyBjKSAvIDQgLyAyNTUgKiB6OwoKICAgICAgICAgIGlmICh4IDwgMCkgewogICAgICAgICAgICByb3cucHVzaChoZWlnaHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm93LnVuc2hpZnQoaGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh5IDwgMCkgewogICAgICAgICAgbWF0cml4LnVuc2hpZnQocm93KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWF0cml4LnB1c2gocm93KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTsKICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQoKICB9CiAgY29uc3QgZ2V0SGVpZ2h0QXRfaWR4ID0gW107CiAgY29uc3QgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldE5vcm1hbEF0X2UxID0gbmV3IFZlYzMoKTsgLy8gZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXJ5Y2VudHJpY19jb29yZGluYXRlX3N5c3RlbQoKICBmdW5jdGlvbiBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcmVzdWx0KSB7CiAgICByZXN1bHQueCA9ICgoYnkgLSBjeSkgKiAoeCAtIGN4KSArIChjeCAtIGJ4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnkgPSAoKGN5IC0gYXkpICogKHggLSBjeCkgKyAoYXggLSBjeCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTsKICAgIHJlc3VsdC56ID0gMSAtIHJlc3VsdC54IC0gcmVzdWx0Lnk7CiAgfQoKICAvKioKICAgKiBPY3RyZWVOb2RlCiAgICovCiAgY2xhc3MgT2N0cmVlTm9kZSB7CiAgICAvKiogVGhlIHJvb3Qgbm9kZSAqLwoKICAgIC8qKiBCb3VuZGFyeSBvZiB0aGlzIG5vZGUgKi8KCiAgICAvKiogQ29udGFpbmVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgbm9kZSBsZXZlbCAqLwoKICAgIC8qKiBDaGlsZHJlbiB0byB0aGlzIG5vZGUgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yb290ID0gb3B0aW9ucy5yb290IHx8IG51bGw7CiAgICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYiA/IG9wdGlvbnMuYWFiYi5jbG9uZSgpIDogbmV3IEFBQkIoKTsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogcmVzZXQKICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogSW5zZXJ0IGRhdGEgaW50byB0aGlzIG5vZGUKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UKICAgICAqLwoKCiAgICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsKSB7CiAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbGV2ZWwgPSAwOwogICAgICB9CgogICAgICBjb25zdCBub2RlRGF0YSA9IHRoaXMuZGF0YTsgLy8gSWdub3JlIG9iamVjdHMgdGhhdCBkbyBub3QgYmVsb25nIGluIHRoaXMgbm9kZQoKICAgICAgaWYgKCF0aGlzLmFhYmIuY29udGFpbnMoYWFiYikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9iamVjdCBjYW5ub3QgYmUgYWRkZWQKICAgICAgfQoKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjb25zdCBtYXhEZXB0aCA9IHRoaXMubWF4RGVwdGggfHwgdGhpcy5yb290Lm1heERlcHRoOwoKICAgICAgaWYgKGxldmVsIDwgbWF4RGVwdGgpIHsKICAgICAgICAvLyBTdWJkaXZpZGUgaWYgdGhlcmUgYXJlIG5vIGNoaWxkcmVuIHlldAogICAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7CgogICAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnN1YmRpdmlkZSgpOwogICAgICAgICAgc3ViZGl2aWRlZCA9IHRydWU7CiAgICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXQKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc3ViZGl2aWRlZCkgewogICAgICAgICAgLy8gTm8gY2hpbGRyZW4gYWNjZXB0ZWQhIE1pZ2h0IGFzIHdlbGwganVzdCByZW1vdmUgZW0gc2luY2UgdGhleSBjb250YWluIG5vbmUKICAgICAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgICB9IC8vIFRvbyBkZWVwLCBvciBjaGlsZHJlbiBkaWRudCB3YW50IGl0LiBhZGQgaXQgaW4gY3VycmVudCBub2RlCgoKICAgICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGUgOCBlcXVhbGx5IHNpemVkIGNoaWxkcmVuIG5vZGVzIGFuZCBwdXQgdGhlbSBpbiB0aGUgYGNoaWxkcmVuYCBhcnJheS4KICAgICAqLwoKCiAgICBzdWJkaXZpZGUoKSB7CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjsKICAgICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTsKICAgICAgaGFsZkRpYWdvbmFsLnNjYWxlKDAuNSwgaGFsZkRpYWdvbmFsKTsKICAgICAgY29uc3Qgcm9vdCA9IHRoaXMucm9vdCB8fCB0aGlzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdAoKICAgICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHMKCiAgICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDsKICAgICAgICBsb3dlckJvdW5kLnggKj0gaGFsZkRpYWdvbmFsLng7CiAgICAgICAgbG93ZXJCb3VuZC55ICo9IGhhbGZEaWFnb25hbC55OwogICAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejsKICAgICAgICBsb3dlckJvdW5kLnZhZGQobCwgbG93ZXJCb3VuZCk7IC8vIFVwcGVyIGJvdW5kIGlzIGFsd2F5cyBsb3dlciBib3VuZCArIGhhbGZEaWFnb25hbAoKICAgICAgICBsb3dlckJvdW5kLnZhZGQoaGFsZkRpYWdvbmFsLCBjaGlsZC5hYWJiLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgd2l0aGluIGFuIEFBQkIKICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIGFhYmJRdWVyeShhYWJiLCByZXN1bHQpIHsKICAgICAgdGhpcy5kYXRhOyAvLyBhYm9ydCBpZiB0aGUgcmFuZ2UgZG9lcyBub3QgaW50ZXJzZWN0IHRoaXMgbm9kZQogICAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7CiAgICAgIC8vICAgICByZXR1cm4gcmVzdWx0OwogICAgICAvLyB9CiAgICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWwKICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBub2RlRGF0YSk7CiAgICAgIC8vIEFkZCBjaGlsZCBkYXRhCiAgICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKUwoKICAgICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIC8vICAgICBjaGlsZHJlbltpXS5hYWJiUXVlcnkoYWFiYiwgcmVzdWx0KTsKICAgICAgLy8gfQoKICAgICAgY29uc3QgcXVldWUgPSBbdGhpc107CgogICAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOwoKICAgICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShxdWV1ZSwgbm9kZS5jaGlsZHJlbik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuCiAgICAgKiBAcmV0dXJuIFRoZSAicmVzdWx0IiBvYmplY3QKICAgICAqLwoKCiAgICByYXlRdWVyeShyYXksIHRyZWVUcmFuc2Zvcm0sIHJlc3VsdCkgewogICAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LgoKICAgICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi8KICAgICAgcmF5LmdldEFBQkIodG1wQUFCQik7CiAgICAgIHRtcEFBQkIudG9Mb2NhbEZyYW1lKHRyZWVUcmFuc2Zvcm0sIHRtcEFBQkIpOwogICAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiByZW1vdmVFbXB0eU5vZGVzCiAgICAgKi8KCgogICAgcmVtb3ZlRW1wdHlOb2RlcygpIHsKICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTsKCiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICAvKioKICAgKiBPY3RyZWUKICAgKi8KCgogIGNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUgewogICAgLyoqCiAgICAgKiBNYXhpbXVtIHN1YmRpdmlzaW9uIGRlcHRoCiAgICAgKiBAZGVmYXVsdCA4CiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBhYWJiIFRoZSB0b3RhbCBBQUJCIG9mIHRoZSB0cmVlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGFhYmIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoewogICAgICAgIHJvb3Q6IG51bGwsCiAgICAgICAgYWFiYgogICAgICB9KTsKICAgICAgdGhpcy5tYXhEZXB0aCA9IHR5cGVvZiBvcHRpb25zLm1heERlcHRoICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4RGVwdGggOiA4OwogICAgfQoKICB9CiAgY29uc3QgaGFsZkRpYWdvbmFsID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBBQUJCID0gbmV3IEFBQkIoKTsKCiAgLyoqCiAgICogVHJpbWVzaC4KICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBIb3cgdG8gbWFrZSBhIG1lc2ggd2l0aCBhIHNpbmdsZSB0cmlhbmdsZQogICAqICAgICBjb25zdCB2ZXJ0aWNlcyA9IFsKICAgKiAgICAgICAgIDAsIDAsIDAsIC8vIHZlcnRleCAwCiAgICogICAgICAgICAxLCAwLCAwLCAvLyB2ZXJ0ZXggMQogICAqICAgICAgICAgMCwgMSwgMCAgLy8gdmVydGV4IDIKICAgKiAgICAgXQogICAqICAgICBjb25zdCBpbmRpY2VzID0gWwogICAqICAgICAgICAgMCwgMSwgMiAgLy8gdHJpYW5nbGUgMAogICAqICAgICBdCiAgICogICAgIGNvbnN0IHRyaW1lc2hTaGFwZSA9IG5ldyBDQU5OT04uVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcykKICAgKi8KICBjbGFzcyBUcmltZXNoIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiB2ZXJ0aWNlcwogICAgICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VycywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIHRyaWFuZ2xlIGNvbnNpc3RzIG9mLiBUaGUgbGVuZ3RoIG9mIHRoaXMgYXJyYXkgaXMgdGh1cyAzIHRpbWVzIHRoZSBudW1iZXIgb2YgdHJpYW5nbGVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbm9ybWFscyBkYXRhLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbG9jYWwgQUFCQiBvZiB0aGUgbWVzaC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlcyB0byB2ZXJ0ZXggcGFpcnMsIG1ha2luZyB1cCBhbGwgdW5pcXVlIGVkZ2VzIGluIHRoZSB0cmltZXNoLgogICAgICovCgogICAgLyoqCiAgICAgKiBMb2NhbCBzY2FsaW5nIG9mIHRoZSBtZXNoLiBVc2UgLnNldFNjYWxlKCkgdG8gc2V0IGl0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5kZXhlZCB0cmlhbmdsZXMuIFVzZSAudXBkYXRlVHJlZSgpIHRvIHVwZGF0ZSBpdC4KICAgICAqLwogICAgY29uc3RydWN0b3IodmVydGljZXMsIGluZGljZXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlRSSU1FU0gKICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzKTsKICAgICAgdGhpcy5pbmRpY2VzID0gbmV3IEludDE2QXJyYXkoaW5kaWNlcyk7CiAgICAgIHRoaXMubm9ybWFscyA9IG5ldyBGbG9hdDMyQXJyYXkoaW5kaWNlcy5sZW5ndGgpOwogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmVkZ2VzID0gbnVsbDsKICAgICAgdGhpcy5zY2FsZSA9IG5ldyBWZWMzKDEsIDEsIDEpOwogICAgICB0aGlzLnRyZWUgPSBuZXcgT2N0cmVlKCk7CiAgICAgIHRoaXMudXBkYXRlRWRnZXMoKTsKICAgICAgdGhpcy51cGRhdGVOb3JtYWxzKCk7CiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgIHRoaXMudXBkYXRlVHJlZSgpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVUcmVlCiAgICAgKi8KCgogICAgdXBkYXRlVHJlZSgpIHsKICAgICAgY29uc3QgdHJlZSA9IHRoaXMudHJlZTsKICAgICAgdHJlZS5yZXNldCgpOwogICAgICB0cmVlLmFhYmIuY29weSh0aGlzLmFhYmIpOwogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7IC8vIFRoZSBsb2NhbCBtZXNoIEFBQkIgaXMgc2NhbGVkLCBidXQgdGhlIG9jdHJlZSBBQUJCIHNob3VsZCBiZSB1bnNjYWxlZAoKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueiAqPSAxIC8gc2NhbGUuejsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueiAqPSAxIC8gc2NhbGUuejsgLy8gSW5zZXJ0IGFsbCB0cmlhbmdsZXMKCiAgICAgIGNvbnN0IHRyaWFuZ2xlQUFCQiA9IG5ldyBBQUJCKCk7CiAgICAgIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBvaW50cyA9IFthLCBiLCBjXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vdGhpcy5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIGEsIGIsIGMpOwogICAgICAgIC8vIEdldCB1bnNjYWxlZCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwoKICAgICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKCiAgICAgICAgdHJpYW5nbGVBQUJCLnNldEZyb21Qb2ludHMocG9pbnRzKTsKICAgICAgICB0cmVlLmluc2VydCh0cmlhbmdsZUFBQkIsIGkpOwogICAgICB9CgogICAgICB0cmVlLnJlbW92ZUVtcHR5Tm9kZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRyaWFuZ2xlcyBpbiBhIGxvY2FsIEFBQkIgZnJvbSB0aGUgdHJpbWVzaC4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgb2YgaW50ZWdlcnMsIHJlZmVyZW5jaW5nIHRoZSBxdWVyaWVkIHRyaWFuZ2xlcy4KICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZXNJbkFBQkIoYWFiYiwgcmVzdWx0KSB7CiAgICAgIHVuc2NhbGVkQUFCQi5jb3B5KGFhYmIpOyAvLyBTY2FsZSBpdCB0byBsb2NhbAoKICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlOwogICAgICBjb25zdCBpc3ggPSBzY2FsZS54OwogICAgICBjb25zdCBpc3kgPSBzY2FsZS55OwogICAgICBjb25zdCBpc3ogPSBzY2FsZS56OwogICAgICBjb25zdCBsID0gdW5zY2FsZWRBQUJCLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB1bnNjYWxlZEFBQkIudXBwZXJCb3VuZDsKICAgICAgbC54IC89IGlzeDsKICAgICAgbC55IC89IGlzeTsKICAgICAgbC56IC89IGlzejsKICAgICAgdS54IC89IGlzeDsKICAgICAgdS55IC89IGlzeTsKICAgICAgdS56IC89IGlzejsKICAgICAgcmV0dXJuIHRoaXMudHJlZS5hYWJiUXVlcnkodW5zY2FsZWRBQUJCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRTY2FsZQogICAgICovCgoKICAgIHNldFNjYWxlKHNjYWxlKSB7CiAgICAgIGNvbnN0IHdhc1VuaWZvcm0gPSB0aGlzLnNjYWxlLnggPT09IHRoaXMuc2NhbGUueSAmJiB0aGlzLnNjYWxlLnkgPT09IHRoaXMuc2NhbGUuejsKICAgICAgY29uc3QgaXNVbmlmb3JtID0gc2NhbGUueCA9PT0gc2NhbGUueSAmJiBzY2FsZS55ID09PSBzY2FsZS56OwoKICAgICAgaWYgKCEod2FzVW5pZm9ybSAmJiBpc1VuaWZvcm0pKSB7CiAgICAgICAgLy8gTm9uLXVuaWZvcm0gc2NhbGluZy4gTmVlZCB0byB1cGRhdGUgbm9ybWFscy4KICAgICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgfQoKICAgICAgdGhpcy5zY2FsZS5jb3B5KHNjYWxlKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuIFdpbGwgc2F2ZSBpbiB0aGUgYC5ub3JtYWxzYCBhcnJheS4KICAgICAqLwoKCiAgICB1cGRhdGVOb3JtYWxzKCkgewogICAgICBjb25zdCBuID0gY29tcHV0ZU5vcm1hbHNfbjsgLy8gR2VuZXJhdGUgbm9ybWFscwoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMubm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICB0aGlzLmdldFZlcnRleChhLCB2YSk7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYiwgdmIpOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGMsIHZjKTsKICAgICAgICBUcmltZXNoLmNvbXB1dGVOb3JtYWwodmIsIHZhLCB2Yywgbik7CiAgICAgICAgbm9ybWFsc1tpM10gPSBuLng7CiAgICAgICAgbm9ybWFsc1tpMyArIDFdID0gbi55OwogICAgICAgIG5vcm1hbHNbaTMgKyAyXSA9IG4uejsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuZWRnZXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlRWRnZXMoKSB7CiAgICAgIGNvbnN0IGVkZ2VzID0ge307CgogICAgICBjb25zdCBhZGQgPSAoYSwgYikgPT4gewogICAgICAgIGNvbnN0IGtleSA9IGEgPCBiID8gYCR7YX1fJHtifWAgOiBgJHtifV8ke2F9YDsKICAgICAgICBlZGdlc1trZXldID0gdHJ1ZTsKICAgICAgfTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICBhZGQoYSwgYik7CiAgICAgICAgYWRkKGIsIGMpOwogICAgICAgIGFkZChjLCBhKTsKICAgICAgfQoKICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGVkZ2VzKTsKICAgICAgdGhpcy5lZGdlcyA9IG5ldyBJbnQxNkFycmF5KGtleXMubGVuZ3RoICogMik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBpbmRpY2VzID0ga2V5c1tpXS5zcGxpdCgnXycpOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGldID0gcGFyc2VJbnQoaW5kaWNlc1swXSwgMTApOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGkgKyAxXSA9IHBhcnNlSW50KGluZGljZXNbMV0sIDEwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gZWRnZSB2ZXJ0ZXgKICAgICAqIEBwYXJhbSBmaXJzdE9yU2Vjb25kIDAgb3IgMSwgZGVwZW5kaW5nIG9uIHdoaWNoIG9uZSBvZiB0aGUgdmVydGljZXMgeW91IG5lZWQuCiAgICAgKiBAcGFyYW0gdmVydGV4U3RvcmUgV2hlcmUgdG8gc3RvcmUgdGhlIHJlc3VsdAogICAgICovCgoKICAgIGdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCBmaXJzdE9yU2Vjb25kLCB2ZXJ0ZXhTdG9yZSkgewogICAgICBjb25zdCB2ZXJ0ZXhJbmRleCA9IHRoaXMuZWRnZXNbZWRnZUluZGV4ICogMiArIChmaXJzdE9yU2Vjb25kID8gMSA6IDApXTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodmVydGV4SW5kZXgsIHZlcnRleFN0b3JlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdmVjdG9yIGFsb25nIGFuIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0RWRnZVZlY3RvcihlZGdlSW5kZXgsIHZlY3RvclN0b3JlKSB7CiAgICAgIGNvbnN0IHZhID0gZ2V0RWRnZVZlY3Rvcl92YTsKICAgICAgY29uc3QgdmIgPSBnZXRFZGdlVmVjdG9yX3ZiOwogICAgICB0aGlzLmdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCAwLCB2YSk7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDEsIHZiKTsKICAgICAgdmIudnN1Yih2YSwgdmVjdG9yU3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdmVydGV4IGkuCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0VmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CgogICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpOwoKICAgICAgb3V0LnggKj0gc2NhbGUueDsKICAgICAgb3V0LnkgKj0gc2NhbGUueTsKICAgICAgb3V0LnogKj0gc2NhbGUuejsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHJhdyB2ZXJ0ZXggaQogICAgICogQHJldHVybiBUaGUgIm91dCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIF9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICByZXR1cm4gb3V0LnNldCh2ZXJ0aWNlc1tpM10sIHZlcnRpY2VzW2kzICsgMV0sIHZlcnRpY2VzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZXJ0ZXggZnJvbSB0aGUgdHJpbWVzaCx0cmFuc2Zvcm1lZCBieSB0aGUgZ2l2ZW4gcG9zaXRpb24gYW5kIHF1YXRlcm5pb24uCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0V29ybGRWZXJ0ZXgoaSwgcG9zLCBxdWF0LCBvdXQpIHsKICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgb3V0KTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvcywgcXVhdCwgb3V0LCBvdXQpOwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHRocmVlIHZlcnRpY2VzIGZvciB0cmlhbmdsZSBpLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYykgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAyXSwgYyk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiB0cmlhbmdsZSBpLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGdldE5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQodGhpcy5ub3JtYWxzW2kzXSwgdGhpcy5ub3JtYWxzW2kzICsgMV0sIHRoaXMubm9ybWFsc1tpMyArIDJdKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKGNsaV9hYWJiKTsKICAgICAgY29uc3QgeCA9IGNsaV9hYWJiLnVwcGVyQm91bmQueCAtIGNsaV9hYWJiLmxvd2VyQm91bmQueDsKICAgICAgY29uc3QgeSA9IGNsaV9hYWJiLnVwcGVyQm91bmQueSAtIGNsaV9hYWJiLmxvd2VyQm91bmQueTsKICAgICAgY29uc3QgeiA9IGNsaV9hYWJiLnVwcGVyQm91bmQueiAtIGNsaV9hYWJiLmxvd2VyQm91bmQuejsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQoMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopLCAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGxvY2FsIEFBQkIgZm9yIHRoZSB0cmltZXNoCiAgICAgKi8KCgogICAgY29tcHV0ZUxvY2FsQUFCQihhYWJiKSB7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsKICAgICAgdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3QgdiA9IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0OwogICAgICB0aGlzLmdldFZlcnRleCgwLCB2KTsKICAgICAgbC5jb3B5KHYpOwogICAgICB1LmNvcHkodik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CgogICAgICAgIGlmICh2LnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IHUueCkgewogICAgICAgICAgdS54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGwueSkgewogICAgICAgICAgbC55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gdS55KSB7CiAgICAgICAgICB1LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgbC56KSB7CiAgICAgICAgICBsLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgLmFhYmJgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQUFCQigpIHsKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKHRoaXMuYWFiYik7CiAgICB9CiAgICAvKioKICAgICAqIFdpbGwgdXBkYXRlIHRoZSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICAvLyBBc3N1bWUgcG9pbnRzIGFyZSBkaXN0cmlidXRlZCB3aXRoIGxvY2FsICgwLDAsMCkgYXMgY2VudGVyCiAgICAgIGxldCBtYXgyID0gMDsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdmVydGljZXMubGVuZ3RoIC8gMzsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgY29uc3Qgbm9ybTIgPSB2Lmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoKICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAvIDMsCiAgICAgICAgICAgICAgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICAgICAgY29uc3QgbWlueCxtaW55LG1pbnosbWF4eCxtYXh5LG1heHo7CiAgICAgICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDsKICAgICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKyl7CiAgICAgICAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICAgICAgICBwb3MudmFkZCh2LCB2KTsKICAgICAgICAgICAgICBpZiAodi54IDwgbWlueCB8fCBtaW54PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi54ID4gbWF4eCB8fCBtYXh4PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGlmICh2LnkgPCBtaW55IHx8IG1pbnk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW55ID0gdi55OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnkgPiBtYXh5IHx8IG1heHk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh5ID0gdi55OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueiA8IG1pbnogfHwgbWluej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnogPSB2Lno7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueiA+IG1heHogfHwgbWF4ej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHogPSB2Lno7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbWluLnNldChtaW54LG1pbnksbWlueik7CiAgICAgICAgICBtYXguc2V0KG1heHgsbWF4eSxtYXh6KTsKICAgICAgICAgICovCiAgICAgIC8vIEZhc3RlciBhcHByb3hpbWF0aW9uIHVzaW5nIGxvY2FsIEFBQkIKICAgICAgY29uc3QgZnJhbWUgPSBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWU7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9hYWJiOwogICAgICBmcmFtZS5wb3NpdGlvbiA9IHBvczsKICAgICAgZnJhbWUucXVhdGVybmlvbiA9IHF1YXQ7CiAgICAgIHRoaXMuYWFiYi50b1dvcmxkRnJhbWUoZnJhbWUsIHJlc3VsdCk7CiAgICAgIG1pbi5jb3B5KHJlc3VsdC5sb3dlckJvdW5kKTsKICAgICAgbWF4LmNvcHkocmVzdWx0LnVwcGVyQm91bmQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYXBwcm94aW1hdGUgdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSBhIFRyaW1lc2ggaW5zdGFuY2UsIHNoYXBlZCBhcyBhIHRvcnVzLgogICAgICovCgoKICAgIHN0YXRpYyBjcmVhdGVUb3J1cyhyYWRpdXMsIHR1YmUsIHJhZGlhbFNlZ21lbnRzLCB0dWJ1bGFyU2VnbWVudHMsIGFyYykgewogICAgICBpZiAocmFkaXVzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpdXMgPSAxOwogICAgICB9CgogICAgICBpZiAodHViZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHViZSA9IDAuNTsKICAgICAgfQoKICAgICAgaWYgKHJhZGlhbFNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpYWxTZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmICh0dWJ1bGFyU2VnbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIHR1YnVsYXJTZWdtZW50cyA9IDY7CiAgICAgIH0KCiAgICAgIGlmIChhcmMgPT09IHZvaWQgMCkgewogICAgICAgIGFyYyA9IE1hdGguUEkgKiAyOwogICAgICB9CgogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBpbmRpY2VzID0gW107CgogICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHUgPSBpIC8gdHVidWxhclNlZ21lbnRzICogYXJjOwogICAgICAgICAgY29uc3QgdiA9IGogLyByYWRpYWxTZWdtZW50cyAqIE1hdGguUEkgKiAyOwogICAgICAgICAgY29uc3QgeCA9IChyYWRpdXMgKyB0dWJlICogTWF0aC5jb3ModikpICogTWF0aC5jb3ModSk7CiAgICAgICAgICBjb25zdCB5ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLnNpbih1KTsKICAgICAgICAgIGNvbnN0IHogPSB0dWJlICogTWF0aC5zaW4odik7CiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKHgsIHksIHopOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gcmFkaWFsU2VnbWVudHM7IGorKykgewogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7CiAgICAgICAgICBjb25zdCBhID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGkgLSAxOwogICAgICAgICAgY29uc3QgYiA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIChqIC0gMSkgKyBpIC0gMTsKICAgICAgICAgIGNvbnN0IGMgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaTsKICAgICAgICAgIGNvbnN0IGQgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaTsKICAgICAgICAgIGluZGljZXMucHVzaChhLCBiLCBkKTsKICAgICAgICAgIGluZGljZXMucHVzaChiLCBjLCBkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcyk7CiAgICB9CgogIH0KICBjb25zdCBjb21wdXRlTm9ybWFsc19uID0gbmV3IFZlYzMoKTsKICBjb25zdCB1bnNjYWxlZEFBQkIgPSBuZXcgQUFCQigpOwogIGNvbnN0IGdldEVkZ2VWZWN0b3JfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldEVkZ2VWZWN0b3JfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICBjb25zdCBhYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2xpX2FhYmIgPSBuZXcgQUFCQigpOwogIGNvbnN0IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWUgPSBuZXcgVHJhbnNmb3JtKCk7CiAgY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2FhYmIgPSBuZXcgQUFCQigpOwoKICAvKioKICAgKiBDb25zdHJhaW50IGVxdWF0aW9uIHNvbHZlciBiYXNlIGNsYXNzLgogICAqLwogIGNsYXNzIFNvbHZlciB7CiAgICAvKioKICAgICAqIEFsbCBlcXVhdGlvbnMgdG8gYmUgc29sdmVkCiAgICAgKi8KCiAgICAvKioKICAgICAqIEB0b2RvIHJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3NlcyEKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdAogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgcmV0dXJuICgvLyBTaG91bGQgcmV0dXJuIHRoZSBudW1iZXIgb2YgaXRlcmF0aW9ucyBkb25lIQogICAgICAgIDAKICAgICAgKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgYWRkRXF1YXRpb24oZXEpIHsKICAgICAgaWYgKGVxLmVuYWJsZWQgJiYgIWVxLmJpLmlzVHJpZ2dlciAmJiAhZXEuYmouaXNUcmlnZ2VyKSB7CiAgICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChlcSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgcmVtb3ZlRXF1YXRpb24oZXEpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IGkgPSBlcXMuaW5kZXhPZihlcSk7CgogICAgICBpZiAoaSAhPT0gLTEpIHsKICAgICAgICBlcXMuc3BsaWNlKGksIDEpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhbGwgZXF1YXRpb25zCiAgICAgKi8KCgogICAgcmVtb3ZlQWxsRXF1YXRpb25zKCkgewogICAgICB0aGlzLmVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgfQoKICB9CgogIC8qKgogICAqIENvbnN0cmFpbnQgZXF1YXRpb24gR2F1c3MtU2VpZGVsIHNvbHZlci4KICAgKiBAdG9kbyBUaGUgc3Bvb2sgcGFyYW1ldGVycyBzaG91bGQgYmUgc3BlY2lmaWVkIGZvciBlYWNoIGNvbnN0cmFpbnQsIG5vdCBnbG9iYWxseS4KICAgKiBAc2VlIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDA5L2xlY3R1cmVzL3Nwb29rbm90ZXMucGRmCiAgICovCiAgY2xhc3MgR1NTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLgogICAgICogVGhlIG1vcmUgaXRlcmF0aW9ucywgdGhlIG1vcmUgY29ycmVjdCBzaW11bGF0aW9uLiBNb3JlIGl0ZXJhdGlvbnMgbmVlZCBtb3JlIGNvbXB1dGF0aW9ucyB0aG91Z2guIElmIHlvdSBoYXZlIGEgbGFyZ2UgZ3Jhdml0eSBmb3JjZSBpbiB5b3VyIHdvcmxkLCB5b3Ugd2lsbCBuZWVkIG1vcmUgaXRlcmF0aW9ucy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBsZXQgaXRlciA9IDA7CiAgICAgIGNvbnN0IG1heEl0ZXIgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IHRvbFNxdWFyZWQgPSB0aGlzLnRvbGVyYW5jZSAqIHRoaXMudG9sZXJhbmNlOwogICAgICBjb25zdCBlcXVhdGlvbnMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgTmVxID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaCA9IGR0OwogICAgICBsZXQgQjsKICAgICAgbGV0IGludkM7CiAgICAgIGxldCBkZWx0YWxhbWJkYTsKICAgICAgbGV0IGRlbHRhbGFtYmRhVG90OwogICAgICBsZXQgR1dsYW1iZGE7CiAgICAgIGxldCBsYW1iZGFqOyAvLyBVcGRhdGUgc29sdmUgbWFzcwoKICAgICAgaWYgKE5lcSAhPT0gMCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGJvZGllc1tpXS51cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFRoaW5ncyB0aGF0IGRvIG5vdCBjaGFuZ2UgZHVyaW5nIGl0ZXJhdGlvbiBjYW4gYmUgY29tcHV0ZWQgb25jZQoKCiAgICAgIGNvbnN0IGludkNzID0gR1NTb2x2ZXJfc29sdmVfaW52Q3M7CiAgICAgIGNvbnN0IEJzID0gR1NTb2x2ZXJfc29sdmVfQnM7CiAgICAgIGNvbnN0IGxhbWJkYSA9IEdTU29sdmVyX3NvbHZlX2xhbWJkYTsKICAgICAgaW52Q3MubGVuZ3RoID0gTmVxOwogICAgICBCcy5sZW5ndGggPSBOZXE7CiAgICAgIGxhbWJkYS5sZW5ndGggPSBOZXE7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gZXF1YXRpb25zW2ldOwogICAgICAgIGxhbWJkYVtpXSA9IDAuMDsKICAgICAgICBCc1tpXSA9IGMuY29tcHV0ZUIoaCk7CiAgICAgICAgaW52Q3NbaV0gPSAxLjAgLyBjLmNvbXB1dGVDKCk7CiAgICAgIH0KCiAgICAgIGlmIChOZXEgIT09IDApIHsKICAgICAgICAvLyBSZXNldCB2bGFtYmRhCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHZsYW1iZGEgPSBiLnZsYW1iZGE7CiAgICAgICAgICBjb25zdCB3bGFtYmRhID0gYi53bGFtYmRhOwogICAgICAgICAgdmxhbWJkYS5zZXQoMCwgMCwgMCk7CiAgICAgICAgICB3bGFtYmRhLnNldCgwLCAwLCAwKTsKICAgICAgICB9IC8vIEl0ZXJhdGUgb3ZlciBlcXVhdGlvbnMKCgogICAgICAgIGZvciAoaXRlciA9IDA7IGl0ZXIgIT09IG1heEl0ZXI7IGl0ZXIrKykgewogICAgICAgICAgLy8gQWNjdW11bGF0ZSB0aGUgdG90YWwgZXJyb3IgZm9yIGVhY2ggaXRlcmF0aW9uLgogICAgICAgICAgZGVsdGFsYW1iZGFUb3QgPSAwLjA7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5lcTsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbal07IC8vIENvbXB1dGUgaXRlcmF0aW9uCgogICAgICAgICAgICBCID0gQnNbal07CiAgICAgICAgICAgIGludkMgPSBpbnZDc1tqXTsKICAgICAgICAgICAgbGFtYmRhaiA9IGxhbWJkYVtqXTsKICAgICAgICAgICAgR1dsYW1iZGEgPSBjLmNvbXB1dGVHV2xhbWJkYSgpOwogICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGludkMgKiAoQiAtIEdXbGFtYmRhIC0gYy5lcHMgKiBsYW1iZGFqKTsgLy8gQ2xhbXAgaWYgd2UgYXJlIG5vdCB3aXRoaW4gdGhlIG1pbi9tYXggaW50ZXJ2YWwKCiAgICAgICAgICAgIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPCBjLm1pbkZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1pbkZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfSBlbHNlIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPiBjLm1heEZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1heEZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGFtYmRhW2pdICs9IGRlbHRhbGFtYmRhOwogICAgICAgICAgICBkZWx0YWxhbWJkYVRvdCArPSBkZWx0YWxhbWJkYSA+IDAuMCA/IGRlbHRhbGFtYmRhIDogLWRlbHRhbGFtYmRhOyAvLyBhYnMoZGVsdGFsYW1iZGEpCgogICAgICAgICAgICBjLmFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSk7CiAgICAgICAgICB9IC8vIElmIHRoZSB0b3RhbCBlcnJvciBpcyBzbWFsbCBlbm91Z2ggLSBzdG9wIGl0ZXJhdGUKCgogICAgICAgICAgaWYgKGRlbHRhbGFtYmRhVG90ICogZGVsdGFsYW1iZGFUb3QgPCB0b2xTcXVhcmVkKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gQWRkIHJlc3VsdCB0byB2ZWxvY2l0eQoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHYgPSBiLnZlbG9jaXR5OwogICAgICAgICAgY29uc3QgdyA9IGIuYW5ndWxhclZlbG9jaXR5OwogICAgICAgICAgYi52bGFtYmRhLnZtdWwoYi5saW5lYXJGYWN0b3IsIGIudmxhbWJkYSk7CiAgICAgICAgICB2LnZhZGQoYi52bGFtYmRhLCB2KTsKICAgICAgICAgIGIud2xhbWJkYS52bXVsKGIuYW5ndWxhckZhY3RvciwgYi53bGFtYmRhKTsKICAgICAgICAgIHcudmFkZChiLndsYW1iZGEsIHcpOwogICAgICAgIH0gLy8gU2V0IHRoZSBgLm11bHRpcGxpZXJgIHByb3BlcnR5IG9mIGVhY2ggZXF1YXRpb24KCgogICAgICAgIGxldCBsID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgICBjb25zdCBpbnZEdCA9IDEgLyBoOwoKICAgICAgICB3aGlsZSAobC0tKSB7CiAgICAgICAgICBlcXVhdGlvbnNbbF0ubXVsdGlwbGllciA9IGxhbWJkYVtsXSAqIGludkR0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGl0ZXI7CiAgICB9CgogIH0gLy8gSnVzdCB0ZW1wb3JhcnkgbnVtYmVyIGhvbGRlcnMgdGhhdCB3ZSB3YW50IHRvIHJldXNlIGVhY2ggaXRlcmF0aW9uLgoKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9sYW1iZGEgPSBbXTsKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9pbnZDcyA9IFtdOwogIGNvbnN0IEdTU29sdmVyX3NvbHZlX0JzID0gW107CgogIC8qKgogICAqIFNwbGl0cyB0aGUgZXF1YXRpb25zIGludG8gaXNsYW5kcyBhbmQgc29sdmVzIHRoZW0gaW5kZXBlbmRlbnRseS4gQ2FuIGltcHJvdmUgcGVyZm9ybWFuY2UuCiAgICovCiAgY2xhc3MgU3BsaXRTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLgogICAgICovCgogICAgLyoqIHN1YnNvbHZlciAqLwogICAgY29uc3RydWN0b3Ioc3Vic29sdmVyKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICAgIHRoaXMuc3Vic29sdmVyID0gc3Vic29sdmVyOwogICAgICB0aGlzLm5vZGVzID0gW107CiAgICAgIHRoaXMubm9kZVBvb2wgPSBbXTsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlICh0aGlzLm5vZGVQb29sLmxlbmd0aCA8IDEyOCkgewogICAgICAgIHRoaXMubm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY3JlYXRlTm9kZQogICAgICovCgoKICAgIGNyZWF0ZU5vZGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYm9keTogbnVsbCwKICAgICAgICBjaGlsZHJlbjogW10sCiAgICAgICAgZXFzOiBbXSwKICAgICAgICB2aXNpdGVkOiBmYWxzZQogICAgICB9OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSB0aGUgc3Vic3lzdGVtcwogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgY29uc3Qgbm9kZXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlczsKICAgICAgY29uc3Qgbm9kZVBvb2wgPSB0aGlzLm5vZGVQb29sOwogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zOwogICAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3Qgc3Vic29sdmVyID0gdGhpcy5zdWJzb2x2ZXI7IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlCgogICAgICB3aGlsZSAobm9kZVBvb2wubGVuZ3RoIDwgTmJvZGllcykgewogICAgICAgIG5vZGVQb29sLnB1c2godGhpcy5jcmVhdGVOb2RlKCkpOwogICAgICB9CgogICAgICBub2Rlcy5sZW5ndGggPSBOYm9kaWVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOYm9kaWVzOyBpKyspIHsKICAgICAgICBub2Rlc1tpXSA9IG5vZGVQb29sW2ldOwogICAgICB9IC8vIFJlc2V0IG5vZGUgdmFsdWVzCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKICAgICAgICBub2RlLmJvZHkgPSBib2RpZXNbaV07CiAgICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPSAwOwogICAgICAgIG5vZGUuZXFzLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS52aXNpdGVkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBOZXE7IGsrKykgewogICAgICAgIGNvbnN0IGVxID0gZXF1YXRpb25zW2tdOwogICAgICAgIGNvbnN0IGkgPSBib2RpZXMuaW5kZXhPZihlcS5iaSk7CiAgICAgICAgY29uc3QgaiA9IGJvZGllcy5pbmRleE9mKGVxLmJqKTsKICAgICAgICBjb25zdCBuaSA9IG5vZGVzW2ldOwogICAgICAgIGNvbnN0IG5qID0gbm9kZXNbal07CiAgICAgICAgbmkuY2hpbGRyZW4ucHVzaChuaik7CiAgICAgICAgbmkuZXFzLnB1c2goZXEpOwogICAgICAgIG5qLmNoaWxkcmVuLnB1c2gobmkpOwogICAgICAgIG5qLmVxcy5wdXNoKGVxKTsKICAgICAgfQoKICAgICAgbGV0IGNoaWxkOwogICAgICBsZXQgbiA9IDA7CiAgICAgIGxldCBlcXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9lcXM7CiAgICAgIHN1YnNvbHZlci50b2xlcmFuY2UgPSB0aGlzLnRvbGVyYW5jZTsKICAgICAgc3Vic29sdmVyLml0ZXJhdGlvbnMgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IGR1bW15V29ybGQgPSBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkOwoKICAgICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlcykpIHsKICAgICAgICBlcXMubGVuZ3RoID0gMDsKICAgICAgICBkdW1teVdvcmxkLmJvZGllcy5sZW5ndGggPSAwOwogICAgICAgIGJmcyhjaGlsZCwgdmlzaXRGdW5jLCBkdW1teVdvcmxkLmJvZGllcywgZXFzKTsKICAgICAgICBjb25zdCBOZXFzID0gZXFzLmxlbmd0aDsKICAgICAgICBlcXMgPSBlcXMuc29ydChzb3J0QnlJZCk7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXFzOyBpKyspIHsKICAgICAgICAgIHN1YnNvbHZlci5hZGRFcXVhdGlvbihlcXNbaV0pOwogICAgICAgIH0KCiAgICAgICAgc3Vic29sdmVyLnNvbHZlKGR0LCBkdW1teVdvcmxkKTsKICAgICAgICBzdWJzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7CiAgICAgICAgbisrOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KCiAgfSAvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc3Vic3lzdGVtcwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcyA9IFtdOyAvLyBBbGwgYWxsb2NhdGVkIG5vZGUgb2JqZWN0cwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9lcXMgPSBbXTsgLy8gVGVtcCBhcnJheQoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkID0gewogICAgYm9kaWVzOiBbXQogIH07IC8vIFRlbXAgb2JqZWN0CgogIGNvbnN0IFNUQVRJQyA9IEJvZHkuU1RBVElDOwoKICBmdW5jdGlvbiBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSB7CiAgICBjb25zdCBObm9kZXMgPSBub2Rlcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ub2RlczsgaSsrKSB7CiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKCiAgICAgIGlmICghbm9kZS52aXNpdGVkICYmICEobm9kZS5ib2R5LnR5cGUgJiBTVEFUSUMpKSB7CiAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb25zdCBxdWV1ZSA9IFtdOwoKICBmdW5jdGlvbiBiZnMocm9vdCwgdmlzaXRGdW5jLCBiZHMsIGVxcykgewogICAgcXVldWUucHVzaChyb290KTsKICAgIHJvb3QudmlzaXRlZCA9IHRydWU7CiAgICB2aXNpdEZ1bmMocm9vdCwgYmRzLCBlcXMpOwoKICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOyAvLyBMb29wIG92ZXIgdW52aXNpdGVkIGNoaWxkIG5vZGVzCgogICAgICBsZXQgY2hpbGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGUuY2hpbGRyZW4pKSB7CiAgICAgICAgY2hpbGQudmlzaXRlZCA9IHRydWU7CiAgICAgICAgdmlzaXRGdW5jKGNoaWxkLCBiZHMsIGVxcyk7CiAgICAgICAgcXVldWUucHVzaChjaGlsZCk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHZpc2l0RnVuYyhub2RlLCBiZHMsIGVxcykgewogICAgYmRzLnB1c2gobm9kZS5ib2R5KTsKICAgIGNvbnN0IE5lcXMgPSBub2RlLmVxcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICBjb25zdCBlcSA9IG5vZGUuZXFzW2ldOwoKICAgICAgaWYgKCFlcXMuaW5jbHVkZXMoZXEpKSB7CiAgICAgICAgZXFzLnB1c2goZXEpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7CiAgICByZXR1cm4gYi5pZCAtIGEuaWQ7CiAgfQoKICAvKioKICAgKiBGb3IgcG9vbGluZyBvYmplY3RzIHRoYXQgY2FuIGJlIHJldXNlZC4KICAgKi8KICBjbGFzcyBQb29sIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLm9iamVjdHMgPSBbXTsKICAgICAgdGhpcy50eXBlID0gT2JqZWN0OwogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbiBvYmplY3QgYWZ0ZXIgdXNlCiAgICAgKi8KICAgIHJlbGVhc2UoKSB7CiAgICAgIGNvbnN0IE5hcmdzID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYXJnczsgaSsrKSB7CiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2goaSA8IDAgfHwgYXJndW1lbnRzLmxlbmd0aCA8PSBpID8gdW5kZWZpbmVkIDogYXJndW1lbnRzW2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBvYmplY3QKICAgICAqLwoKCiAgICBnZXQoKSB7CiAgICAgIGlmICh0aGlzLm9iamVjdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0T2JqZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0cy5wb3AoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYW4gb2JqZWN0LiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gZWFjaCBzdWJjbGFzcy4KICAgICAqLwoKCiAgICBjb25zdHJ1Y3RPYmplY3QoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29uc3RydWN0T2JqZWN0KCkgbm90IGltcGxlbWVudGVkIGluIHRoaXMgUG9vbCBzdWJjbGFzcyB5ZXQhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gU2VsZiwgZm9yIGNoYWluaW5nCiAgICAgKi8KCgogICAgcmVzaXplKHNpemUpIHsKICAgICAgY29uc3Qgb2JqZWN0cyA9IHRoaXMub2JqZWN0czsKCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA+IHNpemUpIHsKICAgICAgICBvYmplY3RzLnBvcCgpOwogICAgICB9CgogICAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPCBzaXplKSB7CiAgICAgICAgb2JqZWN0cy5wdXNoKHRoaXMuY29uc3RydWN0T2JqZWN0KCkpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgfQoKICAvKioKICAgKiBWZWMzUG9vbAogICAqLwoKICBjbGFzcyBWZWMzUG9vbCBleHRlbmRzIFBvb2wgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICAgIHRoaXMudHlwZSA9IFZlYzM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYSB2ZWN0b3IKICAgICAqLwogICAgY29uc3RydWN0T2JqZWN0KCkgewogICAgICByZXR1cm4gbmV3IFZlYzMoKTsKICAgIH0KCiAgfQoKICAvLyBOYW1pbmcgcnVsZTogYmFzZWQgb2YgdGhlIG9yZGVyIGluIFNIQVBFX1RZUEVTLAogIC8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZQogIC8vIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBiZWZvcmUsIGluIHRoZSBzZWNvbmQgcGFydAogIC8vIHRoZXJlIGlzIHRoZSBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYWZ0ZXIgaW4gdGhlIFNIQVBFX1RZUEVTIGxpc3QKICBjb25zdCBDT0xMSVNJT05fVFlQRVMgPSB7CiAgICBzcGhlcmVTcGhlcmU6IFNoYXBlLnR5cGVzLlNQSEVSRSwKICAgIHNwaGVyZVBsYW5lOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5QTEFORSwKICAgIGJveEJveDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQk9YLAogICAgc3BoZXJlQm94OiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5CT1gsCiAgICBwbGFuZUJveDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5CT1gsCiAgICBjb252ZXhDb252ZXg6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVDb252ZXg6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBwbGFuZUNvbnZleDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgYm94Q29udmV4OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgc3BoZXJlSGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgYm94SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgY29udmV4SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCwKICAgIHNwaGVyZVBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLlNQSEVSRSwKICAgIHBsYW5lUGFydGljbGU6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsCiAgICBib3hQYXJ0aWNsZTogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsCiAgICBjb252ZXhQYXJ0aWNsZTogU2hhcGUudHlwZXMuUEFSVElDTEUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgY3lsaW5kZXJDeWxpbmRlcjogU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVDeWxpbmRlcjogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBwbGFuZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgYm94Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgY29udmV4Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIGhlaWdodGZpZWxkQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBwYXJ0aWNsZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgc3BoZXJlVHJpbWVzaDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuVFJJTUVTSCwKICAgIHBsYW5lVHJpbWVzaDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5UUklNRVNICiAgfTsKCiAgLyoqCiAgICogSGVscGVyIGNsYXNzIGZvciB0aGUgV29ybGQuIEdlbmVyYXRlcyBDb250YWN0RXF1YXRpb25zLgogICAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzCiAgICogQHRvZG8gQ29udGFjdCByZWR1Y3Rpb24KICAgKiBAdG9kbyBzaG91bGQgbW92ZSBtZXRob2RzIHRvIHByb3RvdHlwZQogICAqLwogIGNsYXNzIE5hcnJvd3BoYXNlIHsKICAgIC8qKgogICAgICogSW50ZXJuYWwgc3RvcmFnZSBvZiBwb29sZWQgY29udGFjdCBwb2ludHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBvb2xlZCB2ZWN0b3JzLgogICAgICovCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVTcGhlcmVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlUGxhbmVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVQbGFuZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5ib3hCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQm94XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQm94XSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4Q29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUNvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wbGFuZUNvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveENvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVIZWlnaHRmaWVsZF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEhlaWdodGZpZWxkXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4SGVpZ2h0ZmllbGRdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lUGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveFBhcnRpY2xlXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94UGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4UGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5ib3hDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5oZWlnaHRmaWVsZEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wYXJ0aWNsZUN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFydGljbGVDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVUcmltZXNoXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlVHJpbWVzaDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wbGFuZVRyaW1lc2hdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7CiAgICB9IC8vIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleFRyaW1lc2hdKCkgewogICAgLy8gICByZXR1cm4gdGhpcy5jb252ZXhUcmltZXNoCiAgICAvLyB9CgoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107CiAgICAgIHRoaXMucmVzdWx0ID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBbXTsKICAgICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLgogICAgICovCgoKICAgIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7CiAgICAgIGxldCBjOwoKICAgICAgaWYgKHRoaXMuY29udGFjdFBvaW50UG9vbC5sZW5ndGgpIHsKICAgICAgICBjID0gdGhpcy5jb250YWN0UG9pbnRQb29sLnBvcCgpOwogICAgICAgIGMuYmkgPSBiaTsKICAgICAgICBjLmJqID0gYmo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTsKICAgICAgfQoKICAgICAgYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOwogICAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247CiAgICAgIGMuc2V0U3Bvb2tQYXJhbXMoY20uY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzLCBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLCB0aGlzLndvcmxkLmR0KTsKICAgICAgY29uc3QgbWF0QSA9IHNpLm1hdGVyaWFsIHx8IGJpLm1hdGVyaWFsOwogICAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICBjLnJlc3RpdHV0aW9uID0gbWF0QS5yZXN0aXR1dGlvbiAqIG1hdEIucmVzdGl0dXRpb247CiAgICAgIH0KCiAgICAgIGMuc2kgPSBvdmVycmlkZVNoYXBlQSB8fCBzaTsKICAgICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcXVhdGlvbiwgb3V0QXJyYXkpIHsKICAgICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7CiAgICAgIGNvbnN0IGJvZHlCID0gY29udGFjdEVxdWF0aW9uLmJqOwogICAgICBjb25zdCBzaGFwZUEgPSBjb250YWN0RXF1YXRpb24uc2k7CiAgICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajsKICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLndvcmxkOwogICAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDsgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbQoKICAgICAgbGV0IGZyaWN0aW9uID0gY20uZnJpY3Rpb247CiAgICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzaGFwZUIubWF0ZXJpYWwgfHwgYm9keUIubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEuZnJpY3Rpb24gPj0gMCAmJiBtYXRCLmZyaWN0aW9uID49IDApIHsKICAgICAgICBmcmljdGlvbiA9IG1hdEEuZnJpY3Rpb24gKiBtYXRCLmZyaWN0aW9uOwogICAgICB9CgogICAgICBpZiAoZnJpY3Rpb24gPiAwKSB7CiAgICAgICAgLy8gQ3JlYXRlIDIgdGFuZ2VudCBlcXVhdGlvbnMKICAgICAgICAvLyBVc2VycyBtYXkgcHJvdmlkZSBhIGZvcmNlIGRpZmZlcmVudCBmcm9tIGdsb2JhbCBncmF2aXR5IHRvIHVzZSB3aGVuIGNvbXB1dGluZyBjb250YWN0IGZyaWN0aW9uLgogICAgICAgIGNvbnN0IG11ZyA9IGZyaWN0aW9uICogKHdvcmxkLmZyaWN0aW9uR3Jhdml0eSB8fCB3b3JsZC5ncmF2aXR5KS5sZW5ndGgoKTsKICAgICAgICBsZXQgcmVkdWNlZE1hc3MgPSBib2R5QS5pbnZNYXNzICsgYm9keUIuaW52TWFzczsKCiAgICAgICAgaWYgKHJlZHVjZWRNYXNzID4gMCkgewogICAgICAgICAgcmVkdWNlZE1hc3MgPSAxIC8gcmVkdWNlZE1hc3M7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBwb29sID0gdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbDsKICAgICAgICBjb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJvZHlBLCBib2R5QiwgbXVnICogcmVkdWNlZE1hc3MpOwogICAgICAgIGNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtdWcgKiByZWR1Y2VkTWFzcyk7CiAgICAgICAgYzEuYmkgPSBjMi5iaSA9IGJvZHlBOwogICAgICAgIGMxLmJqID0gYzIuYmogPSBib2R5QjsKICAgICAgICBjMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZyAqIHJlZHVjZWRNYXNzOwogICAgICAgIGMxLm1heEZvcmNlID0gYzIubWF4Rm9yY2UgPSBtdWcgKiByZWR1Y2VkTWFzczsgLy8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzCgogICAgICAgIGMxLnJpLmNvcHkoY29udGFjdEVxdWF0aW9uLnJpKTsKICAgICAgICBjMS5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7CiAgICAgICAgYzIucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpOwogICAgICAgIGMyLnJqLmNvcHkoY29udGFjdEVxdWF0aW9uLnJqKTsgLy8gQ29uc3RydWN0IHRhbmdlbnRzCgogICAgICAgIGNvbnRhY3RFcXVhdGlvbi5uaS50YW5nZW50cyhjMS50LCBjMi50KTsgLy8gU2V0IHNwb29rIHBhcmFtcwoKICAgICAgICBjMS5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpOwogICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7CiAgICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjb250YWN0RXF1YXRpb24uZW5hYmxlZDsKICAgICAgICBvdXRBcnJheS5wdXNoKGMxLCBjMik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVGFrZSB0aGUgYXZlcmFnZSBOIGxhdGVzdCBjb250YWN0IHBvaW50IG9uIHRoZSBwbGFuZS4KICAgICAqLwoKCiAgICBjcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKSB7CiAgICAgIC8vIFRoZSBsYXN0IGNvbnRhY3RFcXVhdGlvbgogICAgICBsZXQgYyA9IHRoaXMucmVzdWx0W3RoaXMucmVzdWx0Lmxlbmd0aCAtIDFdOyAvLyBDcmVhdGUgdGhlIHJlc3VsdDogdHdvICJhdmVyYWdlIiBmcmljdGlvbiBlcXVhdGlvbnMKCiAgICAgIGlmICghdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGMsIHRoaXMuZnJpY3Rpb25SZXN1bHQpIHx8IG51bUNvbnRhY3RzID09PSAxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBmMSA9IHRoaXMuZnJpY3Rpb25SZXN1bHRbdGhpcy5mcmljdGlvblJlc3VsdC5sZW5ndGggLSAyXTsKICAgICAgY29uc3QgZjIgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMV07CiAgICAgIGF2ZXJhZ2VOb3JtYWwuc2V0WmVybygpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zZXRaZXJvKCk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNldFplcm8oKTsKICAgICAgY29uc3QgYm9keUEgPSBjLmJpOwogICAgICBjLmJqOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IG51bUNvbnRhY3RzOyBpKyspIHsKICAgICAgICBjID0gdGhpcy5yZXN1bHRbdGhpcy5yZXN1bHQubGVuZ3RoIC0gMSAtIGldOwoKICAgICAgICBpZiAoYy5iaSAhPT0gYm9keUEpIHsKICAgICAgICAgIGF2ZXJhZ2VOb3JtYWwudmFkZChjLm5pLCBhdmVyYWdlTm9ybWFsKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEEpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF2ZXJhZ2VOb3JtYWwudnN1YihjLm5pLCBhdmVyYWdlTm9ybWFsKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEEpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJpLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBpbnZOdW1Db250YWN0cyA9IDEgLyBudW1Db250YWN0czsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2NhbGUoaW52TnVtQ29udGFjdHMsIGYxLnJpKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIuc2NhbGUoaW52TnVtQ29udGFjdHMsIGYxLnJqKTsKICAgICAgZjIucmkuY29weShmMS5yaSk7IC8vIFNob3VsZCBiZSB0aGUgc2FtZQoKICAgICAgZjIucmouY29weShmMS5yaik7CiAgICAgIGF2ZXJhZ2VOb3JtYWwubm9ybWFsaXplKCk7CiAgICAgIGF2ZXJhZ2VOb3JtYWwudGFuZ2VudHMoZjEudCwgZjIudCk7IC8vIHJldHVybiBlcTsKICAgIH0KICAgIC8qKgogICAgICogR2VuZXJhdGUgYWxsIGNvbnRhY3RzIGJldHdlZW4gYSBsaXN0IG9mIGJvZHkgcGFpcnMKICAgICAqIEBwYXJhbSBwMSBBcnJheSBvZiBib2R5IGluZGljZXMKICAgICAqIEBwYXJhbSBwMiBBcnJheSBvZiBib2R5IGluZGljZXMKICAgICAqIEBwYXJhbSByZXN1bHQgQXJyYXkgdG8gc3RvcmUgZ2VuZXJhdGVkIGNvbnRhY3RzCiAgICAgKiBAcGFyYW0gb2xkY29udGFjdHMgT3B0aW9uYWwuIEFycmF5IG9mIHJldXNhYmxlIGNvbnRhY3Qgb2JqZWN0cwogICAgICovCgoKICAgIGdldENvbnRhY3RzKHAxLCBwMiwgd29ybGQsIHJlc3VsdCwgb2xkY29udGFjdHMsIGZyaWN0aW9uUmVzdWx0LCBmcmljdGlvblBvb2wpIHsKICAgICAgLy8gU2F2ZSBvbGQgY29udGFjdCBvYmplY3RzCiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IG9sZGNvbnRhY3RzOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gZnJpY3Rpb25Qb29sOwogICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgdGhpcy5mcmljdGlvblJlc3VsdCA9IGZyaWN0aW9uUmVzdWx0OwogICAgICBjb25zdCBxaSA9IHRtcFF1YXQxOwogICAgICBjb25zdCBxaiA9IHRtcFF1YXQyOwogICAgICBjb25zdCB4aSA9IHRtcFZlYzE7CiAgICAgIGNvbnN0IHhqID0gdG1wVmVjMjsKCiAgICAgIGZvciAobGV0IGsgPSAwLCBOID0gcDEubGVuZ3RoOyBrICE9PSBOOyBrKyspIHsKICAgICAgICAvLyBHZXQgY3VycmVudCBjb2xsaXNpb24gYm9kaWVzCiAgICAgICAgY29uc3QgYmkgPSBwMVtrXTsKICAgICAgICBjb25zdCBiaiA9IHAyW2tdOyAvLyBHZXQgY29udGFjdCBtYXRlcmlhbAoKICAgICAgICBsZXQgYm9keUNvbnRhY3RNYXRlcmlhbCA9IG51bGw7CgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgYm9keUNvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmdldENvbnRhY3RNYXRlcmlhbChiaS5tYXRlcmlhbCwgYmoubWF0ZXJpYWwpIHx8IG51bGw7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBqdXN0VGVzdCA9IGJpLnR5cGUgJiBCb2R5LktJTkVNQVRJQyAmJiBiai50eXBlICYgQm9keS5TVEFUSUMgfHwgYmkudHlwZSAmIEJvZHkuU1RBVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQyB8fCBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuS0lORU1BVElDOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpLnNoYXBlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgYmkucXVhdGVybmlvbi5tdWx0KGJpLnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7CiAgICAgICAgICBiaS5xdWF0ZXJuaW9uLnZtdWx0KGJpLnNoYXBlT2Zmc2V0c1tpXSwgeGkpOwogICAgICAgICAgeGkudmFkZChiaS5wb3NpdGlvbiwgeGkpOwogICAgICAgICAgY29uc3Qgc2kgPSBiaS5zaGFwZXNbaV07CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiai5zaGFwZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgLy8gQ29tcHV0ZSB3b3JsZCB0cmFuc2Zvcm0gb2Ygc2hhcGVzCiAgICAgICAgICAgIGJqLnF1YXRlcm5pb24ubXVsdChiai5zaGFwZU9yaWVudGF0aW9uc1tqXSwgcWopOwogICAgICAgICAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KGJqLnNoYXBlT2Zmc2V0c1tqXSwgeGopOwogICAgICAgICAgICB4ai52YWRkKGJqLnBvc2l0aW9uLCB4aik7CiAgICAgICAgICAgIGNvbnN0IHNqID0gYmouc2hhcGVzW2pdOwoKICAgICAgICAgICAgaWYgKCEoc2kuY29sbGlzaW9uRmlsdGVyTWFzayAmIHNqLmNvbGxpc2lvbkZpbHRlckdyb3VwICYmIHNqLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzaS5jb2xsaXNpb25GaWx0ZXJHcm91cCkpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9IC8vIEdldCBjb2xsaXNpb24gbWF0ZXJpYWwKCgogICAgICAgICAgICBsZXQgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSBudWxsOwoKICAgICAgICAgICAgaWYgKHNpLm1hdGVyaWFsICYmIHNqLm1hdGVyaWFsKSB7CiAgICAgICAgICAgICAgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoc2kubWF0ZXJpYWwsIHNqLm1hdGVyaWFsKSB8fCBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSBzaGFwZUNvbnRhY3RNYXRlcmlhbCB8fCBib2R5Q29udGFjdE1hdGVyaWFsIHx8IHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7IC8vIEdldCBjb250YWN0cwoKICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXJJbmRleCA9IHNpLnR5cGUgfCBzai50eXBlOwogICAgICAgICAgICBjb25zdCByZXNvbHZlciA9IHRoaXNbcmVzb2x2ZXJJbmRleF07CgogICAgICAgICAgICBpZiAocmVzb2x2ZXIpIHsKICAgICAgICAgICAgICBsZXQgcmV0dmFsID0gZmFsc2U7IC8vIFRPIERPOiBpbnZlc3RpZ2F0ZSB3aHkgc3BoZXJlUGFydGljbGUgYW5kIGNvbnZleFBhcnRpY2xlCiAgICAgICAgICAgICAgLy8gcmVzb2x2ZXJzIGV4cGVjdCBzaSBhbmQgc2ogc2hhcGVzIHRvIGJlIGluIHJldmVyc2Ugb3JkZXIKICAgICAgICAgICAgICAvLyAoaS5lLiBsYXJnZXIgaW50ZWdlciB2YWx1ZSB0eXBlIGZpcnN0IGluc3RlYWQgb2Ygc21hbGxlciBmaXJzdCkKCiAgICAgICAgICAgICAgaWYgKHNpLnR5cGUgPCBzai50eXBlKSB7CiAgICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHZhbCA9IHJlc29sdmVyLmNhbGwodGhpcywgc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChyZXR2YWwgJiYganVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG92ZXJsYXAKICAgICAgICAgICAgICAgIHdvcmxkLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTsKICAgICAgICAgICAgICAgIHdvcmxkLmJvZHlPdmVybGFwS2VlcGVyLnNldChiaS5pZCwgYmouaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNwaGVyZVNwaGVyZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICByZXR1cm4geGkuZGlzdGFuY2VTcXVhcmVkKHhqKSA8IChzaS5yYWRpdXMgKyBzai5yYWRpdXMpICoqIDI7CiAgICAgIH0gLy8gV2Ugd2lsbCBoYXZlIG9ubHkgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlCgoKICAgICAgY29uc3QgY29udGFjdEVxID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgIHhqLnZzdWIoeGksIGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5uaS5ub3JtYWxpemUoKTsgLy8gQ29udGFjdCBwb2ludCBsb2NhdGlvbnMKCiAgICAgIGNvbnRhY3RFcS5yaS5jb3B5KGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5yai5jb3B5KGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5yaS5zY2FsZShzaS5yYWRpdXMsIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yai5zY2FsZSgtc2oucmFkaXVzLCBjb250YWN0RXEucmopOwogICAgICBjb250YWN0RXEucmkudmFkZCh4aSwgY29udGFjdEVxLnJpKTsKICAgICAgY29udGFjdEVxLnJpLnZzdWIoYmkucG9zaXRpb24sIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yai52YWRkKHhqLCBjb250YWN0RXEucmopOwogICAgICBjb250YWN0RXEucmoudnN1Yihiai5wb3NpdGlvbiwgY29udGFjdEVxLnJqKTsKICAgICAgdGhpcy5yZXN1bHQucHVzaChjb250YWN0RXEpOwogICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoY29udGFjdEVxLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgIH0KCiAgICBzcGhlcmVQbGFuZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBXZSB3aWxsIGhhdmUgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlCiAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgci5uaS5zZXQoMCwgMCwgMSk7CiAgICAgIHFqLnZtdWx0KHIubmksIHIubmkpOwogICAgICByLm5pLm5lZ2F0ZShyLm5pKTsgLy8gYm9keSBpIGlzIHRoZSBzcGhlcmUsIGZsaXAgbm9ybWFsCgogICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyBOZWVkZWQ/CiAgICAgIC8vIFZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gY29udGFjdCBwb2ludAoKICAgICAgci5uaS5zY2FsZShzaS5yYWRpdXMsIHIucmkpOyAvLyBQcm9qZWN0IGRvd24gc3BoZXJlIG9uIHBsYW5lCgogICAgICB4aS52c3ViKHhqLCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpOwogICAgICByLm5pLnNjYWxlKHIubmkuZG90KHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSksIHBsYW5lX3RvX3NwaGVyZV9vcnRobyk7CiAgICAgIHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZS52c3ViKHBsYW5lX3RvX3NwaGVyZV9vcnRobywgci5yaik7IC8vIFRoZSBzcGhlcmUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHBsYW5lCgogICAgICBpZiAoLXBvaW50X29uX3BsYW5lX3RvX3NwaGVyZS5kb3Qoci5uaSkgPD0gc2kucmFkaXVzKSB7CiAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IC8vIE1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIGJvZHkKCgogICAgICAgIGNvbnN0IHJpID0gci5yaTsKICAgICAgICBjb25zdCByaiA9IHIucmo7CiAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9CiAgICB9CgogICAgYm94Qm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNqLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHNwaGVyZUJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCB2M3Bvb2wgPSB0aGlzLnYzcG9vbDsgLy8gd2UgcmVmZXIgdG8gdGhlIGJveCBhcyBib2R5IGoKCiAgICAgIGNvbnN0IHNpZGVzID0gc3BoZXJlQm94X3NpZGVzOwogICAgICB4aS52c3ViKHhqLCBib3hfdG9fc3BoZXJlKTsKICAgICAgc2ouZ2V0U2lkZU5vcm1hbHMoc2lkZXMsIHFqKTsKICAgICAgY29uc3QgUiA9IHNpLnJhZGl1czsKCiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBTdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgcGVuZXRyYXRpb24gaW5mbwoKICAgICAgY29uc3Qgc2lkZV9ucyA9IHNwaGVyZUJveF9zaWRlX25zOwogICAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTsKICAgICAgY29uc3Qgc2lkZV9uczIgPSBzcGhlcmVCb3hfc2lkZV9uczI7CiAgICAgIGxldCBzaWRlX2ggPSBudWxsOwogICAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwOwogICAgICBsZXQgc2lkZV9kb3QxID0gMDsKICAgICAgbGV0IHNpZGVfZG90MiA9IDA7CiAgICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDsKCiAgICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykgewogICAgICAgIC8vIEdldCB0aGUgcGxhbmUgc2lkZSBub3JtYWwgKG5zKQogICAgICAgIGNvbnN0IG5zID0gc3BoZXJlQm94X25zOwogICAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7CiAgICAgICAgY29uc3QgaCA9IG5zLmxlbmd0aCgpOwogICAgICAgIG5zLm5vcm1hbGl6ZSgpOyAvLyBUaGUgbm9ybWFsL2Rpc3RhbmNlIGRvdCBwcm9kdWN0IHRlbGxzIHdoaWNoIHNpZGUgb2YgdGhlIHBsYW5lIHdlIGFyZQoKICAgICAgICBjb25zdCBkb3QgPSBib3hfdG9fc3BoZXJlLmRvdChucyk7CgogICAgICAgIGlmIChkb3QgPCBoICsgUiAmJiBkb3QgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zCiAgICAgICAgICBjb25zdCBuczEgPSBzcGhlcmVCb3hfbnMxOwogICAgICAgICAgY29uc3QgbnMyID0gc3BoZXJlQm94X25zMjsKICAgICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTsKICAgICAgICAgIG5zMi5jb3B5KHNpZGVzWyhpZHggKyAyKSAlIDNdKTsKICAgICAgICAgIGNvbnN0IGgxID0gbnMxLmxlbmd0aCgpOwogICAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7CiAgICAgICAgICBuczEubm9ybWFsaXplKCk7CiAgICAgICAgICBuczIubm9ybWFsaXplKCk7CiAgICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTsKICAgICAgICAgIGNvbnN0IGRvdDIgPSBib3hfdG9fc3BoZXJlLmRvdChuczIpOwoKICAgICAgICAgIGlmIChkb3QxIDwgaDEgJiYgZG90MSA+IC1oMSAmJiBkb3QyIDwgaDIgJiYgZG90MiA+IC1oMikgewogICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5hYnMoZG90IC0gaCAtIFIpOwoKICAgICAgICAgICAgaWYgKHNpZGVfZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdCA8IHNpZGVfZGlzdGFuY2UpIHsKICAgICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDsKICAgICAgICAgICAgICBzaWRlX2RvdDEgPSBkb3QxOwogICAgICAgICAgICAgIHNpZGVfZG90MiA9IGRvdDI7CiAgICAgICAgICAgICAgc2lkZV9oID0gaDsKICAgICAgICAgICAgICBzaWRlX25zLmNvcHkobnMpOwogICAgICAgICAgICAgIHNpZGVfbnMxLmNvcHkobnMxKTsKICAgICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7CiAgICAgICAgICAgICAgc2lkZV9wZW5ldHJhdGlvbnMrKzsKCiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzaWRlX3BlbmV0cmF0aW9ucykgewogICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBzaWRlX25zLnNjYWxlKC1SLCByLnJpKTsgLy8gU3BoZXJlIHIKCiAgICAgICAgci5uaS5jb3B5KHNpZGVfbnMpOwogICAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBOb3JtYWwgc2hvdWxkIGJlIG91dCBvZiBzcGhlcmUKCiAgICAgICAgc2lkZV9ucy5zY2FsZShzaWRlX2gsIHNpZGVfbnMpOwogICAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpOwogICAgICAgIHNpZGVfbnMudmFkZChzaWRlX25zMSwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczIuc2NhbGUoc2lkZV9kb3QyLCBzaWRlX25zMik7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfSAvLyBDaGVjayBjb3JuZXJzCgoKICAgICAgbGV0IHJqID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykgewogICAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSAyICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCAhPT0gMiAmJiAhZm91bmQ7IGwrKykgewogICAgICAgICAgICByai5zZXQoMCwgMCwgMCk7CgogICAgICAgICAgICBpZiAoaikgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChrKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMV0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGwpIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1syXSwgcmopOwogICAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKCiAgICAgICAgICAgIHhqLnZhZGQocmosIHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIHIucmkuY29weShzcGhlcmVfdG9fY29ybmVyKTsKICAgICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgICAgICByLnJpLnNjYWxlKFIsIHIucmkpOwogICAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHYzcG9vbC5yZWxlYXNlKHJqKTsKICAgICAgcmogPSBudWxsOyAvLyBDaGVjayBlZGdlcwoKICAgICAgY29uc3QgZWRnZVRhbmdlbnQgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGVkZ2VDZW50ZXIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyCgogICAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBkaXN0ID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBOc2lkZXMgPSBzaWRlcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTnNpZGVzICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykgewogICAgICAgICAgaWYgKGogJSAzICE9PSBrICUgMykgewogICAgICAgICAgICAvLyBHZXQgZWRnZSB0YW5nZW50CiAgICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7CiAgICAgICAgICAgIGVkZ2VUYW5nZW50Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBzaWRlc1tqXS52YWRkKHNpZGVzW2tdLCBlZGdlQ2VudGVyKTsKICAgICAgICAgICAgci5jb3B5KHhpKTsKICAgICAgICAgICAgci52c3ViKGVkZ2VDZW50ZXIsIHIpOwogICAgICAgICAgICByLnZzdWIoeGosIHIpOwogICAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KCiAgICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRoaXJkIHNpZGUgb3J0aG9nb25hbCB0byB0aGlzIG9uZQoKICAgICAgICAgICAgbGV0IGwgPSAwOwoKICAgICAgICAgICAgd2hpbGUgKGwgPT09IGogJSAzIHx8IGwgPT09IGsgJSAzKSB7CiAgICAgICAgICAgICAgbCsrOwogICAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudAoKCiAgICAgICAgICAgIGRpc3QuY29weSh4aSk7CiAgICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTsKICAgICAgICAgICAgZGlzdC52c3ViKGVkZ2VDZW50ZXIsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoeGosIGRpc3QpOyAvLyBEaXN0YW5jZXMgaW4gdGFuZ2VudCBkaXJlY3Rpb24gYW5kIGRpc3RhbmNlIGluIHRoZSBwbGFuZSBvcnRob2dvbmFsIHRvIGl0CgogICAgICAgICAgICBjb25zdCB0ZGlzdCA9IE1hdGguYWJzKG9ydGhvbm9ybSk7CiAgICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTsKCiAgICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgcmVzID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICBlZGdlQ2VudGVyLnZhZGQob3J0aG9nb25hbCwgcmVzLnJqKTsgLy8gYm94IHJqCgogICAgICAgICAgICAgIHJlcy5yai5jb3B5KHJlcy5yaik7CiAgICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTsKICAgICAgICAgICAgICByZXMubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkudnN1Yih4aSwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKGJpLnBvc2l0aW9uLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yai52YWRkKHhqLCByZXMucmopOwogICAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocmVzKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QocmVzLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpOwogICAgfQoKICAgIHBsYW5lQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmlkID0gc2ouaWQ7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4KHNpLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHsKICAgICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwoKICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkgewogICAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7CiAgICAgICAgbGV0IG51bUNvbnRhY3RzID0gMDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHJlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgICAgc2VwQXhpcy5uZWdhdGUoci5uaSk7CiAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTsKICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTsKICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZQoKICAgICAgICAgIHJpLnZzdWIoeGksIHJpKTsKICAgICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgbnVtQ29udGFjdHMrKzsKCiAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24pIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOwogICAgICB4aS52c3ViKHhqLCBjb252ZXhfdG9fc3BoZXJlKTsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBmYWNlcyA9IHNqLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0cyA9IHNqLnZlcnRpY2VzOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOwogICAgICAvLyAgICAgcmV0dXJuOwogICAgICAvLyB9CgogICAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gQ2hlY2sgY29ybmVycwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHZlcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXIKCiAgICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7CiAgICAgICAgcWoudm11bHQodiwgd29ybGRDb3JuZXIpOwogICAgICAgIHhqLnZhZGQod29ybGRDb3JuZXIsIHdvcmxkQ29ybmVyKTsKICAgICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyOwogICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgci5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICB3b3JsZENvcm5lci52c3ViKHhqLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBzaWRlIChwbGFuZSkgaW50ZXJzZWN0aW9ucwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBmYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGkrKykgewogICAgICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsOwogICAgICAgIHFqLnZtdWx0KG5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBHZXQgYSB3b3JsZCB2ZXJ0ZXggZnJvbSB0aGUgZmFjZQoKICAgICAgICBjb25zdCB3b3JsZFBvaW50ID0gc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQ7CiAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVswXV0sIHdvcmxkUG9pbnQpOwogICAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsCgogICAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7CiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7CiAgICAgICAgeGkudmFkZCh3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7IC8vIFZlY3RvciBmcm9tIGEgZmFjZSBwb2ludCB0byB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgc3BoZXJlCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjOwogICAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLgoKICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3Qgd29ybGRQb2ludFRvU3BoZXJlID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludDsKICAgICAgICB4aS52c3ViKHdvcmxkUG9pbnQsIHdvcmxkUG9pbnRUb1NwaGVyZSk7CgogICAgICAgIGlmIChwZW5ldHJhdGlvbiA8IDAgJiYgd29ybGRQb2ludFRvU3BoZXJlLmRvdCh3b3JsZE5vcm1hbCkgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvbgogICAgICAgICAgY29uc3QgZmFjZVZlcnRzID0gW107IC8vIEZhY2UgdmVydGljZXMsIGluIHdvcmxkIGNvb3JkcwoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOdmVydHMgPSBmYWNlLmxlbmd0aDsgaiAhPT0gTnZlcnRzOyBqKyspIHsKICAgICAgICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7CiAgICAgICAgICAgIHhqLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgZmFjZVZlcnRzLnB1c2god29ybGRWZXJ0ZXgpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHsKICAgICAgICAgICAgLy8gSXMgdGhlIHNwaGVyZSBjZW50ZXIgaW4gdGhlIGZhY2UgcG9seWdvbj8KICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0CgogICAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlCgogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1wZW5ldHJhdGlvbiwgcGVuZXRyYXRpb25WZWMyKTsKICAgICAgICAgICAgY29uc3QgcGVuZXRyYXRpb25TcGhlcmVQb2ludCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTsKCiAgICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblZlYzIsIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTsKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOyAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgogICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybjsgLy8gV2Ugb25seSBleHBlY3QgKm9uZSogZmFjZSBjb250YWN0CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBFZGdlPwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZmFjZS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIC8vIEdldCB0d28gd29ybGQgdHJhbnNmb3JtZWQgdmVydGljZXMKICAgICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMSkgJSBmYWNlLmxlbmd0aF1dLCB2MSk7CiAgICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpOwogICAgICAgICAgICAgIHhqLnZhZGQodjEsIHYxKTsKICAgICAgICAgICAgICB4ai52YWRkKHYyLCB2Mik7IC8vIENvbnN0cnVjdCBlZGdlIHZlY3RvcgoKICAgICAgICAgICAgICBjb25zdCBlZGdlID0gc3BoZXJlQ29udmV4X2VkZ2U7CiAgICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0OwogICAgICAgICAgICAgIGVkZ2UudW5pdChlZGdlVW5pdCk7IC8vIHAgaXMgeGkgcHJvamVjdGVkIG9udG8gdGhlIGVkZ2UKCiAgICAgICAgICAgICAgY29uc3QgcCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MV90b194aSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7CiAgICAgICAgICAgICAgY29uc3QgZG90ID0gdjFfdG9feGkuZG90KGVkZ2VVbml0KTsKICAgICAgICAgICAgICBlZGdlVW5pdC5zY2FsZShkb3QsIHApOwogICAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZQoKICAgICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHAudnN1Yih4aSwgeGlfdG9fcCk7IC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAvLyBBTkQgaWYgcCBpcyBpbiBiZXR3ZWVuIHYxIGFuZCB2MgoKICAgICAgICAgICAgICBpZiAoZG90ID4gMCAmJiBkb3QgKiBkb3QgPCBlZGdlLmxlbmd0aFNxdWFyZWQoKSAmJiB4aV90b19wLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzCiAgICAgICAgICAgICAgICAvLyBFZGdlIGNvbnRhY3QhCiAgICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTsKICAgICAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgICByLm5pLnNjYWxlKFIsIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkgewogICAgICAvLyBTaW1wbHkgcmV0dXJuIHRoZSBwb2ludHMgYmVoaW5kIHRoZSBwbGFuZS4KICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSBwbGFuZUNvbnZleF92OwogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDsKICAgICAgd29ybGROb3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uCgogICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwogICAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgY29udmV4IHZlcnRleAogICAgICAgIHdvcmxkVmVydGV4LmNvcHkoY29udmV4U2hhcGUudmVydGljZXNbaV0pOwogICAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICBjb252ZXhQb3NpdGlvbi52YWRkKHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7CiAgICAgICAgd29ybGRWZXJ0ZXgudnN1YihwbGFuZVBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpOwoKICAgICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDsKICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpLCBwcm9qZWN0ZWQpOwogICAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7CiAgICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZQogICAgICAgICAgLy8gcmogaXMgbm93IGp1c3QgdGhlIHZlY3RvciBmcm9tIHRoZSBjb252ZXggY2VudGVyIHRvIHRoZSB2ZXJ0ZXgKCiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKGNvbnZleFBvc2l0aW9uLCByLnJqKTsgLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKICAgICAgICAgIHIucmkudmFkZChwbGFuZVBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihjb252ZXhCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgIH0KICAgIH0KCiAgICBib3hDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlSGVpZ2h0ZmllbGQoc3BoZXJlU2hhcGUsIGhmU2hhcGUsIHNwaGVyZVBvcywgaGZQb3MsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgcmFkaXVzID0gc3BoZXJlU2hhcGUucmFkaXVzOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIQoKICAgICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUoaGZQb3MsIGhmUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgbGV0IGlNaW5YID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueCAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueCArIHJhZGl1cykgLyB3KSArIDE7CiAgICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFkgPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnkgKyByYWRpdXMpIC8gdykgKyAxOyAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluCgogICAgICBpZiAoaU1heFggPCAwIHx8IGlNYXhZIDwgMCB8fCBpTWluWCA+IGRhdGEubGVuZ3RoIHx8IGlNaW5ZID4gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXMKCgogICAgICBpZiAoaU1pblggPCAwKSB7CiAgICAgICAgaU1pblggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFggPCAwKSB7CiAgICAgICAgaU1heFggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPCAwKSB7CiAgICAgICAgaU1pblkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPCAwKSB7CiAgICAgICAgaU1heFkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1heFggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgY29uc3QgbWluTWF4ID0gW107CiAgICAgIGhmU2hhcGUuZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgbWluTWF4KTsKICAgICAgY29uc3QgbWluID0gbWluTWF4WzBdOwogICAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBudW1Db250YWN0c0JlZm9yZSA9IHJlc3VsdC5sZW5ndGg7CiAgICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgbnVtQ29udGFjdHMgPSByZXN1bHQubGVuZ3RoIC0gbnVtQ29udGFjdHNCZWZvcmU7CgogICAgICAgICAgaWYgKG51bUNvbnRhY3RzID4gMikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvKgogICAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMQogICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG51bUNvbnRhY3RzIC0gMTsgaysrKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICovCgogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IHJhZGl1cyA9IGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDI7CiAgICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBjb252ZXhQb3MsIGxvY2FsQ29udmV4UG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveAoKICAgICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBUaGUgbm9ybWFsIGlzIHRoZSB1bml0IHZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gcGFydGljbGUgY2VudGVyCiAgICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgeGkudnN1Yih4aiwgbm9ybWFsKTsKICAgICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7CgogICAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgIHIucmouY29weShub3JtYWwpOwogICAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZQoKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIHBsYW5lUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIGJqLnF1YXRlcm5pb24udm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGNvbnN0IHJlbHBvcyA9IHBhcnRpY2xlUGxhbmVfcmVscG9zOwogICAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCiAgICAgICAgLy8gR2V0IHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZDsKICAgICAgICBub3JtYWwuc2NhbGUobm9ybWFsLmRvdCh4aSksIHByb2plY3RlZCk7CiAgICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTsKICAgICAgICAvLyByaiBpcyBub3cgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvbgoKICAgICAgICByLnJqLmNvcHkocHJvamVjdGVkKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveFBhcnRpY2xlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgbGV0IHBlbmV0cmF0ZWRGYWNlSW5kZXggPSAtMTsKICAgICAgY29uc3QgcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbDsKICAgICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7CiAgICAgIGxldCBtaW5QZW5ldHJhdGlvbiA9IG51bGw7CgogICAgICBjb25zdCBsb2NhbCA9IGNvbnZleFBhcnRpY2xlX2xvY2FsOwogICAgICBsb2NhbC5jb3B5KHhpKTsKICAgICAgbG9jYWwudnN1Yih4aiwgbG9jYWwpOyAvLyBDb252ZXJ0IHBvc2l0aW9uIHRvIHJlbGF0aXZlIHRoZSBjb252ZXggb3JpZ2luCgogICAgICBxai5jb25qdWdhdGUoY3FqKTsKICAgICAgY3FqLnZtdWx0KGxvY2FsLCBsb2NhbCk7CgogICAgICBpZiAoc2oucG9pbnRJc0luc2lkZShsb2NhbCkpIHsKICAgICAgICBpZiAoc2oud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRWZXJ0aWNlcyh4aiwgcWopOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNqLndvcmxkRmFjZU5vcm1hbHNOZWVkc1VwZGF0ZSkgewogICAgICAgICAgc2ouY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocWopOwogICAgICAgIH0gLy8gRm9yIGVhY2ggd29ybGQgcG9seWdvbiBpbiB0aGUgcG9seWhlZHJhCgoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbmZhY2VzID0gc2ouZmFjZXMubGVuZ3RoOyBpICE9PSBuZmFjZXM7IGkrKykgewogICAgICAgICAgLy8gQ29uc3RydWN0IHdvcmxkIGZhY2UgdmVydGljZXMKICAgICAgICAgIGNvbnN0IHZlcnRzID0gW3NqLndvcmxkVmVydGljZXNbc2ouZmFjZXNbaV1bMF1dXTsKICAgICAgICAgIGNvbnN0IG5vcm1hbCA9IHNqLndvcmxkRmFjZU5vcm1hbHNbaV07IC8vIENoZWNrIGhvdyBtdWNoIHRoZSBwYXJ0aWNsZSBwZW5ldHJhdGVzIHRoZSBwb2x5Z29uIHBsYW5lLgoKICAgICAgICAgIHhpLnZzdWIodmVydHNbMF0sIGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwogICAgICAgICAgY29uc3QgcGVuZXRyYXRpb24gPSAtbm9ybWFsLmRvdChjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTsKCiAgICAgICAgICBpZiAobWluUGVuZXRyYXRpb24gPT09IG51bGwgfHwgTWF0aC5hYnMocGVuZXRyYXRpb24pIDwgTWF0aC5hYnMobWluUGVuZXRyYXRpb24pKSB7CiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtaW5QZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZUluZGV4ID0gaTsKICAgICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuY29weShub3JtYWwpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHBlbmV0cmF0ZWRGYWNlSW5kZXggIT09IC0xKSB7CiAgICAgICAgICAvLyBTZXR1cCBjb250YWN0CiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLnNjYWxlKG1pblBlbmV0cmF0aW9uLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsgLy8gcmogaXMgdGhlIHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgZmFjZQoKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudmFkZCh4aSwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICB3b3JsZFBlbmV0cmF0aW9uVmVjLnZzdWIoeGosIHdvcmxkUGVuZXRyYXRpb25WZWMpOwogICAgICAgICAgci5yai5jb3B5KHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvL2NvbnN0IHByb2plY3RlZFRvRmFjZSA9IHhpLnZzdWIoeGopLnZhZGQod29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICAvL3Byb2plY3RlZFRvRmFjZS5jb3B5KHIucmopOwogICAgICAgICAgLy9xai52bXVsdChyLnJqLHIucmopOwoKICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLm5lZ2F0ZShyLm5pKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCgogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUud2FybignUG9pbnQgZm91bmQgaW5zaWRlIGNvbnZleCwgYnV0IGRpZCBub3QgZmluZCBwZW5ldHJhdGluZyBmYWNlIScpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGhlaWdodGZpZWxkQ3lsaW5kZXIoaGZTaGFwZSwgY29udmV4U2hhcGUsIGhmUG9zLCBjb252ZXhQb3MsIGhmUXVhdCwgY29udmV4UXVhdCwgaGZCb2R5LCBjb252ZXhCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHBhcnRpY2xlQ3lsaW5kZXIoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHNwaGVyZVRyaW1lc2goc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgc3BoZXJlUG9zLCB0cmltZXNoUG9zLCBzcGhlcmVRdWF0LCB0cmltZXNoUXVhdCwgc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBlZGdlVmVydGV4QSA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEE7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhCID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QjsKICAgICAgY29uc3QgZWRnZVZlY3RvciA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvcjsKICAgICAgY29uc3QgZWRnZVZlY3RvclVuaXQgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0OwogICAgICBjb25zdCBsb2NhbFNwaGVyZVBvcyA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVQb3M7CiAgICAgIGNvbnN0IHRtcCA9IHNwaGVyZVRyaW1lc2hfdG1wOwogICAgICBjb25zdCBsb2NhbFNwaGVyZUFBQkIgPSBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlQUFCQjsKICAgICAgY29uc3QgdjIgPSBzcGhlcmVUcmltZXNoX3YyOwogICAgICBjb25zdCByZWxwb3MgPSBzcGhlcmVUcmltZXNoX3JlbHBvczsKICAgICAgY29uc3QgdHJpYW5nbGVzID0gc3BoZXJlVHJpbWVzaF90cmlhbmdsZXM7IC8vIENvbnZlcnQgc3BoZXJlIHBvc2l0aW9uIHRvIGxvY2FsIGluIHRoZSB0cmltZXNoCgogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHNwaGVyZVBvcywgbG9jYWxTcGhlcmVQb3MpOyAvLyBHZXQgdGhlIGFhYmIgb2YgdGhlIHNwaGVyZSBsb2NhbGx5IGluIHRoZSB0cmltZXNoCgogICAgICBjb25zdCBzcGhlcmVSYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7CiAgICAgIGxvY2FsU3BoZXJlQUFCQi5sb3dlckJvdW5kLnNldChsb2NhbFNwaGVyZVBvcy54IC0gc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy55IC0gc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy56IC0gc3BoZXJlUmFkaXVzKTsKICAgICAgbG9jYWxTcGhlcmVBQUJCLnVwcGVyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggKyBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgKyBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogKyBzcGhlcmVSYWRpdXMpOwogICAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVzSW5BQUJCKGxvY2FsU3BoZXJlQUFCQiwgdHJpYW5nbGVzKTsgLy9mb3IgKGxldCBpID0gMDsgaSA8IHRyaW1lc2hTaGFwZS5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgdHJpYW5nbGVzLnB1c2goaSk7IC8vIEFsbAogICAgICAvLyBWZXJ0aWNlcwoKICAgICAgY29uc3QgdiA9IHNwaGVyZVRyaW1lc2hfdjsKICAgICAgY29uc3QgcmFkaXVzU3F1YXJlZCA9IHNwaGVyZVNoYXBlLnJhZGl1cyAqIHNwaGVyZVNoYXBlLnJhZGl1czsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCB2KTsgLy8gQ2hlY2sgdmVydGV4IG92ZXJsYXAgaW4gc3BoZXJlCgogICAgICAgICAgdi52c3ViKGxvY2FsU3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgIGlmIChyZWxwb3MubGVuZ3RoU3F1YXJlZCgpIDw9IHJhZGl1c1NxdWFyZWQpIHsKICAgICAgICAgICAgLy8gU2FmZSB1cAogICAgICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHYyLCB2KTsKICAgICAgICAgICAgdi52c3ViKHNwaGVyZVBvcywgcmVscG9zKTsKCiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCBzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICAgIHIubmkuY29weShyZWxwb3MpOwogICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyByaSBpcyB0aGUgdmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byB0aGUgc3BoZXJlIHN1cmZhY2UKCiAgICAgICAgICAgIHIucmkuY29weShyLm5pKTsKICAgICAgICAgICAgci5yaS5zY2FsZShzcGhlcmVTaGFwZS5yYWRpdXMsIHIucmkpOwogICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICByLnJqLmNvcHkodik7CiAgICAgICAgICAgIHIucmoudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7IC8vIFN0b3JlIHJlc3VsdAoKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBhbGwgZWRnZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyBqXSwgZWRnZVZlcnRleEEpOwogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgKGogKyAxKSAlIDNdLCBlZGdlVmVydGV4Qik7CiAgICAgICAgICBlZGdlVmVydGV4Qi52c3ViKGVkZ2VWZXJ0ZXhBLCBlZGdlVmVjdG9yKTsgLy8gUHJvamVjdCBzcGhlcmUgcG9zaXRpb24gdG8gdGhlIGVkZ2UKCiAgICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhCLCB0bXApOwogICAgICAgICAgY29uc3QgcG9zaXRpb25BbG9uZ0VkZ2VCID0gdG1wLmRvdChlZGdlVmVjdG9yKTsKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICBsZXQgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yKTsKCiAgICAgICAgICBpZiAocG9zaXRpb25BbG9uZ0VkZ2VBID4gMCAmJiBwb3NpdGlvbkFsb25nRWRnZUIgPCAwKSB7CiAgICAgICAgICAgIC8vIE5vdyBjaGVjayB0aGUgb3J0aG9nb25hbCBkaXN0YW5jZSBmcm9tIGVkZ2UgdG8gc3BoZXJlIGNlbnRlcgogICAgICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhBLCB0bXApOwogICAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5jb3B5KGVkZ2VWZWN0b3IpOwogICAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5ub3JtYWxpemUoKTsKICAgICAgICAgICAgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yVW5pdCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LnNjYWxlKHBvc2l0aW9uQWxvbmdFZGdlQSwgdG1wKTsKICAgICAgICAgICAgdG1wLnZhZGQoZWRnZVZlcnRleEEsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBjZW50ZXIgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBlZGdlLCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2ggZnJhbWUKCiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7CgogICAgICAgICAgICBpZiAoZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgICB0bXAudnN1Yihsb2NhbFNwaGVyZVBvcywgci5uaSk7CiAgICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApOwogICAgICAgICAgICAgIHRtcC52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTsKICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBUcmlhbmdsZSBmYWNlcwoKCiAgICAgIGNvbnN0IHZhID0gc3BoZXJlVHJpbWVzaF92YTsKICAgICAgY29uc3QgdmIgPSBzcGhlcmVUcmltZXNoX3ZiOwogICAgICBjb25zdCB2YyA9IHNwaGVyZVRyaW1lc2hfdmM7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHNwaGVyZVRyaW1lc2hfbm9ybWFsOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyBpICE9PSBOOyBpKyspIHsKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVWZXJ0aWNlcyh0cmlhbmdsZXNbaV0sIHZhLCB2YiwgdmMpOwogICAgICAgIHRyaW1lc2hTaGFwZS5nZXROb3JtYWwodHJpYW5nbGVzW2ldLCBub3JtYWwpOwogICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIodmEsIHRtcCk7CiAgICAgICAgbGV0IGRpc3QgPSB0bXAuZG90KG5vcm1hbCk7CiAgICAgICAgbm9ybWFsLnNjYWxlKGRpc3QsIHRtcCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih0bXAsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIHRyaWFuZ2xlIHBsYW5lCgogICAgICAgIGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7CgogICAgICAgIGlmIChSYXkucG9pbnRJblRyaWFuZ2xlKHRtcCwgdmEsIHZiLCB2YykgJiYgZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihzcGhlcmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApOwogICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZSh0cmltZXNoUXVhdCwgci5uaSwgci5uaSk7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDsKICAgIH0KCiAgICBwbGFuZVRyaW1lc2gocGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBwbGFuZVBvcywgdHJpbWVzaFBvcywgcGxhbmVRdWF0LCB0cmltZXNoUXVhdCwgcGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIE1ha2UgY29udGFjdHMhCiAgICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBub3JtYWwgPSBwbGFuZVRyaW1lc2hfbm9ybWFsOwogICAgICBub3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLnZlcnRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vIEdldCB3b3JsZCB2ZXJ0ZXggZnJvbSB0cmltZXNoCiAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleChpLCB2KTsgLy8gU2FmZSB1cAoKICAgICAgICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgICAgICAgdjIuY29weSh2KTsKICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHYyLCB2KTsgLy8gQ2hlY2sgcGxhbmUgc2lkZQoKICAgICAgICBjb25zdCByZWxwb3MgPSBwbGFuZVRyaW1lc2hfcmVscG9zOwogICAgICAgIHYudnN1YihwbGFuZVBvcywgcmVscG9zKTsKICAgICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICAgIGlmIChkb3QgPD0gMC4wKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHBsYW5lQm9keSwgdHJpbWVzaEJvZHksIHBsYW5lU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsIGlzIHRoZSBwbGFuZSBub3JtYWwKICAgICAgICAgIC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVUcmltZXNoX3Byb2plY3RlZDsKICAgICAgICAgIG5vcm1hbC5zY2FsZShyZWxwb3MuZG90KG5vcm1hbCksIHByb2plY3RlZCk7CiAgICAgICAgICB2LnZzdWIocHJvamVjdGVkLCBwcm9qZWN0ZWQpOyAvLyByaSBpcyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uCgogICAgICAgICAgci5yaS5jb3B5KHByb2plY3RlZCk7CiAgICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgIHIucmoudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7IC8vIFN0b3JlIHJlc3VsdAoKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfQogICAgICB9CiAgICB9IC8vIGNvbnZleFRyaW1lc2goCiAgICAvLyAgIHNpOiBDb252ZXhQb2x5aGVkcm9uLCBzajogVHJpbWVzaCwgeGk6IFZlYzMsIHhqOiBWZWMzLCBxaTogUXVhdGVybmlvbiwgcWo6IFF1YXRlcm5pb24sCiAgICAvLyAgIGJpOiBCb2R5LCBiajogQm9keSwgcnNpPzogU2hhcGUgfCBudWxsLCByc2o/OiBTaGFwZSB8IG51bGwsCiAgICAvLyAgIGZhY2VMaXN0QT86IG51bWJlcltdIHwgbnVsbCwgZmFjZUxpc3RCPzogbnVtYmVyW10gfCBudWxsLAogICAgLy8gKSB7CiAgICAvLyAgIGNvbnN0IHNlcEF4aXMgPSBjb252ZXhDb252ZXhfc2VwQXhpczsKICAgIC8vICAgaWYoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKXsKICAgIC8vICAgICAgIHJldHVybjsKICAgIC8vICAgfQogICAgLy8gICAvLyBDb25zdHJ1Y3QgYSB0ZW1wIGh1bGwgZm9yIGVhY2ggdHJpYW5nbGUKICAgIC8vICAgY29uc3QgaHVsbEIgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgLy8gICBodWxsQi5mYWNlcyA9IFtbMCwxLDJdXTsKICAgIC8vICAgY29uc3QgdmEgPSBuZXcgVmVjMygpOwogICAgLy8gICBjb25zdCB2YiA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZjID0gbmV3IFZlYzMoKTsKICAgIC8vICAgaHVsbEIudmVydGljZXMgPSBbCiAgICAvLyAgICAgICB2YSwKICAgIC8vICAgICAgIHZiLAogICAgLy8gICAgICAgdmMKICAgIC8vICAgXTsKICAgIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzai5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgLy8gICAgICAgY29uc3QgdHJpYW5nbGVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgLy8gICAgICAgc2ouZ2V0Tm9ybWFsKGksIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgIGh1bGxCLmZhY2VOb3JtYWxzID0gW3RyaWFuZ2xlTm9ybWFsXTsKICAgIC8vICAgICAgIHNqLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgdmEsIHZiLCB2Yyk7CiAgICAvLyAgICAgICBsZXQgZCA9IHNpLnRlc3RTZXBBeGlzKHRyaWFuZ2xlTm9ybWFsLCBodWxsQiwgeGksIHFpLCB4aiwgcWopOwogICAgLy8gICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgIHRyaWFuZ2xlTm9ybWFsLnNjYWxlKC0xLCB0cmlhbmdsZU5vcm1hbCk7CiAgICAvLyAgICAgICAgICAgZCA9IHNpLnRlc3RTZXBBeGlzKHRyaWFuZ2xlTm9ybWFsLCBodWxsQiwgeGksIHFpLCB4aiwgcWopOwogICAgLy8gICAgICAgICAgIGlmKCFkKXsKICAgIC8vICAgICAgICAgICAgICAgY29udGludWU7CiAgICAvLyAgICAgICAgICAgfQogICAgLy8gICAgICAgfQogICAgLy8gICAgICAgY29uc3QgcmVzOiBDb252ZXhQb2x5aGVkcm9uQ29udGFjdFBvaW50W10gPSBbXTsKICAgIC8vICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgIC8vICAgICAgIHNpLmNsaXBBZ2FpbnN0SHVsbCh4aSxxaSxodWxsQix4aixxaix0cmlhbmdsZU5vcm1hbCwtMTAwLDEwMCxyZXMpOwogICAgLy8gICAgICAgZm9yKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKXsKICAgIC8vICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksYmosc2ksc2oscnNpLHJzaiksCiAgICAvLyAgICAgICAgICAgICAgIHJpID0gci5yaSwKICAgIC8vICAgICAgICAgICAgICAgcmogPSByLnJqOwogICAgLy8gICAgICAgICAgIHIubmkuY29weSh0cmlhbmdsZU5vcm1hbCk7CiAgICAvLyAgICAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAvLyAgICAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7CiAgICAvLyAgICAgICAgICAgcS5tdWx0KHJlc1tqXS5kZXB0aCwgcSk7CiAgICAvLyAgICAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpOwogICAgLy8gICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsKICAgIC8vICAgICAgICAgICAvLyBDb250YWN0IHBvaW50cyBhcmUgaW4gd29ybGQgY29vcmRpbmF0ZXMuIFRyYW5zZm9ybSBiYWNrIHRvIHJlbGF0aXZlCiAgICAvLyAgICAgICAgICAgcmkudnN1Yih4aSxyaSk7CiAgICAvLyAgICAgICAgICAgcmoudnN1Yih4aixyaik7CiAgICAvLyAgICAgICAgICAgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKICAgIC8vICAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAvLyAgICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgLy8gICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgIC8vICAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAvLyAgICAgICAgICAgcmVzdWx0LnB1c2gocik7CiAgICAvLyAgICAgICB9CiAgICAvLyAgIH0KICAgIC8vIH0KCgogIH0KICBjb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogIGNvbnN0IHBsYW5lVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lVHJpbWVzaF9yZWxwb3MgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lVHJpbWVzaF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdjIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF90bXAgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlcyA9IFtdOwogIGNvbnN0IHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWwKCiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fdnRwID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gcG9pbnRJblBvbHlnb24odmVydHMsIG5vcm1hbCwgcCkgewogICAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDsKICAgIGNvbnN0IE4gPSB2ZXJ0cy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIEdldCBlZGdlIHRvIHRoZSBuZXh0IHZlcnRleAoKICAgICAgY29uc3QgZWRnZSA9IHBvaW50SW5Qb2x5Z29uX2VkZ2U7CiAgICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZQoKICAgICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CgogICAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXgKCiAgICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwOwogICAgICBwLnZzdWIodiwgdmVydGV4X3RvX3ApOyAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgIGNvbnN0IHIgPSBlZGdlX3hfbm9ybWFsLmRvdCh2ZXJ0ZXhfdG9fcCk7IC8vIElmIGFsbCBzdWNoIGRvdCBwcm9kdWN0cyBoYXZlIHNhbWUgc2lnbiwgd2UgYXJlIGluc2lkZSB0aGUgcG9seWdvbi4KCiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCB8fCByID4gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gdHJ1ZSB8fCByIDw9IDAgJiYgcG9zaXRpdmVSZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsKSB7CiAgICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwOwogICAgICAgIH0KCiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuCiAgICAgIH0KICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGNvbnN0IGJveF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwogIGNvbnN0IHNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfZWRnZVVuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF92ID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcHJvamVjdGVkID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfc2VwQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4Q29udmV4X3EgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlU3BoZXJlX25vcm1hbCA9IG5ldyBWZWMzKCk7IC8vIFdJUAoKICBjb25zdCBjcWogPSBuZXcgUXVhdGVybmlvbigpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX2xvY2FsID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdCA9IFswXTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKCiAgY2xhc3MgT3ZlcmxhcEtlZXBlciB7CiAgICAvKioKICAgICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmN1cnJlbnQgPSBbXTsKICAgICAgdGhpcy5wcmV2aW91cyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBnZXRLZXkKICAgICAqLwoKCiAgICBnZXRLZXkoaSwgaikgewogICAgICBpZiAoaiA8IGkpIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgcmV0dXJuIGkgPDwgMTYgfCBqOwogICAgfQogICAgLyoqCiAgICAgKiBzZXQKICAgICAqLwoKCiAgICBzZXQoaSwgaikgewogICAgICAvLyBJbnNlcnRpb24gc29ydC4gVGhpcyB3YXkgdGhlIGRpZmYgd2lsbCBoYXZlIGxpbmVhciBjb21wbGV4aXR5LgogICAgICBjb25zdCBrZXkgPSB0aGlzLmdldEtleShpLCBqKTsKICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDsKICAgICAgbGV0IGluZGV4ID0gMDsKCiAgICAgIHdoaWxlIChrZXkgPiBjdXJyZW50W2luZGV4XSkgewogICAgICAgIGluZGV4Kys7CiAgICAgIH0KCiAgICAgIGlmIChrZXkgPT09IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgcmV0dXJuOyAvLyBQYWlyIHdhcyBhbHJlYWR5IGFkZGVkCiAgICAgIH0KCiAgICAgIGZvciAobGV0IGogPSBjdXJyZW50Lmxlbmd0aCAtIDE7IGogPj0gaW5kZXg7IGotLSkgewogICAgICAgIGN1cnJlbnRbaiArIDFdID0gY3VycmVudFtqXTsKICAgICAgfQoKICAgICAgY3VycmVudFtpbmRleF0gPSBrZXk7CiAgICB9CiAgICAvKioKICAgICAqIHRpY2sKICAgICAqLwoKCiAgICB0aWNrKCkgewogICAgICBjb25zdCB0bXAgPSB0aGlzLmN1cnJlbnQ7CiAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMucHJldmlvdXM7CiAgICAgIHRoaXMucHJldmlvdXMgPSB0bXA7CiAgICAgIHRoaXMuY3VycmVudC5sZW5ndGggPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBnZXREaWZmCiAgICAgKi8KCgogICAgZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmN1cnJlbnQ7CiAgICAgIGNvbnN0IGIgPSB0aGlzLnByZXZpb3VzOwogICAgICBjb25zdCBhbCA9IGEubGVuZ3RoOwogICAgICBjb25zdCBibCA9IGIubGVuZ3RoOwogICAgICBsZXQgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlBID0gYVtpXTsKCiAgICAgICAgd2hpbGUgKGtleUEgPiBiW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGtleUEgPT09IGJbal07CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2goYWRkaXRpb25zLCBrZXlBKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGogPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibDsgaSsrKSB7CiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7CiAgICAgICAgY29uc3Qga2V5QiA9IGJbaV07CgogICAgICAgIHdoaWxlIChrZXlCID4gYVtqXSkgewogICAgICAgICAgaisrOwogICAgICAgIH0KCiAgICAgICAgZm91bmQgPSBhW2pdID09PSBrZXlCOwoKICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICB1bnBhY2tBbmRQdXNoKHJlbW92YWxzLCBrZXlCKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQoKICBmdW5jdGlvbiB1bnBhY2tBbmRQdXNoKGFycmF5LCBrZXkpIHsKICAgIGFycmF5LnB1c2goKGtleSAmIDB4ZmZmZjAwMDApID4+IDE2LCBrZXkgJiAweDAwMDBmZmZmKTsKICB9CgogIGNvbnN0IGdldEtleSA9IChpLCBqKSA9PiBpIDwgaiA/IGAke2l9LSR7an1gIDogYCR7an0tJHtpfWA7CiAgLyoqCiAgICogVHVwbGVEaWN0aW9uYXJ5CiAgICovCgoKICBjbGFzcyBUdXBsZURpY3Rpb25hcnkgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuZGF0YSA9IHsKICAgICAgICBrZXlzOiBbXQogICAgICB9OwogICAgfQoKICAgIC8qKiBnZXQgKi8KICAgIGdldChpLCBqKSB7CiAgICAgIGNvbnN0IGtleSA9IGdldEtleShpLCBqKTsKICAgICAgcmV0dXJuIHRoaXMuZGF0YVtrZXldOwogICAgfQogICAgLyoqIHNldCAqLwoKCiAgICBzZXQoaSwgaiwgdmFsdWUpIHsKICAgICAgY29uc3Qga2V5ID0gZ2V0S2V5KGksIGopOyAvLyBDaGVjayBpZiBrZXkgYWxyZWFkeSBleGlzdHMKCiAgICAgIGlmICghdGhpcy5nZXQoaSwgaikpIHsKICAgICAgICB0aGlzLmRhdGEua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YVtrZXldID0gdmFsdWU7CiAgICB9CiAgICAvKiogZGVsZXRlICovCgoKICAgIGRlbGV0ZShpLCBqKSB7CiAgICAgIGNvbnN0IGtleSA9IGdldEtleShpLCBqKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRhdGEua2V5cy5pbmRleE9mKGtleSk7CgogICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgdGhpcy5kYXRhLmtleXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQoKICAgICAgZGVsZXRlIHRoaXMuZGF0YVtrZXldOwogICAgfQogICAgLyoqIHJlc2V0ICovCgoKICAgIHJlc2V0KCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBrZXlzID0gZGF0YS5rZXlzOwoKICAgICAgd2hpbGUgKGtleXMubGVuZ3RoID4gMCkgewogICAgICAgIGNvbnN0IGtleSA9IGtleXMucG9wKCk7CiAgICAgICAgZGVsZXRlIGRhdGFba2V5XTsKICAgICAgfQogICAgfQoKICB9CgogIC8qKgogICAqIFRoZSBwaHlzaWNzIHdvcmxkCiAgICovCiAgY2xhc3MgV29ybGQgZXh0ZW5kcyBFdmVudFRhcmdldCB7CiAgICAvKioKICAgICAqIEN1cnJlbnRseSAvIGxhc3QgdXNlZCB0aW1lc3RlcC4gSXMgc2V0IHRvIC0xIGlmIG5vdCBhdmFpbGFibGUuIFRoaXMgdmFsdWUgaXMgdXBkYXRlZCBiZWZvcmUgZWFjaCBpbnRlcm5hbCBzdGVwLCB3aGljaCBtZWFucyB0aGF0IGl0IGlzICJmcmVzaCIgaW5zaWRlIGV2ZW50IGNhbGxiYWNrcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTWFrZXMgYm9kaWVzIGdvIHRvIHNsZWVwIHdoZW4gdGhleSd2ZSBiZWVuIGluYWN0aXZlLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIHRoZSBjdXJyZW50IGNvbnRhY3RzIChpbnN0YW5jZXMgb2YgQ29udGFjdEVxdWF0aW9uKSBpbiB0aGUgd29ybGQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEhvdyBvZnRlbiB0byBub3JtYWxpemUgcXVhdGVybmlvbnMuIFNldCB0byAwIGZvciBldmVyeSBzdGVwLCAxIGZvciBldmVyeSBzZWNvbmQgZXRjLi4gQSBsYXJnZXIgdmFsdWUgaW5jcmVhc2VzIHBlcmZvcm1hbmNlLiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gYSBzbWFsbGVyIHZhbHVlICh6ZXJvIHRvIGJlIHN1cmUgbm90aGluZyBjYW4gZ28gd3JvbmcpLgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gdHJ1ZSB0byB1c2UgZmFzdCBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24uIEl0IGlzIG9mdGVuIGVub3VnaCBhY2N1cmF0ZSB0byB1c2UuCiAgICAgKiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gZmFsc2UuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgd2FsbC1jbG9jayB0aW1lIHNpbmNlIHNpbXVsYXRpb24gc3RhcnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE51bWJlciBvZiB0aW1lc3RlcHMgdGFrZW4gc2luY2Ugc3RhcnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIERlZmF1bHQgYW5kIGxhc3QgdGltZXN0ZXAgc2l6ZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBncmF2aXR5IG9mIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogR3Jhdml0eSB0byB1c2Ugd2hlbiBhcHByb3hpbWF0aW5nIHRoZSBmcmljdGlvbiBtYXggZm9yY2UgKG11Km1hc3MqZ3Jhdml0eSkuCiAgICAgKiBJZiB1bmRlZmluZWQsIGdsb2JhbCBncmF2aXR5IHdpbGwgYmUgdXNlZC4KICAgICAqIFVzZSB0byBlbmFibGUgZnJpY3Rpb24gaW4gYSBXb3JsZCB3aXRoIGEgbnVsbCBncmF2aXR5IHZlY3RvciAobm8gZ3Jhdml0eSkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBicm9hZHBoYXNlIGFsZ29yaXRobSB0byB1c2UuCiAgICAgKiBAZGVmYXVsdCBOYWl2ZUJyb2FkcGhhc2UKICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIGJvZGllcyBpbiB0aGlzIHdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRydWUgaWYgYW55IGJvZGllcyBhcmUgbm90IHNsZWVwaW5nLCBmYWxzZSBpZiBldmVyeSBib2R5IGlzIHNsZWVwaW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgc29sdmVyIGFsZ29yaXRobSB0byB1c2UuCiAgICAgKiBAZGVmYXVsdCBHU1NvbHZlcgogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25NYXRyaXgKICAgICAqLwoKICAgIC8qKgogICAgICogQ29sbGlzaW9uTWF0cml4IGZyb20gdGhlIHByZXZpb3VzIHN0ZXAuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCBhZGRlZCBjb250YWN0bWF0ZXJpYWxzLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIHRvIGxvb2sgdXAgYSBDb250YWN0TWF0ZXJpYWwgZ2l2ZW4gdHdvIGluc3RhbmNlcyBvZiBNYXRlcmlhbC4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGRlZmF1bHQgbWF0ZXJpYWwgb2YgdGhlIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhpcyBjb250YWN0IG1hdGVyaWFsIGlzIHVzZWQgaWYgbm8gc3VpdGFibGUgY29udGFjdG1hdGVyaWFsIGlzIGZvdW5kIGZvciBhIGNvbnRhY3QuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRpbWUgYWNjdW11bGF0b3IgZm9yIGludGVycG9sYXRpb24uCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2FmZmVyb25nYW1lcy5jb20vZ2FtZS1waHlzaWNzL2ZpeC15b3VyLXRpbWVzdGVwLwogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgd29ybGQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5kdCA9IC0xOwogICAgICB0aGlzLmFsbG93U2xlZXAgPSAhIW9wdGlvbnMuYWxsb3dTbGVlcDsKICAgICAgdGhpcy5jb250YWN0cyA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gW107CiAgICAgIHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgPSBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwIDogMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgOiBmYWxzZTsKICAgICAgdGhpcy50aW1lID0gMC4wOwogICAgICB0aGlzLnN0ZXBudW1iZXIgPSAwOwogICAgICB0aGlzLmRlZmF1bHRfZHQgPSAxIC8gNjA7CiAgICAgIHRoaXMubmV4dElkID0gMDsKICAgICAgdGhpcy5ncmF2aXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmdyYXZpdHkpIHsKICAgICAgICB0aGlzLmdyYXZpdHkuY29weShvcHRpb25zLmdyYXZpdHkpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5mcmljdGlvbkdyYXZpdHkpIHsKICAgICAgICB0aGlzLmZyaWN0aW9uR3Jhdml0eSA9IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5mcmljdGlvbkdyYXZpdHkuY29weShvcHRpb25zLmZyaWN0aW9uR3Jhdml0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuYnJvYWRwaGFzZSA9IG9wdGlvbnMuYnJvYWRwaGFzZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5icm9hZHBoYXNlIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpOwogICAgICB0aGlzLmJvZGllcyA9IFtdOwogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IGZhbHNlOwogICAgICB0aGlzLnNvbHZlciA9IG9wdGlvbnMuc29sdmVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNvbHZlciA6IG5ldyBHU1NvbHZlcigpOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107CiAgICAgIHRoaXMubmFycm93cGhhc2UgPSBuZXcgTmFycm93cGhhc2UodGhpcyk7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gbmV3IEFycmF5Q29sbGlzaW9uTWF0cml4KCk7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTsKICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlciA9IG5ldyBPdmVybGFwS2VlcGVyKCk7CiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTsKICAgICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzID0gW107CiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUgPSBuZXcgVHVwbGVEaWN0aW9uYXJ5KCk7CiAgICAgIHRoaXMuZGVmYXVsdE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKCdkZWZhdWx0Jyk7CiAgICAgIHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbCA9IG5ldyBDb250YWN0TWF0ZXJpYWwodGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHRoaXMuZGVmYXVsdE1hdGVyaWFsLCB7CiAgICAgICAgZnJpY3Rpb246IDAuMywKICAgICAgICByZXN0aXR1dGlvbjogMC4wCiAgICAgIH0pOwogICAgICB0aGlzLmRvUHJvZmlsaW5nID0gZmFsc2U7CiAgICAgIHRoaXMucHJvZmlsZSA9IHsKICAgICAgICBzb2x2ZTogMCwKICAgICAgICBtYWtlQ29udGFjdENvbnN0cmFpbnRzOiAwLAogICAgICAgIGJyb2FkcGhhc2U6IDAsCiAgICAgICAgaW50ZWdyYXRlOiAwLAogICAgICAgIG5hcnJvd3BoYXNlOiAwCiAgICAgIH07CiAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSAwOwogICAgICB0aGlzLnN1YnN5c3RlbXMgPSBbXTsKICAgICAgdGhpcy5hZGRCb2R5RXZlbnQgPSB7CiAgICAgICAgdHlwZTogJ2FkZEJvZHknLAogICAgICAgIGJvZHk6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQgPSB7CiAgICAgICAgdHlwZTogJ3JlbW92ZUJvZHknLAogICAgICAgIGJvZHk6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5pZFRvQm9keU1hcCA9IHt9OwogICAgICB0aGlzLmJyb2FkcGhhc2Uuc2V0V29ybGQodGhpcyk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29udGFjdCBtYXRlcmlhbCBiZXR3ZWVuIG1hdGVyaWFscyBtMSBhbmQgbTIKICAgICAqIEByZXR1cm4gVGhlIGNvbnRhY3QgbWF0ZXJpYWwgaWYgaXQgd2FzIGZvdW5kLgogICAgICovCgoKICAgIGdldENvbnRhY3RNYXRlcmlhbChtMSwgbTIpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuZ2V0KG0xLmlkLCBtMi5pZCk7CiAgICB9CiAgICAvKioKICAgICAqIFN0b3JlIG9sZCBjb2xsaXNpb24gc3RhdGUgaW5mbwogICAgICovCgoKICAgIGNvbGxpc2lvbk1hdHJpeFRpY2soKSB7CiAgICAgIGNvbnN0IHRlbXAgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdGhpcy5jb2xsaXNpb25NYXRyaXg7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gdGVtcDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXgucmVzZXQoKTsKICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci50aWNrKCk7CiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyLnRpY2soKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGEgY29uc3RyYWludCB0byB0aGUgc2ltdWxhdGlvbi4KICAgICAqLwoKCiAgICBhZGRDb25zdHJhaW50KGMpIHsKICAgICAgdGhpcy5jb25zdHJhaW50cy5wdXNoKGMpOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmVzIGEgY29uc3RyYWludAogICAgICovCgoKICAgIHJlbW92ZUNvbnN0cmFpbnQoYykgewogICAgICBjb25zdCBpZHggPSB0aGlzLmNvbnN0cmFpbnRzLmluZGV4T2YoYyk7CgogICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgIHRoaXMuY29uc3RyYWludHMuc3BsaWNlKGlkeCwgMSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmF5Y2FzdCB0ZXN0CiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLnJheWNhc3RBbGwsIC5yYXljYXN0Q2xvc2VzdCBvciAucmF5Y2FzdEFueSBpbnN0ZWFkLgogICAgICovCgoKICAgIHJheVRlc3QoZnJvbSwgdG8sIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmF5Y2FzdFJlc3VsdCkgewogICAgICAgIC8vIERvIHJheWNhc3RDbG9zZXN0CiAgICAgICAgdGhpcy5yYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgewogICAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZQogICAgICAgIH0sIHJlc3VsdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gRG8gcmF5Y2FzdEFsbAogICAgICAgIHRoaXMucmF5Y2FzdEFsbChmcm9tLCB0bywgewogICAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZQogICAgICAgIH0sIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QgYWdhaW5zdCBhbGwgYm9kaWVzLiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZCBmb3IgZWFjaCBoaXQgd2l0aCBhIFJheWNhc3RSZXN1bHQgYXMgc2luZ2xlIGFyZ3VtZW50LgogICAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuCiAgICAgKi8KCgogICAgcmF5Y2FzdEFsbChmcm9tLCB0bywgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkFMTDsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLmNhbGxiYWNrID0gY2FsbGJhY2s7CiAgICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIFJheSBjYXN0LCBhbmQgc3RvcCBhdCB0aGUgZmlyc3QgcmVzdWx0LiBOb3RlIHRoYXQgdGhlIG9yZGVyIGlzIHJhbmRvbSAtIGJ1dCB0aGUgbWV0aG9kIGlzIGZhc3QuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QW55KGZyb20sIHRvLCBvcHRpb25zLCByZXN1bHQpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkFOWTsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QsIGFuZCByZXR1cm4gaW5mb3JtYXRpb24gb2YgdGhlIGNsb3Nlc3QgaGl0LgogICAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuCiAgICAgKi8KCgogICAgcmF5Y2FzdENsb3Nlc3QoZnJvbSwgdG8sIG9wdGlvbnMsIHJlc3VsdCkgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQ0xPU0VTVDsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGEgcmlnaWQgYm9keSB0byB0aGUgc2ltdWxhdGlvbi4KICAgICAqIEB0b2RvIElmIHRoZSBzaW11bGF0aW9uIGhhcyBub3QgeWV0IHN0YXJ0ZWQsIHdoeSByZWNyZXRlIGFuZCBjb3B5IGFycmF5cyBmb3IgZWFjaCBib2R5PyBBY2N1bXVsYXRlIGluIGR5bmFtaWMgYXJyYXlzIGluIHRoaXMgY2FzZS4KICAgICAqIEB0b2RvIEFkZGluZyBhbiBhcnJheSBvZiBib2RpZXMgc2hvdWxkIGJlIHBvc3NpYmxlLiBUaGlzIHdvdWxkIHNhdmUgc29tZSBsb29wcyB0b28KICAgICAqLwoKCiAgICBhZGRCb2R5KGJvZHkpIHsKICAgICAgaWYgKHRoaXMuYm9kaWVzLmluY2x1ZGVzKGJvZHkpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBib2R5LmluZGV4ID0gdGhpcy5ib2RpZXMubGVuZ3RoOwogICAgICB0aGlzLmJvZGllcy5wdXNoKGJvZHkpOwogICAgICBib2R5LndvcmxkID0gdGhpczsKICAgICAgYm9keS5pbml0UG9zaXRpb24uY29weShib2R5LnBvc2l0aW9uKTsKICAgICAgYm9keS5pbml0VmVsb2NpdHkuY29weShib2R5LnZlbG9jaXR5KTsKICAgICAgYm9keS50aW1lTGFzdFNsZWVweSA9IHRoaXMudGltZTsKCiAgICAgIGlmIChib2R5IGluc3RhbmNlb2YgQm9keSkgewogICAgICAgIGJvZHkuaW5pdEFuZ3VsYXJWZWxvY2l0eS5jb3B5KGJvZHkuYW5ndWxhclZlbG9jaXR5KTsKICAgICAgICBib2R5LmluaXRRdWF0ZXJuaW9uLmNvcHkoYm9keS5xdWF0ZXJuaW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyh0aGlzLmJvZGllcy5sZW5ndGgpOwogICAgICB0aGlzLmFkZEJvZHlFdmVudC5ib2R5ID0gYm9keTsKICAgICAgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLmFkZEJvZHlFdmVudCk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhIHJpZ2lkIGJvZHkgZnJvbSB0aGUgc2ltdWxhdGlvbi4KICAgICAqLwoKCiAgICByZW1vdmVCb2R5KGJvZHkpIHsKICAgICAgYm9keS53b3JsZCA9IG51bGw7CiAgICAgIGNvbnN0IG4gPSB0aGlzLmJvZGllcy5sZW5ndGggLSAxOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKICAgICAgY29uc3QgaWR4ID0gYm9kaWVzLmluZGV4T2YoYm9keSk7CgogICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgIGJvZGllcy5zcGxpY2UoaWR4LCAxKTsgLy8gVG9kbzogc2hvdWxkIHVzZSBhIGdhcmJhZ2UgZnJlZSBtZXRob2QKICAgICAgICAvLyBSZWNvbXB1dGUgaW5kZXgKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgYm9kaWVzW2ldLmluZGV4ID0gaTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnNldE51bU9iamVjdHMobik7CiAgICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQuYm9keSA9IGJvZHk7CiAgICAgICAgZGVsZXRlIHRoaXMuaWRUb0JvZHlNYXBbYm9keS5pZF07CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMucmVtb3ZlQm9keUV2ZW50KTsKICAgICAgfQogICAgfQoKICAgIGdldEJvZHlCeUlkKGlkKSB7CiAgICAgIHJldHVybiB0aGlzLmlkVG9Cb2R5TWFwW2lkXTsKICAgIH0KICAgIC8qKgogICAgICogQHRvZG8gTWFrZSBhIGZhc3RlciBtYXAKICAgICAqLwoKCiAgICBnZXRTaGFwZUJ5SWQoaWQpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlcyA9IGJvZGllc1tpXS5zaGFwZXM7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2hhcGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tqXTsKCiAgICAgICAgICBpZiAoc2hhcGUuaWQgPT09IGlkKSB7CiAgICAgICAgICAgIHJldHVybiBzaGFwZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIGEgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgV29ybGQKICAgICAqLwoKCiAgICBhZGRDb250YWN0TWF0ZXJpYWwoY21hdCkgewogICAgICAvLyBBZGQgY29udGFjdCBtYXRlcmlhbAogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMucHVzaChjbWF0KTsgLy8gQWRkIGN1cnJlbnQgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgbWF0ZXJpYWwgdGFibGUKCiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuc2V0KGNtYXQubWF0ZXJpYWxzWzBdLmlkLCBjbWF0Lm1hdGVyaWFsc1sxXS5pZCwgY21hdCk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBjb250YWN0IG1hdGVyaWFsIGZyb20gdGhlIFdvcmxkLgogICAgICovCgoKICAgIHJlbW92ZUNvbnRhY3RNYXRlcmlhbChjbWF0KSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY29udGFjdG1hdGVyaWFscy5pbmRleE9mKGNtYXQpOwoKICAgICAgaWYgKGlkeCA9PT0gLTEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5zcGxpY2UoaWR4LCAxKTsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5kZWxldGUoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkKTsKICAgIH0KICAgIC8qKgogICAgICogU3RlcCB0aGUgc2ltdWxhdGlvbiBmb3J3YXJkIGtlZXBpbmcgdHJhY2sgb2YgbGFzdCBjYWxsZWQgdGltZQogICAgICogdG8gYmUgYWJsZSB0byBzdGVwIHRoZSB3b3JsZCBhdCBhIGZpeGVkIHJhdGUsIGluZGVwZW5kZW50bHkgb2YgZnJhbWVyYXRlLgogICAgICoKICAgICAqIEBwYXJhbSBkdCBUaGUgZml4ZWQgdGltZSBzdGVwIHNpemUgdG8gdXNlIChkZWZhdWx0OiAxIC8gNjApLgogICAgICogQHBhcmFtIG1heFN1YlN0ZXBzIE1heGltdW0gbnVtYmVyIG9mIGZpeGVkIHN0ZXBzIHRvIHRha2UgcGVyIGZ1bmN0aW9uIGNhbGwgKGRlZmF1bHQ6IDEwKS4KICAgICAqIEBzZWUgaHR0cHM6Ly9nYWZmZXJvbmdhbWVzLmNvbS9wb3N0L2ZpeF95b3VyX3RpbWVzdGVwLwogICAgICogQGV4YW1wbGUKICAgICAqICAgICAvLyBSdW4gdGhlIHNpbXVsYXRpb24gaW5kZXBlbmRlbnRseSBvZiBmcmFtZXJhdGUgZXZlcnkgMSAvIDYwIG1zCiAgICAgKiAgICAgd29ybGQuZml4ZWRTdGVwKCkKICAgICAqLwoKCiAgICBmaXhlZFN0ZXAoZHQsIG1heFN1YlN0ZXBzKSB7CiAgICAgIGlmIChkdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgZHQgPSAxIC8gNjA7CiAgICAgIH0KCiAgICAgIGlmIChtYXhTdWJTdGVwcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4U3ViU3RlcHMgPSAxMDsKICAgICAgfQoKICAgICAgY29uc3QgdGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDsgLy8gc2Vjb25kcwoKICAgICAgaWYgKCF0aGlzLmxhc3RDYWxsVGltZSkgewogICAgICAgIHRoaXMuc3RlcChkdCwgdW5kZWZpbmVkLCBtYXhTdWJTdGVwcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGxlZCA9IHRpbWUgLSB0aGlzLmxhc3RDYWxsVGltZTsKICAgICAgICB0aGlzLnN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKTsKICAgICAgfQoKICAgICAgdGhpcy5sYXN0Q2FsbFRpbWUgPSB0aW1lOwogICAgfQogICAgLyoqCiAgICAgKiBTdGVwIHRoZSBwaHlzaWNzIHdvcmxkIGZvcndhcmQgaW4gdGltZS4KICAgICAqCiAgICAgKiBUaGVyZSBhcmUgdHdvIG1vZGVzLiBUaGUgc2ltcGxlIG1vZGUgaXMgZml4ZWQgdGltZXN0ZXBwaW5nIHdpdGhvdXQgaW50ZXJwb2xhdGlvbi4gSW4gdGhpcyBjYXNlIHlvdSBvbmx5IHVzZSB0aGUgZmlyc3QgYXJndW1lbnQuIFRoZSBzZWNvbmQgY2FzZSB1c2VzIGludGVycG9sYXRpb24uIEluIHRoYXQgeW91IGFsc28gcHJvdmlkZSB0aGUgdGltZSBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgdXNlZCwgYXMgd2VsbCBhcyB0aGUgbWF4aW11bSBmaXhlZCB0aW1lc3RlcHMgdG8gdGFrZS4KICAgICAqCiAgICAgKiBAcGFyYW0gZHQgVGhlIGZpeGVkIHRpbWUgc3RlcCBzaXplIHRvIHVzZS4KICAgICAqIEBwYXJhbSB0aW1lU2luY2VMYXN0Q2FsbGVkIFRoZSB0aW1lIGVsYXBzZWQgc2luY2UgdGhlIGZ1bmN0aW9uIHdhcyBsYXN0IGNhbGxlZC4KICAgICAqIEBwYXJhbSBtYXhTdWJTdGVwcyBNYXhpbXVtIG51bWJlciBvZiBmaXhlZCBzdGVwcyB0byB0YWtlIHBlciBmdW5jdGlvbiBjYWxsIChkZWZhdWx0OiAxMCkuCiAgICAgKiBAc2VlIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE4MDQyNjE1NDUzMS9odHRwOi8vYnVsbGV0cGh5c2ljcy5vcmcvbWVkaWF3aWtpLTEuNS44L2luZGV4LnBocC9TdGVwcGluZ19UaGVfV29ybGQjV2hhdF9kb190aGVfcGFyYW1ldGVyc190b19idER5bmFtaWNzV29ybGQ6OnN0ZXBTaW11bGF0aW9uX21lYW4uM0YKICAgICAqIEBleGFtcGxlCiAgICAgKiAgICAgLy8gZml4ZWQgdGltZXN0ZXBwaW5nIHdpdGhvdXQgaW50ZXJwb2xhdGlvbgogICAgICogICAgIHdvcmxkLnN0ZXAoMSAvIDYwKQogICAgICovCgoKICAgIHN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKSB7CiAgICAgIGlmIChtYXhTdWJTdGVwcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4U3ViU3RlcHMgPSAxMDsKICAgICAgfQoKICAgICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsZWQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIEZpeGVkLCBzaW1wbGUgc3RlcHBpbmcKICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7IC8vIEluY3JlbWVudCB0aW1lCgogICAgICAgIHRoaXMudGltZSArPSBkdDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7CiAgICAgICAgY29uc3QgdDAgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgICBsZXQgc3Vic3RlcHMgPSAwOwoKICAgICAgICB3aGlsZSAodGhpcy5hY2N1bXVsYXRvciA+PSBkdCAmJiBzdWJzdGVwcyA8IG1heFN1YlN0ZXBzKSB7CiAgICAgICAgICAvLyBEbyBmaXhlZCBzdGVwcyB0byBjYXRjaCB1cAogICAgICAgICAgdGhpcy5pbnRlcm5hbFN0ZXAoZHQpOwogICAgICAgICAgdGhpcy5hY2N1bXVsYXRvciAtPSBkdDsKICAgICAgICAgIHN1YnN0ZXBzKys7CgogICAgICAgICAgaWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gdDAgPiBkdCAqIDEwMDApIHsKICAgICAgICAgICAgLy8gVGhlIGZyYW1lcmF0ZSBpcyBub3QgaW50ZXJhY3RpdmUgYW55bW9yZS4KICAgICAgICAgICAgLy8gV2UgYXJlIGJlbG93IHRoZSB0YXJnZXQgZnJhbWVyYXRlLgogICAgICAgICAgICAvLyBCZXR0ZXIgYmFpbCBvdXQuCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gUmVtb3ZlIHRoZSBleGNlc3MgYWNjdW11bGF0b3IsIHNpbmNlIHdlIG1heSBub3QKICAgICAgICAvLyBoYXZlIGhhZCBlbm91Z2ggc3Vic3RlcHMgYXZhaWxhYmxlIHRvIGNhdGNoIHVwCgoKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gdGhpcy5hY2N1bXVsYXRvciAlIGR0OwogICAgICAgIGNvbnN0IHQgPSB0aGlzLmFjY3VtdWxhdG9yIC8gZHQ7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSB0aGlzLmJvZGllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgYiA9IHRoaXMuYm9kaWVzW2pdOwogICAgICAgICAgYi5wcmV2aW91c1Bvc2l0aW9uLmxlcnAoYi5wb3NpdGlvbiwgdCwgYi5pbnRlcnBvbGF0ZWRQb3NpdGlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5zbGVycChiLnF1YXRlcm5pb24sIHQsIGIuaW50ZXJwb2xhdGVkUXVhdGVybmlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5ub3JtYWxpemUoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMudGltZSArPSB0aW1lU2luY2VMYXN0Q2FsbGVkOwogICAgICB9CiAgICB9CgogICAgaW50ZXJuYWxTdGVwKGR0KSB7CiAgICAgIHRoaXMuZHQgPSBkdDsKICAgICAgY29uc3QgY29udGFjdHMgPSB0aGlzLmNvbnRhY3RzOwogICAgICBjb25zdCBwMSA9IFdvcmxkX3N0ZXBfcDE7CiAgICAgIGNvbnN0IHAyID0gV29ybGRfc3RlcF9wMjsKICAgICAgY29uc3QgTiA9IHRoaXMuYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IHNvbHZlciA9IHRoaXMuc29sdmVyOwogICAgICBjb25zdCBncmF2aXR5ID0gdGhpcy5ncmF2aXR5OwogICAgICBjb25zdCBkb1Byb2ZpbGluZyA9IHRoaXMuZG9Qcm9maWxpbmc7CiAgICAgIGNvbnN0IHByb2ZpbGUgPSB0aGlzLnByb2ZpbGU7CiAgICAgIGNvbnN0IERZTkFNSUMgPSBCb2R5LkRZTkFNSUM7CiAgICAgIGxldCBwcm9maWxpbmdTdGFydCA9IC1JbmZpbml0eTsKICAgICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzOwogICAgICBjb25zdCBmcmljdGlvbkVxdWF0aW9uUG9vbCA9IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgIGdyYXZpdHkubGVuZ3RoKCk7CiAgICAgIGNvbnN0IGd4ID0gZ3Jhdml0eS54OwogICAgICBjb25zdCBneSA9IGdyYXZpdHkueTsKICAgICAgY29uc3QgZ3ogPSBncmF2aXR5Lno7CiAgICAgIGxldCBpID0gMDsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0gLy8gQWRkIGdyYXZpdHkgdG8gYWxsIG9iamVjdHMKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnR5cGUgPT09IERZTkFNSUMpIHsKICAgICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMgYm9kaWVzCiAgICAgICAgICBjb25zdCBmID0gYmkuZm9yY2U7CiAgICAgICAgICBjb25zdCBtID0gYmkubWFzczsKICAgICAgICAgIGYueCArPSBtICogZ3g7CiAgICAgICAgICBmLnkgKz0gbSAqIGd5OwogICAgICAgICAgZi56ICs9IG0gKiBnejsKICAgICAgICB9CiAgICAgIH0gLy8gVXBkYXRlIHN1YnN5c3RlbXMKCgogICAgICBmb3IgKGxldCBpID0gMCwgTnN1YnN5c3RlbXMgPSB0aGlzLnN1YnN5c3RlbXMubGVuZ3RoOyBpICE9PSBOc3Vic3lzdGVtczsgaSsrKSB7CiAgICAgICAgdGhpcy5zdWJzeXN0ZW1zW2ldLnVwZGF0ZSgpOwogICAgICB9IC8vIENvbGxpc2lvbiBkZXRlY3Rpb24KCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBwMS5sZW5ndGggPSAwOyAvLyBDbGVhbiB1cCBwYWlyIGFycmF5cyBmcm9tIGxhc3Qgc3RlcAoKICAgICAgcDIubGVuZ3RoID0gMDsKICAgICAgdGhpcy5icm9hZHBoYXNlLmNvbGxpc2lvblBhaXJzKHRoaXMsIHAxLCBwMik7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLmJyb2FkcGhhc2UgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBjb25zdHJhaW5lZCBwYWlycyB3aXRoIGNvbGxpZGVDb25uZWN0ZWQgPT0gZmFsc2UKCgogICAgICBsZXQgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CgogICAgICAgIGlmICghYy5jb2xsaWRlQ29ubmVjdGVkKSB7CiAgICAgICAgICBmb3IgKGxldCBqID0gcDEubGVuZ3RoIC0gMTsgaiA+PSAwOyBqIC09IDEpIHsKICAgICAgICAgICAgaWYgKGMuYm9keUEgPT09IHAxW2pdICYmIGMuYm9keUIgPT09IHAyW2pdIHx8IGMuYm9keUIgPT09IHAxW2pdICYmIGMuYm9keUEgPT09IHAyW2pdKSB7CiAgICAgICAgICAgICAgcDEuc3BsaWNlKGosIDEpOwogICAgICAgICAgICAgIHAyLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhUaWNrKCk7IC8vIEdlbmVyYXRlIGNvbnRhY3RzCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBjb25zdCBvbGRjb250YWN0cyA9IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHM7CiAgICAgIGNvbnN0IE5vbGRDb250YWN0cyA9IGNvbnRhY3RzLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRDb250YWN0czsgaSsrKSB7CiAgICAgICAgb2xkY29udGFjdHMucHVzaChjb250YWN0c1tpXSk7CiAgICAgIH0KCiAgICAgIGNvbnRhY3RzLmxlbmd0aCA9IDA7IC8vIFRyYW5zZmVyIEZyaWN0aW9uRXF1YXRpb24gZnJvbSBjdXJyZW50IGxpc3QgdG8gdGhlIHBvb2wgZm9yIHJldXNlCgogICAgICBjb25zdCBOb2xkRnJpY3Rpb25FcXVhdGlvbnMgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRGcmljdGlvbkVxdWF0aW9uczsgaSsrKSB7CiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblBvb2wucHVzaCh0aGlzLmZyaWN0aW9uRXF1YXRpb25zW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgICB0aGlzLm5hcnJvd3BoYXNlLmdldENvbnRhY3RzKHAxLCBwMiwgdGhpcywgY29udGFjdHMsIG9sZGNvbnRhY3RzLCAvLyBUbyBiZSByZXVzZWQKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucywgZnJpY3Rpb25FcXVhdGlvblBvb2wpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5uYXJyb3dwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gTG9vcCBvdmVyIGFsbCBjb2xsaXNpb25zCgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBBZGQgYWxsIGZyaWN0aW9uIGVxcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICBjb25zdCBuY29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gbmNvbnRhY3RzOyBrKyspIHsKICAgICAgICAvLyBDdXJyZW50IGNvbnRhY3QKICAgICAgICBjb25zdCBjID0gY29udGFjdHNba107IC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBpbmRlY2VzCgogICAgICAgIGNvbnN0IGJpID0gYy5iaTsKICAgICAgICBjb25zdCBiaiA9IGMuYmo7CiAgICAgICAgY29uc3Qgc2kgPSBjLnNpOwogICAgICAgIGNvbnN0IHNqID0gYy5zajsgLy8gR2V0IGNvbGxpc2lvbiBwcm9wZXJ0aWVzCgogICAgICAgIGxldCBjbTsKCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBjbSA9IHRoaXMuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjbSA9IHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsKICAgICAgICB9IC8vIGMuZW5hYmxlZCA9IGJpLmNvbGxpc2lvblJlc3BvbnNlICYmIGJqLmNvbGxpc2lvblJlc3BvbnNlICYmIHNpLmNvbGxpc2lvblJlc3BvbnNlICYmIHNqLmNvbGxpc2lvblJlc3BvbnNlOwoKCiAgICAgICAgY20uZnJpY3Rpb247IC8vIGMucmVzdGl0dXRpb24gPSBjbS5yZXN0aXR1dGlvbjsKICAgICAgICAvLyBJZiBmcmljdGlvbiBvciByZXN0aXR1dGlvbiB3ZXJlIHNwZWNpZmllZCBpbiB0aGUgbWF0ZXJpYWwsIHVzZSB0aGVtCgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLmZyaWN0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCkgewogICAgICAgICAgICBiaS5tYXRlcmlhbC5mcmljdGlvbiAqIGJqLm1hdGVyaWFsLmZyaWN0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChiaS5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwICYmIGJqLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICAgICAgYy5yZXN0aXR1dGlvbiA9IGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uICogYmoubWF0ZXJpYWwucmVzdGl0dXRpb247CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBjLnNldFNwb29rUGFyYW1zKAogICAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sCiAgICAgICAgLy8gICAgICAgICAgIGR0CiAgICAgICAgLy8gICAgICAgKTsKCgogICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihjKTsgLy8gLy8gQWRkIGZyaWN0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgICAgICAvLyBpZihtdSA+IDApewogICAgICAgIC8vIAkvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9ucwogICAgICAgIC8vIAljb25zdCBtdWcgPSBtdSAqIGdub3JtOwogICAgICAgIC8vIAljb25zdCByZWR1Y2VkTWFzcyA9IChiaS5pbnZNYXNzICsgYmouaW52TWFzcyk7CiAgICAgICAgLy8gCWlmKHJlZHVjZWRNYXNzID4gMCl7CiAgICAgICAgLy8gCQlyZWR1Y2VkTWFzcyA9IDEvcmVkdWNlZE1hc3M7CiAgICAgICAgLy8gCX0KICAgICAgICAvLyAJY29uc3QgcG9vbCA9IGZyaWN0aW9uRXF1YXRpb25Qb29sOwogICAgICAgIC8vIAljb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7CiAgICAgICAgLy8gCWNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5wdXNoKGMxLCBjMik7CiAgICAgICAgLy8gCWMxLmJpID0gYzIuYmkgPSBiaTsKICAgICAgICAvLyAJYzEuYmogPSBjMi5iaiA9IGJqOwogICAgICAgIC8vIAljMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJLy8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzCiAgICAgICAgLy8gCWMxLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMxLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCWMyLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMyLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCS8vIENvbnN0cnVjdCB0YW5nZW50cwogICAgICAgIC8vIAljLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOwogICAgICAgIC8vICAgICAgICAgICAvLyBTZXQgc3Bvb2sgcGFyYW1zCiAgICAgICAgLy8gICAgICAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gYy5lbmFibGVkOwogICAgICAgIC8vIAkvLyBBZGQgZXF1YXRpb25zIHRvIHNvbHZlcgogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzEpOwogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzIpOwogICAgICAgIC8vIH0KCiAgICAgICAgaWYgKGJpLmFsbG93U2xlZXAgJiYgYmkudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJpLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiai50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQiA9IGJqLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJqLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEIgPSBiai5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQiA+PSBzcGVlZExpbWl0U3F1YXJlZEIgKiAyKSB7CiAgICAgICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGJqLmFsbG93U2xlZXAgJiYgYmoudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiaS50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQSA9IGJpLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJpLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEEgPSBiaS5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQSA+PSBzcGVlZExpbWl0U3F1YXJlZEEgKiAyKSB7CiAgICAgICAgICAgIGJqLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0gLy8gTm93IHdlIGtub3cgdGhhdCBpIGFuZCBqIGFyZSBpbiBjb250YWN0LiBTZXQgY29sbGlzaW9uIG1hdHJpeCBzdGF0ZQoKCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0KGJpLCBiaiwgdHJ1ZSk7CgogICAgICAgIGlmICghdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cy5nZXQoYmksIGJqKSkgewogICAgICAgICAgLy8gRmlyc3QgY29udGFjdCEKICAgICAgICAgIC8vIFdlIHJldXNlIHRoZSBjb2xsaWRlRXZlbnQgb2JqZWN0LCBvdGhlcndpc2Ugd2Ugd2lsbCBlbmQgdXAgY3JlYXRpbmcgbmV3IG9iamVjdHMgZm9yIGVhY2ggbmV3IGNvbnRhY3QsIGV2ZW4gaWYgdGhlcmUncyBubyBldmVudCBsaXN0ZW5lciBhdHRhY2hlZC4KICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiajsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmNvbnRhY3QgPSBjOwogICAgICAgICAgYmkuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7CiAgICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5ib2R5ID0gYmk7CiAgICAgICAgICBiai5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZW1pdENvbnRhY3RFdmVudHMoKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUubWFrZUNvbnRhY3RDb25zdHJhaW50cyA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBXYWtlIHVwIGJvZGllcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSkgewogICAgICAgICAgYmkud2FrZVVwKCk7CiAgICAgICAgICBiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IC8vIEFkZCB1c2VyLWFkZGVkIGNvbnN0cmFpbnRzCgoKICAgICAgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CiAgICAgICAgYy51cGRhdGUoKTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5lcSA9IGMuZXF1YXRpb25zLmxlbmd0aDsgaiAhPT0gTmVxOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGVxID0gYy5lcXVhdGlvbnNbal07CiAgICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oZXEpOwogICAgICAgIH0KICAgICAgfSAvLyBTb2x2ZSB0aGUgY29uc3RyYWluZWQgc3lzdGVtCgoKICAgICAgc29sdmVyLnNvbHZlKGR0LCB0aGlzKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuc29sdmUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBhbGwgY29udGFjdHMgZnJvbSBzb2x2ZXIKCgogICAgICBzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7IC8vIEFwcGx5IGRhbXBpbmcsIHNlZSBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvYnVsbGV0L2lzc3Vlcy9kZXRhaWw/aWQ9NzQgZm9yIGRldGFpbHMKCiAgICAgIGNvbnN0IHBvdyA9IE1hdGgucG93OwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS50eXBlICYgRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGxkID0gcG93KDEuMCAtIGJpLmxpbmVhckRhbXBpbmcsIGR0KTsKICAgICAgICAgIGNvbnN0IHYgPSBiaS52ZWxvY2l0eTsKICAgICAgICAgIHYuc2NhbGUobGQsIHYpOwogICAgICAgICAgY29uc3QgYXYgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CgogICAgICAgICAgaWYgKGF2KSB7CiAgICAgICAgICAgIGNvbnN0IGFkID0gcG93KDEuMCAtIGJpLmFuZ3VsYXJEYW1waW5nLCBkdCk7CiAgICAgICAgICAgIGF2LnNjYWxlKGFkLCBhdik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9wcmVTdGVwRXZlbnQpOyAvLyBMZWFwIGZyb2cKICAgICAgLy8gdm5ldyA9IHYgKyBoKmYvbQogICAgICAvLyB4bmV3ID0geCArIGgqdm5ldwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfQoKICAgICAgY29uc3Qgc3RlcG51bWJlciA9IHRoaXMuc3RlcG51bWJlcjsKICAgICAgY29uc3QgcXVhdE5vcm1hbGl6ZSA9IHN0ZXBudW1iZXIgJSAodGhpcy5xdWF0Tm9ybWFsaXplU2tpcCArIDEpID09PSAwOwogICAgICBjb25zdCBxdWF0Tm9ybWFsaXplRmFzdCA9IHRoaXMucXVhdE5vcm1hbGl6ZUZhc3Q7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBib2RpZXNbaV0uaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2xlYXJGb3JjZXMoKTsKICAgICAgdGhpcy5icm9hZHBoYXNlLmRpcnR5ID0gdHJ1ZTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuaW50ZWdyYXRlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBVcGRhdGUgc3RlcCBudW1iZXIKCgogICAgICB0aGlzLnN0ZXBudW1iZXIgKz0gMTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCk7IC8vIFNsZWVwaW5nIHVwZGF0ZQoKICAgICAgbGV0IGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CgogICAgICBpZiAodGhpcy5hbGxvd1NsZWVwKSB7CiAgICAgICAgaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CgogICAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CiAgICAgICAgICBiaS5zbGVlcFRpY2sodGhpcy50aW1lKTsKCiAgICAgICAgICBpZiAoYmkuc2xlZXBTdGF0ZSAhPT0gQm9keS5TTEVFUElORykgewogICAgICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBoYXNBY3RpdmVCb2RpZXM7CiAgICB9CgogICAgZW1pdENvbnRhY3RFdmVudHMoKSB7CiAgICAgIGNvbnN0IGhhc0JlZ2luQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZENvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpbkNvbnRhY3QgfHwgaGFzRW5kQ29udGFjdCkgewogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSB0aGlzLmdldEJvZHlCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5Db250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChoYXNFbmRDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQocmVtb3ZhbHNbaV0pOwogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVuZENvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUEgPSBlbmRDb250YWN0RXZlbnQuYm9keUIgPSBudWxsOwogICAgICB9CgogICAgICBhZGRpdGlvbnMubGVuZ3RoID0gcmVtb3ZhbHMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgaGFzQmVnaW5TaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luU2hhcGVDb250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZFNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kU2hhcGVDb250YWN0Jyk7CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QgfHwgaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaV0pOwogICAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IHNoYXBlQTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IHNoYXBlQi5ib2R5OwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGJlZ2luU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZFNoYXBlQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gcmVtb3ZhbHMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBzaGFwZUEuYm9keTsKICAgICAgICAgIGlmIChzaGFwZUIpIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IG51bGw7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyBhbGwgYm9keSBmb3JjZXMgaW4gdGhlIHdvcmxkIHRvIHplcm8uCiAgICAgKi8KCgogICAgY2xlYXJGb3JjZXMoKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgIGIuZm9yY2U7CiAgICAgICAgYi50b3JxdWU7CiAgICAgICAgYi5mb3JjZS5zZXQoMCwgMCwgMCk7CiAgICAgICAgYi50b3JxdWUuc2V0KDAsIDAsIDApOwogICAgICB9CiAgICB9CgogIH0gLy8gVGVtcCBzdHVmZgoKICBuZXcgQUFCQigpOwogIGNvbnN0IHRtcFJheSA9IG5ldyBSYXkoKTsgLy8gcGVyZm9ybWFuY2Uubm93KCkgZmFsbGJhY2sgb24gRGF0ZS5ub3coKQoKICBjb25zdCBwZXJmb3JtYW5jZSA9IGdsb2JhbFRoaXMucGVyZm9ybWFuY2UgfHwge307CgogIGlmICghcGVyZm9ybWFuY2Uubm93KSB7CiAgICBsZXQgbm93T2Zmc2V0ID0gRGF0ZS5ub3coKTsKCiAgICBpZiAocGVyZm9ybWFuY2UudGltaW5nICYmIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQpIHsKICAgICAgbm93T2Zmc2V0ID0gcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydDsKICAgIH0KCiAgICBwZXJmb3JtYW5jZS5ub3cgPSAoKSA9PiBEYXRlLm5vdygpIC0gbm93T2Zmc2V0OwogIH0KCiAgbmV3IFZlYzMoKTsgLy8gRGlzcGF0Y2hlZCBhZnRlciB0aGUgd29ybGQgaGFzIHN0ZXBwZWQgZm9yd2FyZCBpbiB0aW1lLgogIC8vIFJldXNhYmxlIGV2ZW50IG9iamVjdHMgdG8gc2F2ZSBtZW1vcnkuCgogIGNvbnN0IFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwb3N0U3RlcCcKICB9OyAvLyBEaXNwYXRjaGVkIGJlZm9yZSB0aGUgd29ybGQgc3RlcHMgZm9yd2FyZCBpbiB0aW1lLgoKICBjb25zdCBXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwcmVTdGVwJwogIH07CiAgY29uc3QgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQgPSB7CiAgICB0eXBlOiBCb2R5LkNPTExJREVfRVZFTlRfTkFNRSwKICAgIGJvZHk6IG51bGwsCiAgICBjb250YWN0OiBudWxsCiAgfTsgLy8gUG9vbHMgZm9yIHVudXNlZCBvYmplY3RzCgogIGNvbnN0IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHMgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX2ZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107IC8vIFJldXNhYmxlIGFycmF5cyBmb3IgY29sbGlzaW9uIHBhaXJzCgogIGNvbnN0IFdvcmxkX3N0ZXBfcDEgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX3AyID0gW107IC8vIFN0dWZmIGZvciBlbWl0Q29udGFjdEV2ZW50cwoKICBjb25zdCBhZGRpdGlvbnMgPSBbXTsKICBjb25zdCByZW1vdmFscyA9IFtdOwogIGNvbnN0IGJlZ2luQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBlbmRDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnZW5kQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBiZWdpblNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luU2hhcGVDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwsCiAgICBzaGFwZUE6IG51bGwsCiAgICBzaGFwZUI6IG51bGwKICB9OwogIGNvbnN0IGVuZFNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2VuZFNoYXBlQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsLAogICAgc2hhcGVBOiBudWxsLAogICAgc2hhcGVCOiBudWxsCiAgfTsKCiAgY29uc3QgYWRkQ29udGFjdE1hdGVyaWFsID0gKHdvcmxkLCBjcmVhdGVNYXRlcmlhbCwgX3JlZiwgdXVpZCkgPT4gewogICAgbGV0IFttYXRlcmlhbEEsIG1hdGVyaWFsQiwgb3B0aW9uc10gPSBfcmVmOwogICAgY29uc3QgbWF0QSA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsQSk7CiAgICBjb25zdCBtYXRCID0gY3JlYXRlTWF0ZXJpYWwobWF0ZXJpYWxCKTsKICAgIGNvbnN0IGNvbnRhY3RNYXRlcmlhbCA9IG5ldyBDb250YWN0TWF0ZXJpYWwobWF0QSwgbWF0Qiwgb3B0aW9ucyk7CiAgICBjb250YWN0TWF0ZXJpYWwudXVpZCA9IHV1aWQ7CiAgICB3b3JsZC5hZGRDb250YWN0TWF0ZXJpYWwoY29udGFjdE1hdGVyaWFsKTsKICB9OwogIGNvbnN0IHJlbW92ZUNvbnRhY3RNYXRlcmlhbCA9ICh3b3JsZCwgY21VVUlEKSA9PiB7CiAgICBjb25zdCBpbmRleCA9IHdvcmxkLmNvbnRhY3RtYXRlcmlhbHMuZmluZEluZGV4KF9yZWYyID0+IHsKICAgICAgbGV0IHsKICAgICAgICB1dWlkCiAgICAgIH0gPSBfcmVmMjsKICAgICAgcmV0dXJuIHV1aWQgPT09IGNtVVVJRDsKICAgIH0pOwogICAgY29uc3QgW3sKICAgICAgaWQ6IGkKICAgIH0sIHsKICAgICAgaWQ6IGoKICAgIH1dID0gd29ybGQuY29udGFjdG1hdGVyaWFsc1tpbmRleF0ubWF0ZXJpYWxzOwogICAgd29ybGQuY29udGFjdG1hdGVyaWFscy5zcGxpY2UoaW5kZXgsIDEpOwogICAgZGVsZXRlIHdvcmxkLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmRhdGFbaSA8IGogPyBgJHtpfS0ke2p9YCA6IGAke2p9LSR7aX1gXTsKICB9OwoKICBsZXQgbWF0ZXJpYWxJZCA9IDA7CiAgY29uc3QgY3JlYXRlTWF0ZXJpYWxGYWN0b3J5ID0gbWF0ZXJpYWxzID0+IGZ1bmN0aW9uIChuYW1lT3JPcHRpb25zKSB7CiAgICBpZiAobmFtZU9yT3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgIG5hbWVPck9wdGlvbnMgPSB7fTsKICAgIH0KCiAgICBjb25zdCBtYXRlcmlhbE9wdGlvbnMgPSB0eXBlb2YgbmFtZU9yT3B0aW9ucyA9PT0gJ3N0cmluZycgPyB7CiAgICAgIG5hbWU6IG5hbWVPck9wdGlvbnMKICAgIH0gOiB7CiAgICAgIG5hbWU6IFN5bWJvbC5mb3IoYE1hdGVyaWFsJHttYXRlcmlhbElkKyt9YCksCiAgICAgIC4uLm5hbWVPck9wdGlvbnMKICAgIH07CiAgICBjb25zdCB7CiAgICAgIG5hbWUKICAgIH0gPSBtYXRlcmlhbE9wdGlvbnM7CiAgICBtYXRlcmlhbHNbbmFtZV0gPSBtYXRlcmlhbHNbbmFtZV0gfHwgbmV3IE1hdGVyaWFsKG1hdGVyaWFsT3B0aW9ucyk7CiAgICByZXR1cm4gbWF0ZXJpYWxzW25hbWVdOwogIH07CgogIC8qKgogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCdjYW5ub24tZXMnKS5NYXRlcmlhbE9wdGlvbnMgfSBNYXRlcmlhbE9wdGlvbnMKICAgKi8KCiAgY29uc3QgbWFrZVZlYzMgPSBfcmVmID0+IHsKICAgIGxldCBbeCwgeSwgel0gPSBfcmVmOwogICAgcmV0dXJuIG5ldyBWZWMzKHgsIHksIHopOwogIH07CgogIGNvbnN0IHByZXBhcmVTcGhlcmUgPSBhcmdzID0+IEFycmF5LmlzQXJyYXkoYXJncykgPyBhcmdzIDogW2FyZ3NdOwoKICBjb25zdCBwcmVwYXJlQ29udmV4UG9seWhlZHJvbiA9IF9yZWYyID0+IHsKICAgIGxldCBbdiwgZmFjZXMsIG4sIGEsIGJvdW5kaW5nU3BoZXJlUmFkaXVzXSA9IF9yZWYyOwogICAgcmV0dXJuIFt7CiAgICAgIGF4ZXM6IGEgPyBhLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICAgIGJvdW5kaW5nU3BoZXJlUmFkaXVzLAogICAgICBmYWNlcywKICAgICAgbm9ybWFsczogbiA/IG4ubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCwKICAgICAgdmVydGljZXM6IHYgPyB2Lm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQKICAgIH1dOwogIH07CgogIGZ1bmN0aW9uIGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpIHsKICAgIHN3aXRjaCAodHlwZSkgewogICAgICBjYXNlICdCb3gnOgogICAgICAgIHJldHVybiBuZXcgQm94KG5ldyBWZWMzKC4uLmFyZ3MubWFwKHYgPT4gdiAvIDIpKSk7CiAgICAgIC8vIGV4dGVudHMgPT4gaGFsZkV4dGVudHMKCiAgICAgIGNhc2UgJ0NvbnZleFBvbHloZWRyb24nOgogICAgICAgIHJldHVybiBuZXcgQ29udmV4UG9seWhlZHJvbiguLi5wcmVwYXJlQ29udmV4UG9seWhlZHJvbihhcmdzKSk7CgogICAgICBjYXNlICdDeWxpbmRlcic6CiAgICAgICAgcmV0dXJuIG5ldyBDeWxpbmRlciguLi5hcmdzKTsKICAgICAgLy8gWyByYWRpdXNUb3AsIHJhZGl1c0JvdHRvbSwgaGVpZ2h0LCBudW1TZWdtZW50cyBdID0gYXJncwoKICAgICAgY2FzZSAnSGVpZ2h0ZmllbGQnOgogICAgICAgIHJldHVybiBuZXcgSGVpZ2h0ZmllbGQoLi4uYXJncyk7CiAgICAgIC8vIFsgQXJyYXkgZGF0YSwgb3B0aW9uczoge21pblZhbHVlLCBtYXhWYWx1ZSwgZWxlbWVudFNpemV9ICBdID0gYXJncwoKICAgICAgY2FzZSAnUGFydGljbGUnOgogICAgICAgIHJldHVybiBuZXcgUGFydGljbGUoKTsKICAgICAgLy8gbm8gYXJncwoKICAgICAgY2FzZSAnUGxhbmUnOgogICAgICAgIHJldHVybiBuZXcgUGxhbmUoKTsKICAgICAgLy8gbm8gYXJncywgaW5maW5pdGUgeCBhbmQgeQoKICAgICAgY2FzZSAnU3BoZXJlJzoKICAgICAgICByZXR1cm4gbmV3IFNwaGVyZSguLi5wcmVwYXJlU3BoZXJlKGFyZ3MpKTsKICAgICAgLy8gcmFkaXVzID0gYXJncwoKICAgICAgY2FzZSAnVHJpbWVzaCc6CiAgICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKC4uLmFyZ3MpOwogICAgICAvLyBbdmVydGljZXMsIGluZGljZXNdID0gYXJncwogICAgfQogIH0KICAvKioKICAgKiBAZnVuY3Rpb24KICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnV1aWQKICAgKiBAcGFyYW0ge0JvZHlQcm9wc30gb3B0aW9ucy5wcm9wcwogICAqIEBwYXJhbSB7Qm9keVNoYXBlVHlwZX0gb3B0aW9ucy50eXBlCiAgICogQHBhcmFtIHsobWF0ZXJpYWxPcHRpb25zOiBNYXRlcmlhbE9wdGlvbnMpID0+IE1hdGVyaWFsID19IG9wdGlvbnMuY3JlYXRlTWF0ZXJpYWwKICAgKiBAcmV0dXJucyB7Qm9keX0KICAgKi8KCgogIGNvbnN0IHByb3BzVG9Cb2R5ID0gb3B0aW9ucyA9PiB7CiAgICBjb25zdCB7CiAgICAgIHV1aWQsCiAgICAgIHByb3BzLAogICAgICB0eXBlLAogICAgICBjcmVhdGVNYXRlcmlhbCA9IG1hdGVyaWFsT3B0aW9ucyA9PiBuZXcgTWF0ZXJpYWwobWF0ZXJpYWxPcHRpb25zKQogICAgfSA9IG9wdGlvbnM7CiAgICBjb25zdCB7CiAgICAgIGFuZ3VsYXJGYWN0b3IgPSBbMSwgMSwgMV0sCiAgICAgIGFuZ3VsYXJWZWxvY2l0eSA9IFswLCAwLCAwXSwKICAgICAgYXJncyA9IFtdLAogICAgICBjb2xsaXNpb25SZXNwb25zZSwKICAgICAgbGluZWFyRmFjdG9yID0gWzEsIDEsIDFdLAogICAgICBtYXNzLAogICAgICBtYXRlcmlhbCwKICAgICAgb25Db2xsaWRlLAogICAgICBwb3NpdGlvbiA9IFswLCAwLCAwXSwKICAgICAgcm90YXRpb24gPSBbMCwgMCwgMF0sCiAgICAgIHNoYXBlcywKICAgICAgdHlwZTogYm9keVR5cGUsCiAgICAgIHZlbG9jaXR5ID0gWzAsIDAsIDBdLAogICAgICAuLi5leHRyYQogICAgfSA9IHByb3BzOwogICAgY29uc3QgYm9keSA9IG5ldyBCb2R5KHsgLi4uZXh0cmEsCiAgICAgIG1hc3M6IGJvZHlUeXBlID09PSAnU3RhdGljJyA/IDAgOiBtYXNzLAogICAgICBtYXRlcmlhbDogbWF0ZXJpYWwgPyBjcmVhdGVNYXRlcmlhbChtYXRlcmlhbCkgOiB1bmRlZmluZWQsCiAgICAgIHR5cGU6IGJvZHlUeXBlID8gQm9keVtib2R5VHlwZS50b1VwcGVyQ2FzZSgpXSA6IHVuZGVmaW5lZAogICAgfSk7CiAgICBib2R5LnV1aWQgPSB1dWlkOwoKICAgIGlmIChjb2xsaXNpb25SZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGJvZHkuY29sbGlzaW9uUmVzcG9uc2UgPSBjb2xsaXNpb25SZXNwb25zZTsKICAgIH0KCiAgICBpZiAodHlwZSA9PT0gJ0NvbXBvdW5kJykgewogICAgICBzaGFwZXMuZm9yRWFjaChfcmVmMyA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBhcmdzLAogICAgICAgICAgcG9zaXRpb24sCiAgICAgICAgICByb3RhdGlvbiwKICAgICAgICAgIG1hdGVyaWFsLAogICAgICAgICAgLi4uZXh0cmEKICAgICAgICB9ID0gX3JlZjM7CiAgICAgICAgY29uc3Qgc2hhcGVCb2R5ID0gYm9keS5hZGRTaGFwZShjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSwgcG9zaXRpb24gPyBuZXcgVmVjMyguLi5wb3NpdGlvbikgOiB1bmRlZmluZWQsIHJvdGF0aW9uID8gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoLi4ucm90YXRpb24pIDogdW5kZWZpbmVkKTsKICAgICAgICBpZiAobWF0ZXJpYWwpIHNoYXBlQm9keS5tYXRlcmlhbCA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsKTsKICAgICAgICBPYmplY3QuYXNzaWduKHNoYXBlQm9keSwgZXh0cmEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpOwogICAgfQoKICAgIGJvZHkucG9zaXRpb24uc2V0KHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl0pOwogICAgYm9keS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihyb3RhdGlvblswXSwgcm90YXRpb25bMV0sIHJvdGF0aW9uWzJdKTsKICAgIGJvZHkudmVsb2NpdHkuc2V0KHZlbG9jaXR5WzBdLCB2ZWxvY2l0eVsxXSwgdmVsb2NpdHlbMl0pOwogICAgYm9keS5hbmd1bGFyVmVsb2NpdHkuc2V0KGFuZ3VsYXJWZWxvY2l0eVswXSwgYW5ndWxhclZlbG9jaXR5WzFdLCBhbmd1bGFyVmVsb2NpdHlbMl0pOwogICAgYm9keS5saW5lYXJGYWN0b3Iuc2V0KGxpbmVhckZhY3RvclswXSwgbGluZWFyRmFjdG9yWzFdLCBsaW5lYXJGYWN0b3JbMl0pOwogICAgYm9keS5hbmd1bGFyRmFjdG9yLnNldChhbmd1bGFyRmFjdG9yWzBdLCBhbmd1bGFyRmFjdG9yWzFdLCBhbmd1bGFyRmFjdG9yWzJdKTsKICAgIHJldHVybiBib2R5OwogIH07CgogIGNvbnN0IGFkZEJvZGllcyA9IChzdGF0ZSwgY3JlYXRlTWF0ZXJpYWwsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHByb3BzLAogICAgICB0eXBlLAogICAgICB1dWlkCiAgICB9ID0gX3JlZjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgYm9keSA9IHByb3BzVG9Cb2R5KHsKICAgICAgICBjcmVhdGVNYXRlcmlhbCwKICAgICAgICBwcm9wczogcHJvcHNbaV0sCiAgICAgICAgdHlwZSwKICAgICAgICB1dWlkOiB1dWlkW2ldCiAgICAgIH0pOwogICAgICBzdGF0ZS53b3JsZC5hZGRCb2R5KGJvZHkpOwogICAgICBpZiAocHJvcHNbaV0ub25Db2xsaWRlKSBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbGxpZGUnLCBfcmVmMiA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBib2R5LAogICAgICAgICAgdGFyZ2V0LAogICAgICAgICAgY29udGFjdAogICAgICAgIH0gPSBfcmVmMjsKICAgICAgICBpZiAoIWJvZHkudXVpZCB8fCAhdGFyZ2V0LnV1aWQpIHJldHVybjsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBuaSwKICAgICAgICAgIHJpLAogICAgICAgICAgcmosCiAgICAgICAgICBiaSwKICAgICAgICAgIGJqLAogICAgICAgICAgaWQKICAgICAgICB9ID0gY29udGFjdDsKICAgICAgICBjb25zdCBjb250YWN0UG9pbnQgPSBiaS5wb3NpdGlvbi52YWRkKHJpKTsKICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsID0gYmkgPT09IGJvZHkgPyBuaSA6IG5pLnNjYWxlKC0xKTsKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGJvZHk6IGJvZHkudXVpZCwKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlcnM6IHsKICAgICAgICAgICAgYm9keUZpbHRlckdyb3VwOiBib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICBib2R5RmlsdGVyTWFzazogYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgICB0YXJnZXRGaWx0ZXJHcm91cDogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICB0YXJnZXRGaWx0ZXJNYXNrOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyTWFzawogICAgICAgICAgfSwKICAgICAgICAgIGNvbnRhY3Q6IHsKICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiB1c2UgaWQgaW5zdGVhZCBvZiB1dWlkCiAgICAgICAgICAgIGJpOiBiaS51dWlkLAogICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IHVzZSBpZCBpbnN0ZWFkIG9mIHV1aWQKICAgICAgICAgICAgYmo6IGJqLnV1aWQsCiAgICAgICAgICAgIC8vIE5vcm1hbCBvZiB0aGUgY29udGFjdCwgcmVsYXRpdmUgdG8gdGhlIGNvbGxpZGluZyBib2R5CiAgICAgICAgICAgIGNvbnRhY3ROb3JtYWw6IGNvbnRhY3ROb3JtYWwudG9BcnJheSgpLAogICAgICAgICAgICAvLyBXb3JsZCBwb3NpdGlvbiBvZiB0aGUgY29udGFjdAogICAgICAgICAgICBjb250YWN0UG9pbnQ6IGNvbnRhY3RQb2ludC50b0FycmF5KCksCiAgICAgICAgICAgIGlkLAogICAgICAgICAgICBpbXBhY3RWZWxvY2l0eTogY29udGFjdC5nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsKCksCiAgICAgICAgICAgIG5pOiBuaS50b0FycmF5KCksCiAgICAgICAgICAgIHJpOiByaS50b0FycmF5KCksCiAgICAgICAgICAgIHJqOiByai50b0FycmF5KCkKICAgICAgICAgIH0sCiAgICAgICAgICBvcDogJ2V2ZW50JywKICAgICAgICAgIHRhcmdldDogdGFyZ2V0LnV1aWQsCiAgICAgICAgICB0eXBlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH07CgogIGNvbnN0IHRyaXBsZXRUb1ZlYzMgPSB0ID0+IHQgPyBuZXcgVmVjMyguLi50KSA6IHVuZGVmaW5lZDsKCiAgY29uc3QgYWRkQ29uc3RyYWludCA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBhbmdsZSwKICAgICAgICBheGlzQSwKICAgICAgICBheGlzQiwKICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgIGRpc3RhbmNlLAogICAgICAgIG1heEZvcmNlLAogICAgICAgIG1heE11bHRpcGxpZXIsCiAgICAgICAgcGl2b3RBLAogICAgICAgIHBpdm90QiwKICAgICAgICB0d2lzdEFuZ2xlLAogICAgICAgIHdha2VVcEJvZGllcwogICAgICB9XSwKICAgICAgdHlwZSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBsZXQgY29uc3RyYWludDsKCiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnUG9pbnRUb1BvaW50JzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IFBvaW50VG9Qb2ludENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgdHJpcGxldFRvVmVjMyhwaXZvdEEpLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB0cmlwbGV0VG9WZWMzKHBpdm90QiksIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0NvbmVUd2lzdCc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25lVHdpc3RDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIGFuZ2xlLAogICAgICAgICAgYXhpc0E6IHRyaXBsZXRUb1ZlYzMoYXhpc0EpLAogICAgICAgICAgYXhpc0I6IHRyaXBsZXRUb1ZlYzMoYXhpc0IpLAogICAgICAgICAgY29sbGlkZUNvbm5lY3RlZCwKICAgICAgICAgIG1heEZvcmNlLAogICAgICAgICAgcGl2b3RBOiB0cmlwbGV0VG9WZWMzKHBpdm90QSksCiAgICAgICAgICBwaXZvdEI6IHRyaXBsZXRUb1ZlYzMocGl2b3RCKSwKICAgICAgICAgIHR3aXN0QW5nbGUKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0hpbmdlJzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IEhpbmdlQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBheGlzQTogdHJpcGxldFRvVmVjMyhheGlzQSksCiAgICAgICAgICBheGlzQjogdHJpcGxldFRvVmVjMyhheGlzQiksCiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgICAgbWF4Rm9yY2UsCiAgICAgICAgICBwaXZvdEE6IHRyaXBsZXRUb1ZlYzMocGl2b3RBKSwKICAgICAgICAgIHBpdm90QjogdHJpcGxldFRvVmVjMyhwaXZvdEIpCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdEaXN0YW5jZSc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBEaXN0YW5jZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgZGlzdGFuY2UsIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0xvY2snOgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgTG9ja0NvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICAgICAgbWF4Rm9yY2UKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIGNvbGxpZGVDb25uZWN0ZWQsCiAgICAgICAgICB3YWtlVXBCb2RpZXMKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgIH0KCiAgICBjb25zdHJhaW50LnV1aWQgPSB1dWlkOwogICAgc3RhdGUud29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KTsKCiAgICBpZiAobWF4TXVsdGlwbGllciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGNvbnN0IHBvc3RTdGVwQ29uc3RyYWludCA9ICgpID0+IHsKICAgICAgICAvLyBUaGUgbXVsdGlwbGllciBpcyBwcm9wb3J0aW9uYWwgdG8gaG93IG11Y2ggZm9yY2UgaXMgYWRkZWQgdG8gdGhlIGJvZGllcyBieSB0aGUgY29uc3RyYWludC4KICAgICAgICAvLyBJZiB0aGlzIGV4Y2VlZHMgYSBsaW1pdCB0aGUgY29uc3RyYWludCBpcyBkaXNhYmxlZC4KICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gTWF0aC5hYnMoY29uc3RyYWludC5lcXVhdGlvbnNbMF0ubXVsdGlwbGllcik7CgogICAgICAgIGlmIChtdWx0aXBsaWVyID4gbWF4TXVsdGlwbGllcikgewogICAgICAgICAgY29uc3RyYWludC5kaXNhYmxlKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgc3RhdGUuY29uc3RyYWludHNbdXVpZF0gPSBwb3N0U3RlcENvbnN0cmFpbnQ7CiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuY29uc3RyYWludHNbdXVpZF0pOwogICAgfQogIH07CgogIGZ1bmN0aW9uIHRvVXBwZXJjYXNlKHN0cikgewogICAgcmV0dXJuIHN0ci50b1VwcGVyQ2FzZSgpOwogIH0KCiAgY29uc3QgYWRkUmF5ID0gKHN0YXRlLCBfcmVmKSA9PiB7CiAgICBsZXQgewogICAgICBwcm9wczogewogICAgICAgIGZyb20sCiAgICAgICAgbW9kZSwKICAgICAgICB0bywKICAgICAgICAuLi5yYXlPcHRpb25zCiAgICAgIH0sCiAgICAgIHV1aWQKICAgIH0gPSBfcmVmOwogICAgY29uc3QgcmF5ID0gbmV3IFJheSh0cmlwbGV0VG9WZWMzKGZyb20pLCB0cmlwbGV0VG9WZWMzKHRvKSk7CiAgICBjb25zdCBvcHRpb25zID0gewogICAgICBtb2RlOiBSQVlfTU9ERVNbdG9VcHBlcmNhc2UobW9kZSldLAogICAgICByZXN1bHQ6IG5ldyBSYXljYXN0UmVzdWx0KCksCiAgICAgIC4uLnJheU9wdGlvbnMKICAgIH07CgogICAgc3RhdGUucmF5c1t1dWlkXSA9ICgpID0+IHsKICAgICAgcmF5LmludGVyc2VjdFdvcmxkKHN0YXRlLndvcmxkLCBvcHRpb25zKTsKICAgICAgaWYgKCFvcHRpb25zLnJlc3VsdCB8fCAhb3B0aW9ucy5yZXN1bHQuYm9keSkgcmV0dXJuOwogICAgICBjb25zdCB7CiAgICAgICAgYm9keSwKICAgICAgICBzaGFwZSwKICAgICAgICByYXlGcm9tV29ybGQsCiAgICAgICAgcmF5VG9Xb3JsZCwKICAgICAgICBoaXROb3JtYWxXb3JsZCwKICAgICAgICBoaXRQb2ludFdvcmxkLAogICAgICAgIC4uLnJlc3QKICAgICAgfSA9IG9wdGlvbnMucmVzdWx0OwogICAgICBjb25zdCBib2R5VVVJRCA9IGJvZHkudXVpZDsKICAgICAgaWYgKCFib2R5VVVJRCkgcmV0dXJuOwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBib2R5OiBib2R5VVVJRCwKICAgICAgICBoaXROb3JtYWxXb3JsZDogaGl0Tm9ybWFsV29ybGQudG9BcnJheSgpLAogICAgICAgIGhpdFBvaW50V29ybGQ6IGhpdFBvaW50V29ybGQudG9BcnJheSgpLAogICAgICAgIG9wOiAnZXZlbnQnLAogICAgICAgIHJheTogewogICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IHJheS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IHJheS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgZGlyZWN0aW9uOiByYXkuZGlyZWN0aW9uLnRvQXJyYXkoKSwKICAgICAgICAgIGZyb20sCiAgICAgICAgICB0bywKICAgICAgICAgIHV1aWQKICAgICAgICB9LAogICAgICAgIHJheUZyb21Xb3JsZDogcmF5RnJvbVdvcmxkLnRvQXJyYXkoKSwKICAgICAgICByYXlUb1dvcmxkOiByYXlUb1dvcmxkLnRvQXJyYXkoKSwKICAgICAgICBzaGFwZTogc2hhcGUgPyB7IC4uLnNoYXBlLAogICAgICAgICAgYm9keTogYm9keVVVSUQKICAgICAgICB9IDogbnVsbCwKICAgICAgICB0eXBlOiAncmF5aGl0JywKICAgICAgICAuLi5yZXN0CiAgICAgIH0pOwogICAgfTsKCiAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1t1dWlkXSk7CiAgfTsKCiAgY29uc3QgYWRkUmF5Y2FzdFZlaGljbGUgPSAoc3RhdGUsIGRhdGEpID0+IHsKICAgIGNvbnN0IFtjaGFzc2lzQm9keSwgd2hlZWxzLCB3aGVlbEluZm9zLCBpbmRleEZvcndhcmRBeGlzLCBpbmRleFJpZ2h0QXhpcywgaW5kZXhVcEF4aXNdID0gZGF0YS5wcm9wczsKICAgIGNvbnN0IHZlaGljbGUgPSBuZXcgUmF5Y2FzdFZlaGljbGUoewogICAgICBjaGFzc2lzQm9keTogc3RhdGUuYm9kaWVzW2NoYXNzaXNCb2R5XSwKICAgICAgaW5kZXhGb3J3YXJkQXhpcywKICAgICAgaW5kZXhSaWdodEF4aXMsCiAgICAgIGluZGV4VXBBeGlzCiAgICB9KTsKICAgIHZlaGljbGUud29ybGQgPSBzdGF0ZS53b3JsZDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgewogICAgICAgIGF4bGVMb2NhbCwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwsCiAgICAgICAgZGlyZWN0aW9uTG9jYWwsCiAgICAgICAgLi4ucmVzdAogICAgICB9ID0gd2hlZWxJbmZvc1tpXTsKICAgICAgdmVoaWNsZS5hZGRXaGVlbCh7CiAgICAgICAgYXhsZUxvY2FsOiB0cmlwbGV0VG9WZWMzKGF4bGVMb2NhbCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsOiB0cmlwbGV0VG9WZWMzKGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IHRyaXBsZXRUb1ZlYzMoZGlyZWN0aW9uTG9jYWwpLAogICAgICAgIC4uLnJlc3QKICAgICAgfSk7CiAgICB9CgogICAgY29uc3QgcHJlU3RlcCA9ICgpID0+IHsKICAgICAgdmVoaWNsZS51cGRhdGVWZWhpY2xlKHN0YXRlLndvcmxkLmR0KTsKICAgIH07CgogICAgY29uc3QgcG9zdFN0ZXAgPSAoKSA9PiB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVoaWNsZS53aGVlbEluZm9zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmVoaWNsZS51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTsKICAgICAgICBjb25zdCB0ID0gdmVoaWNsZS53aGVlbEluZm9zW2ldLndvcmxkVHJhbnNmb3JtOwogICAgICAgIGNvbnN0IHdoZWVsQm9keSA9IHN0YXRlLmJvZGllc1t3aGVlbHNbaV1dOwogICAgICAgIHdoZWVsQm9keS5wb3NpdGlvbi5jb3B5KHQucG9zaXRpb24pOwogICAgICAgIHdoZWVsQm9keS5xdWF0ZXJuaW9uLmNvcHkodC5xdWF0ZXJuaW9uKTsKICAgICAgfQogICAgfTsKCiAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdID0gewogICAgICBwb3N0U3RlcCwKICAgICAgcHJlU3RlcCwKICAgICAgdmVoaWNsZQogICAgfTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBwcmVTdGVwKTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgcG9zdFN0ZXApOwogIH07CgogIGNvbnN0IGFkZFNwcmluZyA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBkYW1waW5nLAogICAgICAgIGxvY2FsQW5jaG9yQSwKICAgICAgICBsb2NhbEFuY2hvckIsCiAgICAgICAgcmVzdExlbmd0aCwKICAgICAgICBzdGlmZm5lc3MsCiAgICAgICAgd29ybGRBbmNob3JBLAogICAgICAgIHdvcmxkQW5jaG9yQgogICAgICB9XSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBjb25zdCBzcHJpbmcgPSBuZXcgU3ByaW5nKHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgZGFtcGluZywKICAgICAgbG9jYWxBbmNob3JBOiB0cmlwbGV0VG9WZWMzKGxvY2FsQW5jaG9yQSksCiAgICAgIGxvY2FsQW5jaG9yQjogdHJpcGxldFRvVmVjMyhsb2NhbEFuY2hvckIpLAogICAgICByZXN0TGVuZ3RoLAogICAgICBzdGlmZm5lc3MsCiAgICAgIHdvcmxkQW5jaG9yQTogdHJpcGxldFRvVmVjMyh3b3JsZEFuY2hvckEpLAogICAgICB3b3JsZEFuY2hvckI6IHRyaXBsZXRUb1ZlYzMod29ybGRBbmNob3JCKQogICAgfSk7CiAgICBzcHJpbmcudXVpZCA9IHV1aWQ7CgogICAgY29uc3QgcG9zdFN0ZXBTcHJpbmcgPSAoKSA9PiBzcHJpbmcuYXBwbHlGb3JjZSgpOwoKICAgIHN0YXRlLnNwcmluZ3NbdXVpZF0gPSBwb3N0U3RlcFNwcmluZzsKICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXSA9IHNwcmluZzsgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCgogICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW3V1aWRdKTsKICB9OwoKICBmdW5jdGlvbiBlbWl0QmVnaW5Db250YWN0KF9yZWYpIHsKICAgIGxldCB7CiAgICAgIGJvZHlBLAogICAgICBib2R5QgogICAgfSA9IF9yZWY7CiAgICBpZiAoIShib2R5QSAhPSBudWxsICYmIGJvZHlBLnV1aWQpIHx8ICEoYm9keUIgIT0gbnVsbCAmJiBib2R5Qi51dWlkKSkgcmV0dXJuOwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIGJvZHlBOiBib2R5QS51dWlkLAogICAgICBib2R5QjogYm9keUIudXVpZCwKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlQmVnaW4nCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGVtaXRFbmRDb250YWN0KF9yZWYyKSB7CiAgICBsZXQgewogICAgICBib2R5QSwKICAgICAgYm9keUIKICAgIH0gPSBfcmVmMjsKICAgIGlmICghKGJvZHlBICE9IG51bGwgJiYgYm9keUEudXVpZCkgfHwgIShib2R5QiAhPSBudWxsICYmIGJvZHlCLnV1aWQpKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkLAogICAgICBvcDogJ2V2ZW50JywKICAgICAgdHlwZTogJ2NvbGxpZGVFbmQnCiAgICB9KTsKICB9CgogIGNvbnN0IGluaXQgPSAod29ybGQsIF9yZWYzKSA9PiB7CiAgICBsZXQgewogICAgICBhbGxvd1NsZWVwLAogICAgICBheGlzSW5kZXggPSAwLAogICAgICBicm9hZHBoYXNlLAogICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLAogICAgICBmcmljdGlvbkdyYXZpdHksCiAgICAgIGdyYXZpdHksCiAgICAgIGl0ZXJhdGlvbnMsCiAgICAgIHF1YXROb3JtYWxpemVGYXN0LAogICAgICBxdWF0Tm9ybWFsaXplU2tpcCwKICAgICAgc29sdmVyLAogICAgICB0b2xlcmFuY2UKICAgIH0gPSBfcmVmMzsKICAgIHdvcmxkLmFsbG93U2xlZXAgPSBhbGxvd1NsZWVwOwogICAgd29ybGQuZ3Jhdml0eS5zZXQoLi4uZ3Jhdml0eSk7CiAgICB3b3JsZC5mcmljdGlvbkdyYXZpdHkgPSBmcmljdGlvbkdyYXZpdHkgPyBuZXcgVmVjMyguLi5mcmljdGlvbkdyYXZpdHkpIDogdW5kZWZpbmVkOwogICAgd29ybGQucXVhdE5vcm1hbGl6ZUZhc3QgPSBxdWF0Tm9ybWFsaXplRmFzdDsKICAgIHdvcmxkLnF1YXROb3JtYWxpemVTa2lwID0gcXVhdE5vcm1hbGl6ZVNraXA7CgogICAgaWYgKHNvbHZlciA9PT0gJ1NwbGl0JykgewogICAgICB3b3JsZC5zb2x2ZXIgPSBuZXcgU3BsaXRTb2x2ZXIobmV3IEdTU29sdmVyKCkpOwogICAgfQoKICAgIGlmICh3b3JsZC5zb2x2ZXIgaW5zdGFuY2VvZiBHU1NvbHZlcikgewogICAgICB3b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gdG9sZXJhbmNlOwogICAgICB3b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnM7CiAgICB9CgogICAgd29ybGQuYnJvYWRwaGFzZSA9IGJyb2FkcGhhc2UgPT09ICdTQVAnID8gbmV3IFNBUEJyb2FkcGhhc2Uod29ybGQpIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpOwoKICAgIGlmICh3b3JsZC5icm9hZHBoYXNlIGluc3RhbmNlb2YgU0FQQnJvYWRwaGFzZSkgewogICAgICB3b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGF4aXNJbmRleDsKICAgIH0KCiAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnLCBlbWl0QmVnaW5Db250YWN0KTsKICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnLCBlbWl0RW5kQ29udGFjdCk7CiAgICBPYmplY3QuYXNzaWduKHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwsIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwpOwogIH07CgogIGNvbnN0IGlzUW9yViA9IHYgPT4gdiBpbnN0YW5jZW9mIFF1YXRlcm5pb24gfHwgdiBpbnN0YW5jZW9mIFZlYzM7CgogIGNvbnN0IHN0ZXAgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHBvc2l0aW9ucywKICAgICAgcHJvcHM6IHsKICAgICAgICBtYXhTdWJTdGVwcywKICAgICAgICBzdGVwU2l6ZSwKICAgICAgICB0aW1lU2luY2VMYXN0Q2FsbGVkCiAgICAgIH0sCiAgICAgIHF1YXRlcm5pb25zCiAgICB9ID0gX3JlZjsKICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RlcFNpemUsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKTsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLndvcmxkLmJvZGllcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBjb25zdCBwID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLnBvc2l0aW9uOwogICAgICBjb25zdCBxID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLnF1YXRlcm5pb247CiAgICAgIHBvc2l0aW9uc1szICogaSArIDBdID0gcC54OwogICAgICBwb3NpdGlvbnNbMyAqIGkgKyAxXSA9IHAueTsKICAgICAgcG9zaXRpb25zWzMgKiBpICsgMl0gPSBwLno7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMF0gPSBxLng7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMV0gPSBxLnk7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMl0gPSBxLno7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgM10gPSBxLnc7CiAgICB9CgogICAgY29uc3Qgb2JzZXJ2YXRpb25zID0gW107CgogICAgZm9yIChjb25zdCBpZCBvZiBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKSkgewogICAgICBjb25zdCBbdXVpZCwgdHlwZSwgdGFyZ2V0ID0gJ2JvZGllcyddID0gc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF07CiAgICAgIGNvbnN0IHsKICAgICAgICBib2RpZXMsCiAgICAgICAgdmVoaWNsZXMKICAgICAgfSA9IHN0YXRlOwogICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldCA9PT0gJ3ZlaGljbGVzJyA/IC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHZlaGljbGVzW3V1aWRdLnZlaGljbGVbdHlwZV0gOiAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IERpZmZlcmVudGlhdGUgdGhlc2UgInR5cGVzIgogICAgICBib2RpZXNbdXVpZF1bdHlwZV07CiAgICAgIGNvbnN0IHNlcmlhbGl6YWJsZVZhbHVlID0gaXNRb3JWKHZhbHVlKSA/IHZhbHVlLnRvQXJyYXkoKSA6IHZhbHVlOwogICAgICBvYnNlcnZhdGlvbnMucHVzaChbTnVtYmVyKGlkKSwgc2VyaWFsaXphYmxlVmFsdWUsIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHR5cGVdKTsKICAgIH0KCiAgICBjb25zdCBtZXNzYWdlID0gewogICAgICBhY3RpdmU6IHN0YXRlLndvcmxkLmhhc0FjdGl2ZUJvZGllcywKICAgICAgb2JzZXJ2YXRpb25zLAogICAgICBvcDogJ2ZyYW1lJywKICAgICAgcG9zaXRpb25zLAogICAgICBxdWF0ZXJuaW9ucwogICAgfTsKCiAgICBpZiAoc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcpIHsKICAgICAgbWVzc2FnZS5ib2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMucmVkdWNlKChib2RpZXMsIGJvZHkpID0+IHsKICAgICAgICBpZiAoYm9keS51dWlkKSBib2RpZXMucHVzaChib2R5LnV1aWQpOwogICAgICAgIHJldHVybiBib2RpZXM7CiAgICAgIH0sIFtdKTsKICAgICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSBmYWxzZTsKICAgIH0KCiAgICBzZWxmLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIFtwb3NpdGlvbnMuYnVmZmVyLCBxdWF0ZXJuaW9ucy5idWZmZXJdKTsKICB9OwoKICBjb25zdCBzdGF0ZSA9IHsKICAgIGJvZGllczoge30sCiAgICBib2RpZXNOZWVkU3luY2luZzogZmFsc2UsCiAgICBjb25zdHJhaW50czoge30sCiAgICBtYXRlcmlhbHM6IHt9LAogICAgcmF5czoge30sCiAgICBzcHJpbmdJbnN0YW5jZXM6IHt9LAogICAgc3ByaW5nczoge30sCiAgICBzdWJzY3JpcHRpb25zOiB7fSwKICAgIHZlaGljbGVzOiB7fSwKICAgIHdvcmxkOiBuZXcgV29ybGQoKQogIH07CgogIC8vLyA8cmVmZXJlbmNlIG5vLWRlZmF1bHQtbGliPSJ0cnVlIi8+CgogIGNvbnN0IGlzSGluZ2VDb25zdHJhaW50ID0gYyA9PiBjIGluc3RhbmNlb2YgSGluZ2VDb25zdHJhaW50OwoKICBmdW5jdGlvbiBzeW5jQm9kaWVzKCkgewogICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSB0cnVlOwogICAgc3RhdGUuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLnJlZHVjZSgoYm9kaWVzLCBib2R5KSA9PiBib2R5LnV1aWQgPyB7IC4uLmJvZGllcywKICAgICAgW2JvZHkudXVpZF06IGJvZHkKICAgIH0gOiBib2RpZXMsIHt9KTsKICB9CgogIGNvbnN0IGJyb2FkcGhhc2VzID0gewogICAgTmFpdmVCcm9hZHBoYXNlLAogICAgU0FQQnJvYWRwaGFzZQogIH07CiAgY29uc3QgY3JlYXRlTWF0ZXJpYWwgPSBjcmVhdGVNYXRlcmlhbEZhY3Rvcnkoc3RhdGUubWF0ZXJpYWxzKTsKCiAgc2VsZi5vbm1lc3NhZ2UgPSBfcmVmID0+IHsKICAgIGxldCB7CiAgICAgIGRhdGEKICAgIH0gPSBfcmVmOwoKICAgIHN3aXRjaCAoZGF0YS5vcCkgewogICAgICBjYXNlICdpbml0JzoKICAgICAgICB7CiAgICAgICAgICBpbml0KHN0YXRlLndvcmxkLCBkYXRhLnByb3BzKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3N0ZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0ZXAoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQm9kaWVzJzoKICAgICAgICB7CiAgICAgICAgICBhZGRCb2RpZXMoc3RhdGUsIGNyZWF0ZU1hdGVyaWFsLCBkYXRhKTsKICAgICAgICAgIHN5bmNCb2RpZXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZUJvZGllcyc6CiAgICAgICAgewogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlQm9keShzdGF0ZS5ib2RpZXNbZGF0YS51dWlkW2ldXSk7CiAgICAgICAgICB9CgogICAgICAgICAgc3luY0JvZGllcygpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGlkLAogICAgICAgICAgICB0YXJnZXQsCiAgICAgICAgICAgIHR5cGUKICAgICAgICAgIH0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF0gPSBbZGF0YS51dWlkLCB0eXBlLCB0YXJnZXRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOgogICAgICAgIHsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5zdWJzY3JpcHRpb25zW2RhdGEucHJvcHNdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UG9zaXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnBvc2l0aW9uLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFF1YXRlcm5pb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnF1YXRlcm5pb24uc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0sIGRhdGEucHJvcHNbM10pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Um90YXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VmVsb2NpdHknOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYW5ndWxhclZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldExpbmVhckZhY3Rvcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubGluZWFyRmFjdG9yLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJGYWN0b3InOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFuZ3VsYXJGYWN0b3Iuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0TWFzcyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubWFzcyA9IGRhdGEucHJvcHM7CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0udXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldE1hdGVyaWFsJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5tYXRlcmlhbCA9IGRhdGEucHJvcHMgPyBjcmVhdGVNYXRlcmlhbChkYXRhLnByb3BzKSA6IG51bGw7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5saW5lYXJEYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbmd1bGFyRGFtcGluZyA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBbGxvd1NsZWVwJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbGxvd1NsZWVwID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwU3BlZWRMaW1pdCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uc2xlZXBTcGVlZExpbWl0ID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwVGltZUxpbWl0JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5zbGVlcFRpbWVMaW1pdCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb2xsaXNpb25GaWx0ZXJHcm91cCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyTWFzayc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uRmlsdGVyTWFzayA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb2xsaXNpb25SZXNwb25zZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Rml4ZWRSb3RhdGlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uZml4ZWRSb3RhdGlvbiA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRGcmljdGlvbkdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmZyaWN0aW9uR3Jhdml0eSA9IGRhdGEucHJvcHMgPyBuZXcgVmVjMyguLi5kYXRhLnByb3BzKSA6IHVuZGVmaW5lZDsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldElzVHJpZ2dlcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uaXNUcmlnZ2VyID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VG9sZXJhbmNlJzoKICAgICAgICBpZiAoc3RhdGUud29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci50b2xlcmFuY2UgPSBkYXRhLnByb3BzOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRJdGVyYXRpb25zJzoKICAgICAgICBpZiAoc3RhdGUud29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci5pdGVyYXRpb25zID0gZGF0YS5wcm9wczsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QnJvYWRwaGFzZSc6CiAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbYCR7ZGF0YS5wcm9wc31Ccm9hZHBoYXNlYF0gfHwgTmFpdmVCcm9hZHBoYXNlKShzdGF0ZS53b3JsZCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBeGlzSW5kZXgnOgogICAgICAgIGlmIChzdGF0ZS53b3JsZC5icm9hZHBoYXNlIGluc3RhbmNlb2YgU0FQQnJvYWRwaGFzZSkgewogICAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBkYXRhLnByb3BzID09PSB1bmRlZmluZWQgfHwgZGF0YS5wcm9wcyA9PT0gbnVsbCA/IDAgOiBkYXRhLnByb3BzOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUZvcmNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUltcHVsc2UnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5SW1wdWxzZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlMb2NhbEZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsRm9yY2UobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSksIG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsSW1wdWxzZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlUb3JxdWUnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5VG9ycXVlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FkZENvbnN0cmFpbnQnOgogICAgICAgIHsKICAgICAgICAgIGFkZENvbnN0cmFpbnQoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWYyID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQKICAgICAgICAgIH0gPSBfcmVmMjsKICAgICAgICAgIHJldHVybiB1dWlkID09PSBkYXRhLnV1aWQ7CiAgICAgICAgfSkubWFwKGMgPT4gc3RhdGUud29ybGQucmVtb3ZlQ29uc3RyYWludChjKSk7CgogICAgICAgIGlmIChzdGF0ZS5jb25zdHJhaW50c1tkYXRhLnV1aWRdKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF0pOwogICAgICAgICAgZGVsZXRlIHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF07CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5tYXAoYyA9PiBjLmVuYWJsZSgpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2Rpc2FibGVDb25zdHJhaW50JzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkubWFwKGMgPT4gYy5kaXNhYmxlKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludE1vdG9yJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLmVuYWJsZU1vdG9yKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5kaXNhYmxlTW90b3IoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb25zdHJhaW50TW90b3JTcGVlZCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5zZXRNb3RvclNwZWVkKGRhdGEucHJvcHMpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3Rvck1heEZvcmNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLnNldE1vdG9yTWF4Rm9yY2UoZGF0YS5wcm9wcykpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYWRkU3ByaW5nJzoKICAgICAgICB7CiAgICAgICAgICBhZGRTcHJpbmcoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nU3RpZmZuZXNzJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5zdGlmZm5lc3MgPSBkYXRhLnByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nUmVzdExlbmd0aCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW2RhdGEudXVpZF0ucmVzdExlbmd0aCA9IGRhdGEucHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRTcHJpbmdEYW1waW5nJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5kYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZVNwcmluZyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW2RhdGEudXVpZF0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkUmF5JzoKICAgICAgICB7CiAgICAgICAgICBhZGRSYXkoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5JzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1tkYXRhLnV1aWRdKTsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5yYXlzW2RhdGEudXVpZF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRSYXljYXN0VmVoaWNsZSc6CiAgICAgICAgewogICAgICAgICAgYWRkUmF5Y2FzdFZlaGljbGUoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnByZVN0ZXApOwogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnBvc3RTdGVwKTsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS53b3JsZCA9IG51bGw7CiAgICAgICAgICBkZWxldGUgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFJheWNhc3RWZWhpY2xlU3RlZXJpbmdWYWx1ZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhcHBseVJheWNhc3RWZWhpY2xlRW5naW5lRm9yY2UnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgd2hlZWxJbmRleF0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS52ZWhpY2xlLmFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVCcmFrZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2JyYWtlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQ29udGFjdE1hdGVyaWFsJzoKICAgICAgICB7CiAgICAgICAgICBhZGRDb250YWN0TWF0ZXJpYWwoc3RhdGUud29ybGQsIGNyZWF0ZU1hdGVyaWFsLCBkYXRhLnByb3BzLCBkYXRhLnV1aWQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29udGFjdE1hdGVyaWFsJzoKICAgICAgICB7CiAgICAgICAgICByZW1vdmVDb250YWN0TWF0ZXJpYWwoc3RhdGUud29ybGQsIGRhdGEudXVpZCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICd3YWtlVXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLndha2VVcCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2xlZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnNsZWVwKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAgfTsKCn0pKCk7Cgo=",null,!1),Yf=function(e){G(n,e);var t=x(n);function n(e){var i;W(this,n);var a=e.allowSleep,l=void 0!==a&&a,r=e.axisIndex,o=void 0===r?0:r,g=e.broadphase,s=void 0===g?"Naive":g,u=e.defaultContactMaterial,c=void 0===u?{contactEquationStiffness:1e6}:u,I=e.frictionGravity,C=void 0===I?null:I,d=e.gravity,h=void 0===d?[0,-9.81,0]:d,A=e.iterations,m=void 0===A?5:A,p=e.quatNormalizeFast,f=void 0!==p&&p,b=e.quatNormalizeSkip,v=void 0===b?0:b,y=e.size,G=void 0===y?1e3:y,B=e.solver,Z=void 0===B?"GS":B,x=e.tolerance,w=void 0===x?.001:x;return(i=t.call(this)).messageQueue=[],i.worker=null,i.config={allowSleep:l,axisIndex:o,broadphase:s,defaultContactMaterial:c,frictionGravity:C,gravity:h,iterations:m,quatNormalizeFast:f,quatNormalizeSkip:v,size:G,solver:Z,tolerance:w},i.buffers={positions:new Float32Array(3*G),quaternions:new Float32Array(4*G)},i}return R(n,[{key:"axisIndex",get:function(){return this.config.axisIndex},set:function(e){this.config.axisIndex=e,this.postMessage({op:"setAxisIndex",props:e})}},{key:"broadphase",get:function(){return this.config.broadphase},set:function(e){this.config.broadphase=e,this.postMessage({op:"setBroadphase",props:e})}},{key:"frictionGravity",get:function(){return this.config.frictionGravity},set:function(e){this.config.frictionGravity=e,this.postMessage({op:"setFrictionGravity",props:e})}},{key:"gravity",get:function(){return this.config.gravity},set:function(e){this.config.gravity=e,this.postMessage({op:"setGravity",props:e})}},{key:"iterations",get:function(){return this.config.iterations},set:function(e){this.config.iterations=e,this.postMessage({op:"setIterations",props:e})}},{key:"tolerance",get:function(){return this.config.tolerance},set:function(e){this.config.tolerance=e,this.postMessage({op:"setTolerance",props:e})}},{key:"addBodies",value:function(e){var t=e.props,n=e.type,i=e.uuid;this.postMessage({op:"addBodies",props:t,type:n,uuid:i})}},{key:"addConstraint",value:function(e){var t=s(e.props,3),n=t[0],i=t[1],a=t[2],l=e.type,r=e.uuid;this.postMessage({op:"addConstraint",props:[n,i,a],type:l,uuid:r})}},{key:"addContactMaterial",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"addContactMaterial",props:t,uuid:n})}},{key:"addRay",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"addRay",props:t,uuid:n})}},{key:"addRaycastVehicle",value:function(e){var t=s(e.props,6),n=t[0],i=t[1],a=t[2],l=t[3],r=t[4],o=t[5],g=e.uuid;this.postMessage({op:"addRaycastVehicle",props:[n,i,a,l,r,o],uuid:g})}},{key:"addSpring",value:function(e){var t=s(e.props,3),n=t[0],i=t[1],a=t[2],l=e.uuid;this.postMessage({op:"addSpring",props:[n,i,a],uuid:l})}},{key:"applyForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyForce",props:t,uuid:n})}},{key:"applyImpulse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyImpulse",props:t,uuid:n})}},{key:"applyLocalForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyLocalForce",props:t,uuid:n})}},{key:"applyLocalImpulse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyLocalImpulse",props:t,uuid:n})}},{key:"applyRaycastVehicleEngineForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyRaycastVehicleEngineForce",props:t,uuid:n})}},{key:"applyTorque",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyTorque",props:t,uuid:n})}},{key:"connect",value:function(){var e=this;this.worker=new kf,this.worker.onmessage=function(t){if("frame"===t.data.op)return e.buffers.positions=t.data.positions,e.buffers.quaternions=t.data.quaternions,void e.emit(t.data.op,t.data);e.emit(t.data.type,t.data)};var t,n=f(this.messageQueue);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.worker.postMessage(i)}}catch(a){n.e(a)}finally{n.f()}this.messageQueue.length=0}},{key:"disableConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"disableConstraint",uuid:t})}},{key:"disableConstraintMotor",value:function(e){var t=e.uuid;this.postMessage({op:"disableConstraintMotor",uuid:t})}},{key:"disconnect",value:function(){this.worker&&(this.worker.onmessage=null)}},{key:"enableConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"enableConstraint",uuid:t})}},{key:"enableConstraintMotor",value:function(e){var t=e.uuid;this.postMessage({op:"enableConstraintMotor",uuid:t})}},{key:"init",value:function(){var e=this.config,t=e.allowSleep,n=e.axisIndex,i=e.broadphase,a=e.defaultContactMaterial,l=e.frictionGravity,r=e.gravity,o=e.iterations,g=e.quatNormalizeFast,s=e.quatNormalizeSkip,u=e.solver,c=e.tolerance;this.postMessage({op:"init",props:{allowSleep:t,axisIndex:n,broadphase:i,defaultContactMaterial:a,frictionGravity:l,gravity:r,iterations:o,quatNormalizeFast:g,quatNormalizeSkip:s,solver:u,tolerance:c}})}},{key:"removeBodies",value:function(e){var t=e.uuid;this.postMessage({op:"removeBodies",uuid:t})}},{key:"removeConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"removeConstraint",uuid:t})}},{key:"removeContactMaterial",value:function(e){var t=e.uuid;this.postMessage({op:"removeContactMaterial",uuid:t})}},{key:"removeRay",value:function(e){var t=e.uuid;this.postMessage({op:"removeRay",uuid:t})}},{key:"removeRaycastVehicle",value:function(e){var t=e.uuid;this.postMessage({op:"removeRaycastVehicle",uuid:t})}},{key:"removeSpring",value:function(e){var t=e.uuid;this.postMessage({op:"removeSpring",uuid:t})}},{key:"setAllowSleep",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAllowSleep",props:t,uuid:n})}},{key:"setAngularDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularDamping",props:t,uuid:n})}},{key:"setAngularFactor",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularFactor",props:t,uuid:n})}},{key:"setAngularVelocity",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularVelocity",props:t,uuid:n})}},{key:"setCollisionFilterGroup",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionFilterGroup",props:t,uuid:n})}},{key:"setCollisionFilterMask",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionFilterMask",props:t,uuid:n})}},{key:"setCollisionResponse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionResponse",props:t,uuid:n})}},{key:"setConstraintMotorMaxForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setConstraintMotorMaxForce",props:t,uuid:n})}},{key:"setConstraintMotorSpeed",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setConstraintMotorSpeed",props:t,uuid:n})}},{key:"setFixedRotation",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setFixedRotation",props:t,uuid:n})}},{key:"setIsTrigger",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setIsTrigger",props:t,uuid:n})}},{key:"setLinearDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setLinearDamping",props:t,uuid:n})}},{key:"setLinearFactor",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setLinearFactor",props:t,uuid:n})}},{key:"setMass",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setMass",props:t,uuid:n})}},{key:"setMaterial",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setMaterial",props:t,uuid:n})}},{key:"setPosition",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setPosition",props:t,uuid:n})}},{key:"setQuaternion",value:function(e){var t=s(e.props,4),n=t[0],i=t[1],a=t[2],l=t[3],r=e.uuid;this.postMessage({op:"setQuaternion",props:[n,i,a,l],uuid:r})}},{key:"setRaycastVehicleBrake",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRaycastVehicleBrake",props:t,uuid:n})}},{key:"setRaycastVehicleSteeringValue",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRaycastVehicleSteeringValue",props:t,uuid:n})}},{key:"setRotation",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRotation",props:t,uuid:n})}},{key:"setSleepSpeedLimit",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSleepSpeedLimit",props:t,uuid:n})}},{key:"setSleepTimeLimit",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSleepTimeLimit",props:t,uuid:n})}},{key:"setSpringDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringDamping",props:t,uuid:n})}},{key:"setSpringRestLength",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringRestLength",props:t,uuid:n})}},{key:"setSpringStiffness",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringStiffness",props:t,uuid:n})}},{key:"setUserData",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setUserData",props:t,uuid:n})}},{key:"setVelocity",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setVelocity",props:t,uuid:n})}},{key:"sleep",value:function(e){var t=e.uuid;this.postMessage({op:"sleep",uuid:t})}},{key:"step",value:function(e){var t,n=this.buffers,i=n.positions,a=n.quaternions;(i.byteLength||a.byteLength)&&(null==(t=this.worker)||t.postMessage({op:"step",positions:i,props:e,quaternions:a},[i.buffer,a.buffer]))}},{key:"subscribe",value:function(e){var t=e.props,n=t.id,i=t.target,a=t.type,l=e.uuid;this.postMessage({op:"subscribe",props:{id:n,target:i,type:a},uuid:l})}},{key:"terminate",value:function(){var e;null==(e=this.worker)||e.terminate(),this.worker=null}},{key:"unsubscribe",value:function(e){var t=e.props;this.postMessage({op:"unsubscribe",props:t})}},{key:"wakeUp",value:function(e){var t=e.uuid;this.postMessage({op:"wakeUp",uuid:t})}},{key:"postMessage",value:function(e){if(this.worker)return this.worker.postMessage(e);this.messageQueue.push(e)}}]),n}(Vf),zf=function(){function e(t){W(this,e),void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}return R(e,[{key:"identity",value:function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}},{key:"setZero",value:function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}},{key:"setTrace",value:function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}},{key:"getTrace",value:function(e){void 0===e&&(e=new Nf);var t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}},{key:"vmult",value:function(e,t){void 0===t&&(t=new Nf);var n=this.elements,i=e.x,a=e.y,l=e.z;return t.x=n[0]*i+n[1]*a+n[2]*l,t.y=n[3]*i+n[4]*a+n[5]*l,t.z=n[6]*i+n[7]*a+n[8]*l,t}},{key:"smult",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]*=e}},{key:"mmult",value:function(t,n){void 0===n&&(n=new e);var i=this.elements,a=t.elements,l=n.elements,r=i[0],o=i[1],g=i[2],s=i[3],u=i[4],c=i[5],I=i[6],C=i[7],d=i[8],h=a[0],A=a[1],m=a[2],p=a[3],f=a[4],b=a[5],v=a[6],y=a[7],G=a[8];return l[0]=r*h+o*p+g*v,l[1]=r*A+o*f+g*y,l[2]=r*m+o*b+g*G,l[3]=s*h+u*p+c*v,l[4]=s*A+u*f+c*y,l[5]=s*m+u*b+c*G,l[6]=I*h+C*p+d*v,l[7]=I*A+C*f+d*y,l[8]=I*m+C*b+d*G,n}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);for(var i=this.elements,a=n.elements,l=0;3!==l;l++)a[3*l+0]=t.x*i[3*l+0],a[3*l+1]=t.y*i[3*l+1],a[3*l+2]=t.z*i[3*l+2];return n}},{key:"solve",value:function(e,t){void 0===t&&(t=new Nf);var n,i,a=[];for(n=0;n<12;n++)a.push(0);for(n=0;n<3;n++)for(i=0;i<3;i++)a[n+4*i]=this.elements[n+3*i];a[3]=e.x,a[7]=e.y,a[11]=e.z;var l,r,o=3,g=o;do{if(0===a[(n=g-o)+4*n])for(i=n+1;i<g;i++)if(0!==a[n+4*i]){l=4;do{a[(r=4-l)+4*n]+=a[r+4*i]}while(--l);break}if(0!==a[n+4*n])for(i=n+1;i<g;i++){var s=a[n+4*i]/a[n+4*n];l=4;do{a[(r=4-l)+4*i]=r<=n?0:a[r+4*i]-a[r+4*n]*s}while(--l)}}while(--o);if(t.z=a[11]/a[10],t.y=(a[7]-a[6]*t.z)/a[5],t.x=(a[3]-a[2]*t.z-a[1]*t.y)/a[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=[".concat(t.toString(),"], b=[").concat(e.toString(),"], A=[").concat(this.toString(),"]");return t}},{key:"e",value:function(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n}},{key:"copy",value:function(e){for(var t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}},{key:"toString",value:function(){for(var e="",t=0;t<9;t++)e+=this.elements[t]+",";return e}},{key:"reverse",value:function(t){void 0===t&&(t=new e);var n,i,a=Kf;for(n=0;n<3;n++)for(i=0;i<3;i++)a[n+6*i]=this.elements[n+3*i];a[3]=1,a[9]=0,a[15]=0,a[4]=0,a[10]=1,a[16]=0,a[5]=0,a[11]=0,a[17]=1;var l,r,o=3,g=o;do{if(0===a[(n=g-o)+6*n])for(i=n+1;i<g;i++)if(0!==a[n+6*i]){l=6;do{a[(r=6-l)+6*n]+=a[r+6*i]}while(--l);break}if(0!==a[n+6*n])for(i=n+1;i<g;i++){var s=a[n+6*i]/a[n+6*n];l=6;do{a[(r=6-l)+6*i]=r<=n?0:a[r+6*i]-a[r+6*n]*s}while(--l)}}while(--o);n=2;do{i=n-1;do{var u=a[n+6*i]/a[n+6*n];l=6;do{a[(r=6-l)+6*i]=a[r+6*i]-a[r+6*n]*u}while(--l)}while(i--)}while(--n);n=2;do{var c=1/a[n+6*n];l=6;do{a[(r=6-l)+6*n]=a[r+6*n]*c}while(--l)}while(n--);n=2;do{i=2;do{if(r=a[3+i+6*n],isNaN(r)||r===1/0)throw"Could not reverse! A=[".concat(this.toString(),"]");t.e(n,i,r)}while(i--)}while(n--);return t}},{key:"setRotationFromQuaternion",value:function(e){var t=e.x,n=e.y,i=e.z,a=e.w,l=t+t,r=n+n,o=i+i,g=t*l,s=t*r,u=t*o,c=n*r,I=n*o,C=i*o,d=a*l,h=a*r,A=a*o,m=this.elements;return m[0]=1-(c+C),m[1]=s-A,m[2]=u+h,m[3]=s+A,m[4]=1-(g+C),m[5]=I-d,m[6]=u-h,m[7]=I+d,m[8]=1-(g+c),this}},{key:"transpose",value:function(t){void 0===t&&(t=new e);var n,i=this.elements,a=t.elements;return a[0]=i[0],a[4]=i[4],a[8]=i[8],n=i[1],a[1]=i[3],a[3]=n,n=i[2],a[2]=i[6],a[6]=n,n=i[5],a[5]=i[7],a[7]=n,t}}]),e}(),Kf=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Nf=function(){function e(t,n,i){W(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=n,this.z=i}return R(e,[{key:"cross",value:function(t,n){void 0===n&&(n=new e);var i=t.x,a=t.y,l=t.z,r=this.x,o=this.y,g=this.z;return n.x=o*l-g*a,n.y=g*i-r*l,n.z=r*a-o*i,n}},{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"setZero",value:function(){this.x=this.y=this.z=0}},{key:"vadd",value:function(t,n){if(!n)return new e(this.x+t.x,this.y+t.y,this.z+t.z);n.x=t.x+this.x,n.y=t.y+this.y,n.z=t.z+this.z}},{key:"vsub",value:function(t,n){if(!n)return new e(this.x-t.x,this.y-t.y,this.z-t.z);n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z}},{key:"crossmat",value:function(){return new zf([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}},{key:"normalize",value:function(){var e=this.x,t=this.y,n=this.z,i=Math.sqrt(e*e+t*t+n*n);if(i>0){var a=1/i;this.x*=a,this.y*=a,this.z*=a}else this.x=0,this.y=0,this.z=0;return i}},{key:"unit",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,a=this.z,l=Math.sqrt(n*n+i*i+a*a);return l>0?(l=1/l,t.x=n*l,t.y=i*l,t.z=a*l):(t.x=1,t.y=0,t.z=0),t}},{key:"length",value:function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}},{key:"lengthSquared",value:function(){return this.dot(this)}},{key:"distanceTo",value:function(e){var t=this.x,n=this.y,i=this.z,a=e.x,l=e.y,r=e.z;return Math.sqrt((a-t)*(a-t)+(l-n)*(l-n)+(r-i)*(r-i))}},{key:"distanceSquared",value:function(e){var t=this.x,n=this.y,i=this.z,a=e.x,l=e.y,r=e.z;return(a-t)*(a-t)+(l-n)*(l-n)+(r-i)*(r-i)}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);var i=this.x,a=this.y,l=this.z;return n.x=t*i,n.y=t*a,n.z=t*l,n}},{key:"vmul",value:function(t,n){return void 0===n&&(n=new e),n.x=t.x*this.x,n.y=t.y*this.y,n.z=t.z*this.z,n}},{key:"addScaledVector",value:function(t,n,i){return void 0===i&&(i=new e),i.x=this.x+t*n.x,i.y=this.y+t*n.y,i.z=this.z+t*n.z,i}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"isZero",value:function(){return 0===this.x&&0===this.y&&0===this.z}},{key:"negate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}},{key:"tangents",value:function(e,t){var n=this.length();if(n>0){var i=Hf,a=1/n;i.set(this.x*a,this.y*a,this.z*a);var l=Mf;Math.abs(i.x)<.9?(l.set(1,0,0),i.cross(l,e)):(l.set(0,1,0),i.cross(l,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"lerp",value:function(e,t,n){var i=this.x,a=this.y,l=this.z;n.x=i+(e.x-i)*t,n.y=a+(e.y-a)*t,n.z=l+(e.z-l)*t}},{key:"almostEquals",value:function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}},{key:"almostZero",value:function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}},{key:"isAntiparallelTo",value:function(e,t){return this.negate(Ff),Ff.almostEquals(e,t)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}();Nf.ZERO=new Nf(0,0,0),Nf.UNIT_X=new Nf(1,0,0),Nf.UNIT_Y=new Nf(0,1,0),Nf.UNIT_Z=new Nf(0,0,1);var Hf=new Nf,Mf=new Nf,Ff=new Nf,Lf=function(){function e(t){W(this,e),void 0===t&&(t={}),this.lowerBound=new Nf,this.upperBound=new Nf,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}return R(e,[{key:"setFromPoints",value:function(e,t,n,i){var a=this.lowerBound,l=this.upperBound,r=n;a.copy(e[0]),r&&r.vmult(a,a),l.copy(a);for(var o=1;o<e.length;o++){var g=e[o];r&&(r.vmult(g,_f),g=_f),g.x>l.x&&(l.x=g.x),g.x<a.x&&(a.x=g.x),g.y>l.y&&(l.y=g.y),g.y<a.y&&(a.y=g.y),g.z>l.z&&(l.z=g.z),g.z<a.z&&(a.z=g.z)}return t&&(t.vadd(a,a),t.vadd(l,l)),i&&(a.x-=i,a.y-=i,a.z-=i,l.x+=i,l.y+=i,l.z+=i),this}},{key:"copy",value:function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"extend",value:function(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}},{key:"overlaps",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,a=e.upperBound,l=i.x<=n.x&&n.x<=a.x||t.x<=a.x&&a.x<=n.x,r=i.y<=n.y&&n.y<=a.y||t.y<=a.y&&a.y<=n.y,o=i.z<=n.z&&n.z<=a.z||t.z<=a.z&&a.z<=n.z;return l&&r&&o}},{key:"volume",value:function(){var e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}},{key:"contains",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,a=e.upperBound;return t.x<=i.x&&n.x>=a.x&&t.y<=i.y&&n.y>=a.y&&t.z<=i.z&&n.z>=a.z}},{key:"getCorners",value:function(e,t,n,i,a,l,r,o){var g=this.lowerBound,s=this.upperBound;e.copy(g),t.set(s.x,g.y,g.z),n.set(s.x,s.y,g.z),i.set(g.x,s.y,s.z),a.set(s.x,g.y,s.z),l.set(g.x,s.y,g.z),r.set(g.x,g.y,s.z),o.copy(s)}},{key:"toLocalFrame",value:function(e,t){var n=Tf,i=n[0],a=n[1],l=n[2],r=n[3],o=n[4],g=n[5],s=n[6],u=n[7];this.getCorners(i,a,l,r,o,g,s,u);for(var c=0;8!==c;c++){var I=n[c];e.pointToLocal(I,I)}return t.setFromPoints(n)}},{key:"toWorldFrame",value:function(e,t){var n=Tf,i=n[0],a=n[1],l=n[2],r=n[3],o=n[4],g=n[5],s=n[6],u=n[7];this.getCorners(i,a,l,r,o,g,s,u);for(var c=0;8!==c;c++){var I=n[c];e.pointToWorld(I,I)}return t.setFromPoints(n)}},{key:"overlapsRay",value:function(e){var t=e.direction,n=e.from,i=1/t.x,a=1/t.y,l=1/t.z,r=(this.lowerBound.x-n.x)*i,o=(this.upperBound.x-n.x)*i,g=(this.lowerBound.y-n.y)*a,s=(this.upperBound.y-n.y)*a,u=(this.lowerBound.z-n.z)*l,c=(this.upperBound.z-n.z)*l,I=Math.max(Math.max(Math.min(r,o),Math.min(g,s)),Math.min(u,c)),C=Math.min(Math.min(Math.max(r,o),Math.max(g,s)),Math.max(u,c));return!(C<0)&&!(I>C)}}]),e}(),_f=new Nf,Tf=[new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf],Ef=function(){function e(){W(this,e)}return R(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),n[e].includes(t)||n[e].push(t),this}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return!(void 0===n[e]||!n[e].includes(t))}},{key:"hasAnyEventListener",value:function(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}},{key:"removeEventListener",value:function(e,t){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[e])return this;var i=n[e].indexOf(t);return-1!==i&&n[e].splice(i,1),this}},{key:"dispatchEvent",value:function(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=0,i=t.length;n<i;n++)t[n].call(this,e)}return this}}]),e}(),Jf=function(){function e(t,n,i,a){W(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===a&&(a=1),this.x=t,this.y=n,this.z=i,this.w=a}return R(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z,",").concat(this.w)}},{key:"toArray",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"setFromAxisAngle",value:function(e,t){var n=Math.sin(.5*t);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t),this}},{key:"toAxisAngle",value:function(e){void 0===e&&(e=new Nf),this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}},{key:"setFromVectors",value:function(e,t){if(e.isAntiparallelTo(t)){var n=Uf,i=Df;e.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{var a=e.cross(t);this.x=a.x,this.y=a.y,this.z=a.z,this.w=Math.sqrt(Math.pow(e.length(),2)*Math.pow(t.length(),2))+e.dot(t),this.normalize()}return this}},{key:"mult",value:function(t,n){void 0===n&&(n=new e);var i=this.x,a=this.y,l=this.z,r=this.w,o=t.x,g=t.y,s=t.z,u=t.w;return n.x=i*u+r*o+a*s-l*g,n.y=a*u+r*g+l*o-i*s,n.z=l*u+r*s+i*g-a*o,n.w=r*u-i*o-a*g-l*s,n}},{key:"inverse",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,a=this.z,l=this.w;this.conjugate(t);var r=1/(n*n+i*i+a*a+l*l);return t.x*=r,t.y*=r,t.z*=r,t.w*=r,t}},{key:"conjugate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}},{key:"normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"normalizeFast",value:function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"vmult",value:function(e,t){void 0===t&&(t=new Nf);var n=e.x,i=e.y,a=e.z,l=this.x,r=this.y,o=this.z,g=this.w,s=g*n+r*a-o*i,u=g*i+o*n-l*a,c=g*a+l*i-r*n,I=-l*n-r*i-o*a;return t.x=s*g+I*-l+u*-o-c*-r,t.y=u*g+I*-r+c*-l-s*-o,t.z=c*g+I*-o+s*-r-u*-l,t}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"toEuler",value:function(e,t){var n,i,a;void 0===t&&(t="YZX");var l=this.x,r=this.y,o=this.z,g=this.w;if("YZX"!==t)throw new Error("Euler order ".concat(t," not supported yet."));var s=l*r+o*g;if(s>.499&&(n=2*Math.atan2(l,g),i=Math.PI/2,a=0),s<-.499&&(n=-2*Math.atan2(l,g),i=-Math.PI/2,a=0),void 0===n){var u=l*l,c=r*r,I=o*o;n=Math.atan2(2*r*g-2*l*o,1-2*c-2*I),i=Math.asin(2*s),a=Math.atan2(2*l*g-2*r*o,1-2*u-2*I)}e.y=n,e.z=i,e.x=a}},{key:"setFromEuler",value:function(e,t,n,i){void 0===i&&(i="XYZ");var a=Math.cos(e/2),l=Math.cos(t/2),r=Math.cos(n/2),o=Math.sin(e/2),g=Math.sin(t/2),s=Math.sin(n/2);return"XYZ"===i?(this.x=o*l*r+a*g*s,this.y=a*g*r-o*l*s,this.z=a*l*s+o*g*r,this.w=a*l*r-o*g*s):"YXZ"===i?(this.x=o*l*r+a*g*s,this.y=a*g*r-o*l*s,this.z=a*l*s-o*g*r,this.w=a*l*r+o*g*s):"ZXY"===i?(this.x=o*l*r-a*g*s,this.y=a*g*r+o*l*s,this.z=a*l*s+o*g*r,this.w=a*l*r-o*g*s):"ZYX"===i?(this.x=o*l*r-a*g*s,this.y=a*g*r+o*l*s,this.z=a*l*s-o*g*r,this.w=a*l*r+o*g*s):"YZX"===i?(this.x=o*l*r+a*g*s,this.y=a*g*r+o*l*s,this.z=a*l*s-o*g*r,this.w=a*l*r-o*g*s):"XZY"===i&&(this.x=o*l*r-a*g*s,this.y=a*g*r-o*l*s,this.z=a*l*s+o*g*r,this.w=a*l*r+o*g*s),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"slerp",value:function(t,n,i){void 0===i&&(i=new e);var a,l,r,o,g,s=this.x,u=this.y,c=this.z,I=this.w,C=t.x,d=t.y,h=t.z,A=t.w;return(l=s*C+u*d+c*h+I*A)<0&&(l=-l,C=-C,d=-d,h=-h,A=-A),1-l>1e-6?(a=Math.acos(l),r=Math.sin(a),o=Math.sin((1-n)*a)/r,g=Math.sin(n*a)/r):(o=1-n,g=n),i.x=o*s+g*C,i.y=o*u+g*d,i.z=o*c+g*h,i.w=o*I+g*A,i}},{key:"integrate",value:function(t,n,i,a){void 0===a&&(a=new e);var l=t.x*i.x,r=t.y*i.y,o=t.z*i.z,g=this.x,s=this.y,u=this.z,c=this.w,I=.5*n;return a.x+=I*(l*c+r*u-o*s),a.y+=I*(r*c+o*g-l*u),a.z+=I*(o*c+l*s-r*g),a.w+=I*(-l*g-r*s-o*u),a}}]),e}(),Uf=new Nf,Df=new Nf,Pf=function(){function e(t){W(this,e),void 0===t&&(t={}),this.id=e.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}return R(e,[{key:"updateBoundingSphereRadius",value:function(){throw"computeBoundingSphereRadius() not implemented for shape type ".concat(this.type)}},{key:"volume",value:function(){throw"volume() not implemented for shape type ".concat(this.type)}},{key:"calculateLocalInertia",value:function(e,t){throw"calculateLocalInertia() not implemented for shape type ".concat(this.type)}},{key:"calculateWorldAABB",value:function(e,t,n,i){throw"calculateWorldAABB() not implemented for shape type ".concat(this.type)}}]),e}();Pf.idCounter=0,Pf.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};var Qf=function(){function e(t){W(this,e),void 0===t&&(t={}),this.position=new Nf,this.quaternion=new Jf,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}return R(e,[{key:"pointToLocal",value:function(t,n){return e.pointToLocalFrame(this.position,this.quaternion,t,n)}},{key:"pointToWorld",value:function(t,n){return e.pointToWorldFrame(this.position,this.quaternion,t,n)}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new Nf),this.quaternion.vmult(e,t),t}}],[{key:"pointToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new Nf),n.vsub(e,i),t.conjugate(Of),Of.vmult(i,i),i}},{key:"pointToWorldFrame",value:function(e,t,n,i){return void 0===i&&(i=new Nf),t.vmult(n,i),i.vadd(e,i),i}},{key:"vectorToWorldFrame",value:function(e,t,n){return void 0===n&&(n=new Nf),e.vmult(t,n),n}},{key:"vectorToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new Nf),t.w*=-1,t.vmult(n,i),t.w*=-1,i}}]),e}(),Of=new Jf,jf=function(e){G(n,e);var t=x(n);function n(e){var i;W(this,n),void 0===e&&(e={});var a=e,l=a.vertices,r=void 0===l?[]:l,o=a.faces,g=void 0===o?[]:o,s=a.normals,u=void 0===s?[]:s,c=a.axes,I=a.boundingSphereRadius;return(i=t.call(this,{type:Pf.types.CONVEXPOLYHEDRON})).vertices=r,i.faces=g,i.faceNormals=u,0===i.faceNormals.length&&i.computeNormals(),I?i.boundingSphereRadius=I:i.updateBoundingSphereRadius(),i.worldVertices=[],i.worldVerticesNeedsUpdate=!0,i.worldFaceNormals=[],i.worldFaceNormalsNeedsUpdate=!0,i.uniqueAxes=c?c.slice():null,i.uniqueEdges=[],i.computeEdges(),i}return R(n,[{key:"computeEdges",value:function(){var e=this.faces,t=this.vertices,n=this.uniqueEdges;n.length=0;for(var i=new Nf,a=0;a!==e.length;a++)for(var l=e[a],r=l.length,o=0;o!==r;o++){var g=(o+1)%r;t[l[o]].vsub(t[l[g]],i),i.normalize();for(var s=!1,u=0;u!==n.length;u++)if(n[u].almostEquals(i)||n[u].almostEquals(i)){s=!0;break}s||n.push(i.clone())}}},{key:"computeNormals",value:function(){this.faceNormals.length=this.faces.length;for(var e=0;e<this.faces.length;e++){for(var t=0;t<this.faces[e].length;t++)if(!this.vertices[this.faces[e][t]])throw new Error("Vertex ".concat(this.faces[e][t]," not found!"));var n=this.faceNormals[e]||new Nf;this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n;var i=this.vertices[this.faces[e][0]];if(n.dot(i)<0){console.error(".faceNormals[".concat(e,"] = Vec3(").concat(n.toString(),") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule."));for(var a=0;a<this.faces[e].length;a++)console.warn(".vertices[".concat(this.faces[e][a],"] = Vec3(").concat(this.vertices[this.faces[e][a]].toString(),")"))}}}},{key:"getFaceNormal",value:function(e,t){var i=this.faces[e],a=this.vertices[i[0]],l=this.vertices[i[1]],r=this.vertices[i[2]];n.computeNormal(a,l,r,t)}},{key:"clipAgainstHull",value:function(e,t,n,i,a,l,r,o,g){for(var s=new Nf,u=-1,c=-Number.MAX_VALUE,I=0;I<n.faces.length;I++){s.copy(n.faceNormals[I]),a.vmult(s,s);var C=s.dot(l);C>c&&(c=C,u=I)}for(var d=[],h=0;h<n.faces[u].length;h++){var A=n.vertices[n.faces[u][h]],m=new Nf;m.copy(A),a.vmult(m,m),i.vadd(m,m),d.push(m)}u>=0&&this.clipFaceAgainstHull(l,e,t,d,r,o,g)}},{key:"findSeparatingAxis",value:function(e,t,n,i,a,l,r,o){var g=new Nf,s=new Nf,u=new Nf,c=new Nf,I=new Nf,C=new Nf,d=Number.MAX_VALUE,h=this;if(h.uniqueAxes)for(var A=0;A!==h.uniqueAxes.length;A++){n.vmult(h.uniqueAxes[A],g);var m=h.testSepAxis(g,e,t,n,i,a);if(!1===m)return!1;m<d&&(d=m,l.copy(g))}else for(var p=r?r.length:h.faces.length,f=0;f<p;f++){var b=r?r[f]:f;g.copy(h.faceNormals[b]),n.vmult(g,g);var v=h.testSepAxis(g,e,t,n,i,a);if(!1===v)return!1;v<d&&(d=v,l.copy(g))}if(e.uniqueAxes)for(var y=0;y!==e.uniqueAxes.length;y++){a.vmult(e.uniqueAxes[y],s);var G=h.testSepAxis(s,e,t,n,i,a);if(!1===G)return!1;G<d&&(d=G,l.copy(s))}else for(var B=o?o.length:e.faces.length,Z=0;Z<B;Z++){var x=o?o[Z]:Z;s.copy(e.faceNormals[x]),a.vmult(s,s);var w=h.testSepAxis(s,e,t,n,i,a);if(!1===w)return!1;w<d&&(d=w,l.copy(s))}for(var q=0;q!==h.uniqueEdges.length;q++){n.vmult(h.uniqueEdges[q],c);for(var W=0;W!==e.uniqueEdges.length;W++)if(a.vmult(e.uniqueEdges[W],I),c.cross(I,C),!C.almostZero()){C.normalize();var S=h.testSepAxis(C,e,t,n,i,a);if(!1===S)return!1;S<d&&(d=S,l.copy(C))}}return i.vsub(t,u),u.dot(l)>0&&l.negate(l),!0}},{key:"testSepAxis",value:function(e,t,i,a,l,r){n.project(this,e,i,a,$f),n.project(t,e,l,r,eb);var o=$f[0],g=$f[1],s=eb[0],u=eb[1];if(o<u||s<g)return!1;var c=o-u,I=s-g;return c<I?c:I}},{key:"calculateLocalInertia",value:function(e,t){var n=new Nf,i=new Nf;this.computeLocalAABB(i,n);var a=n.x-i.x,l=n.y-i.y,r=n.z-i.z;t.x=1/12*e*(2*l*2*l+2*r*2*r),t.y=1/12*e*(2*a*2*a+2*r*2*r),t.z=1/12*e*(2*l*2*l+2*a*2*a)}},{key:"getPlaneConstantOfFace",value:function(e){var t=this.faces[e],n=this.faceNormals[e],i=this.vertices[t[0]];return-n.dot(i)}},{key:"clipFaceAgainstHull",value:function(e,t,n,i,a,l,r){for(var o=new Nf,g=new Nf,s=new Nf,u=new Nf,c=new Nf,I=new Nf,C=new Nf,d=new Nf,h=this,A=i,m=[],p=-1,f=Number.MAX_VALUE,b=0;b<h.faces.length;b++){o.copy(h.faceNormals[b]),n.vmult(o,o);var v=o.dot(e);v<f&&(f=v,p=b)}if(!(p<0)){var y=h.faces[p];y.connectedFaces=[];for(var G=0;G<h.faces.length;G++)for(var B=0;B<h.faces[G].length;B++)-1!==y.indexOf(h.faces[G][B])&&G!==p&&-1===y.connectedFaces.indexOf(G)&&y.connectedFaces.push(G);for(var Z=y.length,x=0;x<Z;x++){var w=h.vertices[y[x]],q=h.vertices[y[(x+1)%Z]];w.vsub(q,g),s.copy(g),n.vmult(s,s),t.vadd(s,s),u.copy(this.faceNormals[p]),n.vmult(u,u),t.vadd(u,u),s.cross(u,c),c.negate(c),I.copy(w),n.vmult(I,I),t.vadd(I,I);var W=y.connectedFaces[x];C.copy(this.faceNormals[W]);var S=this.getPlaneConstantOfFace(W);d.copy(C),n.vmult(d,d);var R=S-d.dot(t);for(this.clipFaceAgainstPlane(A,m,d,R);A.length;)A.shift();for(;m.length;)A.push(m.shift())}C.copy(this.faceNormals[p]);var V=this.getPlaneConstantOfFace(p);d.copy(C),n.vmult(d,d);for(var X=V-d.dot(t),k=0;k<A.length;k++){var Y=d.dot(A[k])+X;if(Y<=a&&(console.log("clamped: depth=".concat(Y," to minDist=").concat(a)),Y=a),Y<=l){var z=A[k];if(Y<=1e-6){var K={point:z,normal:d,depth:Y};r.push(K)}}}}}},{key:"clipFaceAgainstPlane",value:function(e,t,n,i){var a,l,r=e.length;if(r<2)return t;var o=e[e.length-1],g=e[0];a=n.dot(o)+i;for(var s=0;s<r;s++){if(g=e[s],l=n.dot(g)+i,a<0)if(l<0){var u=new Nf;u.copy(g),t.push(u)}else{var c=new Nf;o.lerp(g,a/(a-l),c),t.push(c)}else if(l<0){var I=new Nf;o.lerp(g,a/(a-l),I),t.push(I),t.push(g)}o=g,a=l}return t}},{key:"computeWorldVertices",value:function(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new Nf);for(var n=this.vertices,i=this.worldVertices,a=0;a!==this.vertices.length;a++)t.vmult(n[a],i[a]),e.vadd(i[a],i[a]);this.worldVerticesNeedsUpdate=!1}},{key:"computeLocalAABB",value:function(e,t){var n=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0;i<this.vertices.length;i++){var a=n[i];a.x<e.x?e.x=a.x:a.x>t.x&&(t.x=a.x),a.y<e.y?e.y=a.y:a.y>t.y&&(t.y=a.y),a.z<e.z?e.z=a.z:a.z>t.z&&(t.z=a.z)}}},{key:"computeWorldFaceNormals",value:function(e){for(var t=this.faceNormals.length;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new Nf);for(var n=this.faceNormals,i=this.worldFaceNormals,a=0;a!==t;a++)e.vmult(n[a],i[a]);this.worldFaceNormalsNeedsUpdate=!1}},{key:"updateBoundingSphereRadius",value:function(){for(var e=0,t=this.vertices,n=0;n!==t.length;n++){var i=t[n].lengthSquared();i>e&&(e=i)}this.boundingSphereRadius=Math.sqrt(e)}},{key:"calculateWorldAABB",value:function(e,t,n,i){for(var a,l,r,o,g,s,u=this.vertices,c=new Nf,I=0;I<u.length;I++){c.copy(u[I]),t.vmult(c,c),e.vadd(c,c);var C=c;(void 0===a||C.x<a)&&(a=C.x),(void 0===o||C.x>o)&&(o=C.x),(void 0===l||C.y<l)&&(l=C.y),(void 0===g||C.y>g)&&(g=C.y),(void 0===r||C.z<r)&&(r=C.z),(void 0===s||C.z>s)&&(s=C.z)}n.set(a,l,r),i.set(o,g,s)}},{key:"volume",value:function(){return 4*Math.PI*this.boundingSphereRadius/3}},{key:"getAveragePointLocal",value:function(e){void 0===e&&(e=new Nf);for(var t=this.vertices,n=0;n<t.length;n++)e.vadd(t[n],e);return e.scale(1/t.length,e),e}},{key:"transformAllPoints",value:function(e,t){var n=this.vertices.length,i=this.vertices;if(t){for(var a=0;a<n;a++){var l=i[a];t.vmult(l,l)}for(var r=0;r<this.faceNormals.length;r++){var o=this.faceNormals[r];t.vmult(o,o)}}if(e)for(var g=0;g<n;g++){var s=i[g];s.vadd(e,s)}}},{key:"pointIsInside",value:function(e){var t=this.vertices,n=this.faces,i=this.faceNormals,a=new Nf;this.getAveragePointLocal(a);for(var l=0;l<this.faces.length;l++){var r=i[l],o=t[n[l][0]],g=new Nf;e.vsub(o,g);var s=r.dot(g),u=new Nf;a.vsub(o,u);var c=r.dot(u);if(s<0&&c>0||s>0&&c<0)return!1}return-1}}],[{key:"computeNormal",value:function(e,t,n,i){var a=new Nf,l=new Nf;t.vsub(e,l),n.vsub(t,a),a.cross(l,i),i.isZero()||i.normalize()}},{key:"project",value:function(e,t,n,i,a){var l=e.vertices.length,r=tb,o=0,g=0,s=nb,u=e.vertices;s.setZero(),Qf.vectorToLocalFrame(n,i,t,r),Qf.pointToLocalFrame(n,i,s,s);var c=s.dot(r);g=o=u[0].dot(r);for(var I=1;I<l;I++){var C=u[I].dot(r);C>o&&(o=C),C<g&&(g=C)}if((g-=c)>(o-=c)){var d=g;g=o,o=d}a[0]=o,a[1]=g}}]),n}(Pf),$f=[],eb=[];new Nf;var tb=new Nf,nb=new Nf,ib=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this,{type:Pf.types.BOX})).halfExtents=e,i.convexPolyhedronRepresentation=null,i.updateConvexPolyhedronRepresentation(),i.updateBoundingSphereRadius(),i}return R(n,[{key:"updateConvexPolyhedronRepresentation",value:function(){var e=this.halfExtents.x,t=this.halfExtents.y,n=this.halfExtents.z,i=Nf,a=[new i(-e,-t,-n),new i(e,-t,-n),new i(e,t,-n),new i(-e,t,-n),new i(-e,-t,n),new i(e,-t,n),new i(e,t,n),new i(-e,t,n)],l=[new i(0,0,1),new i(0,1,0),new i(1,0,0)],r=new jf({vertices:a,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:l});this.convexPolyhedronRepresentation=r,r.material=this.material}},{key:"calculateLocalInertia",value:function(e,t){return void 0===t&&(t=new Nf),n.calculateInertia(this.halfExtents,e,t),t}},{key:"getSideNormals",value:function(e,t){var n=e,i=this.halfExtents;if(n[0].set(i.x,0,0),n[1].set(0,i.y,0),n[2].set(0,0,i.z),n[3].set(-i.x,0,0),n[4].set(0,-i.y,0),n[5].set(0,0,-i.z),void 0!==t)for(var a=0;a!==n.length;a++)t.vmult(n[a],n[a]);return n}},{key:"volume",value:function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}},{key:"updateBoundingSphereRadius",value:function(){this.boundingSphereRadius=this.halfExtents.length()}},{key:"forEachWorldCorner",value:function(e,t,n){for(var i=this.halfExtents,a=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]],l=0;l<a.length;l++)ab.set(a[l][0],a[l][1],a[l][2]),t.vmult(ab,ab),e.vadd(ab,ab),n(ab.x,ab.y,ab.z)}},{key:"calculateWorldAABB",value:function(e,t,n,i){var a=this.halfExtents;lb[0].set(a.x,a.y,a.z),lb[1].set(-a.x,a.y,a.z),lb[2].set(-a.x,-a.y,a.z),lb[3].set(-a.x,-a.y,-a.z),lb[4].set(a.x,-a.y,-a.z),lb[5].set(a.x,a.y,-a.z),lb[6].set(-a.x,a.y,-a.z),lb[7].set(a.x,-a.y,a.z);var l=lb[0];t.vmult(l,l),e.vadd(l,l),i.copy(l),n.copy(l);for(var r=1;r<8;r++){var o=lb[r];t.vmult(o,o),e.vadd(o,o);var g=o.x,s=o.y,u=o.z;g>i.x&&(i.x=g),s>i.y&&(i.y=s),u>i.z&&(i.z=u),g<n.x&&(n.x=g),s<n.y&&(n.y=s),u<n.z&&(n.z=u)}}}],[{key:"calculateInertia",value:function(e,t,n){var i=e;n.x=1/12*t*(2*i.y*2*i.y+2*i.z*2*i.z),n.y=1/12*t*(2*i.x*2*i.x+2*i.z*2*i.z),n.z=1/12*t*(2*i.y*2*i.y+2*i.x*2*i.x)}}]),n}(Pf),ab=new Nf,lb=[new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf],rb=1,ob=2,gb=4,sb=0,ub=1,cb=2,Ib=function(e){G(n,e);var t=x(n);function n(e){var i;W(this,n),void 0===e&&(e={}),(i=t.call(this)).id=n.idCounter++,i.index=-1,i.world=null,i.vlambda=new Nf,i.collisionFilterGroup="number"===typeof e.collisionFilterGroup?e.collisionFilterGroup:1,i.collisionFilterMask="number"===typeof e.collisionFilterMask?e.collisionFilterMask:-1,i.collisionResponse="boolean"!==typeof e.collisionResponse||e.collisionResponse,i.position=new Nf,i.previousPosition=new Nf,i.interpolatedPosition=new Nf,i.initPosition=new Nf,e.position&&(i.position.copy(e.position),i.previousPosition.copy(e.position),i.interpolatedPosition.copy(e.position),i.initPosition.copy(e.position)),i.velocity=new Nf,e.velocity&&i.velocity.copy(e.velocity),i.initVelocity=new Nf,i.force=new Nf;var a="number"===typeof e.mass?e.mass:0;return i.mass=a,i.invMass=a>0?1/a:0,i.material=e.material||null,i.linearDamping="number"===typeof e.linearDamping?e.linearDamping:.01,i.type=a<=0?n.STATIC:n.DYNAMIC,typeof e.type===typeof n.STATIC&&(i.type=e.type),i.allowSleep="undefined"===typeof e.allowSleep||e.allowSleep,i.sleepState=n.AWAKE,i.sleepSpeedLimit="undefined"!==typeof e.sleepSpeedLimit?e.sleepSpeedLimit:.1,i.sleepTimeLimit="undefined"!==typeof e.sleepTimeLimit?e.sleepTimeLimit:1,i.timeLastSleepy=0,i.wakeUpAfterNarrowphase=!1,i.torque=new Nf,i.quaternion=new Jf,i.initQuaternion=new Jf,i.previousQuaternion=new Jf,i.interpolatedQuaternion=new Jf,e.quaternion&&(i.quaternion.copy(e.quaternion),i.initQuaternion.copy(e.quaternion),i.previousQuaternion.copy(e.quaternion),i.interpolatedQuaternion.copy(e.quaternion)),i.angularVelocity=new Nf,e.angularVelocity&&i.angularVelocity.copy(e.angularVelocity),i.initAngularVelocity=new Nf,i.shapes=[],i.shapeOffsets=[],i.shapeOrientations=[],i.inertia=new Nf,i.invInertia=new Nf,i.invInertiaWorld=new zf,i.invMassSolve=0,i.invInertiaSolve=new Nf,i.invInertiaWorldSolve=new zf,i.fixedRotation="undefined"!==typeof e.fixedRotation&&e.fixedRotation,i.angularDamping="undefined"!==typeof e.angularDamping?e.angularDamping:.01,i.linearFactor=new Nf(1,1,1),e.linearFactor&&i.linearFactor.copy(e.linearFactor),i.angularFactor=new Nf(1,1,1),e.angularFactor&&i.angularFactor.copy(e.angularFactor),i.aabb=new Lf,i.aabbNeedsUpdate=!0,i.boundingRadius=0,i.wlambda=new Nf,i.isTrigger=Boolean(e.isTrigger),e.shape&&i.addShape(e.shape),i.updateMassProperties(),i}return R(n,[{key:"wakeUp",value:function(){var e=this.sleepState;this.sleepState=n.AWAKE,this.wakeUpAfterNarrowphase=!1,e===n.SLEEPING&&this.dispatchEvent(n.wakeupEvent)}},{key:"sleep",value:function(){this.sleepState=n.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}},{key:"sleepTick",value:function(e){if(this.allowSleep){var t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),a=Math.pow(this.sleepSpeedLimit,2);t===n.AWAKE&&i<a?(this.sleepState=n.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(n.sleepyEvent)):t===n.SLEEPY&&i>a?this.wakeUp():t===n.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(n.sleepEvent))}}},{key:"updateSolveMassProperties",value:function(){this.sleepState===n.SLEEPING||this.type===n.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}},{key:"pointToLocalFrame",value:function(e,t){return void 0===t&&(t=new Nf),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}},{key:"vectorToLocalFrame",value:function(e,t){return void 0===t&&(t=new Nf),this.quaternion.conjugate().vmult(e,t),t}},{key:"pointToWorldFrame",value:function(e,t){return void 0===t&&(t=new Nf),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new Nf),this.quaternion.vmult(e,t),t}},{key:"addShape",value:function(e,t,n){var i=new Nf,a=new Jf;return t&&i.copy(t),n&&a.copy(n),this.shapes.push(e),this.shapeOffsets.push(i),this.shapeOrientations.push(a),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}},{key:"removeShape",value:function(e){var t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}},{key:"updateBoundingRadius",value:function(){for(var e=this.shapes,t=this.shapeOffsets,n=e.length,i=0,a=0;a!==n;a++){var l=e[a];l.updateBoundingSphereRadius();var r=t[a].length(),o=l.boundingSphereRadius;r+o>i&&(i=r+o)}this.boundingRadius=i}},{key:"updateAABB",value:function(){for(var e=this.shapes,t=this.shapeOffsets,n=this.shapeOrientations,i=e.length,a=Cb,l=db,r=this.quaternion,o=this.aabb,g=hb,s=0;s!==i;s++){var u=e[s];r.vmult(t[s],a),a.vadd(this.position,a),r.mult(n[s],l),u.calculateWorldAABB(a,l,g.lowerBound,g.upperBound),0===s?o.copy(g):o.extend(g)}this.aabbNeedsUpdate=!1}},{key:"updateInertiaWorld",value:function(e){var t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){var n=Ab,i=mb;n.setRotationFromQuaternion(this.quaternion),n.transpose(i),n.scale(t,n),n.mmult(i,this.invInertiaWorld)}else;}},{key:"applyForce",value:function(e,t){if(void 0===t&&(t=new Nf),this.type===n.DYNAMIC){this.sleepState===n.SLEEPING&&this.wakeUp();var i=pb;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}}},{key:"applyLocalForce",value:function(e,t){if(void 0===t&&(t=new Nf),this.type===n.DYNAMIC){var i=fb,a=bb;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,a),this.applyForce(i,a)}}},{key:"applyTorque",value:function(e){this.type===n.DYNAMIC&&(this.sleepState===n.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}},{key:"applyImpulse",value:function(e,t){if(void 0===t&&(t=new Nf),this.type===n.DYNAMIC){this.sleepState===n.SLEEPING&&this.wakeUp();var i=t,a=vb;a.copy(e),a.scale(this.invMass,a),this.velocity.vadd(a,this.velocity);var l=yb;i.cross(e,l),this.invInertiaWorld.vmult(l,l),this.angularVelocity.vadd(l,this.angularVelocity)}}},{key:"applyLocalImpulse",value:function(e,t){if(void 0===t&&(t=new Nf),this.type===n.DYNAMIC){var i=Gb,a=Bb;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,a),this.applyImpulse(i,a)}}},{key:"updateMassProperties",value:function(){var e=Zb;this.invMass=this.mass>0?1/this.mass:0;var t=this.inertia,n=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),ib.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!n?1/t.x:0,t.y>0&&!n?1/t.y:0,t.z>0&&!n?1/t.z:0),this.updateInertiaWorld(!0)}},{key:"getVelocityAtWorldPoint",value:function(e,t){var n=new Nf;return e.vsub(this.position,n),this.angularVelocity.cross(n,t),this.velocity.vadd(t,t),t}},{key:"integrate",value:function(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),(this.type===n.DYNAMIC||this.type===n.KINEMATIC)&&this.sleepState!==n.SLEEPING){var a=this.velocity,l=this.angularVelocity,r=this.position,o=this.force,g=this.torque,s=this.quaternion,u=this.invMass,c=this.invInertiaWorld,I=this.linearFactor,C=u*e;a.x+=o.x*C*I.x,a.y+=o.y*C*I.y,a.z+=o.z*C*I.z;var d=c.elements,h=this.angularFactor,A=g.x*h.x,m=g.y*h.y,p=g.z*h.z;l.x+=e*(d[0]*A+d[1]*m+d[2]*p),l.y+=e*(d[3]*A+d[4]*m+d[5]*p),l.z+=e*(d[6]*A+d[7]*m+d[8]*p),r.x+=a.x*e,r.y+=a.y*e,r.z+=a.z*e,s.integrate(this.angularVelocity,e,this.angularFactor,s),t&&(i?s.normalizeFast():s.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}}]),n}(Ef);Ib.idCounter=0,Ib.COLLIDE_EVENT_NAME="collide",Ib.DYNAMIC=rb,Ib.STATIC=ob,Ib.KINEMATIC=gb,Ib.AWAKE=sb,Ib.SLEEPY=ub,Ib.SLEEPING=cb,Ib.wakeupEvent={type:"wakeup"},Ib.sleepyEvent={type:"sleepy"},Ib.sleepEvent={type:"sleep"};var Cb=new Nf,db=new Jf,hb=new Lf,Ab=new zf,mb=new zf;new zf;var pb=new Nf,fb=new Nf,bb=new Nf,vb=new Nf,yb=new Nf,Gb=new Nf,Bb=new Nf,Zb=new Nf;new Nf,new Nf,new Jf,new Nf,new Nf,new Nf,new Nf;var xb=function(){function e(){W(this,e),this.rayFromWorld=new Nf,this.rayToWorld=new Nf,this.hitNormalWorld=new Nf,this.hitPointWorld=new Nf,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}return R(e,[{key:"reset",value:function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}},{key:"abort",value:function(){this.shouldStop=!0}},{key:"set",value:function(e,t,n,i,a,l,r){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=a,this.body=l,this.distance=r}}]),e}(),wb=1,qb=2,Wb=4,Sb=function(e,t,n,i,a,l,r){function o(e,t){W(this,o),void 0===e&&(e=new Nf),void 0===t&&(t=new Nf),this.from=e.clone(),this.to=t.clone(),this.direction=new Nf,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=o.ANY,this.result=new xb,this.hasHit=!1,this.callback=function(e){}}return R(o,[{key:e,get:function(){return this._intersectSphere}},{key:t,get:function(){return this._intersectPlane}},{key:n,get:function(){return this._intersectBox}},{key:i,get:function(){return this._intersectConvex}},{key:a,get:function(){return this._intersectConvex}},{key:l,get:function(){return this._intersectHeightfield}},{key:r,get:function(){return this._intersectTrimesh}},{key:"intersectWorld",value:function(e,t){return this.mode=t.mode||o.ANY,this.result=t.result||new xb,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask="undefined"!==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!==typeof t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse="undefined"===typeof t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(Rb),Vb.length=0,e.broadphase.aabbQuery(e,Rb,Vb),this.intersectBodies(Vb),this.hasHit}},{key:"intersectBody",value:function(e,t){t&&(this.result=t,this.updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var i=Yb,a=zb,l=0,r=e.shapes.length;l<r;l++){var o=e.shapes[l];if((!n||o.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[l],a),e.quaternion.vmult(e.shapeOffsets[l],i),i.vadd(e.position,i),this.intersectShape(o,a,i,e),this.result.shouldStop))break}}},{key:"intersectBodies",value:function(e,t){t&&(this.result=t,this.updateDirection());for(var n=0,i=e.length;!this.result.shouldStop&&n<i;n++)this.intersectBody(e[n])}},{key:"updateDirection",value:function(){this.to.vsub(this.from,this.direction),this.direction.normalize()}},{key:"intersectShape",value:function(e,t,n,i){var a=function(e,t,n){n.vsub(e,iv);var i=iv.dot(t);return t.scale(i,av),av.vadd(e,av),n.distanceTo(av)}(this.from,this.direction,n);if(!(a>e.boundingSphereRadius)){var l=this[e.type];l&&l.call(this,e,t,n,i,e)}}},{key:"_intersectBox",value:function(e,t,n,i,a){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,i,a)}},{key:"_intersectPlane",value:function(e,t,n,i,a){var l=this.from,r=this.to,o=this.direction,g=new Nf(0,0,1);t.vmult(g,g);var s=new Nf;l.vsub(n,s);var u=s.dot(g);if(r.vsub(n,s),!(u*s.dot(g)>0)&&!(l.distanceTo(r)<u)){var c=g.dot(o);if(!(Math.abs(c)<this.precision)){var I=new Nf,C=new Nf,d=new Nf;l.vsub(n,I);var h=-g.dot(I)/c;o.scale(h,C),l.vadd(C,d),this.reportIntersection(g,d,a,i,-1)}}}},{key:"getAABB",value:function(e){var t=e.lowerBound,n=e.upperBound,i=this.to,a=this.from;t.x=Math.min(i.x,a.x),t.y=Math.min(i.y,a.y),t.z=Math.min(i.z,a.z),n.x=Math.max(i.x,a.x),n.y=Math.max(i.y,a.y),n.z=Math.max(i.z,a.z)}},{key:"_intersectHeightfield",value:function(e,t,n,i,a){e.data,e.elementSize;var l=_b;l.from.copy(this.from),l.to.copy(this.to),Qf.pointToLocalFrame(n,t,l.from,l.from),Qf.pointToLocalFrame(n,t,l.to,l.to),l.updateDirection();var r,o,g,s,u=Tb;r=o=0,g=s=e.data.length-1;var c=new Lf;l.getAABB(c),e.getIndexOfPosition(c.lowerBound.x,c.lowerBound.y,u,!0),r=Math.max(r,u[0]),o=Math.max(o,u[1]),e.getIndexOfPosition(c.upperBound.x,c.upperBound.y,u,!0),g=Math.min(g,u[0]+1),s=Math.min(s,u[1]+1);for(var I=r;I<g;I++)for(var C=o;C<s;C++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(I,C,c),c.overlapsRay(l)){if(e.getConvexTrianglePillar(I,C,!1),Qf.pointToWorldFrame(n,t,e.pillarOffset,Lb),this._intersectConvex(e.pillarConvex,t,Lb,i,a,Fb),this.result.shouldStop)return;e.getConvexTrianglePillar(I,C,!0),Qf.pointToWorldFrame(n,t,e.pillarOffset,Lb),this._intersectConvex(e.pillarConvex,t,Lb,i,a,Fb)}}}},{key:"_intersectSphere",value:function(e,t,n,i,a){var l=this.from,r=this.to,o=e.radius,g=Math.pow(r.x-l.x,2)+Math.pow(r.y-l.y,2)+Math.pow(r.z-l.z,2),s=2*((r.x-l.x)*(l.x-n.x)+(r.y-l.y)*(l.y-n.y)+(r.z-l.z)*(l.z-n.z)),u=Math.pow(l.x-n.x,2)+Math.pow(l.y-n.y,2)+Math.pow(l.z-n.z,2)-Math.pow(o,2),c=Math.pow(s,2)-4*g*u,I=Eb,C=Jb;if(!(c<0))if(0===c)l.lerp(r,c,I),I.vsub(n,C),C.normalize(),this.reportIntersection(C,I,a,i,-1);else{var d=(-s-Math.sqrt(c))/(2*g),h=(-s+Math.sqrt(c))/(2*g);if(d>=0&&d<=1&&(l.lerp(r,d,I),I.vsub(n,C),C.normalize(),this.reportIntersection(C,I,a,i,-1)),this.result.shouldStop)return;h>=0&&h<=1&&(l.lerp(r,h,I),I.vsub(n,C),C.normalize(),this.reportIntersection(C,I,a,i,-1))}}},{key:"_intersectConvex",value:function(e,t,n,i,a,l){for(var r=Ub,g=Db,s=l&&l.faceList||null,u=e.faces,c=e.vertices,I=e.faceNormals,C=this.direction,d=this.from,h=this.to,A=d.distanceTo(h),m=s?s.length:u.length,p=this.result,f=0;!p.shouldStop&&f<m;f++){var b=s?s[f]:f,v=u[b],y=I[b],G=t,B=n;g.copy(c[v[0]]),G.vmult(g,g),g.vadd(B,g),g.vsub(d,g),G.vmult(y,r);var Z=C.dot(r);if(!(Math.abs(Z)<this.precision)){var x=r.dot(g)/Z;if(!(x<0)){C.scale(x,Kb),Kb.vadd(d,Kb),Nb.copy(c[v[0]]),G.vmult(Nb,Nb),B.vadd(Nb,Nb);for(var w=1;!p.shouldStop&&w<v.length-1;w++){Hb.copy(c[v[w]]),Mb.copy(c[v[w+1]]),G.vmult(Hb,Hb),G.vmult(Mb,Mb),B.vadd(Hb,Hb),B.vadd(Mb,Mb);var q=Kb.distanceTo(d);!o.pointInTriangle(Kb,Nb,Hb,Mb)&&!o.pointInTriangle(Kb,Hb,Nb,Mb)||q>A||this.reportIntersection(r,Kb,a,i,b)}}}}}},{key:"_intersectTrimesh",value:function(e,t,n,i,a,l){var r=Pb,g=tv,s=nv,u=Db,c=Qb,I=Ob,C=jb,d=ev,h=$b,A=e.indices;e.vertices;var m=this.from,p=this.to,f=this.direction;s.position.copy(n),s.quaternion.copy(t),Qf.vectorToLocalFrame(n,t,f,c),Qf.pointToLocalFrame(n,t,m,I),Qf.pointToLocalFrame(n,t,p,C),C.x*=e.scale.x,C.y*=e.scale.y,C.z*=e.scale.z,I.x*=e.scale.x,I.y*=e.scale.y,I.z*=e.scale.z,C.vsub(I,c),c.normalize();var b=I.distanceSquared(C);e.tree.rayQuery(this,s,g);for(var v=0,y=g.length;!this.result.shouldStop&&v!==y;v++){var G=g[v];e.getNormal(G,r),e.getVertex(A[3*G],Nb),Nb.vsub(I,u);var B=c.dot(r),Z=r.dot(u)/B;if(!(Z<0)){c.scale(Z,Kb),Kb.vadd(I,Kb),e.getVertex(A[3*G+1],Hb),e.getVertex(A[3*G+2],Mb);var x=Kb.distanceSquared(I);!o.pointInTriangle(Kb,Hb,Nb,Mb)&&!o.pointInTriangle(Kb,Nb,Hb,Mb)||x>b||(Qf.vectorToWorldFrame(t,r,h),Qf.pointToWorldFrame(n,t,Kb,d),this.reportIntersection(h,d,a,i,G))}}g.length=0}},{key:"reportIntersection",value:function(e,t,n,i,a){var l=this.from,r=this.to,g=l.distanceTo(t),s=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(s.hitFaceIndex="undefined"!==typeof a?a:-1,this.mode){case o.ALL:this.hasHit=!0,s.set(l,r,e,t,n,i,g),s.hasHit=!0,this.callback(s);break;case o.CLOSEST:(g<s.distance||!s.hasHit)&&(this.hasHit=!0,s.hasHit=!0,s.set(l,r,e,t,n,i,g));break;case o.ANY:this.hasHit=!0,s.hasHit=!0,s.set(l,r,e,t,n,i,g),s.shouldStop=!0}}}],[{key:"pointInTriangle",value:function(e,t,n,i){i.vsub(t,iv),n.vsub(t,Xb),e.vsub(t,kb);var a,l,r=iv.dot(iv),o=iv.dot(Xb),g=iv.dot(kb),s=Xb.dot(Xb),u=Xb.dot(kb);return(a=s*g-o*u)>=0&&(l=r*u-o*g)>=0&&a+l<r*s-o*o}}]),o}(Pf.types.SPHERE,Pf.types.PLANE,Pf.types.BOX,Pf.types.CYLINDER,Pf.types.CONVEXPOLYHEDRON,Pf.types.HEIGHTFIELD,Pf.types.TRIMESH);Sb.CLOSEST=wb,Sb.ANY=qb,Sb.ALL=Wb;var Rb=new Lf,Vb=[],Xb=new Nf,kb=new Nf,Yb=new Nf,zb=new Jf,Kb=new Nf,Nb=new Nf,Hb=new Nf,Mb=new Nf;new Nf,new xb;var Fb={faceList:[0]},Lb=new Nf,_b=new Sb,Tb=[],Eb=new Nf,Jb=new Nf,Ub=new Nf;new Nf,new Nf;var Db=new Nf,Pb=new Nf,Qb=new Nf,Ob=new Nf,jb=new Nf,$b=new Nf,ev=new Nf;new Lf;var tv=[],nv=new Qf,iv=new Nf,av=new Nf;new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf;var lv=R((function e(t){W(this,e),void 0===t&&(t={});var n="";"string"===typeof t&&(n=t,t={}),this.name=n,this.id=e.idCounter++,this.friction="undefined"!==typeof t.friction?t.friction:-1,this.restitution="undefined"!==typeof t.restitution?t.restitution:-1}));lv.idCounter=0,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Sb,new Nf,new Nf,new Nf,new Nf(1,0,0),new Nf(0,1,0),new Nf(0,0,1),new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf;new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf;new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf;new Nf,new Lf,new Nf,new Lf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Lf,new Nf,new Qf,new Lf;Pf.types.SPHERE,Pf.types.SPHERE,Pf.types.PLANE,Pf.types.BOX,Pf.types.BOX,Pf.types.SPHERE,Pf.types.BOX,Pf.types.PLANE,Pf.types.BOX,Pf.types.CONVEXPOLYHEDRON,Pf.types.SPHERE,Pf.types.CONVEXPOLYHEDRON,Pf.types.PLANE,Pf.types.CONVEXPOLYHEDRON,Pf.types.BOX,Pf.types.CONVEXPOLYHEDRON,Pf.types.SPHERE,Pf.types.HEIGHTFIELD,Pf.types.BOX,Pf.types.HEIGHTFIELD,Pf.types.CONVEXPOLYHEDRON,Pf.types.HEIGHTFIELD,Pf.types.PARTICLE,Pf.types.SPHERE,Pf.types.PLANE,Pf.types.PARTICLE,Pf.types.BOX,Pf.types.PARTICLE,Pf.types.PARTICLE,Pf.types.CONVEXPOLYHEDRON,Pf.types.CYLINDER,Pf.types.SPHERE,Pf.types.CYLINDER,Pf.types.PLANE,Pf.types.CYLINDER,Pf.types.BOX,Pf.types.CYLINDER,Pf.types.CONVEXPOLYHEDRON,Pf.types.CYLINDER,Pf.types.HEIGHTFIELD,Pf.types.CYLINDER,Pf.types.PARTICLE,Pf.types.CYLINDER,Pf.types.SPHERE,Pf.types.TRIMESH,Pf.types.PLANE,Pf.types.TRIMESH,new Nf,new Nf,new Nf,new Nf,new Nf,new Jf,new Jf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Lf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Jf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Nf,new Lf,new Sb;var rv=globalThis.performance||{};if(!rv.now){var ov=Date.now();rv.timing&&rv.timing.navigationStart&&(ov=rv.timing.navigationStart),rv.now=function(){return Date.now()-ov}}new Nf;var gv=function(){function e(t){W(this,e),void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}return R(e,[{key:"identity",value:function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}},{key:"setZero",value:function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}},{key:"setTrace",value:function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}},{key:"getTrace",value:function(e){void 0===e&&(e=new uv);var t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}},{key:"vmult",value:function(e,t){void 0===t&&(t=new uv);var n=this.elements,i=e.x,a=e.y,l=e.z;return t.x=n[0]*i+n[1]*a+n[2]*l,t.y=n[3]*i+n[4]*a+n[5]*l,t.z=n[6]*i+n[7]*a+n[8]*l,t}},{key:"smult",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]*=e}},{key:"mmult",value:function(t,n){void 0===n&&(n=new e);var i=this.elements,a=t.elements,l=n.elements,r=i[0],o=i[1],g=i[2],s=i[3],u=i[4],c=i[5],I=i[6],C=i[7],d=i[8],h=a[0],A=a[1],m=a[2],p=a[3],f=a[4],b=a[5],v=a[6],y=a[7],G=a[8];return l[0]=r*h+o*p+g*v,l[1]=r*A+o*f+g*y,l[2]=r*m+o*b+g*G,l[3]=s*h+u*p+c*v,l[4]=s*A+u*f+c*y,l[5]=s*m+u*b+c*G,l[6]=I*h+C*p+d*v,l[7]=I*A+C*f+d*y,l[8]=I*m+C*b+d*G,n}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);for(var i=this.elements,a=n.elements,l=0;3!==l;l++)a[3*l+0]=t.x*i[3*l+0],a[3*l+1]=t.y*i[3*l+1],a[3*l+2]=t.z*i[3*l+2];return n}},{key:"solve",value:function(e,t){void 0===t&&(t=new uv);var n,i,a=[];for(n=0;n<12;n++)a.push(0);for(n=0;n<3;n++)for(i=0;i<3;i++)a[n+4*i]=this.elements[n+3*i];a[3]=e.x,a[7]=e.y,a[11]=e.z;var l,r,o=3,g=o;do{if(0===a[(n=g-o)+4*n])for(i=n+1;i<g;i++)if(0!==a[n+4*i]){l=4;do{a[(r=4-l)+4*n]+=a[r+4*i]}while(--l);break}if(0!==a[n+4*n])for(i=n+1;i<g;i++){var s=a[n+4*i]/a[n+4*n];l=4;do{a[(r=4-l)+4*i]=r<=n?0:a[r+4*i]-a[r+4*n]*s}while(--l)}}while(--o);if(t.z=a[11]/a[10],t.y=(a[7]-a[6]*t.z)/a[5],t.x=(a[3]-a[2]*t.z-a[1]*t.y)/a[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=[".concat(t.toString(),"], b=[").concat(e.toString(),"], A=[").concat(this.toString(),"]");return t}},{key:"e",value:function(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n}},{key:"copy",value:function(e){for(var t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}},{key:"toString",value:function(){for(var e="",t=0;t<9;t++)e+=this.elements[t]+",";return e}},{key:"reverse",value:function(t){void 0===t&&(t=new e);var n,i,a=sv;for(n=0;n<3;n++)for(i=0;i<3;i++)a[n+6*i]=this.elements[n+3*i];a[3]=1,a[9]=0,a[15]=0,a[4]=0,a[10]=1,a[16]=0,a[5]=0,a[11]=0,a[17]=1;var l,r,o=3,g=o;do{if(0===a[(n=g-o)+6*n])for(i=n+1;i<g;i++)if(0!==a[n+6*i]){l=6;do{a[(r=6-l)+6*n]+=a[r+6*i]}while(--l);break}if(0!==a[n+6*n])for(i=n+1;i<g;i++){var s=a[n+6*i]/a[n+6*n];l=6;do{a[(r=6-l)+6*i]=r<=n?0:a[r+6*i]-a[r+6*n]*s}while(--l)}}while(--o);n=2;do{i=n-1;do{var u=a[n+6*i]/a[n+6*n];l=6;do{a[(r=6-l)+6*i]=a[r+6*i]-a[r+6*n]*u}while(--l)}while(i--)}while(--n);n=2;do{var c=1/a[n+6*n];l=6;do{a[(r=6-l)+6*n]=a[r+6*n]*c}while(--l)}while(n--);n=2;do{i=2;do{if(r=a[3+i+6*n],isNaN(r)||r===1/0)throw"Could not reverse! A=[".concat(this.toString(),"]");t.e(n,i,r)}while(i--)}while(n--);return t}},{key:"setRotationFromQuaternion",value:function(e){var t=e.x,n=e.y,i=e.z,a=e.w,l=t+t,r=n+n,o=i+i,g=t*l,s=t*r,u=t*o,c=n*r,I=n*o,C=i*o,d=a*l,h=a*r,A=a*o,m=this.elements;return m[0]=1-(c+C),m[1]=s-A,m[2]=u+h,m[3]=s+A,m[4]=1-(g+C),m[5]=I-d,m[6]=u-h,m[7]=I+d,m[8]=1-(g+c),this}},{key:"transpose",value:function(t){void 0===t&&(t=new e);var n,i=this.elements,a=t.elements;return a[0]=i[0],a[4]=i[4],a[8]=i[8],n=i[1],a[1]=i[3],a[3]=n,n=i[2],a[2]=i[6],a[6]=n,n=i[5],a[5]=i[7],a[7]=n,t}}]),e}(),sv=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],uv=function(){function e(t,n,i){W(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=n,this.z=i}return R(e,[{key:"cross",value:function(t,n){void 0===n&&(n=new e);var i=t.x,a=t.y,l=t.z,r=this.x,o=this.y,g=this.z;return n.x=o*l-g*a,n.y=g*i-r*l,n.z=r*a-o*i,n}},{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"setZero",value:function(){this.x=this.y=this.z=0}},{key:"vadd",value:function(t,n){if(!n)return new e(this.x+t.x,this.y+t.y,this.z+t.z);n.x=t.x+this.x,n.y=t.y+this.y,n.z=t.z+this.z}},{key:"vsub",value:function(t,n){if(!n)return new e(this.x-t.x,this.y-t.y,this.z-t.z);n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z}},{key:"crossmat",value:function(){return new gv([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}},{key:"normalize",value:function(){var e=this.x,t=this.y,n=this.z,i=Math.sqrt(e*e+t*t+n*n);if(i>0){var a=1/i;this.x*=a,this.y*=a,this.z*=a}else this.x=0,this.y=0,this.z=0;return i}},{key:"unit",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,a=this.z,l=Math.sqrt(n*n+i*i+a*a);return l>0?(l=1/l,t.x=n*l,t.y=i*l,t.z=a*l):(t.x=1,t.y=0,t.z=0),t}},{key:"length",value:function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}},{key:"lengthSquared",value:function(){return this.dot(this)}},{key:"distanceTo",value:function(e){var t=this.x,n=this.y,i=this.z,a=e.x,l=e.y,r=e.z;return Math.sqrt((a-t)*(a-t)+(l-n)*(l-n)+(r-i)*(r-i))}},{key:"distanceSquared",value:function(e){var t=this.x,n=this.y,i=this.z,a=e.x,l=e.y,r=e.z;return(a-t)*(a-t)+(l-n)*(l-n)+(r-i)*(r-i)}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);var i=this.x,a=this.y,l=this.z;return n.x=t*i,n.y=t*a,n.z=t*l,n}},{key:"vmul",value:function(t,n){return void 0===n&&(n=new e),n.x=t.x*this.x,n.y=t.y*this.y,n.z=t.z*this.z,n}},{key:"addScaledVector",value:function(t,n,i){return void 0===i&&(i=new e),i.x=this.x+t*n.x,i.y=this.y+t*n.y,i.z=this.z+t*n.z,i}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"isZero",value:function(){return 0===this.x&&0===this.y&&0===this.z}},{key:"negate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}},{key:"tangents",value:function(e,t){var n=this.length();if(n>0){var i=cv,a=1/n;i.set(this.x*a,this.y*a,this.z*a);var l=Iv;Math.abs(i.x)<.9?(l.set(1,0,0),i.cross(l,e)):(l.set(0,1,0),i.cross(l,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"lerp",value:function(e,t,n){var i=this.x,a=this.y,l=this.z;n.x=i+(e.x-i)*t,n.y=a+(e.y-a)*t,n.z=l+(e.z-l)*t}},{key:"almostEquals",value:function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}},{key:"almostZero",value:function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}},{key:"isAntiparallelTo",value:function(e,t){return this.negate(Cv),Cv.almostEquals(e,t)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}();uv.ZERO=new uv(0,0,0),uv.UNIT_X=new uv(1,0,0),uv.UNIT_Y=new uv(0,1,0),uv.UNIT_Z=new uv(0,0,1);var cv=new uv,Iv=new uv,Cv=new uv,dv=function(){function e(t){W(this,e),void 0===t&&(t={}),this.lowerBound=new uv,this.upperBound=new uv,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}return R(e,[{key:"setFromPoints",value:function(e,t,n,i){var a=this.lowerBound,l=this.upperBound,r=n;a.copy(e[0]),r&&r.vmult(a,a),l.copy(a);for(var o=1;o<e.length;o++){var g=e[o];r&&(r.vmult(g,hv),g=hv),g.x>l.x&&(l.x=g.x),g.x<a.x&&(a.x=g.x),g.y>l.y&&(l.y=g.y),g.y<a.y&&(a.y=g.y),g.z>l.z&&(l.z=g.z),g.z<a.z&&(a.z=g.z)}return t&&(t.vadd(a,a),t.vadd(l,l)),i&&(a.x-=i,a.y-=i,a.z-=i,l.x+=i,l.y+=i,l.z+=i),this}},{key:"copy",value:function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"extend",value:function(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}},{key:"overlaps",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,a=e.upperBound,l=i.x<=n.x&&n.x<=a.x||t.x<=a.x&&a.x<=n.x,r=i.y<=n.y&&n.y<=a.y||t.y<=a.y&&a.y<=n.y,o=i.z<=n.z&&n.z<=a.z||t.z<=a.z&&a.z<=n.z;return l&&r&&o}},{key:"volume",value:function(){var e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}},{key:"contains",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,a=e.upperBound;return t.x<=i.x&&n.x>=a.x&&t.y<=i.y&&n.y>=a.y&&t.z<=i.z&&n.z>=a.z}},{key:"getCorners",value:function(e,t,n,i,a,l,r,o){var g=this.lowerBound,s=this.upperBound;e.copy(g),t.set(s.x,g.y,g.z),n.set(s.x,s.y,g.z),i.set(g.x,s.y,s.z),a.set(s.x,g.y,s.z),l.set(g.x,s.y,g.z),r.set(g.x,g.y,s.z),o.copy(s)}},{key:"toLocalFrame",value:function(e,t){var n=Av,i=n[0],a=n[1],l=n[2],r=n[3],o=n[4],g=n[5],s=n[6],u=n[7];this.getCorners(i,a,l,r,o,g,s,u);for(var c=0;8!==c;c++){var I=n[c];e.pointToLocal(I,I)}return t.setFromPoints(n)}},{key:"toWorldFrame",value:function(e,t){var n=Av,i=n[0],a=n[1],l=n[2],r=n[3],o=n[4],g=n[5],s=n[6],u=n[7];this.getCorners(i,a,l,r,o,g,s,u);for(var c=0;8!==c;c++){var I=n[c];e.pointToWorld(I,I)}return t.setFromPoints(n)}},{key:"overlapsRay",value:function(e){var t=e.direction,n=e.from,i=1/t.x,a=1/t.y,l=1/t.z,r=(this.lowerBound.x-n.x)*i,o=(this.upperBound.x-n.x)*i,g=(this.lowerBound.y-n.y)*a,s=(this.upperBound.y-n.y)*a,u=(this.lowerBound.z-n.z)*l,c=(this.upperBound.z-n.z)*l,I=Math.max(Math.max(Math.min(r,o),Math.min(g,s)),Math.min(u,c)),C=Math.min(Math.min(Math.max(r,o),Math.max(g,s)),Math.max(u,c));return!(C<0)&&!(I>C)}}]),e}(),hv=new uv,Av=[new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv],mv=function(){function e(t,n,i,a){W(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===a&&(a=1),this.x=t,this.y=n,this.z=i,this.w=a}return R(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z,",").concat(this.w)}},{key:"toArray",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"setFromAxisAngle",value:function(e,t){var n=Math.sin(.5*t);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t),this}},{key:"toAxisAngle",value:function(e){void 0===e&&(e=new uv),this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}},{key:"setFromVectors",value:function(e,t){if(e.isAntiparallelTo(t)){var n=pv,i=fv;e.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{var a=e.cross(t);this.x=a.x,this.y=a.y,this.z=a.z,this.w=Math.sqrt(Math.pow(e.length(),2)*Math.pow(t.length(),2))+e.dot(t),this.normalize()}return this}},{key:"mult",value:function(t,n){void 0===n&&(n=new e);var i=this.x,a=this.y,l=this.z,r=this.w,o=t.x,g=t.y,s=t.z,u=t.w;return n.x=i*u+r*o+a*s-l*g,n.y=a*u+r*g+l*o-i*s,n.z=l*u+r*s+i*g-a*o,n.w=r*u-i*o-a*g-l*s,n}},{key:"inverse",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,a=this.z,l=this.w;this.conjugate(t);var r=1/(n*n+i*i+a*a+l*l);return t.x*=r,t.y*=r,t.z*=r,t.w*=r,t}},{key:"conjugate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}},{key:"normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"normalizeFast",value:function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"vmult",value:function(e,t){void 0===t&&(t=new uv);var n=e.x,i=e.y,a=e.z,l=this.x,r=this.y,o=this.z,g=this.w,s=g*n+r*a-o*i,u=g*i+o*n-l*a,c=g*a+l*i-r*n,I=-l*n-r*i-o*a;return t.x=s*g+I*-l+u*-o-c*-r,t.y=u*g+I*-r+c*-l-s*-o,t.z=c*g+I*-o+s*-r-u*-l,t}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"toEuler",value:function(e,t){var n,i,a;void 0===t&&(t="YZX");var l=this.x,r=this.y,o=this.z,g=this.w;if("YZX"!==t)throw new Error("Euler order ".concat(t," not supported yet."));var s=l*r+o*g;if(s>.499&&(n=2*Math.atan2(l,g),i=Math.PI/2,a=0),s<-.499&&(n=-2*Math.atan2(l,g),i=-Math.PI/2,a=0),void 0===n){var u=l*l,c=r*r,I=o*o;n=Math.atan2(2*r*g-2*l*o,1-2*c-2*I),i=Math.asin(2*s),a=Math.atan2(2*l*g-2*r*o,1-2*u-2*I)}e.y=n,e.z=i,e.x=a}},{key:"setFromEuler",value:function(e,t,n,i){void 0===i&&(i="XYZ");var a=Math.cos(e/2),l=Math.cos(t/2),r=Math.cos(n/2),o=Math.sin(e/2),g=Math.sin(t/2),s=Math.sin(n/2);return"XYZ"===i?(this.x=o*l*r+a*g*s,this.y=a*g*r-o*l*s,this.z=a*l*s+o*g*r,this.w=a*l*r-o*g*s):"YXZ"===i?(this.x=o*l*r+a*g*s,this.y=a*g*r-o*l*s,this.z=a*l*s-o*g*r,this.w=a*l*r+o*g*s):"ZXY"===i?(this.x=o*l*r-a*g*s,this.y=a*g*r+o*l*s,this.z=a*l*s+o*g*r,this.w=a*l*r-o*g*s):"ZYX"===i?(this.x=o*l*r-a*g*s,this.y=a*g*r+o*l*s,this.z=a*l*s-o*g*r,this.w=a*l*r+o*g*s):"YZX"===i?(this.x=o*l*r+a*g*s,this.y=a*g*r+o*l*s,this.z=a*l*s-o*g*r,this.w=a*l*r-o*g*s):"XZY"===i&&(this.x=o*l*r-a*g*s,this.y=a*g*r-o*l*s,this.z=a*l*s+o*g*r,this.w=a*l*r+o*g*s),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"slerp",value:function(t,n,i){void 0===i&&(i=new e);var a,l,r,o,g,s=this.x,u=this.y,c=this.z,I=this.w,C=t.x,d=t.y,h=t.z,A=t.w;return(l=s*C+u*d+c*h+I*A)<0&&(l=-l,C=-C,d=-d,h=-h,A=-A),1-l>1e-6?(a=Math.acos(l),r=Math.sin(a),o=Math.sin((1-n)*a)/r,g=Math.sin(n*a)/r):(o=1-n,g=n),i.x=o*s+g*C,i.y=o*u+g*d,i.z=o*c+g*h,i.w=o*I+g*A,i}},{key:"integrate",value:function(t,n,i,a){void 0===a&&(a=new e);var l=t.x*i.x,r=t.y*i.y,o=t.z*i.z,g=this.x,s=this.y,u=this.z,c=this.w,I=.5*n;return a.x+=I*(l*c+r*u-o*s),a.y+=I*(r*c+o*g-l*u),a.z+=I*(o*c+l*s-r*g),a.w+=I*(-l*g-r*s-o*u),a}}]),e}(),pv=new uv,fv=new uv,bv=function(){function e(t){W(this,e),void 0===t&&(t={}),this.id=e.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}return R(e,[{key:"updateBoundingSphereRadius",value:function(){throw"computeBoundingSphereRadius() not implemented for shape type ".concat(this.type)}},{key:"volume",value:function(){throw"volume() not implemented for shape type ".concat(this.type)}},{key:"calculateLocalInertia",value:function(e,t){throw"calculateLocalInertia() not implemented for shape type ".concat(this.type)}},{key:"calculateWorldAABB",value:function(e,t,n,i){throw"calculateWorldAABB() not implemented for shape type ".concat(this.type)}}]),e}();bv.idCounter=0,bv.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};var vv=function(){function e(t){W(this,e),void 0===t&&(t={}),this.position=new uv,this.quaternion=new mv,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}return R(e,[{key:"pointToLocal",value:function(t,n){return e.pointToLocalFrame(this.position,this.quaternion,t,n)}},{key:"pointToWorld",value:function(t,n){return e.pointToWorldFrame(this.position,this.quaternion,t,n)}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new uv),this.quaternion.vmult(e,t),t}}],[{key:"pointToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new uv),n.vsub(e,i),t.conjugate(yv),yv.vmult(i,i),i}},{key:"pointToWorldFrame",value:function(e,t,n,i){return void 0===i&&(i=new uv),t.vmult(n,i),i.vadd(e,i),i}},{key:"vectorToWorldFrame",value:function(e,t,n){return void 0===n&&(n=new uv),e.vmult(t,n),n}},{key:"vectorToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new uv),t.w*=-1,t.vmult(n,i),t.w*=-1,i}}]),e}(),yv=new mv;new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new mv,new dv,new gv,new gv,new gv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new mv,new uv,new uv,new uv,new uv;var Gv=function(){function e(){W(this,e),this.rayFromWorld=new uv,this.rayToWorld=new uv,this.hitNormalWorld=new uv,this.hitPointWorld=new uv,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}return R(e,[{key:"reset",value:function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}},{key:"abort",value:function(){this.shouldStop=!0}},{key:"set",value:function(e,t,n,i,a,l,r){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=a,this.body=l,this.distance=r}}]),e}(),Bv=1,Zv=2,xv=4,wv=function(e,t,n,i,a,l,r){function o(e,t){W(this,o),void 0===e&&(e=new uv),void 0===t&&(t=new uv),this.from=e.clone(),this.to=t.clone(),this.direction=new uv,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=o.ANY,this.result=new Gv,this.hasHit=!1,this.callback=function(e){}}return R(o,[{key:e,get:function(){return this._intersectSphere}},{key:t,get:function(){return this._intersectPlane}},{key:n,get:function(){return this._intersectBox}},{key:i,get:function(){return this._intersectConvex}},{key:a,get:function(){return this._intersectConvex}},{key:l,get:function(){return this._intersectHeightfield}},{key:r,get:function(){return this._intersectTrimesh}},{key:"intersectWorld",value:function(e,t){return this.mode=t.mode||o.ANY,this.result=t.result||new Gv,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask="undefined"!==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!==typeof t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse="undefined"===typeof t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(qv),Wv.length=0,e.broadphase.aabbQuery(e,qv,Wv),this.intersectBodies(Wv),this.hasHit}},{key:"intersectBody",value:function(e,t){t&&(this.result=t,this.updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var i=Vv,a=Xv,l=0,r=e.shapes.length;l<r;l++){var o=e.shapes[l];if((!n||o.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[l],a),e.quaternion.vmult(e.shapeOffsets[l],i),i.vadd(e.position,i),this.intersectShape(o,a,i,e),this.result.shouldStop))break}}},{key:"intersectBodies",value:function(e,t){t&&(this.result=t,this.updateDirection());for(var n=0,i=e.length;!this.result.shouldStop&&n<i;n++)this.intersectBody(e[n])}},{key:"updateDirection",value:function(){this.to.vsub(this.from,this.direction),this.direction.normalize()}},{key:"intersectShape",value:function(e,t,n,i){var a=function(e,t,n){n.vsub(e,ey);var i=ey.dot(t);return t.scale(i,ty),ty.vadd(e,ty),n.distanceTo(ty)}(this.from,this.direction,n);if(!(a>e.boundingSphereRadius)){var l=this[e.type];l&&l.call(this,e,t,n,i,e)}}},{key:"_intersectBox",value:function(e,t,n,i,a){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,i,a)}},{key:"_intersectPlane",value:function(e,t,n,i,a){var l=this.from,r=this.to,o=this.direction,g=new uv(0,0,1);t.vmult(g,g);var s=new uv;l.vsub(n,s);var u=s.dot(g);if(r.vsub(n,s),!(u*s.dot(g)>0)&&!(l.distanceTo(r)<u)){var c=g.dot(o);if(!(Math.abs(c)<this.precision)){var I=new uv,C=new uv,d=new uv;l.vsub(n,I);var h=-g.dot(I)/c;o.scale(h,C),l.vadd(C,d),this.reportIntersection(g,d,a,i,-1)}}}},{key:"getAABB",value:function(e){var t=e.lowerBound,n=e.upperBound,i=this.to,a=this.from;t.x=Math.min(i.x,a.x),t.y=Math.min(i.y,a.y),t.z=Math.min(i.z,a.z),n.x=Math.max(i.x,a.x),n.y=Math.max(i.y,a.y),n.z=Math.max(i.z,a.z)}},{key:"_intersectHeightfield",value:function(e,t,n,i,a){e.data,e.elementSize;var l=Mv;l.from.copy(this.from),l.to.copy(this.to),vv.pointToLocalFrame(n,t,l.from,l.from),vv.pointToLocalFrame(n,t,l.to,l.to),l.updateDirection();var r,o,g,s,u=Fv;r=o=0,g=s=e.data.length-1;var c=new dv;l.getAABB(c),e.getIndexOfPosition(c.lowerBound.x,c.lowerBound.y,u,!0),r=Math.max(r,u[0]),o=Math.max(o,u[1]),e.getIndexOfPosition(c.upperBound.x,c.upperBound.y,u,!0),g=Math.min(g,u[0]+1),s=Math.min(s,u[1]+1);for(var I=r;I<g;I++)for(var C=o;C<s;C++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(I,C,c),c.overlapsRay(l)){if(e.getConvexTrianglePillar(I,C,!1),vv.pointToWorldFrame(n,t,e.pillarOffset,Hv),this._intersectConvex(e.pillarConvex,t,Hv,i,a,Nv),this.result.shouldStop)return;e.getConvexTrianglePillar(I,C,!0),vv.pointToWorldFrame(n,t,e.pillarOffset,Hv),this._intersectConvex(e.pillarConvex,t,Hv,i,a,Nv)}}}},{key:"_intersectSphere",value:function(e,t,n,i,a){var l=this.from,r=this.to,o=e.radius,g=Math.pow(r.x-l.x,2)+Math.pow(r.y-l.y,2)+Math.pow(r.z-l.z,2),s=2*((r.x-l.x)*(l.x-n.x)+(r.y-l.y)*(l.y-n.y)+(r.z-l.z)*(l.z-n.z)),u=Math.pow(l.x-n.x,2)+Math.pow(l.y-n.y,2)+Math.pow(l.z-n.z,2)-Math.pow(o,2),c=Math.pow(s,2)-4*g*u,I=Lv,C=_v;if(!(c<0))if(0===c)l.lerp(r,c,I),I.vsub(n,C),C.normalize(),this.reportIntersection(C,I,a,i,-1);else{var d=(-s-Math.sqrt(c))/(2*g),h=(-s+Math.sqrt(c))/(2*g);if(d>=0&&d<=1&&(l.lerp(r,d,I),I.vsub(n,C),C.normalize(),this.reportIntersection(C,I,a,i,-1)),this.result.shouldStop)return;h>=0&&h<=1&&(l.lerp(r,h,I),I.vsub(n,C),C.normalize(),this.reportIntersection(C,I,a,i,-1))}}},{key:"_intersectConvex",value:function(e,t,n,i,a,l){for(var r=Tv,g=Ev,s=l&&l.faceList||null,u=e.faces,c=e.vertices,I=e.faceNormals,C=this.direction,d=this.from,h=this.to,A=d.distanceTo(h),m=s?s.length:u.length,p=this.result,f=0;!p.shouldStop&&f<m;f++){var b=s?s[f]:f,v=u[b],y=I[b],G=t,B=n;g.copy(c[v[0]]),G.vmult(g,g),g.vadd(B,g),g.vsub(d,g),G.vmult(y,r);var Z=C.dot(r);if(!(Math.abs(Z)<this.precision)){var x=r.dot(g)/Z;if(!(x<0)){C.scale(x,kv),kv.vadd(d,kv),Yv.copy(c[v[0]]),G.vmult(Yv,Yv),B.vadd(Yv,Yv);for(var w=1;!p.shouldStop&&w<v.length-1;w++){zv.copy(c[v[w]]),Kv.copy(c[v[w+1]]),G.vmult(zv,zv),G.vmult(Kv,Kv),B.vadd(zv,zv),B.vadd(Kv,Kv);var q=kv.distanceTo(d);!o.pointInTriangle(kv,Yv,zv,Kv)&&!o.pointInTriangle(kv,zv,Yv,Kv)||q>A||this.reportIntersection(r,kv,a,i,b)}}}}}},{key:"_intersectTrimesh",value:function(e,t,n,i,a,l){var r=Jv,g=jv,s=$v,u=Ev,c=Uv,I=Dv,C=Pv,d=Ov,h=Qv,A=e.indices;e.vertices;var m=this.from,p=this.to,f=this.direction;s.position.copy(n),s.quaternion.copy(t),vv.vectorToLocalFrame(n,t,f,c),vv.pointToLocalFrame(n,t,m,I),vv.pointToLocalFrame(n,t,p,C),C.x*=e.scale.x,C.y*=e.scale.y,C.z*=e.scale.z,I.x*=e.scale.x,I.y*=e.scale.y,I.z*=e.scale.z,C.vsub(I,c),c.normalize();var b=I.distanceSquared(C);e.tree.rayQuery(this,s,g);for(var v=0,y=g.length;!this.result.shouldStop&&v!==y;v++){var G=g[v];e.getNormal(G,r),e.getVertex(A[3*G],Yv),Yv.vsub(I,u);var B=c.dot(r),Z=r.dot(u)/B;if(!(Z<0)){c.scale(Z,kv),kv.vadd(I,kv),e.getVertex(A[3*G+1],zv),e.getVertex(A[3*G+2],Kv);var x=kv.distanceSquared(I);!o.pointInTriangle(kv,zv,Yv,Kv)&&!o.pointInTriangle(kv,Yv,zv,Kv)||x>b||(vv.vectorToWorldFrame(t,r,h),vv.pointToWorldFrame(n,t,kv,d),this.reportIntersection(h,d,a,i,G))}}g.length=0}},{key:"reportIntersection",value:function(e,t,n,i,a){var l=this.from,r=this.to,g=l.distanceTo(t),s=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(s.hitFaceIndex="undefined"!==typeof a?a:-1,this.mode){case o.ALL:this.hasHit=!0,s.set(l,r,e,t,n,i,g),s.hasHit=!0,this.callback(s);break;case o.CLOSEST:(g<s.distance||!s.hasHit)&&(this.hasHit=!0,s.hasHit=!0,s.set(l,r,e,t,n,i,g));break;case o.ANY:this.hasHit=!0,s.hasHit=!0,s.set(l,r,e,t,n,i,g),s.shouldStop=!0}}}],[{key:"pointInTriangle",value:function(e,t,n,i){i.vsub(t,ey),n.vsub(t,Sv),e.vsub(t,Rv);var a,l,r=ey.dot(ey),o=ey.dot(Sv),g=ey.dot(Rv),s=Sv.dot(Sv),u=Sv.dot(Rv);return(a=s*g-o*u)>=0&&(l=r*u-o*g)>=0&&a+l<r*s-o*o}}]),o}(bv.types.SPHERE,bv.types.PLANE,bv.types.BOX,bv.types.CYLINDER,bv.types.CONVEXPOLYHEDRON,bv.types.HEIGHTFIELD,bv.types.TRIMESH);wv.CLOSEST=Bv,wv.ANY=Zv,wv.ALL=xv;var qv=new dv,Wv=[],Sv=new uv,Rv=new uv,Vv=new uv,Xv=new mv,kv=new uv,Yv=new uv,zv=new uv,Kv=new uv;new uv,new Gv;var Nv={faceList:[0]},Hv=new uv,Mv=new wv,Fv=[],Lv=new uv,_v=new uv,Tv=new uv;new uv,new uv;var Ev=new uv,Jv=new uv,Uv=new uv,Dv=new uv,Pv=new uv,Qv=new uv,Ov=new uv;new dv;var jv=[],$v=new vv,ey=new uv,ty=new uv;new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new wv,new uv,new uv,new uv,new uv(1,0,0),new uv(0,1,0),new uv(0,0,1),new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new dv,new uv,new dv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new dv,new uv,new vv,new dv,bv.types.SPHERE,bv.types.SPHERE,bv.types.PLANE,bv.types.BOX,bv.types.BOX,bv.types.SPHERE,bv.types.BOX,bv.types.PLANE,bv.types.BOX,bv.types.CONVEXPOLYHEDRON,bv.types.SPHERE,bv.types.CONVEXPOLYHEDRON,bv.types.PLANE,bv.types.CONVEXPOLYHEDRON,bv.types.BOX,bv.types.CONVEXPOLYHEDRON,bv.types.SPHERE,bv.types.HEIGHTFIELD,bv.types.BOX,bv.types.HEIGHTFIELD,bv.types.CONVEXPOLYHEDRON,bv.types.HEIGHTFIELD,bv.types.PARTICLE,bv.types.SPHERE,bv.types.PLANE,bv.types.PARTICLE,bv.types.BOX,bv.types.PARTICLE,bv.types.PARTICLE,bv.types.CONVEXPOLYHEDRON,bv.types.CYLINDER,bv.types.SPHERE,bv.types.CYLINDER,bv.types.PLANE,bv.types.CYLINDER,bv.types.BOX,bv.types.CYLINDER,bv.types.CONVEXPOLYHEDRON,bv.types.CYLINDER,bv.types.HEIGHTFIELD,bv.types.CYLINDER,bv.types.PARTICLE,bv.types.CYLINDER,bv.types.SPHERE,bv.types.TRIMESH,bv.types.PLANE,bv.types.TRIMESH,new uv,new uv,new uv,new uv,new uv,new mv,new mv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new dv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new mv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new uv,new dv,new wv;var ny=globalThis.performance||{};if(!ny.now){var iy=Date.now();ny.timing&&ny.timing.navigationStart&&(iy=ny.timing.navigationStart),ny.now=function(){return Date.now()-iy}}new uv;var ay=(0,i.createContext)(null),ly=(0,i.createContext)(null),ry=function(){var e=(0,i.useContext)(ly);if(!e)throw new Error("Physics context not found. @react-three/cannon & components can only be used within a Physics provider");return e};new ki,new Yi(1,1,1),new Yi,new Ia;var oy=new Ka;function gy(e){var t=(0,i.useRef)(null);return e&&"function"!==typeof e?e:t}function sy(e){return e.charAt(0).toUpperCase()+e.slice(1)}function uy(e,t){var n=void 0===t?"":"/".concat(t);return"function"===typeof e?null:e&&e.current&&"".concat(e.current.uuid).concat(n)}var cy=new ya,Iy=new ki,Cy=0;function dy(e,t,n,i,a,l){return void 0===l&&(l="bodies"),function(r){var o=Cy++;n[o]=w({},i,r);var g=uy(e,a);return g&&t.subscribe({props:{id:o,target:l,type:i},uuid:g}),function(){delete n[o],t.unsubscribe({props:o})}}}function hy(e,t){var n,i,a=t.position,l=void 0===a?[0,0,0]:a,r=t.rotation,o=void 0===r?[0,0,0]:r,g=t.userData,s=void 0===g?{}:g;e.userData=s,(n=e.position).set.apply(n,A(l)),(i=e.rotation).set.apply(i,A(o)),e.updateMatrix()}function Ay(e,t,n){var i=t.onCollide,a=t.onCollideBegin,l=t.onCollideEnd;e[n]={collide:i,collideBegin:a,collideEnd:l}}function my(e,t,n,a,l){void 0===a&&(a=null),void 0===l&&(l=[]);var r=gy(a),o=ry(),g=o.events,s=o.refs,u=o.scaleOverrides,c=o.subscriptions,I=o.worker,d=(0,i.useContext)(ay);(0,i.useLayoutEffect)((function(){r.current||(r.current=new Ka);var i=r.current,a=I,l=i instanceof Gs?(i.instanceMatrix.setUsage(Vn),i.count):1,o=i instanceof Gs?new Array(l).fill(0).map((function(e,t){return"".concat(i.uuid,"/").concat(t)})):[i.uuid],u=i instanceof Gs?o.map((function(a,l){var r=t(l);return hy(oy,r),i.setMatrixAt(l,oy.matrix),i.instanceMatrix.needsUpdate=!0,s[a]=i,null==d||d.add(a,r,e),Ay(g,r,a),Kd(Kd({},r),{},{args:n(r.args)})})):o.map((function(a,l){var r=t(l);return hy(i,r),s[a]=i,null==d||d.add(a,r,e),Ay(g,r,a),Kd(Kd({},r),{},{args:n(r.args)})}));return a.addBodies({props:u.map((function(e){var t=e.onCollide,n=(e.onCollideBegin,e.onCollideEnd,Yd(e,If));return Kd({onCollide:Boolean(t)},n)})),type:e,uuid:o}),function(){o.forEach((function(e){delete s[e],null==d||d.remove(e),delete g[e]})),a.removeBodies({uuid:o})}}),l);var h=(0,i.useMemo)((function(){var e=function(e,t){var n="set".concat(sy(e));return{set:function(e){var i=uy(r,t);i&&I[n]({props:e,uuid:i})},subscribe:dy(r,I,c,e,t)}},t=function(e){return{copy:function(t){var n=t.w,i=t.x,a=t.y,l=t.z,o=uy(r,e);o&&I.setQuaternion({props:[i,a,l,n],uuid:o})},set:function(t,n,i,a){var l=uy(r,e);l&&I.setQuaternion({props:[t,n,i,a],uuid:l})},subscribe:dy(r,I,c,"quaternion",e)}},n=function(e){return{copy:function(t){var n=t.x,i=t.y,a=t.z,l=uy(r,e);l&&I.setRotation({props:[n,i,a],uuid:l})},set:function(t,n,i){var a=uy(r,e);a&&I.setRotation({props:[t,n,i],uuid:a})},subscribe:function(t){var n=Cy++,i="quaternion",a=uy(r,e);return c[n]=w({},i,function(e){return function(t){return e(cy.setFromQuaternion(Iy.fromArray(t)).toArray())}}(t)),a&&I.subscribe({props:{id:n,target:"bodies",type:i},uuid:a}),function(){delete c[n],I.unsubscribe({props:n})}}}},i=function(e,t){var n="set".concat(sy(e));return{copy:function(e){var i=e.x,a=e.y,l=e.z,o=uy(r,t);o&&I[n]({props:[i,a,l],uuid:o})},set:function(e,i,a){var l=uy(r,t);l&&I[n]({props:[e,i,a],uuid:l})},subscribe:dy(r,I,c,e,t)}};function a(a){return{allowSleep:e("allowSleep",a),angularDamping:e("angularDamping",a),angularFactor:i("angularFactor",a),angularVelocity:i("angularVelocity",a),applyForce:function(e,t){var n=uy(r,a);n&&I.applyForce({props:[e,t],uuid:n})},applyImpulse:function(e,t){var n=uy(r,a);n&&I.applyImpulse({props:[e,t],uuid:n})},applyLocalForce:function(e,t){var n=uy(r,a);n&&I.applyLocalForce({props:[e,t],uuid:n})},applyLocalImpulse:function(e,t){var n=uy(r,a);n&&I.applyLocalImpulse({props:[e,t],uuid:n})},applyTorque:function(e){var t=uy(r,a);t&&I.applyTorque({props:[e],uuid:t})},collisionFilterGroup:e("collisionFilterGroup",a),collisionFilterMask:e("collisionFilterMask",a),collisionResponse:e("collisionResponse",a),fixedRotation:e("fixedRotation",a),isTrigger:e("isTrigger",a),linearDamping:e("linearDamping",a),linearFactor:i("linearFactor",a),mass:e("mass",a),material:e("material",a),position:i("position",a),quaternion:t(a),rotation:n(a),scaleOverride:function(e){var t=uy(r,a);t&&(u[t]=C(Yi,A(e)))},sleep:function(){var e=uy(r,a);e&&I.sleep({uuid:e})},sleepSpeedLimit:e("sleepSpeedLimit",a),sleepTimeLimit:e("sleepTimeLimit",a),userData:e("userData",a),velocity:i("velocity",a),wakeUp:function(){var e=uy(r,a);e&&I.wakeUp({uuid:e})}}}var l={};return Kd(Kd({},a(void 0)),{},{at:function(e){return l[e]||(l[e]=a(e))}})}),[]);return[r,h]}var py=new Yi,fy=new Yi(1,1,1),by=new ki,vy=new Ia;function yy(e,t,n,i,a){return void 0===i&&(i=fy),void 0!==e?(vy.compose(py.fromArray(t,3*e),by.fromArray(n,4*e),i),a&&(a.matrixAutoUpdate=!1,a.matrix.copy(vy)),vy):vy.identity()}function Gy(e){var t=e.allowSleep,n=void 0!==t&&t,a=e.axisIndex,l=void 0===a?0:a,r=e.broadphase,o=void 0===r?"Naive":r,g=e.children,u=e.defaultContactMaterial,c=void 0===u?{contactEquationStiffness:1e6}:u,I=e.frictionGravity,C=void 0===I?null:I,d=e.gravity,h=void 0===d?[0,-9.81,0]:d,A=e.isPaused,m=void 0!==A&&A,p=e.iterations,f=void 0===p?5:p,b=e.maxSubSteps,v=void 0===b?10:b,y=e.quatNormalizeFast,G=void 0!==y&&y,B=e.quatNormalizeSkip,Z=void 0===B?0:B,x=e.shouldInvalidate,w=void 0===x||x,q=e.size,W=void 0===q?1e3:q,S=e.solver,R=void 0===S?"GS":S,V=e.stepSize,X=void 0===V?1/60:V,k=e.tolerance,Y=void 0===k?.001:k,z=_h().invalidate,K=s((0,i.useState)((function(){return{bodies:{},events:{},refs:{},scaleOverrides:{},subscriptions:{},worker:new Yf({allowSleep:n,axisIndex:l,broadphase:o,defaultContactMaterial:c,frictionGravity:C,gravity:h,iterations:f,quatNormalizeFast:G,quatNormalizeSkip:Z,size:W,solver:R,tolerance:Y})}})),1)[0],N=K.bodies,H=K.events,M=K.refs,F=K.scaleOverrides,L=K.subscriptions,_=K.worker,T=0,E=(0,i.useCallback)((function(e,t){m||(T+=t,_.step({maxSubSteps:v,stepSize:X,timeSinceLastCalled:T}),T=0)}),[m,v,X]),J=function(e){var t,n=e.body,i=e.contact,a=i.bi,l=i.bj,r=Yd(i,Cf),o=e.target,g=Yd(e,df),s=null==(t=H[o])?void 0:t.collide;s&&s(Kd({body:M[n],contact:Kd({bi:M[a],bj:M[l]},r),target:M[o]},g))},U=function(e){var t,n,i=e.bodyA,a=e.bodyB,l=null==(t=H[i])?void 0:t.collideBegin;l&&l({body:M[a],op:"event",target:M[i],type:"collideBegin"});var r=null==(n=H[a])?void 0:n.collideBegin;r&&r({body:M[i],op:"event",target:M[a],type:"collideBegin"})},D=function(e){var t,n,i=e.bodyA,a=e.bodyB,l=null==(t=H[i])?void 0:t.collideEnd;l&&l({body:M[a],op:"event",target:M[i],type:"collideEnd"});var r=null==(n=H[a])?void 0:n.collideEnd;r&&r({body:M[i],op:"event",target:M[a],type:"collideEnd"})},P=function(e){for(var t=e.active,n=e.bodies,i=void 0===n?[]:n,a=e.observations,l=e.positions,r=e.quaternions,o=0;o<i.length;o++)N[i[o]]=o;if(a.forEach((function(e){var t=s(e,3),n=t[0],i=t[1],a=t[2],l=(L[n]||{})[a];l&&l(i)})),t){for(var g=0,u=Object.values(M);g<u.length;g++){var c=u[g];if(c instanceof Gs)for(var I=0;I<c.count;I++){var C="".concat(c.uuid,"/").concat(I),d=N[C];void 0!==d&&(c.setMatrixAt(I,yy(d,l,r,F[C])),c.instanceMatrix.needsUpdate=!0)}else{var h=F[c.uuid]||c.scale;yy(N[c.uuid],l,r,h,c)}}w&&z()}},Q=function(e){var t,n=e.body,i=e.ray,a=i.uuid,l=Yd(i,hf),r=Yd(e,Af),o=null==(t=H[a])?void 0:t.rayhit;o&&o(Kd({body:n?M[n]:null,ray:Kd({uuid:a},l)},r))};Th(E),(0,i.useEffect)((function(){return _.connect(),_.init(),_.on("collide",J),_.on("collideBegin",U),_.on("collideEnd",D),_.on("frame",P),_.on("rayhit",Q),function(){_.terminate(),_.removeAllListeners()}}),[]),(0,i.useEffect)((function(){_.axisIndex=l}),[l]),(0,i.useEffect)((function(){_.broadphase=o}),[o]),(0,i.useEffect)((function(){_.gravity=h}),[h]),(0,i.useEffect)((function(){_.iterations=f}),[f]),(0,i.useEffect)((function(){_.tolerance=Y}),[Y]);var O=(0,i.useMemo)((function(){return{bodies:N,events:H,refs:M,scaleOverrides:F,subscriptions:L,worker:_}}),[N,H,M,L,_]);return(0,cf.jsx)(ly.Provider,{value:O,children:g})}function By(){return(0,cf.jsxs)(cf.Fragment,{children:[(0,cf.jsx)("div",{id:"notes",children:(0,cf.jsx)("center",{children:(0,cf.jsx)("p",{children:(0,cf.jsx)("em",{children:"Press Space to fly, Enter to fall and Use Arrows."})})})}),(0,cf.jsx)("div",{style:{position:"absolute",bottom:50,right:0,zIndex:3},children:(0,cf.jsxs)("div",{class:"keys",children:[(0,cf.jsx)("div",{class:"up arr",id:"up",onMouseDown:function(){window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowUp"}))},onMouseUp:function(){window.dispatchEvent(new KeyboardEvent("keyup",{key:"ArrowUp"}))},children:(0,cf.jsx)("i",{class:"fa fa-arrow-up"})}),(0,cf.jsx)("br",{}),(0,cf.jsx)("div",{class:"left arr",id:"left",onMouseDown:function(){window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowLeft"}))},onMouseUp:function(){window.dispatchEvent(new KeyboardEvent("keyup",{key:"ArrowLeft"}))},children:(0,cf.jsx)("i",{class:"fa fa-arrow-left"})}),(0,cf.jsx)("div",{class:"down arr",id:"down",onMouseDown:function(){window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))},onMouseUp:function(){window.dispatchEvent(new KeyboardEvent("keyup",{key:"ArrowDown"}))},children:(0,cf.jsx)("i",{class:"fa fa-arrow-down"})}),(0,cf.jsx)("div",{class:"right arr",id:"right",onMouseDown:function(){window.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowRight"}))},onMouseUp:function(){window.dispatchEvent(new KeyboardEvent("keyup",{key:"ArrowRight"}))},children:(0,cf.jsx)("i",{class:"fa fa-arrow-right"})})]})})]})}var Zy=["children","left","right","top","bottom","front","back","onCentered","precise"],xy=i.forwardRef((function(e,t){var n=e.children,a=e.left,l=e.right,r=e.top,o=e.bottom,g=e.front,s=e.back,u=e.onCentered,c=e.precise,I=void 0===c||c,C=Yd(e,Zy),d=i.useRef(null),h=i.useRef(null),A=i.useRef(null);return i.useLayoutEffect((function(){h.current.matrixWorld.identity();var e=(new Ni).setFromObject(A.current,I),t=new Yi,n=new ia,i=e.max.x-e.min.x,c=e.max.y-e.min.y,C=e.max.z-e.min.z;e.getCenter(t),e.getBoundingSphere(n);var m=r?c/2:o?-c/2:0,p=a?-i/2:l?i/2:0,f=g?C/2:s?-C/2:0;h.current.position.set(-t.x+p,-t.y+m,-t.z+f),"undefined"!==typeof u&&u({parent:d.current.parent,container:d.current,width:i,height:c,depth:C,boundingBox:e,boundingSphere:n,center:t,verticalAlignment:m,horizontalAlignment:p,depthAlignment:f})}),[n]),i.useImperativeHandle(t,(function(){return d.current}),[]),i.createElement("group",rA({ref:d},C),i.createElement("group",{ref:h},i.createElement("group",{ref:A},n)))})),wy=["bevelEnabled","bevelSize","bevelThickness","font","height","size","lineHeight","letterSpacing"],qy=function(e){G(n,e);var t=x(n);function n(e,i){var a;W(this,n);var l=i.bevelEnabled,r=void 0!==l&&l,o=i.bevelSize,g=void 0===o?8:o,s=i.bevelThickness,u=void 0===s?10:s,c=i.font,I=i.height,C=void 0===I?50:I,d=i.size,h=void 0===d?100:d,A=i.lineHeight,m=void 0===A?1:A,p=i.letterSpacing,f=void 0===p?0:p,b=Yd(i,wy),v=c.generateShapes(e,h,{lineHeight:m,letterSpacing:f});return(a=t.call(this,v,Kd(Kd({},b),{},{bevelEnabled:r,bevelSize:g,bevelThickness:u,depth:C}))).type="TextGeometry",a}return R(n)}(nc),Wy=function(e){G(n,e);var t=x(n);function n(e){return W(this,n),t.call(this,e)}return R(n,[{key:"load",value:function(e,t,n,i){var a=this,l=new eI(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(e){if("string"!==typeof e)throw new Error("unsupported data type");var n=JSON.parse(e),i=a.parse(n);t&&t(i)}),n,i)}},{key:"parse",value:function(e){return new Sy(e)}}]),n}(Oc),Sy=function(){function e(t){W(this,e),w(this,"data",void 0),this.data=t}return R(e,[{key:"generateShapes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2?arguments[2]:void 0,i=[],a=Kd({letterSpacing:0,lineHeight:1},n),l=Ry(e,t,this.data,a),r=0,o=l.length;r<o;r++)Array.prototype.push.apply(i,l[r].toShapes(!1));return i}}]),e}();function Ry(e,t,n,i){for(var a=Array.from(e),l=t/n.resolution,r=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*l,o=[],g=0,s=0,u=0;u<a.length;u++){var c=a[u];if("\n"===c)g=0,s-=r*i.lineHeight;else{var I=Vy(c,l,g,s,n);I&&(g+=I.offsetX+i.letterSpacing,o.push(I.path))}}return o}function Vy(e,t,n,i,a){var l=a.glyphs[e]||a.glyphs["?"];if(l){var r,o,g,s,u,c,I,C,d=new gd;if(l.o)for(var h=l._cachedOutline||(l._cachedOutline=l.o.split(" ")),A=0,m=h.length;A<m;){switch(h[A++]){case"m":r=parseInt(h[A++])*t+n,o=parseInt(h[A++])*t+i,d.moveTo(r,o);break;case"l":r=parseInt(h[A++])*t+n,o=parseInt(h[A++])*t+i,d.lineTo(r,o);break;case"q":g=parseInt(h[A++])*t+n,s=parseInt(h[A++])*t+i,u=parseInt(h[A++])*t+n,c=parseInt(h[A++])*t+i,d.quadraticCurveTo(u,c,g,s);break;case"b":g=parseInt(h[A++])*t+n,s=parseInt(h[A++])*t+i,u=parseInt(h[A++])*t+n,c=parseInt(h[A++])*t+i,I=parseInt(h[A++])*t+n,C=parseInt(h[A++])*t+i,d.bezierCurveTo(u,c,I,C,g,s)}}return{offsetX:l.ha*t,path:d}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+a.familyName+".")}w(Sy,"isFont",void 0),w(Sy,"type",void 0);var Xy=["font","letterSpacing","lineHeight","size","height","bevelThickness","bevelSize","bevelEnabled","bevelOffset","bevelSegments","curveSegments","children"],ky=["string","number"],Yy=i.forwardRef((function(e,t){var n=e.font,a=e.letterSpacing,l=void 0===a?0:a,r=e.lineHeight,o=void 0===r?1:r,g=e.size,s=void 0===g?1:g,u=e.height,c=void 0===u?.2:u,I=e.bevelThickness,C=void 0===I?.1:I,d=e.bevelSize,h=void 0===d?.01:d,A=e.bevelEnabled,m=void 0!==A&&A,f=e.bevelOffset,b=void 0===f?0:f,v=e.bevelSegments,y=void 0===v?4:v,G=e.curveSegments,B=void 0===G?8:G,Z=e.children,x=Yd(e,Xy);i.useMemo((function(){return Wh({RenamedTextGeometry:qy})}),[]);var w=Od(p(q().mark((function e(){var t,i;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof n){e.next=8;break}return e.next=3,fetch(n);case 3:return e.next=5,e.sent.json();case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=n;case 9:return t=e.t0,i=new Wy,e.abrupt("return",i.parse(t));case 12:case"end":return e.stop()}}),e)}))),[n]),W=(0,i.useMemo)((function(){return{font:w,size:s,height:c,bevelThickness:C,bevelSize:h,bevelEnabled:m,bevelSegments:y,bevelOffset:b,curveSegments:B,letterSpacing:l,lineHeight:o}}),[w,s,c,C,h,m,b,B,l,o]),S=(0,i.useMemo)((function(){return function(e){var t="",n=[];return i.Children.forEach(e,(function(e){ky.includes(typeof e)?t+=e+"":n.push(e)})),[t].concat(n)}(Z)}),[Z]),R=Nd(S),V=R[0],X=R.slice(1),k=i.useMemo((function(){return[V,W]}),[V,W]);return i.createElement("mesh",rA({},x,{ref:t}),i.createElement("renamedTextGeometry",{args:k}),X)})),zy=function(e){G(n,e);var t=x(n);function n(e){var i;return W(this,n),(i=t.call(this,e)).dracoLoader=null,i.ktx2Loader=null,i.meshoptDecoder=null,i.pluginCallbacks=[],i.register((function(e){return new Ly(e)})),i.register((function(e){return new Py(e)})),i.register((function(e){return new Qy(e)})),i.register((function(e){return new Ty(e)})),i.register((function(e){return new Ey(e)})),i.register((function(e){return new Jy(e)})),i.register((function(e){return new Uy(e)})),i.register((function(e){return new Fy(e)})),i.register((function(e){return new Dy(e)})),i.register((function(e){return new _y(e)})),i.register((function(e){return new Hy(e)})),i.register((function(e){return new Oy(e)})),i}return R(n,[{key:"load",value:function(e,t,n,i){var a,l=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:wI.extractUrlBase(e),this.manager.itemStart(e);var r=function(t){i?i(t):console.error(t),l.manager.itemError(e),l.manager.itemEnd(e)},o=new eI(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{l.parse(n,a,(function(n){t(n),l.manager.itemEnd(e)}),r)}catch(cy){r(cy)}}),n,r)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,i){var a,l={},r={};if("string"===typeof e)a=e;else if(wI.decodeText(new Uint8Array(e,0,4))===jy){try{l[Ny.KHR_BINARY_GLTF]=new tG(e)}catch(d){return void(i&&i(d))}a=l[Ny.KHR_BINARY_GLTF].content}else a=wI.decodeText(new Uint8Array(e));var o=JSON.parse(a);if(void 0===o.asset||o.asset.version[0]<2)i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var g=new XG(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});g.fileLoader.setRequestHeader(this.requestHeader);for(var s=0;s<this.pluginCallbacks.length;s++){var u=this.pluginCallbacks[s](g);r[u.name]=u,l[u.name]=!0}if(o.extensionsUsed)for(var c=0;c<o.extensionsUsed.length;++c){var I=o.extensionsUsed[c],C=o.extensionsRequired||[];switch(I){case Ny.KHR_MATERIALS_UNLIT:l[I]=new My;break;case Ny.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:l[I]=new lG;break;case Ny.KHR_DRACO_MESH_COMPRESSION:l[I]=new nG(o,this.dracoLoader);break;case Ny.KHR_TEXTURE_TRANSFORM:l[I]=new iG;break;case Ny.KHR_MESH_QUANTIZATION:l[I]=new rG;break;default:C.indexOf(I)>=0&&void 0===r[I]&&console.warn('THREE.GLTFLoader: Unknown extension "'+I+'".')}}g.setExtensions(l),g.setPlugins(r),g.parse(n,i)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(i,a){n.parse(e,t,i,a)}))}}]),n}(Oc);function Ky(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var Ny={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},Hy=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return R(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,i=t.length;n<i;n++){var a=t[n];a.extensions&&a.extensions[this.name]&&void 0!==a.extensions[this.name].light&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,i=t.cache.get(n);if(i)return i;var a,l=t.json,r=((l.extensions&&l.extensions[this.name]||{}).lights||[])[e],o=new vi(16777215);void 0!==r.color&&o.fromArray(r.color);var g=void 0!==r.range?r.range:0;switch(r.type){case"directional":(a=new vI(o)).target.position.set(0,0,-1),a.add(a.target);break;case"point":(a=new fI(o)).distance=g;break;case"spot":(a=new dI(o)).distance=g,r.spot=r.spot||{},r.spot.innerConeAngle=void 0!==r.spot.innerConeAngle?r.spot.innerConeAngle:0,r.spot.outerConeAngle=void 0!==r.spot.outerConeAngle?r.spot.outerConeAngle:Math.PI/4,a.angle=r.spot.outerConeAngle,a.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+r.type)}return a.position.set(0,0,0),a.decay=2,void 0!==r.intensity&&(a.intensity=r.intensity),a.name=t.createUniqueName(r.name||"light_"+e),i=Promise.resolve(a),t.cache.add(n,i),i}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,i=n.json.nodes[e],a=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then((function(e){return n._getNodeRef(t.cache,a,e)}))}}]),e}(),My=function(){function e(){W(this,e),this.name=Ny.KHR_MATERIALS_UNLIT}return R(e,[{key:"getMaterialType",value:function(){return Oa}},{key:"extendParams",value:function(e,t,n){var i=[];e.color=new vi(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var l=a.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}void 0!==a.baseColorTexture&&i.push(n.assignTexture(e,"map",a.baseColorTexture,on))}return Promise.all(i)}}]),e}(),Fy=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.KHR_MATERIALS_EMISSIVE_STRENGTH}return R(e,[{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}]),e}(),Ly=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.KHR_MATERIALS_CLEARCOAT}return R(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?fc:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var a=[],l=i.extensions[this.name];if(void 0!==l.clearcoatFactor&&(t.clearcoat=l.clearcoatFactor),void 0!==l.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),void 0!==l.clearcoatRoughnessFactor&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),void 0!==l.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),void 0!==l.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),void 0!==l.clearcoatNormalTexture.scale)){var r=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ai(r,r)}return Promise.all(a)}}]),e}(),_y=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.KHR_MATERIALS_IRIDESCENCE}return R(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?fc:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var a=[],l=i.extensions[this.name];return void 0!==l.iridescenceFactor&&(t.iridescence=l.iridescenceFactor),void 0!==l.iridescenceTexture&&a.push(n.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),void 0!==l.iridescenceIor&&(t.iridescenceIOR=l.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==l.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),void 0!==l.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),void 0!==l.iridescenceThicknessTexture&&a.push(n.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(a)}}]),e}(),Ty=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.KHR_MATERIALS_SHEEN}return R(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?fc:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var a=[];t.sheenColor=new vi(0,0,0),t.sheenRoughness=0,t.sheen=1;var l=i.extensions[this.name];return void 0!==l.sheenColorFactor&&t.sheenColor.fromArray(l.sheenColorFactor),void 0!==l.sheenRoughnessFactor&&(t.sheenRoughness=l.sheenRoughnessFactor),void 0!==l.sheenColorTexture&&a.push(n.assignTexture(t,"sheenColorMap",l.sheenColorTexture,on)),void 0!==l.sheenRoughnessTexture&&a.push(n.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(a)}}]),e}(),Ey=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.KHR_MATERIALS_TRANSMISSION}return R(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?fc:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var a=[],l=i.extensions[this.name];return void 0!==l.transmissionFactor&&(t.transmission=l.transmissionFactor),void 0!==l.transmissionTexture&&a.push(n.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(a)}}]),e}(),Jy=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.KHR_MATERIALS_VOLUME}return R(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?fc:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var a=[],l=i.extensions[this.name];t.thickness=void 0!==l.thicknessFactor?l.thicknessFactor:0,void 0!==l.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||0;var r=l.attenuationColor||[1,1,1];return t.attenuationColor=new vi(r[0],r[1],r[2]),Promise.all(a)}}]),e}(),Uy=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.KHR_MATERIALS_IOR}return R(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?fc:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}]),e}(),Dy=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.KHR_MATERIALS_SPECULAR}return R(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?fc:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var a=[],l=i.extensions[this.name];t.specularIntensity=void 0!==l.specularFactor?l.specularFactor:1,void 0!==l.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",l.specularTexture));var r=l.specularColorFactor||[1,1,1];return t.specularColor=new vi(r[0],r[1],r[2]),void 0!==l.specularColorTexture&&a.push(n.assignTexture(t,"specularColorMap",l.specularColorTexture,on)),Promise.all(a)}}]),e}(),Py=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.KHR_TEXTURE_BASISU}return R(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;var a=i.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,l)}}]),e}(),Qy=function(){function e(t){W(this,e),this.parser=t,this.name=Ny.EXT_TEXTURE_WEBP,this.isSupported=null}return R(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,i=n.json,a=i.textures[e];if(!a.extensions||!a.extensions[t])return null;var l=a.extensions[t],r=i.images[l.source],o=n.textureLoader;if(r.uri){var g=n.options.manager.getHandler(r.uri);null!==g&&(o=g)}return this.detectSupport().then((function(a){if(a)return n.loadTextureImage(e,l.source,o);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),Oy=function(){function e(t){W(this,e),this.name=Ny.EXT_MESHOPT_COMPRESSION,this.parser=t}return R(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var i=n.extensions[this.name],a=this.parser.getDependency("buffer",i.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then((function(e){var t=i.byteOffset||0,n=i.byteLength||0,a=i.count,r=i.byteStride,o=new Uint8Array(e,t,n);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(a,r,o,i.mode,i.filter).then((function(e){return e.buffer})):l.ready.then((function(){var e=new ArrayBuffer(a*r);return l.decodeGltfBuffer(new Uint8Array(e),a,r,o,i.mode,i.filter),e}))}))}return null}}]),e}(),jy="glTF",$y=1313821514,eG=5130562,tG=R((function e(t){W(this,e),this.name=Ny.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:wI.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==jy)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var i=this.header.length-12,a=new DataView(t,12),l=0;l<i;){var r=a.getUint32(l,!0);l+=4;var o=a.getUint32(l,!0);if(l+=4,o===$y){var g=new Uint8Array(t,12+l,r);this.content=wI.decodeText(g)}else if(o===eG){var s=12+l;this.body=t.slice(s,s+r)}l+=r}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),nG=function(){function e(t,n){if(W(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ny.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return R(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,i=this.dracoLoader,a=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,r={},o={},g={};for(var s in l){var u=vG[s]||s.toLowerCase();r[u]=l[s]}for(var c in e.attributes){var I=vG[c]||c.toLowerCase();if(void 0!==l[c]){var C=n.accessors[e.attributes[c]],d=mG[C.componentType];g[I]=d.name,o[I]=!0===C.normalized}}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){i.decodeDracoFile(e,(function(e){for(var n in e.attributes){var i=e.attributes[n],a=o[n];void 0!==a&&(i.normalized=a)}t(e)}),r,g)}))}))}}]),e}(),iG=function(){function e(){W(this,e),this.name=Ny.KHR_TEXTURE_TRANSFORM}return R(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),aG=function(e){G(n,e);var t=x(n);function n(e){var i;W(this,n),(i=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),l=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),g=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new vi).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return i._extraUniforms=s,i.onBeforeCompile=function(e){for(var t in s)e.uniforms[t]=s[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",l).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",g)},Object.defineProperties(y(i),{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete i.metalness,delete i.roughness,delete i.metalnessMap,delete i.roughnessMap,i.setValues(e),i}return R(n,[{key:"copy",value:function(e){return v(u(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(pc),lG=function(){function e(){W(this,e),this.name=Ny.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}return R(e,[{key:"getMaterialType",value:function(){return aG}},{key:"extendParams",value:function(e,t,n){var i=t.extensions[this.name];e.color=new vi(1,1,1),e.opacity=1;var a=[];if(Array.isArray(i.diffuseFactor)){var l=i.diffuseFactor;e.color.fromArray(l),e.opacity=l[3]}if(void 0!==i.diffuseTexture&&a.push(n.assignTexture(e,"map",i.diffuseTexture,on)),e.emissive=new vi(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new vi(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var r=i.specularGlossinessTexture;a.push(n.assignTexture(e,"glossinessMap",r)),a.push(n.assignTexture(e,"specularMap",r,on))}return Promise.all(a)}},{key:"createMaterial",value:function(e){var t=new aG(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=void 0===e.emissiveIntensity?1:e.emissiveIntensity,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=un,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t}}]),e}(),rG=R((function e(){W(this,e),this.name=Ny.KHR_MESH_QUANTIZATION})),oG=function(e){G(n,e);var t=x(n);function n(e,i,a,l){return W(this,n),t.call(this,e,i,a,l)}return R(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=e*i*3+i,l=0;l!==i;l++)t[l]=n[a+l];return t}},{key:"interpolate_",value:function(e,t,n,i){for(var a=this.resultBuffer,l=this.sampleValues,r=this.valueSize,o=2*r,g=3*r,s=i-t,u=(n-t)/s,c=u*u,I=c*u,C=e*g,d=C-g,h=-2*I+3*c,A=I-c,m=1-h,p=A-c+u,f=0;f!==r;f++){var b=l[d+f+r],v=l[d+f+o]*s,y=l[C+f+r],G=l[C+f]*s;a[f]=m*b+p*v+h*y+A*G}return a}}]),n}(Xc),gG=new ki,sG=function(e){G(n,e);var t=x(n);function n(){return W(this,n),t.apply(this,arguments)}return R(n,[{key:"interpolate_",value:function(e,t,i,a){var l=v(u(n.prototype),"interpolate_",this).call(this,e,t,i,a);return gG.fromArray(l).normalize().toArray(l),l}}]),n}(oG),uG=0,cG=1,IG=2,CG=3,dG=4,hG=5,AG=6,mG={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pG={9728:Me,9729:Ee,9984:Fe,9985:Je,9986:_e,9987:De},fG={33071:Ne,33648:He,10497:Ke},bG={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vG={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},yG={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},GG={CUBICSPLINE:void 0,LINEAR:Pt,STEP:Dt},BG="OPAQUE",ZG="MASK",xG="BLEND";function wG(e,t,n){for(var i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function qG(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function WG(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(var l=0,r=a.length;l<r;l++)e.morphTargetDictionary[a[l]]=l}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function SG(e){var t=e.extensions&&e.extensions[Ny.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+RG(t.attributes):e.indices+":"+RG(e.attributes)+":"+e.mode}function RG(e){for(var t="",n=Object.keys(e).sort(),i=0,a=n.length;i<a;i++)t+=n[i]+":"+e[n[i]]+";";return t}function VG(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var XG=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};W(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new Ky,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=navigator.userAgent.indexOf("Firefox")>-1,l=a?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;"undefined"===typeof createImageBitmap||i||a&&l<98?this.textureLoader=new rI(this.options.manager):this.textureLoader=new kI(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new eI(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return R(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,i=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var l={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};wG(a,l,i),qG(l,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(l)}))).then((function(){e(l)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],i=0,a=t.length;i<a;i++)for(var l=t[i].joints,r=0,o=l.length;r<o;r++)e[l[r]].isBone=!0;for(var g=0,s=e.length;g<s;g++){var u=e[g];void 0!==u.mesh&&(this._addNodeRef(this.meshCache,u.mesh),void 0!==u.skin&&(n[u.mesh].isSkinnedMesh=!0)),void 0!==u.camera&&this._addNodeRef(this.cameraCache,u.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var i=this;if(e.refs[t]<=1)return n;var a=n.clone();return function e(t,n){var a=i.associations.get(t);null!=a&&i.associations.set(n,a);var l,r=f(t.children.entries());try{for(r.s();!(l=r.n()).done;){var o=s(l.value,2),g=o[0];e(o[1],n.children[g])}}catch(u){r.e(u)}finally{r.f()}}(n,a),a.name+="_instance_"+e.uses[t]++,a}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],i=0;i<t.length;i++){var a=e(t[i]);a&&n.push(a)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Ny.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,a){n.load(wI.resolveURL(t.uri,i.path),e,void 0,(function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var a=[];return void 0!==i.bufferView?a.push(this.getDependency("bufferView",i.bufferView)):a.push(null),void 0!==i.sparse&&(a.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,l,r=e[0],o=bG[i.type],g=mG[i.componentType],s=g.BYTES_PER_ELEMENT,u=s*o,c=i.byteOffset||0,I=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,C=!0===i.normalized;if(I&&I!==u){var d=Math.floor(c/I),h="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+d+":"+i.count,A=t.cache.get(h);A||(a=new g(r,d*I,i.count*I/s),A=new Mg(a,I/s),t.cache.add(h,A)),l=new Lg(A,o,c%I/s,C)}else a=null===r?new g(i.count*o):new g(r,c,i.count*o),l=new el(a,o,C);if(void 0!==i.sparse){var m=bG.SCALAR,p=mG[i.sparse.indices.componentType],f=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,v=new p(e[1],f,i.sparse.count*m),y=new g(e[2],b,i.sparse.count*o);null!==r&&(l=new el(l.array.slice(),l.itemSize,l.normalized));for(var G=0,B=v.length;G<B;G++){var Z=v[G];if(l.setX(Z,y[G*o]),o>=2&&l.setY(Z,y[G*o+1]),o>=3&&l.setZ(Z,y[G*o+2]),o>=4&&l.setW(Z,y[G*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return l}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,i=t.textures[e].source,a=t.images[i],l=this.textureLoader;if(a.uri){var r=n.manager.getHandler(a.uri);null!==r&&(l=r)}return this.loadTextureImage(e,i,l)}},{key:"loadTextureImage",value:function(e,t,n){var i=this,a=this.json,l=a.textures[e],r=a.images[t],o=(r.uri||r.bufferView)+":"+l.sampler;if(this.textureCache[o])return this.textureCache[o];var g=this.loadImageSource(t,n).then((function(t){t.flipY=!1,l.name&&(t.name=l.name);var n=(a.samplers||{})[l.sampler]||{};return t.magFilter=pG[n.magFilter]||Ee,t.minFilter=pG[n.minFilter]||De,t.wrapS=fG[n.wrapS]||Ke,t.wrapT=fG[n.wrapT]||Ke,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[o]=g,g}},{key:"loadImageSource",value:function(e,t){var n=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var a=n.images[e],l=self.URL||self.webkitURL,r=a.uri||"",o=!1;if(void 0!==a.bufferView)r=this.getDependency("bufferView",a.bufferView).then((function(e){o=!0;var t=new Blob([e],{type:a.mimeType});return r=l.createObjectURL(t)}));else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var g=Promise.resolve(r).then((function(e){return new Promise((function(n,a){var l=n;!0===t.isImageBitmapLoader&&(l=function(e){var t=new xi(e);t.needsUpdate=!0,n(t)}),t.load(wI.resolveURL(e,i.path),l,void 0,a)}))})).then((function(e){var t;return!0===o&&l.revokeObjectURL(r),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",r),e}));return this.sourceCache[e]=g,g}},{key:"assignTexture",value:function(e,t,n,i){var a=this;return this.getDependency("texture",n.index).then((function(l){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),a.extensions[Ny.KHR_TEXTURE_TRANSFORM]){var r=void 0!==n.extensions?n.extensions[Ny.KHR_TEXTURE_TRANSFORM]:void 0;if(r){var o=a.associations.get(l);l=a.extensions[Ny.KHR_TEXTURE_TRANSFORM].extendTexture(l,r),a.associations.set(l,o)}}return void 0!==i&&(l.encoding=i),e[t]=l,l}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,i=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,l=void 0===t.attributes.normal;if(e.isPoints){var r="PointsMaterial:"+n.uuid,o=this.cache.get(r);o||(o=new Ys,Qa.prototype.copy.call(o,n),o.color.copy(n.color),o.map=n.map,o.sizeAttenuation=!1,this.cache.add(r,o)),n=o}else if(e.isLine){var g="LineBasicMaterial:"+n.uuid,s=this.cache.get(g);s||(s=new Bs,Qa.prototype.copy.call(s,n),s.color.copy(n.color),this.cache.add(g,s)),n=s}if(i||a||l){var u="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),i&&(u+="derivative-tangents:"),a&&(u+="vertex-colors:"),l&&(u+="flat-shading:");var c=this.cache.get(u);c||(c=n.clone(),a&&(c.vertexColors=!0),l&&(c.flatShading=!0),i&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(u,c),this.associations.set(c,this.associations.get(n))),n=c}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return pc}},{key:"loadMaterial",value:function(e){var t,n=this,i=this.json,a=this.extensions,l=i.materials[e],r={},o=l.extensions||{},g=[];if(o[Ny.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var s=a[Ny.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=s.getMaterialType(),g.push(s.extendParams(r,l,n))}else if(o[Ny.KHR_MATERIALS_UNLIT]){var u=a[Ny.KHR_MATERIALS_UNLIT];t=u.getMaterialType(),g.push(u.extendParams(r,l,n))}else{var c=l.pbrMetallicRoughness||{};if(r.color=new vi(1,1,1),r.opacity=1,Array.isArray(c.baseColorFactor)){var I=c.baseColorFactor;r.color.fromArray(I),r.opacity=I[3]}void 0!==c.baseColorTexture&&g.push(n.assignTexture(r,"map",c.baseColorTexture,on)),r.metalness=void 0!==c.metallicFactor?c.metallicFactor:1,r.roughness=void 0!==c.roughnessFactor?c.roughnessFactor:1,void 0!==c.metallicRoughnessTexture&&(g.push(n.assignTexture(r,"metalnessMap",c.metallicRoughnessTexture)),g.push(n.assignTexture(r,"roughnessMap",c.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),g.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,r)}))))}!0===l.doubleSided&&(r.side=E);var C=l.alphaMode||BG;if(C===xG?(r.transparent=!0,r.depthWrite=!1):(r.transparent=!1,C===ZG&&(r.alphaTest=void 0!==l.alphaCutoff?l.alphaCutoff:.5)),void 0!==l.normalTexture&&t!==Oa&&(g.push(n.assignTexture(r,"normalMap",l.normalTexture)),r.normalScale=new ai(1,1),void 0!==l.normalTexture.scale)){var d=l.normalTexture.scale;r.normalScale.set(d,d)}return void 0!==l.occlusionTexture&&t!==Oa&&(g.push(n.assignTexture(r,"aoMap",l.occlusionTexture)),void 0!==l.occlusionTexture.strength&&(r.aoMapIntensity=l.occlusionTexture.strength)),void 0!==l.emissiveFactor&&t!==Oa&&(r.emissive=(new vi).fromArray(l.emissiveFactor)),void 0!==l.emissiveTexture&&t!==Oa&&g.push(n.assignTexture(r,"emissiveMap",l.emissiveTexture,on)),Promise.all(g).then((function(){var i;return i=t===aG?a[Ny.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(r):new t(r),l.name&&(i.name=l.name),qG(i,l),n.associations.set(i,{materials:e}),l.extensions&&wG(a,i,l),i}))}},{key:"createUniqueName",value:function(e){for(var t=cC.sanitizeNodeName(e||""),n=t,i=1;this.nodeNamesUsed[n];++i)n=t+"_"+i;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,i=this.primitiveCache;function a(e){return n[Ny.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return YG(n,e,t)}))}for(var l=[],r=0,o=e.length;r<o;r++){var g=e[r],s=SG(g),u=i[s];if(u)l.push(u.promise);else{var c=void 0;c=g.extensions&&g.extensions[Ny.KHR_DRACO_MESH_COMPRESSION]?a(g):YG(new pl,g,t),i[s]={primitive:g,promise:c},l.push(c)}}return Promise.all(l)}},{key:"loadMesh",value:function(e){for(var t,n=this,i=this.json,a=this.extensions,l=i.meshes[e],r=l.primitives,o=[],g=0,s=r.length;g<s;g++){var u=void 0===r[g].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new pc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:_})),t.DefaultMaterial):this.getDependency("material",r[g].material);o.push(u)}return o.push(n.loadGeometries(r)),Promise.all(o).then((function(t){for(var i=t.slice(0,t.length-1),o=t[t.length-1],g=[],s=0,u=o.length;s<u;s++){var c=o[s],I=r[s],C=void 0,d=i[s];if(I.mode===dG||I.mode===hG||I.mode===AG||void 0===I.mode)!0!==(C=!0===l.isSkinnedMesh?new Is(c,d):new zl(c,d)).isSkinnedMesh||C.geometry.attributes.skinWeight.normalized||C.normalizeSkinWeights(),I.mode===hG?C.geometry=zG(C.geometry,an):I.mode===AG&&(C.geometry=zG(C.geometry,ln));else if(I.mode===cG)C=new Xs(c,d);else if(I.mode===CG)C=new Ss(c,d);else if(I.mode===IG)C=new ks(c,d);else{if(I.mode!==uG)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+I.mode);C=new Ms(c,d)}Object.keys(C.geometry.morphAttributes).length>0&&WG(C,l),C.name=n.createUniqueName(l.name||"mesh_"+e),qG(C,l),I.extensions&&wG(a,C,I),n.assignFinalMaterial(C),g.push(C)}for(var h=0,A=g.length;h<A;h++)n.associations.set(g[h],{meshes:e,primitives:h});if(1===g.length)return g[0];var m=new xg;n.associations.set(m,{meshes:e});for(var p=0,f=g.length;p<f;p++)m.add(g[p]);return m}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new Tl(ii.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new dr(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),qG(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],i=[],a=[],l=[],r=[],o=0,g=t.channels.length;o<g;o++){var s=t.channels[o],u=t.samplers[s.sampler],c=s.target,I=c.node,C=void 0!==t.parameters?t.parameters[u.input]:u.input,d=void 0!==t.parameters?t.parameters[u.output]:u.output;n.push(this.getDependency("node",I)),i.push(this.getDependency("accessor",C)),a.push(this.getDependency("accessor",d)),l.push(u),r.push(c)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(a),Promise.all(l),Promise.all(r)]).then((function(n){for(var i=n[0],a=n[1],l=n[2],r=n[3],o=n[4],g=[],s=function(e,t){var n=i[e],s=a[e],u=l[e],c=r[e],I=o[e];if(void 0===n)return"continue";n.updateMatrix();var C=void 0;switch(yG[I.path]){case yG.weights:C=Mc;break;case yG.rotation:C=Lc;break;default:C=Tc}var d=n.name?n.name:n.uuid,h=void 0!==c.interpolation?GG[c.interpolation]:Pt,A=[];yG[I.path]===yG.weights?n.traverse((function(e){e.morphTargetInfluences&&A.push(e.name?e.name:e.uuid)})):A.push(d);var m=u.array;if(u.normalized){for(var p=VG(m.constructor),f=new Float32Array(m.length),b=0,v=m.length;b<v;b++)f[b]=m[b]*p;m=f}for(var y=0,G=A.length;y<G;y++){var B=new C(A[y]+"."+yG[I.path],s.array,m,h);"CUBICSPLINE"===c.interpolation&&(B.createInterpolant=function(e){return new(this instanceof Lc?sG:oG)(this.times,this.values,this.getValueSize()/3,e)},B.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),g.push(B)}},u=0,c=i.length;u<c;u++)s(u);var I=t.name?t.name:"animation_"+e;return new Ec(I,void 0,g)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}},{key:"loadNode",value:function(e){var t=this.json,n=this.extensions,i=this,a=t.nodes[e],l=a.name?i.createUniqueName(a.name):"";return function(){var t=[],n=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==a.camera&&t.push(i.getDependency("camera",a.camera).then((function(e){return i._getNodeRef(i.cameraCache,a.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){var r;if((r=!0===a.isBone?new Cs:t.length>1?new xg:1===t.length?t[0]:new Ka)!==t[0])for(var o=0,g=t.length;o<g;o++)r.add(t[o]);if(a.name&&(r.userData.name=a.name,r.name=l),qG(r,a),a.extensions&&wG(n,r,a),void 0!==a.matrix){var s=new Ia;s.fromArray(a.matrix),r.applyMatrix4(s)}else void 0!==a.translation&&r.position.fromArray(a.translation),void 0!==a.rotation&&r.quaternion.fromArray(a.rotation),void 0!==a.scale&&r.scale.fromArray(a.scale);return i.associations.has(r)||i.associations.set(r,{}),i.associations.get(r).nodes=e,r}))}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,i=this.json.scenes[e],a=this,l=new xg;i.name&&(l.name=a.createUniqueName(i.name)),qG(l,i),i.extensions&&wG(n,l,i);for(var r=i.nodes||[],o=[],g=0,u=r.length;g<u;g++)o.push(kG(r[g],l,t,a));return Promise.all(o).then((function(){return a.associations=function(e){var t,n=new Map,i=f(a.associations);try{for(i.s();!(t=i.n()).done;){var l=s(t.value,2),r=l[0],o=l[1];(r instanceof Qa||r instanceof xi)&&n.set(r,o)}}catch(g){i.e(g)}finally{i.f()}return e.traverse((function(e){var t=a.associations.get(e);null!=t&&n.set(e,t)})),n}(l),l}))}}]),e}();function kG(e,t,n,i){var a=n.nodes[e];return i.getDependency("node",e).then((function(e){return void 0===a.skin?e:i.getDependency("skin",a.skin).then((function(e){for(var n=[],a=0,l=(t=e).joints.length;a<l;a++)n.push(i.getDependency("node",t.joints[a]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var i=[],a=[],l=0,r=n.length;l<r;l++){var o=n[l];if(o){i.push(o);var g=new Ia;void 0!==t.inverseBindMatrices&&g.fromArray(t.inverseBindMatrices.array,16*l),a.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}e.bind(new ms(i,a),e.matrixWorld)}})),e}));var t})).then((function(e){t.add(e);var l=[];if(a.children)for(var r=a.children,o=0,g=r.length;o<g;o++){var s=r[o];l.push(kG(s,e,n,i))}return Promise.all(l)}))}function YG(e,t,n){var i=t.attributes,a=[];function l(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(var r in i){var o=vG[r]||r.toLowerCase();o in e.attributes||a.push(l(i[r],o))}if(void 0!==t.indices&&!e.index){var g=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(g)}return qG(e,t),function(e,t,n){var i=t.attributes,a=new Ni;if(void 0!==i.POSITION){var l=n.json.accessors[i.POSITION],r=l.min,o=l.max;if(void 0!==r&&void 0!==o){if(a.set(new Yi(r[0],r[1],r[2]),new Yi(o[0],o[1],o[2])),l.normalized){var g=VG(mG[l.componentType]);a.min.multiplyScalar(g),a.max.multiplyScalar(g)}var s=t.targets;if(void 0!==s){for(var u=new Yi,c=new Yi,I=0,C=s.length;I<C;I++){var d=s[I];if(void 0!==d.POSITION){var h=n.json.accessors[d.POSITION],A=h.min,m=h.max;if(void 0!==A&&void 0!==m){if(c.setX(Math.max(Math.abs(A[0]),Math.abs(m[0]))),c.setY(Math.max(Math.abs(A[1]),Math.abs(m[1]))),c.setZ(Math.max(Math.abs(A[2]),Math.abs(m[2]))),h.normalized){var p=VG(mG[h.componentType]);c.multiplyScalar(p)}u.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(u)}e.boundingBox=a;var f=new ia;a.getCenter(f.center),f.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=f}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,n){for(var i=!1,a=!1,l=!1,r=0,o=t.length;r<o;r++){var g=t[r];if(void 0!==g.POSITION&&(i=!0),void 0!==g.NORMAL&&(a=!0),void 0!==g.COLOR_0&&(l=!0),i&&a&&l)break}if(!i&&!a&&!l)return Promise.resolve(e);for(var s=[],u=[],c=[],I=0,C=t.length;I<C;I++){var d=t[I];if(i){var h=void 0!==d.POSITION?n.getDependency("accessor",d.POSITION):e.attributes.position;s.push(h)}if(a){var A=void 0!==d.NORMAL?n.getDependency("accessor",d.NORMAL):e.attributes.normal;u.push(A)}if(l){var m=void 0!==d.COLOR_0?n.getDependency("accessor",d.COLOR_0):e.attributes.color;c.push(m)}}return Promise.all([Promise.all(s),Promise.all(u),Promise.all(c)]).then((function(t){var n=t[0],r=t[1],o=t[2];return i&&(e.morphAttributes.position=n),a&&(e.morphAttributes.normal=r),l&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function zG(e,t){var n=e.getIndex();if(null===n){var i=[],a=e.getAttribute("position");if(void 0===a)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var l=0;l<a.count;l++)i.push(l);e.setIndex(i),n=e.getIndex()}var r=n.count-2,o=[];if(t===ln)for(var g=1;g<=r;g++)o.push(n.getX(0)),o.push(n.getX(g)),o.push(n.getX(g+1));else for(var s=0;s<r;s++)s%2===0?(o.push(n.getX(s)),o.push(n.getX(s+1)),o.push(n.getX(s+2))):(o.push(n.getX(s+2)),o.push(n.getX(s+1)),o.push(n.getX(s)));o.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var u=e.clone();return u.setIndex(o),u}function KG(e){var t=e.position,n=void 0===t?new Yi(0,0,0):t,i=e.rotation,a=void 0===i?new Yi(0,0,-.4):i,l=e.modelPath,r=e.scale,o=Jh(zy,l);return(0,cf.jsx)("group",{position:n,scale:r,rotation:a,children:(0,cf.jsx)("primitive",{object:o.scene})})}var NG=JSON.parse('{"glyphs":{"0":{"ha":804,"x_min":58,"x_max":746,"o":"m 746 404 q 656 95 746 203 q 403 -14 566 -14 q 148 96 238 -14 q 58 404 58 205 l 58 584 q 148 892 58 784 q 401 1001 237 1001 q 656 892 566 1001 q 746 583 746 783 l 746 404 m 517 613 q 490 772 517 720 q 401 825 462 825 q 316 776 342 825 q 287 628 289 727 l 287 376 q 315 214 287 265 q 403 163 342 163 q 489 213 461 163 q 517 369 517 262 l 517 613 z "},"1":{"ha":804,"x_min":113,"x_max":567,"o":"m 567 0 l 338 0 l 338 730 l 113 664 l 113 838 l 546 987 l 567 987 l 567 0 z "},"2":{"ha":804,"x_min":40,"x_max":749,"o":"m 749 0 l 60 0 l 60 149 l 378 483 q 495 695 495 616 q 467 792 495 759 q 387 825 439 825 q 302 781 334 825 q 269 670 269 736 l 40 670 q 85 838 40 761 q 212 958 131 915 q 392 1002 292 1002 q 638 928 552 1002 q 725 715 725 854 q 703 602 725 657 q 636 486 682 547 q 488 323 590 425 l 361 176 l 749 176 l 749 0 z "},"3":{"ha":804,"x_min":32,"x_max":749,"o":"m 269 589 l 377 589 q 505 715 505 589 q 475 794 505 764 q 389 825 444 825 q 310 799 343 825 q 276 733 276 772 l 47 733 q 91 872 47 811 q 211 967 134 933 q 380 1002 288 1002 q 640 926 545 1002 q 734 720 734 851 q 695 599 734 656 q 581 507 656 543 q 705 421 660 479 q 749 277 749 363 q 648 66 749 145 q 380 -14 546 -14 q 200 23 283 -14 q 75 126 117 60 q 32 275 32 191 l 262 275 q 298 196 262 229 q 389 163 335 163 q 485 196 449 163 q 521 282 521 230 q 484 388 521 357 q 380 419 446 419 l 269 419 l 269 589 z "},"4":{"ha":804,"x_min":40,"x_max":764,"o":"m 664 386 l 764 386 l 764 210 l 664 210 l 664 0 l 435 0 l 435 210 l 54 210 l 40 349 l 435 985 l 435 987 l 664 987 l 664 386 m 258 386 l 435 386 l 435 690 l 421 667 l 258 386 z "},"5":{"ha":804,"x_min":54,"x_max":745,"o":"m 74 483 l 134 987 l 711 987 l 711 810 l 320 810 l 298 614 q 362 639 322 628 q 439 650 401 650 q 666 563 587 650 q 745 318 745 475 q 702 146 745 223 q 583 28 660 69 q 402 -14 507 -14 q 228 25 309 -14 q 100 130 146 63 q 55 281 54 197 l 284 281 q 319 195 288 227 q 401 163 350 163 q 516 334 516 163 q 375 492 516 492 q 256 440 295 492 l 74 483 z "},"6":{"ha":804,"x_min":56,"x_max":766,"o":"m 612 1002 l 612 822 l 602 822 q 392 761 474 822 q 290 590 309 699 q 486 666 368 666 q 690 572 614 666 q 766 327 766 479 q 721 154 766 233 q 597 31 677 75 q 420 -14 517 -14 q 233 34 315 -14 q 104 171 150 82 q 56 376 58 260 l 56 467 q 122 742 56 620 q 309 932 187 863 q 578 1002 430 1002 l 612 1002 m 406 491 q 330 470 361 491 q 285 418 300 449 l 285 350 q 414 163 285 163 q 502 210 467 163 q 536 327 536 256 q 501 445 536 399 q 406 491 465 491 z "},"7":{"ha":804,"x_min":35,"x_max":747,"o":"m 747 865 l 378 0 l 136 0 l 506 811 l 35 811 l 35 987 l 747 987 l 747 865 z "},"8":{"ha":804,"x_min":57,"x_max":746,"o":"m 726 724 q 691 597 726 652 q 593 509 655 542 q 705 414 663 474 q 746 272 746 354 q 655 63 746 140 q 404 -14 564 -14 q 150 63 243 -14 q 57 272 57 140 q 98 412 57 351 q 213 509 138 473 q 114 597 150 542 q 78 724 78 652 q 165 927 78 852 q 401 1002 253 1002 q 639 927 551 1002 q 726 724 726 852 m 517 290 q 485 384 517 351 q 402 417 454 417 q 319 384 351 417 q 287 290 287 351 q 319 197 287 231 q 404 163 351 163 q 486 197 454 163 q 517 290 517 231 m 401 825 q 331 795 355 825 q 307 711 307 765 q 332 626 307 659 q 404 593 356 593 q 474 626 450 593 q 497 711 497 659 q 473 795 497 764 q 401 825 449 825 z "},"9":{"ha":804,"x_min":54,"x_max":743,"o":"m 511 382 q 345 315 437 315 q 132 406 211 315 q 54 649 54 497 q 98 825 54 744 q 221 954 142 907 q 397 1002 301 1002 q 574 952 495 1002 q 697 813 653 903 q 743 606 741 724 l 743 519 q 679 235 743 355 q 496 51 614 115 q 219 -14 377 -14 l 205 -14 l 205 170 l 248 170 q 511 382 484 182 m 407 480 q 514 545 481 480 l 514 640 q 482 780 514 734 q 396 825 450 825 q 315 774 348 825 q 283 649 283 722 q 316 526 283 572 q 407 480 349 480 z "},"\\u0000":{"ha":0,"x_min":0,"x_max":0,"o":""},"\\u0002":{"ha":0,"x_min":0,"x_max":0,"o":""},"\\r":{"ha":346,"x_min":0,"x_max":0,"o":""}," ":{"ha":346,"x_min":0,"x_max":0,"o":""},"!":{"ha":383,"x_min":70,"x_max":323,"o":"m 291 313 l 106 313 l 77 987 l 320 987 l 291 313 m 70 102 q 106 185 70 153 q 197 217 142 217 q 287 185 251 217 q 323 102 323 153 q 287 20 323 52 q 197 -12 251 -12 q 106 20 142 -12 q 70 102 70 52 z "},"\\"":{"ha":440,"x_min":17,"x_max":411,"o":"m 173 948 l 144 657 l 17 657 l 17 1042 l 173 1042 l 173 948 m 411 948 l 382 657 l 256 657 l 256 1042 l 411 1042 l 411 948 z "},"#":{"ha":807,"x_min":20,"x_max":777,"o":"m 415 278 l 306 278 l 260 0 l 125 0 l 171 278 l 20 278 l 20 402 l 191 402 l 221 581 l 71 581 l 71 705 l 241 705 l 288 987 l 422 987 l 376 705 l 486 705 l 532 987 l 667 987 l 621 705 l 777 705 l 777 581 l 600 581 l 570 402 l 726 402 l 726 278 l 550 278 l 505 0 l 370 0 l 415 278 m 326 402 l 435 402 l 465 581 l 356 581 l 326 402 z "},"$":{"ha":804,"x_min":56,"x_max":749,"o":"m 515 262 q 489 346 515 315 q 396 404 463 376 q 273 458 330 431 q 176 523 217 486 q 114 608 136 559 q 92 724 92 656 q 170 913 92 839 q 376 1000 247 987 l 376 1143 l 484 1143 l 484 997 q 679 895 608 979 q 749 682 749 811 l 520 682 q 493 791 520 753 q 416 829 466 829 q 346 801 371 829 q 321 723 321 772 q 350 643 321 673 q 441 587 378 614 q 561 531 505 560 q 657 466 616 503 q 721 380 698 429 q 744 263 744 332 q 670 74 744 147 q 470 -12 597 1 l 470 -148 l 362 -148 l 362 -11 q 135 91 214 5 q 56 317 56 176 l 285 317 q 319 199 285 239 q 416 159 353 159 q 489 186 463 159 q 515 262 515 214 z "},"%":{"ha":1031,"x_min":61,"x_max":970,"o":"m 61 798 q 121 945 61 889 q 281 1002 180 1002 q 441 946 382 1002 q 500 794 500 890 l 500 745 q 441 598 500 654 q 282 543 382 543 q 122 598 182 543 q 61 749 61 653 l 61 798 m 208 745 q 228 688 208 710 q 282 666 248 666 q 353 757 353 666 l 353 798 q 334 856 353 833 q 281 878 315 878 q 228 856 248 878 q 208 796 208 834 l 208 745 m 530 242 q 590 390 530 334 q 750 446 650 446 q 911 391 851 446 q 970 237 970 336 l 970 190 q 911 42 970 98 q 751 -14 852 -14 q 591 42 652 -14 q 530 193 530 97 l 530 242 m 677 190 q 699 134 677 158 q 751 110 720 110 q 823 172 817 110 l 823 242 q 804 300 823 278 q 750 322 784 322 q 698 301 718 322 q 677 245 678 281 l 677 190 m 326 74 l 219 127 l 701 899 l 808 846 l 326 74 z "},"&":{"ha":936,"x_min":38,"x_max":912,"o":"m 211 520 q 148 629 171 577 q 125 735 125 680 q 203 928 125 854 q 405 1002 280 1002 q 590 933 517 1002 q 663 764 663 865 q 524 541 663 638 l 473 505 l 625 330 q 662 494 662 405 l 854 494 q 762 173 854 294 l 912 0 l 657 0 l 611 52 q 495 2 554 18 q 361 -14 435 -14 q 126 63 214 -14 q 38 265 38 140 q 73 389 38 334 q 209 519 108 445 l 211 520 m 376 162 q 490 190 435 162 l 312 392 l 306 388 q 267 281 267 340 q 298 197 267 231 q 376 162 330 162 m 323 738 q 374 623 323 690 l 420 651 q 465 693 451 671 q 479 748 479 715 q 458 802 479 779 q 404 825 436 825 q 345 801 366 825 q 323 738 323 777 z "},"\'":{"ha":214,"x_min":29,"x_max":192,"o":"m 192 932 l 170 652 l 29 652 l 29 1042 l 192 1042 l 192 932 z "},"(":{"ha":490,"x_min":81,"x_max":463,"o":"m 81 401 q 125 709 81 567 q 247 951 170 852 q 420 1089 325 1050 l 463 977 q 316 759 368 907 q 264 411 264 610 l 264 381 q 316 27 264 177 q 463 -193 368 -123 l 420 -305 q 247 -166 326 -267 q 125 74 168 -66 q 81 371 83 214 l 81 401 z "},")":{"ha":489,"x_min":27,"x_max":425,"o":"m 425 382 q 378 80 425 223 q 249 -166 331 -63 q 71 -305 166 -269 l 27 -193 q 173 24 121 -122 q 227 361 224 171 l 227 403 q 175 757 227 607 q 27 977 123 907 l 71 1089 q 247 951 165 1052 q 376 709 329 850 q 425 412 423 568 l 425 382 z "},"*":{"ha":646,"x_min":18,"x_max":643,"o":"m 239 648 l 18 709 l 62 838 l 278 749 l 261 987 l 406 987 l 389 744 l 599 831 l 643 701 l 419 640 l 568 460 l 450 380 l 326 580 l 201 387 l 84 464 l 239 648 z "},"+":{"ha":742,"x_min":31,"x_max":707,"o":"m 476 560 l 707 560 l 707 364 l 476 364 l 476 99 l 262 99 l 262 364 l 31 364 l 31 560 l 262 560 l 262 818 l 476 818 l 476 560 z "},",":{"ha":374,"x_min":29,"x_max":285,"o":"m 144 -266 l 29 -212 l 52 -165 q 102 3 100 -77 l 102 172 l 285 172 l 284 25 q 244 -134 283 -53 q 144 -266 205 -214 z "},"-":{"ha":625,"x_min":103,"x_max":511,"o":"m 511 337 l 103 337 l 103 514 l 511 514 l 511 337 z "},".":{"ha":420,"x_min":79,"x_max":332,"o":"m 205 222 q 296 190 260 222 q 332 107 332 157 q 296 25 332 57 q 205 -7 260 -7 q 115 25 151 -7 q 79 107 79 58 q 115 189 79 157 q 205 222 151 222 z "},"/":{"ha":488,"x_min":-20,"x_max":480,"o":"m 142 -85 l -20 -85 l 317 987 l 480 987 l 142 -85 z "},":":{"ha":417,"x_min":80,"x_max":332,"o":"m 206 222 q 296 190 260 222 q 332 107 332 157 q 296 25 332 57 q 206 -7 260 -7 q 116 25 151 -7 q 80 107 80 58 q 116 189 80 157 q 206 222 151 222 m 206 763 q 296 731 260 763 q 332 648 332 699 q 296 566 332 598 q 206 534 260 534 q 116 566 151 534 q 80 648 80 599 q 116 730 80 698 q 206 763 151 763 z "},";":{"ha":400,"x_min":46,"x_max":326,"o":"m 199 763 q 290 731 254 763 q 326 648 326 699 q 290 566 326 598 q 199 534 254 534 q 109 566 144 534 q 73 648 73 599 q 109 730 73 698 q 199 763 144 763 m 161 -266 l 46 -212 l 69 -165 q 119 3 117 -77 l 119 172 l 302 172 l 301 25 q 261 -134 300 -53 q 161 -266 222 -214 z "},"<":{"ha":708,"x_min":31,"x_max":631,"o":"m 260 413 l 631 288 l 631 80 l 31 324 l 31 505 l 631 749 l 631 541 l 260 413 z "},"=":{"ha":813,"x_min":87,"x_max":715,"o":"m 715 490 l 87 490 l 87 666 l 715 666 l 715 490 m 715 192 l 87 192 l 87 368 l 715 368 l 715 192 z "},">":{"ha":712,"x_min":75,"x_max":671,"o":"m 444 415 l 75 541 l 75 748 l 671 504 l 671 323 l 75 79 l 75 287 l 444 415 z "},"?":{"ha":707,"x_min":21,"x_max":660,"o":"m 233 313 q 256 469 233 412 q 328 568 278 526 q 405 645 378 610 q 431 722 431 680 q 342 825 431 825 q 277 795 302 825 q 250 714 252 765 l 21 714 q 106 925 22 850 q 342 1001 191 1001 q 577 931 494 1001 q 660 732 660 861 q 637 630 660 676 q 566 536 615 584 l 488 463 q 441 398 454 431 q 427 313 429 364 l 233 313 m 205 106 q 242 189 205 157 q 332 221 278 221 q 423 189 387 221 q 459 106 459 157 q 423 24 459 56 q 332 -8 387 -8 q 242 24 278 -8 q 205 106 205 56 z "},"@":{"ha":1244,"x_min":40,"x_max":1198,"o":"m 1191 373 q 1103 91 1184 196 q 886 -14 1021 -14 q 787 10 830 -14 q 721 78 745 34 q 543 -12 654 -12 q 429 27 477 -12 q 357 136 380 65 q 343 296 334 206 q 452 568 363 465 q 670 671 541 671 q 842 625 770 671 l 884 597 l 850 199 q 915 104 838 104 q 1011 178 972 104 q 1055 366 1050 252 q 961 716 1066 593 q 652 840 855 840 q 421 773 522 840 q 262 586 321 707 q 196 311 203 465 q 291 -53 185 73 q 608 -178 397 -178 q 729 -165 665 -178 q 833 -134 793 -152 l 858 -247 q 746 -291 817 -274 q 606 -307 676 -307 q 293 -236 420 -307 q 102 -26 165 -165 q 47 311 40 113 q 133 646 55 498 q 348 875 212 794 q 654 956 484 956 q 949 885 825 956 q 1136 682 1074 814 q 1191 373 1198 549 m 513 296 q 527 162 505 208 q 595 117 548 117 q 654 146 627 117 q 699 227 681 174 l 726 536 q 684 542 705 542 q 567 483 608 542 q 513 296 526 423 z "},"A":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 z "},"B":{"ha":896,"x_min":75,"x_max":840,"o":"m 75 0 l 75 987 l 429 987 q 719 918 620 987 q 819 715 819 848 q 783 584 819 638 q 680 504 748 530 q 798 428 757 484 q 840 292 840 372 q 748 74 840 147 q 475 0 656 1 l 75 0 m 313 420 l 313 183 l 469 183 q 568 213 533 183 q 602 296 602 242 q 479 420 602 419 l 313 420 m 313 576 l 437 576 q 548 604 515 576 q 581 686 581 632 q 545 776 581 749 q 429 804 509 804 l 313 804 l 313 576 z "},"C":{"ha":911,"x_min":47,"x_max":876,"o":"m 873 334 q 818 152 869 231 q 675 30 767 73 q 465 -14 583 -14 q 159 113 271 -14 q 47 471 47 240 l 47 520 q 97 774 47 665 q 243 942 148 883 q 463 1002 338 1002 q 751 907 642 1002 q 876 646 861 812 l 638 646 q 593 776 635 736 q 463 815 550 815 q 332 749 374 815 q 289 536 291 682 l 289 467 q 329 241 289 309 q 465 173 368 173 q 591 212 547 173 q 637 334 634 250 l 873 334 z "},"D":{"ha":898,"x_min":75,"x_max":850,"o":"m 75 0 l 75 987 l 393 987 q 628 928 524 987 q 791 761 732 869 q 850 518 850 652 l 850 473 q 793 230 850 337 q 632 61 736 122 q 399 0 528 1 l 75 0 m 313 804 l 313 183 l 395 183 q 553 256 498 183 q 608 473 608 329 l 608 515 q 553 731 608 659 q 393 804 498 804 l 313 804 z "},"E":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 z "},"F":{"ha":760,"x_min":75,"x_max":735,"o":"m 696 393 l 313 393 l 313 0 l 75 0 l 75 987 l 735 987 l 735 804 l 313 804 l 313 576 l 696 576 l 696 393 z "},"G":{"ha":947,"x_min":56,"x_max":883,"o":"m 883 122 q 722 24 828 61 q 490 -14 616 -14 q 180 105 296 -14 q 56 435 64 224 l 56 521 q 107 775 56 667 q 255 943 159 884 q 477 1002 351 1002 q 763 917 661 1002 q 882 665 865 833 l 653 665 q 600 783 641 748 q 485 819 559 819 q 347 743 395 819 q 297 526 298 667 l 297 466 q 348 244 297 318 q 507 170 398 170 q 645 211 600 170 l 645 364 l 479 364 l 479 528 l 883 528 l 883 122 z "},"H":{"ha":976,"x_min":75,"x_max":900,"o":"m 900 0 l 663 0 l 663 412 l 313 412 l 313 0 l 75 0 l 75 987 l 313 987 l 313 595 l 663 595 l 663 987 l 900 987 l 900 0 z "},"I":{"ha":419,"x_min":91,"x_max":328,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 z "},"J":{"ha":781,"x_min":24,"x_max":705,"o":"m 468 987 l 705 987 l 705 310 q 662 142 705 216 q 539 27 618 68 q 365 -14 461 -14 q 114 68 203 -14 q 24 298 24 149 l 263 298 q 287 200 263 231 q 365 170 310 170 q 441 207 414 170 q 468 310 468 243 l 468 987 z "},"K":{"ha":888,"x_min":75,"x_max":903,"o":"m 410 368 l 313 260 l 313 0 l 75 0 l 75 987 l 313 987 l 313 552 l 395 677 l 608 987 l 903 987 l 569 551 l 903 0 l 621 0 l 410 368 z "},"L":{"ha":753,"x_min":75,"x_max":727,"o":"m 313 183 l 727 183 l 727 0 l 75 0 l 75 987 l 313 987 l 313 183 z "},"M":{"ha":1217,"x_min":75,"x_max":1141,"o":"m 387 987 l 608 300 l 827 987 l 1141 987 l 1141 0 l 902 0 l 902 231 l 925 703 l 686 0 l 529 0 l 290 703 l 313 231 l 313 0 l 75 0 l 75 987 l 387 987 z "},"N":{"ha":975,"x_min":75,"x_max":899,"o":"m 899 0 l 663 0 l 313 614 l 313 0 l 75 0 l 75 987 l 313 987 l 662 373 l 662 987 l 899 987 l 899 0 z "},"O":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 z "},"P":{"ha":904,"x_min":75,"x_max":852,"o":"m 313 335 l 313 0 l 75 0 l 75 987 l 469 987 q 669 946 582 987 q 804 827 756 904 q 852 652 852 750 q 748 421 852 508 q 465 335 645 335 l 313 335 m 313 519 l 469 519 q 574 553 538 519 q 610 651 610 588 q 573 762 610 720 q 471 804 536 803 l 313 804 l 313 519 z "},"Q":{"ha":959,"x_min":49,"x_max":912,"o":"m 912 473 q 867 234 912 336 q 741 71 821 132 l 901 -56 l 753 -180 l 541 -9 q 481 -14 511 -14 q 258 45 355 -14 q 105 212 160 103 q 49 461 51 320 l 49 513 q 102 770 49 659 q 254 941 155 880 q 480 1001 353 1001 q 704 941 606 1001 q 857 771 802 882 q 912 519 911 661 l 912 473 m 670 515 q 621 738 670 662 q 480 814 572 814 q 338 739 386 814 q 290 519 291 664 l 290 473 q 338 250 290 328 q 481 172 387 172 q 621 249 572 172 q 670 469 669 326 l 670 515 z "},"R":{"ha":906,"x_min":75,"x_max":871,"o":"m 441 349 l 313 349 l 313 0 l 75 0 l 75 987 l 463 987 q 738 909 639 987 q 837 689 837 831 q 795 518 837 586 q 665 408 753 450 l 871 10 l 871 0 l 616 0 l 441 349 m 313 532 l 463 532 q 565 568 531 532 q 600 667 600 604 q 565 767 600 731 q 463 804 530 804 l 313 804 l 313 532 z "},"S":{"ha":869,"x_min":43,"x_max":822,"o":"m 584 262 q 547 344 584 315 q 417 404 510 373 q 265 465 324 435 q 73 724 73 559 q 121 868 73 806 q 256 966 169 931 q 453 1001 344 1001 q 644 963 559 1001 q 775 855 728 925 q 822 694 822 785 l 585 694 q 548 788 585 755 q 448 821 511 821 q 347 793 384 821 q 310 722 310 765 q 351 653 310 684 q 494 589 391 622 q 662 518 596 556 q 822 264 822 426 q 724 60 822 134 q 456 -14 627 -14 q 239 30 336 -14 q 93 148 142 73 q 43 320 43 222 l 282 320 q 323 203 282 241 q 456 165 364 165 q 550 191 515 165 q 584 262 584 216 z "},"T":{"ha":876,"x_min":24,"x_max":850,"o":"m 850 804 l 553 804 l 553 0 l 315 0 l 315 804 l 24 804 l 24 987 l 850 987 l 850 804 z "},"U":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 z "},"V":{"ha":918,"x_min":-2,"x_max":920,"o":"m 458 269 l 654 987 l 920 987 l 588 0 l 328 0 l -2 987 l 262 987 l 458 269 z "},"W":{"ha":1207,"x_min":14,"x_max":1189,"o":"m 840 368 l 953 987 l 1189 987 l 979 0 l 732 0 l 600 563 l 471 0 l 224 0 l 14 987 l 251 987 l 364 368 l 500 987 l 702 987 l 840 368 z "},"X":{"ha":886,"x_min":3,"x_max":884,"o":"m 443 659 l 604 987 l 876 987 l 600 498 l 884 0 l 609 0 l 443 334 l 277 0 l 3 0 l 286 498 l 10 987 l 281 987 l 443 659 z "},"Y":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 z "},"Z":{"ha":847,"x_min":42,"x_max":814,"o":"m 342 183 l 814 183 l 814 0 l 45 0 l 45 125 l 515 804 l 42 804 l 42 987 l 809 987 l 809 865 l 342 183 z "},"[":{"ha":391,"x_min":73,"x_max":382,"o":"m 382 990 l 302 990 l 302 -71 l 382 -71 l 382 -237 l 73 -237 l 73 1157 l 382 1157 l 382 990 z "},"\\\\":{"ha":592,"x_min":-14,"x_max":637,"o":"m -14 987 l 224 987 l 637 -85 l 397 -85 l -14 987 z "},"]":{"ha":391,"x_min":9,"x_max":319,"o":"m 9 1157 l 319 1157 l 319 -237 l 9 -237 l 9 -71 l 90 -71 l 90 990 l 9 990 l 9 1157 z "},"^":{"ha":621,"x_min":24,"x_max":600,"o":"m 312 802 l 196 494 l 24 494 l 227 987 l 396 987 l 600 494 l 427 494 l 312 802 z "},"_":{"ha":613,"x_min":0,"x_max":612,"o":"m 612 -170 l 0 -170 l 0 0 l 612 0 l 612 -170 z "},"`":{"ha":471,"x_min":37,"x_max":414,"o":"m 414 829 l 228 829 l 37 1042 l 278 1042 l 414 829 z "},"a":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 z "},"b":{"ha":782,"x_min":66,"x_max":745,"o":"m 745 361 q 671 83 745 180 q 460 -14 596 -14 q 280 75 349 -14 l 271 0 l 66 0 l 66 1042 l 294 1042 l 294 675 q 459 747 358 747 q 671 649 596 747 q 745 372 745 551 l 745 361 m 516 375 q 488 526 516 481 q 401 571 460 571 q 294 512 324 571 l 294 220 q 403 162 323 162 q 505 241 484 162 q 516 375 516 279 z "},"c":{"ha":722,"x_min":35,"x_max":689,"o":"m 374 163 q 449 189 422 163 q 475 262 475 215 l 689 262 q 603 64 689 141 q 380 -14 516 -14 q 127 87 220 -14 q 35 365 35 187 l 35 374 q 76 571 35 486 q 195 702 117 656 q 378 747 272 747 q 605 668 521 747 q 689 453 689 589 l 475 453 q 447 541 475 510 q 372 571 419 571 q 269 458 283 571 q 264 359 264 422 q 290 205 264 248 q 374 163 317 163 z "},"d":{"ha":781,"x_min":35,"x_max":715,"o":"m 35 372 q 111 647 35 547 q 321 747 186 747 q 486 670 419 747 l 486 1042 l 715 1042 l 715 0 l 510 0 l 498 79 q 319 -14 428 -14 q 112 87 189 -14 q 35 372 35 187 m 264 358 q 378 163 264 163 q 486 227 454 163 l 486 506 q 379 571 455 571 q 264 400 273 571 l 264 358 z "},"e":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 z "},"f":{"ha":503,"x_min":8,"x_max":504,"o":"m 115 0 l 115 575 l 8 575 l 8 734 l 115 734 l 115 792 q 189 987 115 918 q 396 1056 262 1056 q 503 1042 445 1056 l 504 873 q 448 880 483 880 q 344 790 344 880 l 344 734 l 487 734 l 487 575 l 344 575 l 344 0 l 115 0 z "},"g":{"ha":799,"x_min":37,"x_max":733,"o":"m 37 372 q 74 569 37 484 q 179 701 111 654 q 338 747 248 747 q 517 670 453 747 l 526 734 l 733 734 l 733 28 q 688 -141 733 -69 q 557 -251 643 -212 q 359 -289 472 -289 q 203 -258 279 -289 q 87 -179 127 -228 l 183 -45 q 351 -120 247 -120 q 503 36 503 -120 l 503 59 q 337 -14 437 -14 q 120 89 203 -14 q 37 364 37 192 l 37 372 m 267 358 q 300 215 267 268 q 395 163 334 163 q 503 212 469 163 l 503 521 q 397 571 470 571 q 301 516 336 571 q 267 358 267 462 z "},"h":{"ha":784,"x_min":59,"x_max":721,"o":"m 288 655 q 475 747 361 747 q 658 675 596 747 q 721 463 720 604 l 721 0 l 492 0 l 492 458 q 468 544 492 516 q 387 571 444 571 q 288 526 317 571 l 288 0 l 59 0 l 59 1042 l 288 1042 l 288 655 z "},"i":{"ha":382,"x_min":62,"x_max":316,"o":"m 305 0 l 76 0 l 76 734 l 305 734 l 305 0 m 62 923 q 98 1003 62 972 q 189 1034 133 1034 q 281 1003 245 1034 q 316 923 316 972 q 281 843 316 874 q 189 812 245 812 q 98 843 133 812 q 62 923 62 874 z "},"j":{"ha":375,"x_min":-79,"x_max":317,"o":"m 310 734 l 310 -25 q 235 -226 309 -155 q 29 -296 161 -296 q -79 -285 -28 -296 l -79 -112 q -14 -118 -39 -118 q 81 -24 81 -118 l 81 734 l 310 734 m 64 923 q 99 1003 64 972 q 191 1034 134 1034 q 282 1003 247 1034 q 317 923 317 972 q 282 843 317 874 q 191 812 247 812 q 99 843 134 812 q 64 923 64 874 z "},"k":{"ha":760,"x_min":66,"x_max":781,"o":"m 359 273 l 294 209 l 294 0 l 66 0 l 66 1042 l 294 1042 l 294 489 l 317 519 l 490 734 l 764 734 l 507 432 l 781 0 l 519 0 l 359 273 z "},"l":{"ha":382,"x_min":76,"x_max":305,"o":"m 305 0 l 76 0 l 76 1042 l 305 1042 l 305 0 z "},"m":{"ha":1196,"x_min":66,"x_max":1130,"o":"m 280 734 l 288 648 q 497 747 366 747 q 685 637 636 747 q 901 747 760 747 q 1130 477 1124 747 l 1130 0 l 901 0 l 901 463 q 882 545 901 519 q 812 571 863 571 q 711 511 745 571 l 712 501 l 712 0 l 483 0 l 483 462 q 465 545 483 519 q 395 571 446 571 q 294 511 329 571 l 294 0 l 66 0 l 66 734 l 280 734 z "},"n":{"ha":783,"x_min":60,"x_max":721,"o":"m 274 734 l 281 648 q 491 747 357 747 q 662 679 606 747 q 721 473 719 610 l 721 0 l 492 0 l 492 463 q 469 545 492 519 q 388 571 447 571 q 288 518 321 571 l 288 0 l 60 0 l 60 734 l 274 734 z "},"o":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 z "},"p":{"ha":782,"x_min":66,"x_max":745,"o":"m 745 361 q 668 89 745 191 q 460 -14 591 -14 q 294 60 359 -14 l 294 -282 l 66 -282 l 66 734 l 279 734 l 286 666 q 459 747 352 747 q 670 647 595 747 q 745 372 745 547 l 745 361 m 517 376 q 403 571 517 571 q 294 513 321 571 l 294 224 q 404 163 324 163 q 517 351 513 163 l 517 376 z "},"q":{"ha":781,"x_min":35,"x_max":715,"o":"m 35 374 q 111 648 35 549 q 321 747 187 747 q 501 655 433 747 l 517 734 l 715 734 l 715 -282 l 486 -282 l 486 61 q 319 -14 420 -14 q 112 87 189 -14 q 35 374 35 188 m 264 360 q 378 163 264 163 q 486 222 456 163 l 486 513 q 379 571 458 571 q 264 401 273 571 l 264 360 z "},"r":{"ha":526,"x_min":66,"x_max":512,"o":"m 508 527 l 433 532 q 294 465 325 532 l 294 0 l 66 0 l 66 734 l 280 734 l 288 640 q 448 747 345 747 q 512 739 485 747 l 508 527 z "},"s":{"ha":711,"x_min":24,"x_max":670,"o":"m 448 206 q 418 253 448 235 q 302 290 387 271 q 161 339 216 309 q 76 414 105 370 q 47 515 47 458 q 130 682 47 616 q 349 747 214 747 q 582 682 494 747 q 670 509 670 616 l 441 509 q 348 597 441 597 q 288 577 312 597 q 263 527 263 557 q 293 477 263 496 q 388 446 323 458 q 503 417 454 434 q 669 213 669 360 q 579 50 669 113 q 349 -14 490 -14 q 180 20 254 -14 q 65 113 106 54 q 24 235 24 171 l 237 235 q 271 161 239 184 q 355 138 304 138 q 425 157 401 138 q 448 206 448 176 z "},"t":{"ha":477,"x_min":8,"x_max":461,"o":"m 330 916 l 330 734 l 451 734 l 451 575 l 330 575 l 330 239 q 345 182 330 198 q 404 165 360 165 q 461 170 438 165 l 461 6 q 332 -14 399 -14 q 158 42 214 -14 q 102 211 102 98 l 102 575 l 8 575 l 8 734 l 102 734 l 102 916 l 330 916 z "},"u":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 z "},"v":{"ha":718,"x_min":1,"x_max":713,"o":"m 357 272 l 473 734 l 713 734 l 474 0 l 241 0 l 1 734 l 243 734 l 357 272 z "},"w":{"ha":1008,"x_min":15,"x_max":991,"o":"m 698 301 l 772 734 l 991 734 l 818 0 l 625 0 l 503 435 l 381 0 l 188 0 l 15 734 l 234 734 l 307 291 l 423 734 l 583 734 l 698 301 z "},"x":{"ha":715,"x_min":7,"x_max":715,"o":"m 361 532 l 468 734 l 705 734 l 512 376 l 715 0 l 476 0 l 361 217 l 248 0 l 7 0 l 211 376 l 18 734 l 258 734 l 361 532 z "},"y":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 z "},"z":{"ha":715,"x_min":45,"x_max":668,"o":"m 334 176 l 668 176 l 668 0 l 45 0 l 45 127 l 370 557 l 59 557 l 59 734 l 661 734 l 661 610 l 334 176 z "},"{":{"ha":451,"x_min":27,"x_max":424,"o":"m 381 -244 q 137 71 137 -176 l 137 205 q 27 342 137 342 l 27 496 q 137 634 137 496 l 137 777 q 200 974 139 899 q 381 1083 262 1049 l 424 964 q 335 781 338 931 l 335 634 q 210 420 335 482 q 335 205 335 357 l 335 58 q 424 -124 338 -92 l 381 -244 z "},"|":{"ha":355,"x_min":117,"x_max":241,"o":"m 241 -183 l 117 -183 l 117 987 l 241 987 l 241 -183 z "},"}":{"ha":451,"x_min":28,"x_max":425,"o":"m 28 -124 q 117 58 113 -92 l 117 205 q 243 420 117 358 q 117 634 117 481 l 117 781 q 28 964 113 931 l 71 1083 q 253 972 192 1049 q 315 770 314 895 l 315 634 q 425 496 315 496 l 425 342 q 315 206 315 342 l 315 62 q 71 -244 310 -177 l 28 -124 z "},"~":{"ha":878,"x_min":64,"x_max":812,"o":"m 812 542 q 750 329 812 409 q 585 249 688 249 q 493 269 534 249 q 400 339 452 288 q 304 391 349 391 q 248 357 271 391 q 225 275 225 324 l 64 277 q 124 489 64 410 q 289 567 185 567 q 383 547 340 567 q 476 476 426 527 q 570 426 527 426 q 626 459 604 426 q 648 543 648 493 l 812 542 z "},"\xa1":{"ha":417,"x_min":83,"x_max":337,"o":"m 116 422 l 301 422 l 330 -252 l 87 -252 l 116 422 m 337 633 q 301 550 337 583 q 210 518 264 518 q 120 550 156 518 q 83 633 83 583 q 120 715 83 683 q 210 747 156 747 q 301 715 264 747 q 337 633 337 683 z "},"\xa2":{"ha":820,"x_min":66,"x_max":720,"o":"m 406 163 q 480 189 454 163 q 506 262 507 215 l 720 262 q 654 84 720 156 q 481 -7 589 12 l 481 -166 l 346 -166 l 346 -9 q 141 107 215 10 q 66 362 66 205 l 66 374 q 140 625 66 526 q 346 743 214 724 l 346 894 l 481 894 l 481 741 q 657 645 593 722 q 720 453 720 569 l 506 453 q 478 541 506 510 q 404 571 450 571 q 300 458 315 571 q 295 359 295 422 q 321 205 295 248 q 406 163 348 163 z "},"\xa3":{"ha":833,"x_min":70,"x_max":800,"o":"m 421 380 l 425 304 q 385 183 425 227 l 797 183 l 797 0 l 72 0 l 72 183 l 142 183 q 182 253 180 193 l 183 289 l 180 380 l 70 380 l 70 557 l 174 557 l 170 705 q 253 922 170 844 q 478 1000 336 1000 q 715 922 630 1000 q 800 711 800 844 l 576 711 q 484 817 576 817 q 429 790 450 817 q 408 705 408 762 l 414 557 l 622 557 l 622 380 l 421 380 z "},"\xa4":{"ha":947,"x_min":47,"x_max":905,"o":"m 720 73 q 475 -14 612 -14 q 230 72 337 -14 l 142 -18 l 47 80 l 138 173 q 71 412 71 279 q 144 660 71 551 l 47 760 l 142 857 l 239 759 q 475 837 344 837 q 711 758 606 837 l 809 858 l 905 760 l 805 657 q 878 412 878 549 q 811 176 878 281 l 905 80 l 809 -18 l 720 73 m 197 412 q 233 264 197 332 q 334 157 270 196 q 475 117 399 117 q 614 157 550 117 q 715 264 679 196 q 752 412 752 332 q 715 561 752 493 q 614 668 678 629 q 475 707 550 707 q 335 668 399 707 q 234 561 271 629 q 197 412 197 493 z "},"\xa5":{"ha":751,"x_min":6,"x_max":745,"o":"m 376 635 l 503 987 l 745 987 l 537 503 l 676 503 l 676 374 l 492 374 l 492 307 l 676 307 l 676 178 l 492 178 l 492 0 l 254 0 l 254 178 l 49 178 l 49 307 l 254 307 l 254 374 l 49 374 l 49 503 l 214 503 l 6 987 l 249 987 l 376 635 z "},"\xa6":{"ha":355,"x_min":81,"x_max":279,"o":"m 81 -183 l 81 356 l 279 356 l 279 -183 l 81 -183 m 279 473 l 81 473 l 81 987 l 279 987 l 279 473 z "},"\xa7":{"ha":882,"x_min":64,"x_max":811,"o":"m 811 339 q 706 157 811 219 q 800 -41 800 87 q 704 -229 800 -161 q 439 -296 608 -296 q 161 -224 258 -296 q 64 -17 64 -151 l 293 -17 q 327 -94 293 -68 q 439 -119 361 -119 q 570 -42 570 -119 q 531 22 570 -3 q 371 80 492 46 q 188 151 250 114 q 95 238 126 188 q 64 358 64 289 q 170 541 64 477 q 75 739 75 613 q 173 929 75 857 q 437 1001 271 1001 q 702 925 606 1001 q 798 713 798 849 l 569 713 q 534 794 569 764 q 437 825 499 825 q 338 802 372 825 q 304 741 304 780 q 342 673 304 696 q 479 624 380 650 q 637 574 578 599 q 733 515 695 549 q 791 439 772 482 q 811 339 811 396 m 405 442 q 326 467 363 453 q 292 385 292 439 q 322 315 292 339 q 468 255 353 291 l 548 232 q 586 313 586 262 q 549 382 586 355 q 405 442 511 409 z "},"\xa8":{"ha":687,"x_min":64,"x_max":621,"o":"m 64 926 q 94 989 64 963 q 167 1016 123 1016 q 240 989 210 1016 q 269 926 269 963 q 240 862 269 888 q 167 836 210 836 q 94 862 123 836 q 64 926 64 888 m 416 926 q 446 989 416 963 q 519 1016 475 1016 q 592 989 562 1016 q 621 926 621 963 q 592 862 621 888 q 519 836 562 836 q 446 862 475 836 q 416 926 416 888 z "},"\xa9":{"ha":1090,"x_min":58,"x_max":1021,"o":"m 757 404 q 697 246 757 301 q 530 191 638 191 q 357 263 421 191 q 293 458 293 336 l 293 534 q 358 725 293 652 q 530 797 422 797 q 699 741 640 797 q 758 584 758 685 l 652 584 q 621 677 652 649 q 530 705 589 705 q 433 660 467 705 q 398 537 399 614 l 398 454 q 433 329 398 374 q 530 283 467 283 q 621 310 590 283 q 651 404 651 338 l 757 404 m 140 494 q 191 286 140 382 q 334 130 241 189 q 539 71 427 71 q 743 130 650 71 q 886 285 836 188 q 937 494 937 382 q 886 704 937 607 q 743 858 836 800 q 539 916 650 916 q 339 861 431 916 q 193 707 246 805 q 140 494 140 610 m 58 494 q 121 749 58 631 q 297 933 184 866 q 539 1001 409 1001 q 782 933 669 1001 q 957 749 894 866 q 1021 494 1021 631 q 956 238 1021 356 q 780 54 892 121 q 539 -14 669 -14 q 297 54 408 -14 q 121 239 185 122 q 58 494 58 357 z "},"\xaa":{"ha":613,"x_min":90,"x_max":527,"o":"m 407 478 q 395 524 400 496 q 259 469 343 469 q 135 510 179 469 q 90 623 90 552 q 147 739 90 698 q 321 780 204 780 l 391 780 l 391 814 q 312 901 391 901 q 243 883 268 901 q 218 833 218 866 l 101 843 q 160 957 101 913 q 312 1001 220 1001 q 456 952 404 1001 q 509 813 509 903 l 509 599 q 527 478 509 533 l 407 478 m 288 566 q 344 579 315 566 q 391 608 372 591 l 391 701 l 319 701 q 238 680 267 700 q 209 626 209 659 q 288 566 209 566 z "},"\xab":{"ha":715,"x_min":44,"x_max":648,"o":"m 211 349 l 368 79 l 229 79 l 44 343 l 44 356 l 229 621 l 368 621 l 211 349 m 491 349 l 648 79 l 509 79 l 324 343 l 324 356 l 509 621 l 648 621 l 491 349 z "},"\xac":{"ha":762,"x_min":85,"x_max":651,"o":"m 651 254 l 515 254 l 515 430 l 85 430 l 85 546 l 651 546 l 651 254 z "},"\xae":{"ha":1090,"x_min":58,"x_max":1021,"o":"m 58 494 q 121 749 58 631 q 297 933 184 866 q 539 1001 409 1001 q 782 933 669 1001 q 957 749 894 866 q 1021 494 1021 631 q 956 238 1021 356 q 780 54 892 121 q 539 -14 669 -14 q 297 54 408 -14 q 121 239 185 122 q 58 494 58 357 m 140 494 q 191 286 140 382 q 334 130 241 189 q 539 71 427 71 q 743 130 650 71 q 886 285 836 188 q 937 494 937 382 q 886 704 937 607 q 743 858 836 800 q 539 916 650 916 q 339 861 431 916 q 193 707 246 805 q 140 494 140 610 m 441 443 l 441 214 l 339 214 l 339 791 l 530 791 q 692 743 634 791 q 750 612 750 696 q 677 496 750 537 q 732 437 717 475 q 748 343 748 399 q 750 264 748 287 q 760 225 753 241 l 760 214 l 654 214 q 646 346 646 237 q 623 420 646 397 q 549 443 601 443 l 441 443 m 441 534 l 528 534 q 614 555 580 534 q 648 612 648 576 q 624 680 648 660 q 537 701 600 700 l 441 701 l 441 534 z "},"\xaf":{"ha":722,"x_min":123,"x_max":593,"o":"m 593 871 l 123 871 l 123 989 l 593 989 l 593 871 z "},"\xb0":{"ha":551,"x_min":85,"x_max":462,"o":"m 85 810 q 141 945 85 890 q 275 1001 198 1001 q 407 945 351 1001 q 462 810 462 890 q 407 677 462 732 q 275 623 353 623 q 141 677 197 623 q 85 810 85 732 m 275 726 q 334 751 311 726 q 357 810 357 775 q 334 871 357 846 q 275 897 311 897 q 215 872 239 897 q 190 810 190 846 q 215 750 190 774 q 275 726 241 726 z "},"\xb1":{"ha":747,"x_min":57,"x_max":678,"o":"m 467 661 l 678 661 l 678 477 l 467 477 l 467 241 l 267 241 l 267 477 l 57 477 l 57 661 l 267 661 l 267 877 l 467 877 l 467 661 m 664 1 l 68 1 l 68 180 l 664 180 l 664 1 z "},"\xb2":{"ha":521,"x_min":35,"x_max":473,"o":"m 473 452 l 47 452 l 47 552 l 241 724 q 291 782 275 753 q 308 825 308 811 q 250 876 308 876 q 204 856 221 876 q 187 806 187 836 l 35 806 q 93 941 35 886 q 243 996 151 996 q 404 951 347 996 q 460 825 460 907 q 431 731 460 774 q 304 617 402 689 l 249 571 l 473 571 l 473 452 z "},"\xb3":{"ha":521,"x_min":28,"x_max":479,"o":"m 188 774 l 248 774 q 316 829 316 774 q 299 864 316 851 q 251 876 281 876 q 209 867 227 876 q 191 842 191 859 l 39 842 q 96 953 39 911 q 246 996 154 996 q 409 954 351 996 q 468 842 468 912 q 374 727 468 760 q 479 603 479 699 q 415 489 479 532 q 246 445 351 445 q 88 492 148 445 q 28 616 28 538 l 182 616 q 202 580 182 596 q 257 564 222 564 q 310 581 295 564 q 326 619 326 598 q 252 677 326 677 l 188 677 l 188 774 z "},"\xb4":{"ha":469,"x_min":61,"x_max":436,"o":"m 195 1042 l 436 1042 l 248 829 l 61 829 l 195 1042 z "},"\xb5":{"ha":890,"x_min":90,"x_max":781,"o":"m 319 734 l 319 305 q 343 199 319 233 q 429 165 368 165 q 552 227 516 165 l 552 734 l 781 734 l 781 0 l 566 0 l 562 36 q 420 -14 502 -14 q 319 9 362 -14 l 319 -282 l 90 -282 l 90 734 l 319 734 z "},"\xb6":{"ha":679,"x_min":56,"x_max":601,"o":"m 446 0 l 446 353 l 391 353 q 145 439 235 353 q 56 670 56 525 q 146 901 56 814 q 392 987 236 987 l 601 987 l 601 0 l 446 0 z "},"\xb7":{"ha":446,"x_min":94,"x_max":346,"o":"m 220 579 q 310 547 275 579 q 346 465 346 514 q 310 382 346 415 q 220 350 275 350 q 130 382 165 350 q 94 465 94 414 q 130 547 94 515 q 220 579 165 579 z "},"\xb8":{"ha":386,"x_min":58,"x_max":348,"o":"m 253 7 l 246 -35 q 348 -152 348 -54 q 281 -275 348 -231 q 94 -320 214 -320 l 90 -194 q 149 -142 149 -194 q 128 -106 149 -116 q 58 -92 106 -96 l 79 7 l 253 7 z "},"\xb9":{"ha":521,"x_min":97,"x_max":368,"o":"m 368 452 l 216 452 l 216 814 l 97 789 l 97 903 l 355 985 l 368 985 l 368 452 z "},"\xba":{"ha":636,"x_min":79,"x_max":549,"o":"m 79 760 q 144 935 79 869 q 314 1001 209 1001 q 484 935 419 1001 q 549 757 549 869 l 549 708 q 486 534 549 600 q 315 468 422 468 q 144 534 208 468 q 79 711 79 601 l 79 760 m 198 708 q 230 604 198 642 q 315 567 261 567 q 399 604 368 567 q 431 706 430 640 l 431 760 q 399 863 431 826 q 314 901 368 901 q 230 864 261 901 q 198 758 198 827 l 198 708 z "},"\xbb":{"ha":715,"x_min":52,"x_max":657,"o":"m 193 620 l 377 355 l 377 342 l 193 78 l 52 78 l 210 349 l 52 620 l 193 620 m 473 620 l 657 355 l 657 342 l 473 78 l 332 78 l 490 349 l 332 620 l 473 620 z "},"\xbc":{"ha":985,"x_min":77,"x_max":927,"o":"m 347 450 l 196 450 l 196 812 l 77 787 l 77 901 l 334 983 l 347 983 l 347 450 m 313 79 l 207 133 l 689 905 l 795 851 l 313 79 m 873 227 l 927 227 l 927 106 l 873 106 l 873 0 l 721 0 l 721 106 l 495 106 l 485 205 l 721 535 l 873 535 l 873 227 m 627 227 l 721 227 l 721 357 l 710 341 l 627 227 z "},"\xbd":{"ha":1042,"x_min":60,"x_max":997,"o":"m 286 79 l 180 133 l 662 905 l 768 851 l 286 79 m 331 456 l 180 456 l 180 817 l 60 793 l 60 906 l 318 989 l 331 989 l 331 456 m 997 0 l 571 0 l 571 100 l 765 271 q 815 330 799 301 q 832 372 832 359 q 774 424 832 424 q 728 404 745 424 q 711 354 711 383 l 559 354 q 617 489 559 434 q 767 543 675 543 q 928 499 871 543 q 984 372 984 455 q 955 279 984 321 q 828 165 926 237 l 773 119 l 997 119 l 997 0 z "},"\xbe":{"ha":1145,"x_min":58,"x_max":1061,"o":"m 437 79 l 330 133 l 812 905 l 919 851 l 437 79 m 1008 227 l 1061 227 l 1061 106 l 1008 106 l 1008 0 l 855 0 l 855 106 l 629 106 l 619 205 l 855 535 l 1008 535 l 1008 227 m 762 227 l 855 227 l 855 357 l 844 341 l 762 227 m 218 774 l 277 774 q 346 829 346 774 q 329 864 346 851 q 281 876 311 876 q 239 867 257 876 q 220 842 220 859 l 68 842 q 126 953 68 911 q 276 996 184 996 q 439 954 380 996 q 498 842 498 912 q 404 727 498 760 q 509 603 509 699 q 445 489 509 532 q 276 445 381 445 q 118 492 178 445 q 58 616 58 538 l 212 616 q 232 580 212 596 q 287 564 252 564 q 340 581 325 564 q 355 619 355 598 q 281 677 355 677 l 218 677 l 218 774 z "},"\xbf":{"ha":707,"x_min":50,"x_max":688,"o":"m 477 427 q 456 271 477 326 q 387 175 435 216 l 342 134 q 279 7 279 73 q 301 -63 279 -41 q 360 -85 324 -85 q 431 -56 406 -85 q 458 26 456 -27 l 688 26 q 601 -186 685 -111 q 366 -261 517 -261 q 132 -191 214 -261 q 50 7 50 -121 q 75 114 50 64 q 163 222 101 163 l 221 275 q 279 378 273 319 l 283 427 l 477 427 m 386 519 q 295 551 332 519 q 259 633 259 583 q 295 716 259 684 q 386 748 332 748 q 477 715 441 748 q 513 633 513 682 q 477 552 513 585 q 386 519 441 519 z "},"\xc6":{"ha":1306,"x_min":11,"x_max":1255,"o":"m 1255 0 l 647 0 l 637 223 l 378 223 l 275 0 l 11 0 l 509 987 l 1214 987 l 1214 808 l 842 808 l 850 594 l 1159 594 l 1159 415 l 858 415 l 868 179 l 1255 179 l 1255 0 m 463 406 l 630 406 l 616 736 l 463 406 z "},"\xd7":{"ha":734,"x_min":36,"x_max":695,"o":"m 36 258 l 239 465 l 36 673 l 167 797 l 366 594 l 564 797 l 695 673 l 492 465 l 695 258 l 564 134 l 366 336 l 167 134 l 36 258 z "},"\xd8":{"ha":956,"x_min":55,"x_max":918,"o":"m 918 473 q 865 218 918 329 q 712 46 811 106 q 488 -14 614 -14 q 290 31 378 -14 l 235 -64 l 94 -64 l 190 102 q 55 479 55 237 l 55 513 q 108 770 55 659 q 260 941 161 880 q 486 1001 359 1001 q 681 958 593 1001 l 722 1029 l 863 1029 l 781 886 q 918 508 918 751 l 918 473 m 676 515 q 656 670 676 605 l 388 203 q 488 172 429 172 q 627 249 578 172 q 676 469 675 326 l 676 515 m 296 473 q 315 319 296 383 l 582 785 q 486 814 541 814 q 345 739 392 814 q 296 519 297 664 l 296 473 z "},"\xde":{"ha":859,"x_min":79,"x_max":823,"o":"m 309 987 l 309 812 l 448 812 q 649 773 564 812 q 779 664 734 734 q 823 500 823 593 q 723 274 823 359 q 448 189 622 190 l 309 189 l 309 0 l 79 0 l 79 987 l 309 987 m 309 636 l 309 365 l 443 365 q 553 400 513 365 q 593 499 593 435 q 553 600 593 564 q 444 636 513 636 l 309 636 z "},"\xdf":{"ha":902,"x_min":91,"x_max":862,"o":"m 320 0 l 91 0 l 91 745 q 181 977 91 895 q 439 1059 272 1059 q 656 988 572 1059 q 739 801 739 918 q 707 677 739 728 q 675 566 675 625 q 691 523 675 545 q 765 445 708 500 q 862 250 862 351 q 778 55 862 123 q 538 -14 693 -14 q 436 -4 488 -14 q 357 21 385 5 l 397 193 q 540 163 454 163 q 607 185 581 163 q 634 248 634 207 q 617 300 634 275 q 546 371 600 324 q 469 461 492 418 q 446 554 446 504 q 478 681 446 624 q 510 791 510 738 q 483 857 510 831 q 414 883 456 883 q 342 848 364 883 q 320 742 320 812 l 320 0 z "},"\xe6":{"ha":1173,"x_min":41,"x_max":1143,"o":"m 840 -14 q 582 77 677 -14 q 471 9 537 33 q 328 -14 404 -14 q 117 48 193 -14 q 41 220 41 111 q 129 385 41 327 q 390 444 217 444 l 486 444 l 486 475 q 463 546 486 520 q 396 571 440 571 q 321 551 347 571 q 296 502 296 531 l 67 515 q 158 682 67 617 q 399 747 249 747 q 615 686 536 747 q 832 747 701 749 q 1059 657 976 747 q 1143 413 1143 567 l 1143 295 l 709 295 q 760 196 719 229 q 871 163 802 163 q 1022 190 956 163 l 1064 208 l 1119 68 q 996 10 1074 33 q 840 -14 918 -14 m 372 144 q 486 186 432 144 l 486 306 l 392 306 q 304 281 339 305 q 270 217 270 256 q 372 144 270 144 m 832 571 q 747 538 777 571 q 710 438 718 505 l 920 438 l 920 456 q 897 541 920 511 q 832 571 875 571 z "},"\xf0":{"ha":790,"x_min":43,"x_max":762,"o":"m 585 887 q 762 441 762 711 l 762 402 q 714 186 762 282 q 582 38 666 90 q 394 -14 498 -14 q 213 30 294 -14 q 88 149 132 73 q 43 317 43 225 q 125 564 43 475 q 351 652 206 652 q 506 610 437 652 q 400 773 473 704 l 279 699 l 227 779 l 319 836 q 153 905 245 880 l 227 1071 q 508 951 387 1038 l 618 1020 l 671 940 l 585 887 m 397 163 q 496 219 460 163 q 532 378 532 275 l 532 444 q 401 488 488 488 q 303 443 334 488 q 273 317 273 397 q 307 205 273 248 q 397 163 340 163 z "},"\xf7":{"ha":791,"x_min":40,"x_max":748,"o":"m 748 382 l 40 382 l 40 547 l 748 547 l 748 382 m 267 736 q 302 816 267 785 q 393 848 336 848 q 485 816 450 848 q 519 736 519 785 q 485 657 519 688 q 393 625 450 625 q 302 657 336 625 q 267 736 267 688 m 267 188 q 302 268 267 236 q 393 299 336 299 q 485 268 450 299 q 519 188 519 236 q 485 108 519 140 q 393 77 450 77 q 302 108 336 77 q 267 188 267 140 z "},"\xf8":{"ha":781,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 509 730 452 747 l 555 827 l 675 827 l 606 683 q 743 359 743 583 q 648 87 743 188 q 390 -14 553 -14 q 274 1 327 -14 l 226 -98 l 106 -98 l 176 47 q 35 374 35 147 m 264 359 q 276 253 264 294 l 428 565 q 389 571 410 571 q 264 401 274 571 l 264 359 m 515 374 q 503 473 515 431 l 355 167 q 390 163 370 163 q 515 351 512 163 l 515 374 z "},"\xfe":{"ha":779,"x_min":64,"x_max":743,"o":"m 743 361 q 667 89 743 191 q 459 -14 591 -14 q 294 59 357 -14 l 294 -282 l 64 -282 l 64 1042 l 294 1042 l 294 676 q 458 747 357 747 q 667 649 591 747 q 743 373 743 550 l 743 361 m 515 376 q 401 571 515 571 q 294 514 322 571 l 294 222 q 402 163 323 163 q 515 350 511 163 l 515 376 z "},"\u0111":{"ha":896,"x_min":35,"x_max":810,"o":"m 810 824 l 715 824 l 715 0 l 510 0 l 498 79 q 319 -14 428 -14 q 112 87 189 -14 q 35 372 35 187 q 111 647 35 547 q 321 747 186 747 q 486 670 419 747 l 486 824 l 315 824 l 315 954 l 486 954 l 486 1042 l 715 1042 l 715 954 l 810 954 l 810 824 m 264 358 q 378 163 264 163 q 486 227 454 163 l 486 506 q 379 571 455 571 q 264 400 273 571 l 264 358 z "},"\u0126":{"ha":1012,"x_min":22,"x_max":996,"o":"m 917 843 l 996 843 l 996 719 l 917 719 l 917 0 l 680 0 l 680 412 l 330 412 l 330 0 l 92 0 l 92 719 l 22 719 l 22 843 l 92 843 l 92 987 l 330 987 l 330 843 l 680 843 l 680 987 l 917 987 l 917 843 m 330 595 l 680 595 l 680 719 l 330 719 l 330 595 z "},"\u0131":{"ha":396,"x_min":83,"x_max":313,"o":"m 313 0 l 83 0 l 83 734 l 313 734 l 313 0 z "},"\u0138":{"ha":842,"x_min":80,"x_max":821,"o":"m 390 256 l 309 256 l 309 0 l 80 0 l 80 734 l 309 734 l 309 470 l 370 470 l 522 734 l 815 734 l 583 391 l 821 0 l 526 0 l 390 256 z "},"\u0141":{"ha":787,"x_min":17,"x_max":762,"o":"m 347 620 l 479 656 l 479 535 l 347 499 l 347 183 l 762 183 l 762 0 l 109 0 l 109 433 l 17 408 l 17 529 l 109 554 l 109 987 l 347 987 l 347 620 z "},"\u0142":{"ha":449,"x_min":18,"x_max":427,"o":"m 335 627 l 427 656 l 427 534 l 335 505 l 335 0 l 106 0 l 106 434 l 18 407 l 18 529 l 106 556 l 106 1042 l 335 1042 l 335 627 z "},"\u014a":{"ha":985,"x_min":77,"x_max":907,"o":"m 907 987 l 907 -3 q 832 -220 907 -144 q 624 -296 758 -296 q 512 -285 564 -296 l 522 -105 q 590 -113 554 -113 q 669 0 669 -113 l 314 615 l 314 0 l 77 0 l 77 987 l 314 987 l 669 373 l 669 987 l 907 987 z "},"\u014b":{"ha":781,"x_min":61,"x_max":722,"o":"m 276 734 l 285 629 q 492 747 363 747 q 662 673 605 747 q 722 452 720 598 l 722 -10 q 649 -222 722 -147 q 444 -296 576 -296 q 336 -285 385 -296 l 345 -112 q 413 -120 379 -120 q 492 -8 492 -120 l 492 442 q 472 539 492 508 q 405 571 451 571 q 290 521 331 571 l 290 0 l 61 0 l 61 734 l 276 734 z "},"\u0152":{"ha":1352,"x_min":62,"x_max":1302,"o":"m 1301 0 l 685 0 q 490 -14 572 -14 q 268 37 366 -14 q 116 181 170 88 q 62 390 62 273 l 62 597 q 116 807 62 714 q 267 950 170 900 q 488 1001 365 1001 q 685 987 572 1001 l 1302 987 l 1302 804 l 859 804 l 859 595 l 1233 595 l 1233 418 l 859 418 l 859 183 l 1301 183 l 1301 0 m 490 163 q 621 171 558 163 l 621 816 q 488 825 551 825 q 344 768 397 825 q 292 598 292 712 l 292 391 q 345 220 292 277 q 490 163 398 163 z "},"\u0153":{"ha":1251,"x_min":51,"x_max":1196,"o":"m 51 374 q 94 570 51 485 q 217 701 137 655 q 405 747 297 747 q 647 663 553 747 q 878 747 736 749 q 1112 658 1027 747 q 1196 412 1196 569 l 1196 295 l 772 295 q 824 197 784 232 q 926 163 865 163 q 1076 187 1012 163 l 1128 208 l 1182 68 q 1056 9 1134 33 q 895 -14 979 -14 q 651 73 748 -14 q 406 -14 557 -14 q 154 80 250 -14 q 52 335 59 174 l 51 374 m 279 359 q 406 163 279 163 q 532 349 528 163 l 532 374 q 405 571 532 571 q 280 401 290 571 l 279 359 m 878 571 q 771 438 787 571 l 973 438 l 973 456 q 878 571 973 571 z "},"\u017f":{"ha":366,"x_min":64,"x_max":467,"o":"m 64 0 l 64 792 q 139 987 64 919 q 354 1056 214 1056 q 467 1042 399 1056 l 451 873 q 382 880 418 880 q 293 790 293 880 l 293 0 l 64 0 z "},"\u018f":{"ha":970,"x_min":47,"x_max":911,"o":"m 479 -14 q 160 110 274 -14 q 47 459 47 234 l 47 574 l 673 574 q 601 743 666 686 q 416 800 536 800 q 142 761 271 800 l 109 952 q 249 985 151 969 q 432 1002 347 1002 q 783 881 655 1002 q 911 545 911 760 l 911 434 q 856 204 911 307 q 701 44 800 102 q 479 -14 601 -14 m 479 187 q 608 239 558 187 q 671 387 659 290 l 283 387 l 283 366 q 334 235 283 282 q 479 187 384 187 z "},"\u0192":{"ha":514,"x_min":-28,"x_max":517,"o":"m 488 575 l 343 575 l 342 -26 q 273 -225 341 -155 q 80 -296 205 -296 q -28 -285 20 -296 l -18 -112 q 41 -120 6 -120 q 97 -99 81 -120 q 113 -26 113 -78 l 113 575 l 7 575 l 7 734 l 113 734 l 113 792 q 189 987 113 919 q 404 1056 264 1056 q 517 1042 450 1056 l 500 873 q 432 880 469 880 q 343 790 343 880 l 343 734 l 488 734 l 488 575 z "},"\u01a0":{"ha":986,"x_min":49,"x_max":1006,"o":"m 913 473 q 859 217 913 328 q 706 46 805 106 q 481 -14 608 -14 q 258 45 355 -14 q 105 212 160 103 q 49 461 51 320 l 49 513 q 102 770 49 659 q 254 941 155 880 q 480 1001 353 1001 q 658 966 577 1001 q 797 864 739 930 q 851 920 833 877 q 868 1055 868 963 l 1006 1055 q 861 764 1006 818 q 913 516 912 656 l 913 473 m 671 515 q 621 738 671 662 q 480 814 572 814 q 292 546 302 814 l 291 473 q 339 250 291 328 q 481 172 387 172 q 621 249 572 172 q 671 469 670 326 l 671 515 z "},"\u01a1":{"ha":812,"x_min":34,"x_max":815,"o":"m 34 374 q 77 569 34 484 q 199 701 119 655 q 387 747 279 747 q 648 644 554 747 q 690 798 690 684 l 815 798 q 703 562 815 622 q 742 359 742 477 q 647 87 742 188 q 389 -14 551 -14 q 137 80 231 -14 q 35 335 42 174 l 34 374 m 262 359 q 294 210 262 258 q 389 163 326 163 q 513 351 511 163 l 513 374 q 387 571 513 571 q 263 401 273 571 l 262 359 z "},"\u01af":{"ha":1000,"x_min":71,"x_max":1115,"o":"m 849 987 l 849 830 q 926 852 899 833 q 964 906 953 871 q 976 1042 976 941 l 1115 1042 q 1051 798 1115 871 q 849 719 987 724 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 z "},"\u01b0":{"ha":835,"x_min":60,"x_max":915,"o":"m 915 801 q 868 618 915 679 q 722 541 821 557 l 722 0 l 508 0 l 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 644 q 775 693 760 659 q 791 801 791 728 l 915 801 z "},"\u0237":{"ha":410,"x_min":-62,"x_max":323,"o":"m 323 734 l 323 -9 q 250 -222 323 -147 q 45 -296 176 -296 q -62 -285 -13 -296 l -52 -112 q 14 -120 -18 -120 q 94 -7 94 -120 l 94 734 l 323 734 z "},"\u0259":{"ha":734,"x_min":45,"x_max":703,"o":"m 347 748 q 603 649 504 748 q 703 385 703 549 l 703 366 q 611 89 703 193 q 363 -13 520 -14 q 130 76 214 -13 q 45 323 45 165 l 45 439 l 469 439 q 417 536 457 501 q 315 572 377 572 q 165 547 229 572 l 113 526 l 59 666 q 185 725 107 702 q 347 748 262 748 m 363 163 q 470 296 454 163 l 268 296 l 268 279 q 363 163 268 163 z "},"\u02c6":{"ha":701,"x_min":66,"x_max":638,"o":"m 638 851 l 638 842 l 458 842 l 350 935 l 242 842 l 66 842 l 66 854 l 285 1042 l 416 1042 l 638 851 z "},"\u02c7":{"ha":668,"x_min":37,"x_max":628,"o":"m 334 951 l 433 1042 l 628 1042 l 628 1035 l 407 843 l 260 843 l 37 1036 l 37 1042 l 234 1042 l 334 951 z "},"\u02c9":{"ha":723,"x_min":123,"x_max":593,"o":"m 593 871 l 123 871 l 123 989 l 593 989 l 593 871 z "},"\u02d8":{"ha":629,"x_min":64,"x_max":566,"o":"m 566 1043 q 497 892 566 950 q 315 835 429 835 q 132 892 201 835 q 64 1043 64 950 l 219 1043 q 244 980 219 1002 q 315 957 270 957 q 384 979 359 957 q 409 1043 409 1001 l 566 1043 z "},"\u02d9":{"ha":382,"x_min":73,"x_max":297,"o":"m 73 935 q 104 1006 73 979 q 185 1034 136 1034 q 265 1006 233 1034 q 297 935 297 979 q 265 863 297 891 q 185 836 233 836 q 104 863 136 836 q 73 935 73 891 z "},"\u02da":{"ha":457,"x_min":80,"x_max":385,"o":"m 80 878 q 124 976 80 936 q 233 1015 169 1015 q 340 976 296 1015 q 385 878 385 936 q 341 781 385 820 q 233 743 297 743 q 124 781 168 743 q 80 878 80 820 m 233 807 q 284 827 265 807 q 302 878 302 848 q 284 928 302 907 q 233 949 265 949 q 181 928 199 949 q 162 878 162 907 q 181 827 162 848 q 233 807 199 807 z "},"\u02db":{"ha":437,"x_min":17,"x_max":294,"o":"m 279 0 q 204 -51 227 -26 q 181 -109 181 -75 q 222 -151 181 -151 q 269 -139 242 -151 l 294 -253 q 182 -283 245 -283 q 62 -243 107 -283 q 17 -138 17 -204 q 153 41 17 -20 l 279 0 z "},"\u02dc":{"ha":669,"x_min":76,"x_max":600,"o":"m 600 1039 q 555 908 600 962 q 444 854 510 854 q 344 882 399 854 q 255 911 289 911 q 218 896 233 911 q 203 850 203 881 l 76 857 q 121 987 76 932 q 232 1042 166 1042 q 321 1017 266 1042 q 390 989 376 992 q 421 985 405 985 q 458 1000 443 985 q 474 1046 474 1015 l 600 1039 z "},"\u02dd":{"ha":599,"x_min":27,"x_max":632,"o":"m 444 1041 l 632 1041 l 452 838 l 291 838 l 444 1041 m 161 1041 l 351 1041 l 190 838 l 27 838 l 161 1041 z "},"\u02f3":{"ha":453,"x_min":104,"x_max":366,"o":"m 104 -153 q 143 -69 104 -102 q 236 -35 182 -35 q 328 -69 290 -35 q 366 -153 366 -102 q 329 -235 366 -203 q 236 -268 292 -268 q 142 -235 180 -268 q 104 -153 104 -202 m 189 -153 q 202 -187 189 -174 q 236 -200 216 -200 q 268 -187 256 -200 q 280 -153 280 -174 q 268 -117 280 -131 q 236 -104 256 -104 q 202 -117 216 -104 q 189 -153 189 -131 z "},"\u0300":{"ha":0,"x_min":-617,"x_max":-241,"o":"m -241 829 l -426 829 l -617 1042 l -376 1042 l -241 829 z "},"\u0301":{"ha":0,"x_min":-468,"x_max":-93,"o":"m -334 1042 l -93 1042 l -281 829 l -468 829 l -334 1042 z "},"\u0303":{"ha":0,"x_min":-641,"x_max":-117,"o":"m -117 1039 q -162 908 -117 962 q -273 854 -207 854 q -373 882 -318 854 q -462 911 -428 911 q -499 896 -484 911 q -514 850 -514 881 l -641 857 q -596 987 -641 932 q -485 1042 -551 1042 q -396 1017 -451 1042 q -327 989 -341 992 q -296 985 -312 985 q -258 1000 -274 985 q -243 1046 -243 1015 l -117 1039 z "},"\u0309":{"ha":0,"x_min":-524,"x_max":-233,"o":"m -509 865 l -524 951 q -431 994 -431 955 q -522 1038 -431 1038 l -517 1137 q -304 1101 -376 1137 q -233 1003 -233 1066 q -260 940 -233 965 q -334 907 -287 914 l -334 865 l -509 865 z "},"\u030f":{"ha":0,"x_min":-725,"x_max":-91,"o":"m -349 849 l -532 849 l -725 1029 l -515 1029 l -349 849 m -91 849 l -277 849 l -443 1029 l -231 1029 l -91 849 z "},"\u0323":{"ha":0,"x_min":-532,"x_max":-278,"o":"m -532 -156 q -495 -83 -532 -112 q -405 -55 -459 -55 q -314 -83 -351 -55 q -278 -156 -278 -112 q -314 -229 -278 -200 q -405 -257 -351 -257 q -495 -229 -459 -257 q -532 -156 -532 -200 z "},"\u0384":{"ha":528,"x_min":162,"x_max":426,"o":"m 220 1086 l 426 1086 l 298 852 l 162 852 l 220 1086 z "},"\u0385":{"ha":789,"x_min":68,"x_max":705,"o":"m 353 1207 l 551 1207 l 429 966 l 327 966 l 353 1207 m 68 926 q 98 989 68 963 q 171 1016 127 1016 q 244 989 214 1016 q 273 926 273 963 q 244 862 273 888 q 171 836 214 836 q 98 862 127 836 q 68 926 68 888 m 500 926 q 529 989 500 963 q 602 1016 559 1016 q 675 989 646 1016 q 705 926 705 963 q 675 862 705 888 q 602 836 646 836 q 529 862 559 836 q 500 926 500 888 z "},"\u0387":{"ha":446,"x_min":94,"x_max":346,"o":"m 220 579 q 310 547 275 579 q 346 465 346 514 q 310 382 346 415 q 220 350 275 350 q 130 382 165 350 q 94 465 94 414 q 130 547 94 515 q 220 579 165 579 z "},"\u0393":{"ha":774,"x_min":73,"x_max":741,"o":"m 741 804 l 311 804 l 311 0 l 73 0 l 73 987 l 741 987 l 741 804 z "},"\u0394":{"ha":1034,"x_min":11,"x_max":1038,"o":"m 519 987 l 522 985 l 524 987 l 651 987 l 1038 0 l 11 0 l 392 987 l 519 987 m 329 183 l 720 183 l 522 715 l 329 183 z "},"\u0398":{"ha":960,"x_min":50,"x_max":913,"o":"m 590 399 l 376 399 l 376 575 l 590 575 l 590 399 m 913 473 q 859 218 913 329 q 707 46 806 106 q 482 -14 608 -14 q 258 45 356 -14 q 106 212 161 103 q 50 461 52 320 l 50 513 q 103 770 50 659 q 255 941 156 880 q 481 1001 353 1001 q 705 941 606 1001 q 858 771 803 882 q 913 519 912 661 l 913 473 m 671 515 q 622 738 671 662 q 481 814 572 814 q 339 739 387 814 q 291 519 292 664 l 291 473 q 339 250 291 328 q 482 172 387 172 q 622 249 573 172 q 671 469 670 326 l 671 515 z "},"\u039b":{"ha":892,"x_min":1,"x_max":893,"o":"m 447 690 l 258 0 l 1 0 l 317 987 l 575 987 l 893 0 l 635 0 l 447 690 z "},"\u039e":{"ha":783,"x_min":55,"x_max":739,"o":"m 55 183 l 739 183 l 739 0 l 55 0 l 55 183 m 144 581 l 653 581 l 653 407 l 144 407 l 144 581 m 79 987 l 699 987 l 699 804 l 79 804 l 79 987 z "},"\u03a0":{"ha":977,"x_min":73,"x_max":904,"o":"m 904 0 l 666 0 l 666 804 l 311 804 l 311 0 l 73 0 l 73 987 l 904 987 l 904 0 z "},"\u03a3":{"ha":783,"x_min":50,"x_max":753,"o":"m 585 496 l 372 182 l 753 182 l 753 0 l 50 0 l 50 102 l 334 501 l 50 886 l 50 987 l 745 987 l 745 804 l 376 804 l 585 505 l 585 496 z "},"\u03a6":{"ha":1108,"x_min":49,"x_max":1069,"o":"m 679 877 q 884 822 795 871 q 1021 686 972 772 q 1069 487 1069 599 q 1021 295 1069 379 q 884 164 972 212 q 679 111 795 116 l 679 0 l 442 0 l 442 111 q 156 219 263 117 q 49 486 49 321 q 98 686 49 598 q 235 822 146 773 q 442 877 324 871 l 442 987 l 679 987 l 679 877 m 282 486 q 325 362 282 407 q 442 311 368 317 l 442 676 q 324 619 366 669 q 282 486 282 570 m 836 487 q 795 620 836 570 q 679 676 754 669 l 679 311 q 795 364 755 319 q 836 487 836 410 z "},"\u03a8":{"ha":1036,"x_min":24,"x_max":1013,"o":"m 646 458 q 744 526 713 471 q 774 689 774 581 l 774 987 l 1013 987 l 1013 683 q 915 397 1011 505 q 646 273 818 290 l 646 0 l 408 0 l 408 271 q 125 394 226 286 q 24 686 25 503 l 24 987 l 262 987 l 262 677 q 408 458 266 489 l 408 987 l 646 987 l 646 458 z "},"\u03a9":{"ha":937,"x_min":66,"x_max":861,"o":"m 498 189 q 566 307 543 218 q 589 536 589 396 l 589 591 q 556 759 589 703 q 463 814 523 814 q 371 759 404 814 q 338 591 338 703 l 338 538 q 361 307 338 395 q 433 189 385 220 l 433 0 l 81 0 l 81 186 l 231 186 q 111 343 155 252 q 66 534 67 433 l 66 589 q 117 802 66 708 q 257 948 167 896 q 463 1000 348 1000 q 667 949 576 1000 q 809 805 758 898 q 861 596 860 712 l 861 538 q 793 298 861 410 q 697 186 753 235 l 846 186 l 846 0 l 498 0 l 498 189 z "},"\u03b1":{"ha":781,"x_min":41,"x_max":781,"o":"m 706 734 l 706 239 q 753 163 708 163 q 764 165 760 163 l 781 0 q 696 -14 747 -14 q 505 100 561 -14 q 326 -14 440 -14 q 117 84 194 -14 q 41 366 41 182 q 117 644 41 540 q 328 747 193 747 q 490 650 430 747 l 506 734 l 706 734 m 271 351 q 299 209 271 254 q 384 163 327 163 q 477 205 446 163 l 477 521 q 385 571 446 571 q 271 351 271 571 z "},"\u03b2":{"ha":843,"x_min":91,"x_max":806,"o":"m 432 1001 q 676 930 589 1001 q 763 734 763 860 q 728 607 763 664 q 632 517 694 551 q 761 428 716 488 q 806 277 806 367 q 728 63 806 139 q 506 -14 650 -14 q 319 35 403 -14 l 319 -281 l 91 -281 l 91 691 q 134 852 91 781 q 257 962 178 922 q 432 1001 336 1001 m 534 713 q 506 794 534 764 q 432 825 478 825 q 351 790 382 825 q 319 690 319 755 l 319 191 q 446 163 368 163 q 541 196 505 163 q 577 282 577 230 q 542 391 577 357 q 440 425 507 425 l 391 425 l 391 581 l 446 582 q 534 713 534 591 z "},"\u03b3":{"ha":714,"x_min":0,"x_max":710,"o":"m 358 252 l 469 734 l 710 734 l 471 0 l 469 0 l 469 -283 l 240 -283 l 240 0 l 239 0 l 0 734 l 241 734 l 358 252 z "},"\u03b4":{"ha":781,"x_min":36,"x_max":754,"o":"m 120 844 q 197 1008 120 949 q 409 1068 274 1068 q 536 1053 473 1068 l 583 1040 l 583 876 l 563 882 q 437 905 489 905 q 360 890 388 905 q 333 848 333 876 q 421 766 333 797 q 669 614 584 709 q 754 375 753 518 l 754 359 q 710 165 754 251 q 585 33 666 80 q 396 -14 503 -14 q 135 85 233 -14 q 36 352 36 184 l 36 359 q 96 550 36 466 q 244 658 155 635 l 241 662 q 120 844 120 732 m 264 372 q 299 219 264 276 q 396 162 334 162 q 492 219 458 162 q 526 385 526 276 q 490 513 526 454 q 396 585 453 572 q 299 530 334 585 q 264 372 264 474 z "},"\u03b5":{"ha":786,"x_min":63,"x_max":751,"o":"m 291 228 q 322 171 291 193 q 406 149 354 149 q 494 169 466 149 q 522 217 522 189 l 751 217 q 658 49 751 112 q 421 -14 565 -14 q 162 48 261 -14 q 63 208 63 109 q 99 313 63 270 q 203 378 136 356 q 110 443 144 402 q 76 533 76 484 q 170 690 76 633 q 421 747 263 747 q 650 683 562 747 q 739 521 739 620 l 511 521 q 481 569 511 553 q 406 584 452 584 q 332 564 359 584 q 304 512 304 545 q 423 446 304 446 l 530 446 l 530 305 l 414 305 q 291 228 291 305 z "},"\u03b6":{"ha":679,"x_min":37,"x_max":655,"o":"m 655 987 l 655 867 l 391 555 l 343 493 q 281 298 281 405 q 304 220 281 249 q 398 171 328 192 l 433 159 q 561 110 522 134 q 620 54 600 87 q 639 -26 640 21 q 587 -152 639 -82 q 463 -266 534 -221 l 347 -184 q 396 -121 380 -151 q 410 -73 411 -91 q 363 -13 412 -29 l 300 4 q 115 98 176 37 q 54 258 54 160 q 91 447 54 359 q 235 664 127 534 l 357 812 l 37 812 l 37 987 l 655 987 z "},"\u03b7":{"ha":781,"x_min":61,"x_max":722,"o":"m 276 734 l 283 642 q 492 747 364 747 q 664 677 606 747 q 722 469 722 607 l 722 -282 l 492 -282 l 492 465 q 405 571 492 571 q 290 522 331 571 l 290 0 l 61 0 l 61 734 l 276 734 z "},"\u03b8":{"ha":835,"x_min":73,"x_max":762,"o":"m 762 404 q 672 95 762 203 q 418 -14 582 -14 q 163 96 254 -14 q 73 404 73 205 l 73 584 q 163 892 73 784 q 417 1001 253 1001 q 671 892 581 1001 q 762 583 762 783 l 762 404 m 533 414 l 302 414 l 302 376 q 330 214 302 265 q 418 163 358 163 q 505 213 477 163 q 533 369 532 262 l 533 414 m 302 582 l 533 582 l 533 613 q 505 772 533 720 q 417 825 477 825 q 330 774 357 825 q 302 619 303 723 l 302 582 z "},"\u03b9":{"ha":473,"x_min":72,"x_max":432,"o":"m 302 734 l 301 245 q 316 188 301 204 q 375 172 331 172 q 432 176 409 172 l 432 12 q 303 -7 370 -7 q 128 49 184 -7 q 72 217 72 105 l 72 734 l 302 734 z "},"\u03bb":{"ha":757,"x_min":-4,"x_max":768,"o":"m 202 1056 q 395 934 346 1056 l 671 243 l 682 218 q 745 163 708 163 l 768 163 l 768 -9 q 683 -13 746 -13 q 467 131 522 -13 l 368 418 l 239 0 l -4 0 l 253 730 l 213 821 q 121 878 188 878 l 77 876 l 71 1039 q 202 1056 128 1056 z "},"\u03be":{"ha":766,"x_min":71,"x_max":726,"o":"m 642 794 l 570 812 q 488 820 533 820 q 366 734 366 820 q 494 651 366 651 l 593 651 l 593 467 l 502 467 q 300 315 300 467 q 336 227 300 260 q 455 173 372 193 q 564 145 537 153 q 611 128 591 136 q 724 -26 726 81 q 672 -151 724 -81 q 547 -267 621 -220 l 433 -184 q 480 -122 466 -152 q 494 -74 494 -92 q 432 -9 494 -32 q 253 50 313 28 q 153 103 193 72 q 92 181 113 134 q 71 304 71 228 q 273 557 71 491 q 137 731 137 607 q 223 928 137 854 q 456 1001 309 1001 q 573 993 528 1001 q 678 964 618 985 l 642 794 z "},"\u03c0":{"ha":930,"x_min":41,"x_max":900,"o":"m 894 570 l 769 570 l 769 245 q 784 188 769 204 q 843 172 799 172 q 900 176 877 172 l 900 12 q 771 -7 838 -7 q 596 48 653 -7 q 540 217 540 104 l 540 570 l 393 570 l 393 0 l 164 0 l 164 570 l 41 570 l 41 734 l 894 734 l 894 570 z "},"\u03c1":{"ha":781,"x_min":65,"x_max":745,"o":"m 416 747 q 657 644 570 747 q 745 361 745 541 l 745 351 q 669 85 745 184 q 460 -14 593 -14 q 294 67 357 -14 l 294 -282 l 65 -282 l 65 387 q 161 650 65 553 q 416 747 256 747 m 294 209 q 404 162 328 162 q 515 321 507 162 l 516 366 q 487 517 516 464 q 401 571 458 571 q 294 359 294 571 l 294 209 z "},"\u03c2":{"ha":696,"x_min":31,"x_max":686,"o":"m 378 747 q 603 669 519 747 q 686 453 686 590 l 471 453 q 447 539 471 507 q 378 571 422 571 q 289 524 319 571 q 259 359 259 477 q 290 235 259 275 q 401 171 320 194 q 519 130 482 147 q 575 90 555 112 q 612 -13 608 54 q 563 -138 612 -68 q 439 -254 513 -208 l 321 -171 q 369 -108 354 -138 q 382 -60 384 -78 q 326 5 382 -11 q 102 128 172 48 q 31 347 33 208 l 31 374 q 123 646 31 545 q 378 747 216 747 z "},"\u03c3":{"ha":798,"x_min":33,"x_max":779,"o":"m 779 557 l 612 557 q 697 457 667 513 q 728 346 728 401 l 728 332 q 637 80 728 174 q 389 -14 546 -14 q 130 87 226 -14 q 33 364 33 189 l 33 374 q 129 636 33 538 q 388 734 224 734 q 389 733 388 733 l 389 734 l 779 734 l 779 557 m 262 359 q 389 162 262 162 q 499 347 496 162 l 499 374 q 389 557 499 557 q 262 399 272 557 l 262 359 z "},"\u03c4":{"ha":720,"x_min":16,"x_max":705,"o":"m 705 559 l 467 559 l 467 238 q 480 180 467 197 q 526 163 494 163 q 595 172 553 163 l 610 3 q 484 -14 554 -14 q 300 51 364 -14 q 237 239 237 115 l 237 559 l 16 559 l 16 734 l 705 734 l 705 559 z "},"\u03c5":{"ha":757,"x_min":67,"x_max":711,"o":"m 296 734 l 296 281 q 357 162 296 162 q 448 227 412 162 q 484 384 484 292 q 422 734 481 551 l 635 734 q 689 584 666 671 q 711 384 711 496 q 622 90 711 194 q 364 -14 533 -14 q 145 60 222 -14 q 67 274 68 134 l 67 734 l 296 734 z "},"\u03c6":{"ha":1063,"x_min":26,"x_max":1023,"o":"m 411 -6 q 126 126 226 18 q 26 412 26 234 q 65 598 26 507 q 168 747 104 690 l 335 639 q 277 533 298 593 q 255 412 256 473 q 293 253 255 309 q 411 176 331 197 l 411 534 q 442 643 411 593 q 524 721 473 693 q 635 748 575 748 q 835 705 748 748 q 973 575 922 662 q 1023 383 1023 488 q 923 115 1023 216 q 640 -8 823 14 l 640 -324 l 411 -324 l 411 -6 m 640 173 q 756 242 717 191 q 795 383 795 294 q 761 522 793 472 q 671 572 729 572 q 640 549 640 572 l 640 173 z "},"\u03c8":{"ha":1064,"x_min":39,"x_max":1024,"o":"m 641 734 l 641 176 q 757 254 718 197 q 795 412 795 310 q 728 734 793 555 l 932 734 q 1024 412 1024 590 q 925 123 1024 231 q 641 -7 825 16 l 641 -324 l 412 -324 l 412 -6 q 136 118 231 17 q 39 393 40 218 l 39 734 l 268 734 l 268 390 q 412 176 270 218 l 412 734 l 641 734 z "},"\u03c9":{"ha":1139,"x_min":44,"x_max":1099,"o":"m 361 734 q 273 384 277 553 q 295 219 273 276 q 360 163 318 163 q 450 347 450 163 l 450 591 l 694 591 l 694 347 q 784 163 694 163 q 848 220 825 163 q 871 384 871 277 q 781 734 866 557 l 994 734 q 1099 384 1099 577 q 1022 85 1099 183 q 791 -14 944 -14 q 572 123 644 -14 q 480 21 536 56 q 353 -14 425 -14 q 122 85 199 -14 q 44 384 44 183 q 150 734 44 577 l 361 734 z "},"\u03d1":{"ha":838,"x_min":79,"x_max":842,"o":"m 842 381 l 776 365 l 776 319 q 677 78 776 169 q 420 -14 578 -14 q 245 28 323 -14 q 123 146 168 70 q 79 316 79 222 l 79 460 l 293 460 l 293 319 q 333 211 293 251 q 435 170 372 170 q 505 209 479 170 q 532 313 531 247 l 532 360 q 317 484 399 391 q 236 701 236 576 l 236 717 q 312 922 236 844 q 514 1001 388 1001 q 706 922 636 1001 q 776 705 775 843 l 776 557 l 835 568 l 842 381 m 450 712 q 532 568 450 610 l 532 736 q 498 804 531 804 q 450 726 450 804 l 450 712 z "},"\u03d2":{"ha":865,"x_min":-14,"x_max":880,"o":"m 433 522 l 544 834 q 774 1009 610 1009 q 880 992 812 1009 l 854 819 l 812 821 q 743 772 761 821 l 551 311 l 551 0 l 311 0 l 311 310 l 123 769 q 52 821 102 821 l 10 819 l -14 992 q 92 1009 48 1009 q 237 966 182 1009 q 324 833 293 922 l 433 522 z "},"\u03d6":{"ha":1180,"x_min":-7,"x_max":1188,"o":"m 1188 583 l 1103 583 q 1135 384 1135 489 q 1057 84 1135 181 q 824 -14 978 -14 q 686 23 746 -14 q 589 129 626 59 q 493 23 553 59 q 355 -14 433 -14 q 121 85 200 -14 q 43 384 43 183 q 75 583 43 489 l -7 583 l -7 734 l 1188 734 l 1188 583 m 907 384 q 876 583 905 484 l 303 583 q 272 384 275 479 q 295 219 272 275 q 362 163 319 163 q 467 348 467 163 l 467 464 l 711 464 l 711 334 q 740 207 712 252 q 817 163 767 163 q 884 219 861 163 q 907 384 907 275 z "},"\u0402":{"ha":1036,"x_min":16,"x_max":1005,"o":"m 787 804 l 481 804 l 481 591 q 633 608 560 608 q 907 528 810 608 q 1005 302 1005 449 q 956 132 1005 205 q 818 22 906 58 q 609 -14 730 -14 l 609 158 q 766 261 756 158 l 768 287 q 727 388 768 350 q 618 425 686 425 q 481 414 543 425 l 481 0 l 243 0 l 243 804 l 16 804 l 16 987 l 787 987 l 787 804 z "},"\u0404":{"ha":903,"x_min":47,"x_max":875,"o":"m 873 334 q 817 152 868 231 q 674 29 765 73 q 465 -14 583 -14 q 159 113 271 -14 q 47 471 47 239 l 47 519 q 98 774 47 665 q 243 942 149 884 q 462 1001 338 1001 q 750 907 642 1001 q 875 646 859 812 l 637 646 q 592 777 635 736 q 462 817 550 817 q 336 759 379 817 q 286 585 293 701 l 547 585 l 547 401 l 286 401 q 336 223 294 278 q 465 168 378 168 q 635 334 631 168 l 873 334 z "},"\u0409":{"ha":1457,"x_min":24,"x_max":1423,"o":"m 905 987 l 905 668 l 1033 668 q 1235 625 1145 667 q 1374 506 1324 583 q 1423 334 1423 429 q 1374 162 1423 239 q 1236 43 1325 86 q 1033 0 1146 1 l 667 0 l 667 804 l 446 804 l 429 472 q 382 198 419 300 q 276 48 345 96 q 88 0 207 1 l 24 0 l 24 183 l 58 186 q 161 274 129 197 q 202 533 193 351 l 219 987 l 905 987 m 905 485 l 905 183 l 1028 183 q 1141 225 1097 183 q 1185 336 1185 268 q 1143 441 1185 399 q 1032 485 1101 484 l 905 485 z "},"\u040a":{"ha":1454,"x_min":73,"x_max":1419,"o":"m 311 574 l 665 574 l 665 987 l 903 987 l 903 671 l 1027 671 q 1231 629 1141 671 q 1370 509 1320 586 q 1419 336 1419 433 q 1371 162 1419 239 q 1233 43 1322 86 q 1030 0 1144 1 l 665 0 l 665 391 l 311 391 l 311 0 l 73 0 l 73 987 l 311 987 l 311 574 m 903 488 l 903 182 l 1025 182 q 1139 225 1095 182 q 1183 337 1183 269 q 1140 445 1183 402 q 1027 488 1097 488 l 903 488 z "},"\u040b":{"ha":1038,"x_min":11,"x_max":980,"o":"m 758 804 l 463 804 l 463 629 q 569 637 525 637 q 871 552 765 637 q 980 309 977 467 l 980 1 l 743 1 l 743 302 q 704 418 743 382 q 569 454 665 454 q 463 446 532 454 l 463 0 l 224 0 l 224 804 l 11 804 l 11 987 l 758 987 l 758 804 z "},"\u040f":{"ha":962,"x_min":58,"x_max":888,"o":"m 604 183 l 650 183 l 650 987 l 888 987 l 888 0 l 604 0 l 604 -244 l 365 -244 l 365 0 l 58 0 l 58 987 l 295 987 l 295 183 l 365 183 l 365 184 l 604 184 l 604 183 z "},"\u0411":{"ha":867,"x_min":75,"x_max":831,"o":"m 742 804 l 314 804 l 314 648 l 437 648 q 644 608 554 648 q 783 495 734 568 q 831 328 831 422 q 723 91 831 182 q 433 0 615 0 l 75 0 l 75 987 l 742 987 l 742 804 m 314 465 l 314 183 l 436 183 q 551 224 509 183 q 593 329 593 264 q 551 427 593 390 q 435 465 509 465 l 314 465 z "},"\u0414":{"ha":1031,"x_min":9,"x_max":1023,"o":"m 998 -243 l 785 -243 l 785 0 l 247 0 l 247 -242 l 26 -242 l 9 183 l 79 183 q 168 309 134 220 q 216 565 201 398 l 246 987 l 918 987 l 918 183 l 1023 183 l 998 -243 m 349 183 l 681 183 l 681 804 l 471 804 l 452 557 q 349 183 432 317 z "},"\u0416":{"ha":1449,"x_min":7,"x_max":1452,"o":"m 973 386 l 852 386 l 852 0 l 616 0 l 616 386 l 493 386 l 303 0 l 7 0 l 305 539 l 16 987 l 317 987 l 519 600 l 616 600 l 616 987 l 852 987 l 852 600 l 949 600 l 1142 987 l 1442 987 l 1160 541 l 1452 0 l 1155 0 l 973 386 z "},"\u0417":{"ha":874,"x_min":42,"x_max":809,"o":"m 555 713 q 519 789 555 760 q 421 817 483 817 q 329 790 363 817 q 294 718 294 762 l 56 718 q 103 863 56 799 q 234 964 149 928 q 421 1000 319 1000 q 695 926 597 1000 q 793 720 793 852 q 754 596 793 652 q 644 507 714 540 q 767 421 724 479 q 809 277 809 363 q 703 65 809 144 q 421 -13 597 -13 q 150 64 258 -13 q 42 274 42 141 l 281 274 q 320 200 281 230 q 421 170 359 170 q 529 201 488 170 q 570 282 570 232 q 535 386 570 355 q 432 416 500 416 l 305 416 l 305 592 l 440 592 q 555 713 555 595 z "},"\u0418":{"ha":962,"x_min":61,"x_max":892,"o":"m 654 987 l 892 987 l 892 0 l 654 0 l 654 623 l 299 0 l 61 0 l 61 987 l 299 987 l 299 364 l 654 987 z "},"\u041b":{"ha":979,"x_min":24,"x_max":905,"o":"m 905 987 l 905 0 l 667 0 l 667 804 l 446 804 l 429 472 q 382 198 419 300 q 276 48 345 96 q 88 0 207 1 l 24 0 l 24 183 l 58 186 q 161 274 129 197 q 202 533 193 351 l 219 987 l 905 987 z "},"\u0423":{"ha":878,"x_min":3,"x_max":872,"o":"m 458 559 l 458 558 l 621 987 l 872 987 l 540 204 q 419 37 486 85 q 263 -14 353 -12 l 215 -14 l 178 -13 l 174 172 q 222 169 182 169 q 303 188 276 169 q 348 260 331 206 l 359 292 l 3 987 l 256 987 l 458 559 z "},"\u0424":{"ha":1163,"x_min":45,"x_max":1120,"o":"m 699 903 q 1005 788 891 903 q 1120 488 1120 673 q 1089 322 1120 397 q 1005 196 1059 248 q 699 84 890 84 l 699 -41 l 469 -41 l 469 84 q 160 196 275 84 q 45 486 45 308 q 76 657 45 581 q 161 788 106 734 q 469 903 277 903 l 469 1028 l 699 1028 l 699 903 m 460 712 q 320 652 372 712 q 269 486 269 593 q 321 332 269 389 q 469 275 372 275 l 469 712 l 460 712 m 699 712 l 699 275 l 709 275 q 845 331 793 275 q 896 488 896 387 q 846 652 896 592 q 699 712 796 712 z "},"\u0426":{"ha":1072,"x_min":58,"x_max":1040,"o":"m 58 987 l 295 987 l 295 183 l 650 183 l 650 987 l 888 987 l 888 181 l 1040 181 l 1026 -238 l 802 -238 l 802 0 l 58 0 l 58 987 z "},"\u0427":{"ha":970,"x_min":90,"x_max":897,"o":"m 897 987 l 897 0 l 660 0 l 660 365 l 590 356 l 503 351 q 197 437 303 351 q 90 682 92 524 l 90 987 l 328 987 l 328 686 q 367 569 328 605 q 503 534 406 534 l 523 534 q 660 547 606 538 l 660 987 l 897 987 z "},"\u0428":{"ha":1342,"x_min":70,"x_max":1271,"o":"m 308 987 l 308 183 l 553 183 l 553 987 l 791 987 l 791 183 l 1034 183 l 1034 987 l 1271 987 l 1271 0 l 70 0 l 70 987 l 308 987 z "},"\u0429":{"ha":1453,"x_min":70,"x_max":1417,"o":"m 308 987 l 308 183 l 553 183 l 553 987 l 791 987 l 791 183 l 1034 183 l 1034 987 l 1271 987 l 1271 176 l 1417 176 l 1404 -237 l 1188 -237 l 1188 0 l 70 0 l 70 987 l 308 987 z "},"\u042a":{"ha":1082,"x_min":18,"x_max":1046,"o":"m 18 987 l 529 987 l 529 648 l 652 648 q 859 608 769 648 q 998 495 949 568 q 1046 328 1046 422 q 938 91 1046 182 q 648 0 830 0 l 290 0 l 290 811 l 18 811 l 18 987 m 529 465 l 529 183 l 651 183 q 766 224 724 183 q 808 329 808 264 q 766 427 808 390 q 650 465 724 465 l 529 465 z "},"\u042b":{"ha":1211,"x_min":74,"x_max":1139,"o":"m 313 648 l 435 648 q 643 608 553 648 q 782 495 733 568 q 830 328 830 422 q 722 91 830 182 q 431 0 614 0 l 74 0 l 74 987 l 313 987 l 313 648 m 1139 0 l 902 0 l 902 987 l 1139 987 l 1139 0 m 313 465 l 313 183 l 435 183 q 550 224 507 183 q 592 329 592 264 q 550 427 592 390 q 433 465 508 465 l 313 465 z "},"\u042c":{"ha":865,"x_min":75,"x_max":831,"o":"m 314 648 l 437 648 q 644 608 554 648 q 783 495 734 568 q 831 328 831 422 q 723 91 831 182 q 433 0 615 0 l 75 0 l 75 987 l 314 987 l 314 648 m 314 465 l 314 183 l 436 183 q 551 224 509 183 q 593 329 593 264 q 551 427 593 390 q 435 465 509 465 l 314 465 z "},"\u042d":{"ha":883,"x_min":10,"x_max":838,"o":"m 249 334 q 420 168 254 168 q 548 222 505 168 q 599 402 591 275 l 326 402 l 326 586 l 599 586 q 545 763 589 708 q 423 817 501 817 q 293 777 336 817 q 247 646 250 736 l 10 646 q 134 906 25 812 q 423 1001 243 1001 q 641 943 547 1001 q 787 775 736 884 q 838 519 838 665 l 838 466 q 726 113 838 239 q 420 -14 614 -14 q 211 29 302 -14 q 68 151 120 72 q 12 334 17 230 l 249 334 z "},"\u042e":{"ha":1350,"x_min":83,"x_max":1281,"o":"m 1281 473 q 1227 218 1281 329 q 1075 46 1174 106 q 850 -14 977 -14 q 645 34 736 -14 q 496 171 554 81 q 423 380 439 261 l 321 380 l 321 0 l 83 0 l 83 987 l 321 987 l 321 557 l 418 557 q 482 792 427 691 q 633 947 537 893 q 849 1001 728 1001 q 1073 941 975 1001 q 1226 771 1171 882 q 1281 519 1280 661 l 1281 473 m 1039 515 q 990 738 1039 662 q 849 814 941 814 q 660 546 670 814 l 659 473 q 707 250 659 328 q 850 172 755 172 q 989 249 941 172 q 1039 469 1038 326 l 1039 515 z "},"\u042f":{"ha":795,"x_min":-62,"x_max":739,"o":"m 500 0 l 500 347 l 363 347 l 196 0 l -62 0 l 140 427 q 8 680 8 513 q 104 907 8 827 q 382 987 201 987 l 739 987 l 739 0 l 500 0 m 245 659 q 276 550 245 584 q 378 516 307 516 l 500 516 l 500 804 l 380 804 q 277 767 309 804 q 245 659 245 730 z "},"\u0431":{"ha":802,"x_min":52,"x_max":762,"o":"m 450 693 q 678 599 593 693 q 762 342 762 505 l 762 332 q 720 150 762 229 q 596 28 677 71 q 408 -14 516 -14 q 149 90 245 -14 q 52 378 52 195 l 52 399 q 135 794 54 650 q 384 975 216 938 q 483 1008 459 992 q 506 1058 506 1024 l 690 1058 q 664 929 690 973 q 581 856 637 885 q 422 808 524 827 q 297 745 341 793 q 238 610 254 696 q 450 693 330 693 m 407 517 q 281 343 281 517 l 281 332 q 408 162 281 162 q 534 325 531 162 l 534 347 q 407 517 534 517 z "},"\u0432":{"ha":780,"x_min":79,"x_max":750,"o":"m 79 0 l 79 734 l 394 734 q 626 681 545 734 q 706 528 706 628 q 671 437 706 477 q 568 375 635 397 q 703 317 655 360 q 750 210 750 274 q 672 53 750 106 q 446 0 593 1 l 79 0 m 309 299 l 309 175 l 442 175 q 503 190 485 175 q 522 235 522 205 q 451 299 522 296 l 309 299 m 309 440 l 403 440 q 461 454 444 440 q 477 495 477 468 q 457 545 477 530 q 394 559 437 559 l 309 559 l 309 440 z "},"\u0433":{"ha":581,"x_min":60,"x_max":578,"o":"m 578 557 l 289 557 l 289 0 l 60 0 l 60 734 l 578 734 l 578 557 z "},"\u0434":{"ha":893,"x_min":18,"x_max":880,"o":"m 83 176 q 163 286 138 231 q 192 412 188 340 l 194 462 l 198 734 l 770 734 l 770 176 l 880 176 l 880 -222 l 650 -222 l 650 0 l 253 0 l 253 -222 l 18 -222 l 18 176 l 83 176 m 347 176 l 542 176 l 542 557 l 425 557 l 424 497 q 347 176 419 299 z "},"\u0436":{"ha":1253,"x_min":25,"x_max":1237,"o":"m 831 256 l 744 256 l 744 0 l 515 0 l 515 256 l 431 256 l 305 0 l 34 0 l 252 393 l 25 734 l 311 734 l 450 470 l 515 470 l 515 734 l 744 734 l 744 470 l 812 470 l 951 734 l 1237 734 l 1008 391 l 1015 395 l 1235 0 l 956 0 l 831 256 z "},"\u0437":{"ha":718,"x_min":41,"x_max":686,"o":"m 444 512 q 368 584 444 584 q 281 521 281 584 l 52 521 q 136 684 52 621 q 353 747 220 747 q 587 691 502 747 q 673 533 673 635 q 643 443 673 484 q 560 378 614 402 q 686 208 686 334 q 595 47 686 107 q 353 -14 505 -14 q 128 49 216 -14 q 41 217 41 112 l 269 217 q 292 169 269 189 q 369 149 315 149 q 435 170 412 149 q 458 228 458 191 q 370 309 458 307 l 268 309 l 268 442 l 361 442 q 444 512 444 442 z "},"\u0438":{"ha":779,"x_min":60,"x_max":720,"o":"m 491 734 l 720 734 l 720 0 l 491 0 l 491 427 l 290 0 l 60 0 l 60 734 l 290 734 l 290 308 l 491 734 z "},"\u043a":{"ha":796,"x_min":79,"x_max":806,"o":"m 377 256 l 309 256 l 309 0 l 79 0 l 79 734 l 309 734 l 309 470 l 374 470 l 491 734 l 784 734 l 570 395 l 570 395 l 806 0 l 496 0 l 377 256 z "},"\u043b":{"ha":780,"x_min":7,"x_max":720,"o":"m 720 734 l 720 0 l 491 0 l 491 557 l 354 557 l 342 333 q 267 83 329 166 q 81 0 204 1 l 9 0 l 7 175 l 31 178 q 98 238 76 183 q 126 406 120 294 l 140 734 l 720 734 z "},"\u043c":{"ha":1066,"x_min":79,"x_max":977,"o":"m 524 252 l 690 734 l 977 734 l 977 0 l 748 0 l 748 407 l 600 0 l 448 0 l 309 385 l 309 0 l 79 0 l 79 734 l 360 734 l 524 252 z "},"\u043d":{"ha":779,"x_min":60,"x_max":718,"o":"m 718 0 l 488 0 l 488 272 l 288 272 l 288 0 l 60 0 l 60 734 l 288 734 l 288 448 l 488 448 l 488 734 l 718 734 l 718 0 z "},"\u043f":{"ha":779,"x_min":60,"x_max":720,"o":"m 720 0 l 490 0 l 490 557 l 288 557 l 288 0 l 60 0 l 60 734 l 720 734 l 720 0 z "},"\u0442":{"ha":728,"x_min":18,"x_max":707,"o":"m 707 559 l 475 559 l 475 0 l 245 0 l 245 559 l 18 559 l 18 734 l 707 734 l 707 559 z "},"\u0444":{"ha":1019,"x_min":36,"x_max":983,"o":"m 36 366 q 109 644 36 541 q 309 747 182 747 q 395 730 353 747 l 395 1042 l 624 1042 l 624 730 q 709 747 663 747 q 910 644 837 747 q 983 351 983 540 q 909 84 983 182 q 710 -14 836 -14 q 624 2 663 -14 l 624 -282 l 395 -282 l 395 3 q 308 -14 353 -14 q 110 84 183 -14 q 36 356 36 182 l 36 366 m 264 351 q 363 163 264 165 l 380 163 l 395 165 l 395 569 l 367 571 q 264 351 264 571 m 753 366 q 728 517 753 463 q 652 571 703 571 l 624 569 l 624 164 l 654 163 q 753 319 745 163 l 753 366 z "},"\u0446":{"ha":855,"x_min":60,"x_max":841,"o":"m 60 734 l 288 734 l 288 176 l 490 176 l 490 734 l 720 734 l 720 175 l 841 175 l 827 -218 l 612 -218 l 612 0 l 60 0 l 60 734 z "},"\u0447":{"ha":774,"x_min":54,"x_max":716,"o":"m 716 0 l 486 0 l 486 220 q 418 214 447 214 q 146 284 237 214 q 54 494 55 354 l 54 734 l 283 734 l 283 492 q 311 411 283 433 q 418 390 339 390 q 486 396 452 390 l 486 734 l 716 734 l 716 0 z "},"\u0448":{"ha":1160,"x_min":60,"x_max":1090,"o":"m 288 734 l 288 176 l 460 176 l 460 734 l 690 734 l 690 176 l 861 176 l 861 734 l 1090 734 l 1090 0 l 60 0 l 60 734 l 288 734 z "},"\u0449":{"ha":1301,"x_min":61,"x_max":1259,"o":"m 290 734 l 290 176 l 461 176 l 461 734 l 691 734 l 691 176 l 863 176 l 863 734 l 1091 734 l 1091 175 l 1259 175 l 1245 -218 l 1030 -218 l 1030 0 l 61 0 l 61 734 l 290 734 z "},"\u044a":{"ha":939,"x_min":24,"x_max":915,"o":"m 460 532 l 577 532 q 756 499 680 532 q 874 405 833 466 q 915 263 915 344 q 823 72 915 144 q 574 0 731 0 l 231 0 l 231 557 l 24 557 l 24 734 l 460 734 l 460 532 m 460 357 l 460 175 l 576 175 q 658 199 629 175 q 687 264 687 223 q 661 331 687 305 q 576 357 635 357 l 460 357 z "},"\u044b":{"ha":1184,"x_min":79,"x_max":1103,"o":"m 309 532 l 427 532 q 606 499 528 532 q 724 405 683 466 q 764 263 764 344 q 672 72 764 144 q 422 0 581 0 l 79 0 l 79 734 l 309 734 l 309 532 m 1103 0 l 873 0 l 873 734 l 1103 734 l 1103 0 m 309 357 l 309 175 l 425 175 q 507 199 477 175 q 536 264 536 223 q 510 331 536 305 q 425 357 484 357 l 309 357 z "},"\u044c":{"ha":785,"x_min":79,"x_max":764,"o":"m 309 532 l 427 532 q 606 499 528 532 q 724 405 683 466 q 764 263 764 344 q 672 72 764 144 q 422 0 581 0 l 79 0 l 79 734 l 309 734 l 309 532 m 309 357 l 309 175 l 425 175 q 507 199 477 175 q 536 264 536 223 q 510 331 536 305 q 425 357 484 357 l 309 357 z "},"\u044d":{"ha":708,"x_min":31,"x_max":686,"o":"m 337 571 q 245 473 245 571 l 31 473 q 116 670 31 593 q 337 747 201 747 q 592 647 498 747 q 686 368 686 547 l 686 359 q 592 87 686 188 q 338 -14 498 -14 q 114 65 197 -14 q 31 281 31 143 l 245 281 q 269 194 245 226 q 338 163 293 163 q 454 306 441 163 l 292 306 l 292 430 l 454 430 q 337 571 441 571 z "},"\u044e":{"ha":1124,"x_min":83,"x_max":1085,"o":"m 313 463 l 385 463 q 500 672 409 596 q 730 747 591 747 q 982 653 888 747 q 1084 400 1076 559 l 1085 359 q 990 88 1085 190 q 732 -14 895 -14 q 495 65 588 -14 q 382 286 403 144 l 313 286 l 313 0 l 83 0 l 83 734 l 313 734 l 313 463 m 606 359 q 637 210 606 258 q 732 163 669 163 q 857 351 854 163 l 857 374 q 730 571 857 571 q 606 401 616 571 l 606 359 z "},"\u044f":{"ha":784,"x_min":29,"x_max":703,"o":"m 703 734 l 703 0 l 475 0 l 475 243 l 387 243 l 257 0 l 29 0 l 180 281 q 78 364 114 313 q 43 481 43 416 q 132 662 43 593 q 366 734 222 732 l 703 734 m 271 473 q 299 415 271 439 q 370 390 326 391 l 475 390 l 475 559 l 373 559 q 300 534 328 559 q 271 473 271 509 z "},"\u0452":{"ha":784,"x_min":-45,"x_max":721,"o":"m 450 803 l 288 803 l 288 655 q 475 747 361 747 q 658 675 596 747 q 721 463 720 604 l 721 -10 q 648 -222 721 -147 q 444 -296 575 -296 q 335 -285 385 -296 l 344 -112 q 412 -120 379 -120 q 492 -8 492 -120 l 492 457 q 468 544 492 516 q 387 571 444 571 q 288 526 317 571 l 288 0 l 59 0 l 59 803 l -45 803 l -45 932 l 59 932 l 59 1042 l 288 1042 l 288 932 l 450 932 l 450 803 z "},"\u0454":{"ha":708,"x_min":30,"x_max":684,"o":"m 369 163 q 444 189 417 163 q 469 262 470 215 l 684 262 q 597 64 684 141 q 374 -14 511 -14 q 122 87 214 -14 q 30 365 30 187 l 30 374 q 71 571 30 486 q 189 702 112 656 q 372 747 267 747 q 600 668 515 747 q 684 453 684 589 l 469 453 q 441 541 469 510 q 367 571 414 571 q 291 537 317 571 q 259 418 264 503 l 437 418 l 437 294 l 261 294 q 295 193 268 223 q 369 163 321 163 z "},"\u0459":{"ha":1202,"x_min":7,"x_max":1179,"o":"m 724 734 l 724 519 l 848 519 q 1088 447 998 517 q 1179 260 1179 376 q 1087 71 1179 140 q 842 0 995 1 l 494 0 l 494 557 l 355 557 l 342 333 q 267 83 330 166 q 81 0 205 1 l 10 0 l 7 175 l 31 178 q 99 238 77 183 q 127 406 121 294 l 141 734 l 724 734 m 724 343 l 724 175 l 840 175 q 925 200 899 175 q 951 261 951 224 q 925 320 951 296 q 840 343 899 343 l 724 343 z "},"\u045a":{"ha":1196,"x_min":60,"x_max":1173,"o":"m 288 448 l 488 448 l 488 734 l 718 734 l 718 519 l 842 519 q 1082 447 992 517 q 1173 260 1173 376 q 1081 71 1173 140 q 836 0 989 1 l 488 0 l 488 272 l 288 272 l 288 0 l 60 0 l 60 734 l 288 734 l 288 448 m 718 343 l 718 175 l 834 175 q 919 200 892 175 q 945 261 945 224 q 919 320 945 296 q 834 343 892 343 l 718 343 z "},"\u045b":{"ha":781,"x_min":-40,"x_max":721,"o":"m 455 813 l 288 813 l 288 655 q 475 747 361 747 q 658 675 596 747 q 721 463 720 604 l 721 0 l 492 0 l 492 458 q 468 544 492 516 q 387 571 444 571 q 288 526 317 571 l 288 0 l 59 0 l 59 813 l -40 813 l -40 943 l 59 943 l 59 1042 l 288 1042 l 288 943 l 455 943 l 455 813 z "},"\u045f":{"ha":779,"x_min":60,"x_max":720,"o":"m 288 734 l 288 176 l 490 176 l 490 734 l 720 734 l 720 0 l 504 0 l 504 -244 l 275 -244 l 275 0 l 60 0 l 60 734 l 288 734 z "},"\u0460":{"ha":1367,"x_min":68,"x_max":1285,"o":"m 1285 987 l 1285 332 q 1241 149 1285 227 q 1114 28 1197 71 q 922 -14 1031 -14 q 677 91 765 -14 q 437 -14 591 -14 q 171 78 271 -14 q 68 329 70 170 l 68 987 l 307 987 l 307 336 q 437 169 307 169 q 559 322 555 169 l 559 987 l 795 987 l 795 336 q 922 169 795 169 q 1047 324 1044 169 l 1047 987 l 1285 987 z "},"\u0461":{"ha":1185,"x_min":60,"x_max":1143,"o":"m 1143 734 l 1143 320 q 1056 76 1141 166 q 821 -14 970 -14 q 604 82 681 -14 q 385 -14 526 -14 q 149 76 236 -14 q 60 320 62 165 l 60 734 l 289 734 l 289 313 q 385 162 292 162 q 465 201 439 162 q 490 327 490 240 l 490 734 l 720 734 l 720 327 q 744 201 720 240 q 821 162 768 162 q 891 201 869 162 q 913 327 913 240 l 913 734 l 1143 734 z "},"\u0463":{"ha":785,"x_min":-14,"x_max":764,"o":"m 460 734 l 309 734 l 309 546 l 422 546 q 672 472 579 546 q 764 273 764 398 q 674 75 764 150 q 427 0 583 1 l 80 0 l 80 734 l -14 734 l -14 864 l 80 864 l 80 1059 l 309 1059 l 309 864 l 460 864 l 460 734 m 309 370 l 309 175 l 425 175 q 507 201 477 175 q 536 275 536 227 q 417 370 536 370 l 309 370 z "},"\u0464":{"ha":1236,"x_min":66,"x_max":1242,"o":"m 302 589 l 417 589 q 545 890 435 779 q 829 1002 654 1002 q 1118 908 1009 1002 q 1242 647 1227 813 l 1005 647 q 960 777 1002 737 q 829 816 918 816 q 707 760 749 816 q 658 589 665 704 l 907 589 l 907 412 l 656 412 q 703 230 662 286 q 833 174 745 174 q 958 212 915 174 q 1004 335 1001 251 l 1241 335 q 1185 154 1236 233 q 1042 31 1135 75 q 833 -13 950 -13 q 540 99 650 -13 q 416 412 430 212 l 302 412 l 302 0 l 66 0 l 66 987 l 302 987 l 302 589 z "},"\u0465":{"ha":1053,"x_min":67,"x_max":1022,"o":"m 296 434 l 371 434 q 477 664 387 581 q 711 747 567 747 q 938 668 854 747 q 1022 453 1022 589 l 808 453 q 780 541 808 510 q 706 571 753 571 q 633 540 659 571 q 600 434 606 509 l 782 434 l 782 304 l 599 304 q 630 197 604 231 q 707 163 656 163 q 782 189 755 163 q 808 262 808 215 l 1022 262 q 936 64 1022 141 q 713 -14 849 -14 q 476 70 566 -14 q 371 304 386 154 l 296 304 l 296 0 l 67 0 l 67 734 l 296 734 l 296 434 z "},"\u0466":{"ha":961,"x_min":1,"x_max":949,"o":"m 607 281 l 564 281 l 564 0 l 378 0 l 378 281 l 342 281 l 252 0 l 1 0 l 345 987 l 472 987 l 474 985 l 477 987 l 604 987 l 949 0 l 699 0 l 607 281 m 391 431 l 558 431 l 474 691 l 391 431 z "},"\u0467":{"ha":794,"x_min":3,"x_max":781,"o":"m 494 178 l 450 178 l 450 0 l 323 0 l 323 178 l 290 178 l 236 0 l 3 0 l 269 734 l 516 734 l 781 0 l 549 0 l 494 178 m 332 312 l 452 312 l 416 431 l 392 534 l 368 431 l 332 312 z "},"\u0468":{"ha":1340,"x_min":81,"x_max":1325,"o":"m 319 430 l 526 430 l 720 987 l 848 987 l 850 985 l 852 987 l 979 987 l 1325 0 l 1074 0 l 983 281 l 940 281 l 940 0 l 753 0 l 753 281 l 718 281 l 627 0 l 376 0 l 474 281 l 319 281 l 319 0 l 81 0 l 81 987 l 319 987 l 319 430 m 766 431 l 934 431 l 849 692 l 766 431 z "},"\u0469":{"ha":1140,"x_min":64,"x_max":1128,"o":"m 294 311 l 462 311 l 615 734 l 863 734 l 1128 0 l 895 0 l 840 178 l 796 178 l 796 0 l 670 0 l 670 178 l 637 178 l 583 0 l 349 0 l 414 178 l 294 178 l 294 0 l 64 0 l 64 734 l 294 734 l 294 311 m 678 312 l 799 312 l 762 431 l 739 534 l 715 431 l 678 312 z "},"\u046a":{"ha":1219,"x_min":62,"x_max":1157,"o":"m 825 538 q 1076 451 996 528 q 1157 226 1156 374 l 1157 0 l 920 0 l 920 222 q 888 322 920 291 q 779 353 855 353 l 741 353 l 741 0 l 503 0 l 503 353 l 445 353 q 333 324 367 353 q 298 228 300 294 l 298 0 l 62 0 l 62 231 q 152 458 64 382 q 424 539 239 535 l 174 987 l 1075 987 l 825 538 m 625 588 l 728 801 l 522 801 l 625 588 z "},"\u046b":{"ha":1013,"x_min":61,"x_max":951,"o":"m 704 413 q 890 326 829 395 q 951 132 950 256 l 951 0 l 722 0 l 722 130 q 700 222 722 193 q 624 253 677 252 l 624 0 l 395 0 l 395 253 q 315 225 339 253 q 290 134 290 198 l 290 0 l 61 0 l 61 137 q 125 330 63 261 q 319 414 187 398 l 134 734 l 890 734 l 704 413 m 511 436 l 583 597 l 440 597 l 511 436 z "},"\u046c":{"ha":1633,"x_min":91,"x_max":1573,"o":"m 477 0 l 477 222 q 501 363 477 300 l 328 363 l 328 0 l 91 0 l 91 987 l 328 987 l 328 542 l 838 542 l 590 987 l 1491 987 l 1241 538 q 1490 451 1410 528 q 1573 229 1571 375 l 1573 0 l 1336 0 l 1336 222 q 1303 322 1336 291 q 1192 353 1270 353 l 1156 353 l 1156 0 l 919 0 l 919 353 l 861 353 q 749 324 783 353 q 714 228 715 294 l 714 0 l 477 0 m 1040 588 l 1143 801 l 937 801 l 1040 588 z "},"\u046d":{"ha":1411,"x_min":83,"x_max":1348,"o":"m 458 0 l 458 129 q 480 260 458 205 l 313 260 l 313 0 l 83 0 l 83 734 l 313 734 l 313 418 l 713 418 l 531 734 l 1286 734 l 1101 413 q 1287 326 1227 395 q 1348 132 1348 256 l 1348 0 l 1120 0 l 1120 130 q 1097 222 1120 193 q 1021 253 1075 252 l 1021 0 l 793 0 l 793 253 q 712 225 736 253 q 687 134 688 198 l 687 0 l 458 0 m 909 436 l 980 597 l 838 597 l 909 436 z "},"\u046e":{"ha":710,"x_min":-19,"x_max":648,"o":"m 380 707 q 252 804 380 801 l 80 804 l 80 987 l 248 987 q 520 922 431 986 q 610 734 610 858 q 458 505 610 566 q 648 277 648 446 q 554 64 648 142 q 291 -14 460 -14 l 254 -14 q 186 -75 186 -14 q 258 -163 186 -129 l 279 -173 l 223 -304 q 44 -218 106 -284 q -19 -39 -18 -153 q 45 115 -19 61 q 229 170 109 170 l 279 170 q 382 199 345 170 q 418 274 418 228 q 243 413 418 413 l 151 413 l 151 597 l 250 597 q 380 707 380 597 m 316 1217 l 416 1308 l 610 1308 l 610 1300 l 389 1108 l 242 1108 l 20 1301 l 20 1308 l 216 1308 l 316 1217 z "},"\u046f":{"ha":716,"x_min":3,"x_max":635,"o":"m 368 510 q 251 578 368 576 l 80 578 l 80 734 l 255 734 q 513 681 429 732 q 597 536 597 631 q 480 366 597 416 q 635 206 635 321 q 548 44 635 103 q 307 -14 460 -14 l 273 -14 q 195 -75 195 -16 q 271 -173 195 -135 l 216 -290 q 61 -194 118 -261 q 3 -39 5 -127 q 60 95 3 48 q 222 141 117 141 l 263 141 q 369 162 331 141 q 407 217 407 184 q 258 300 407 300 l 151 300 l 151 427 l 272 427 q 346 451 324 427 q 368 510 368 475 m 322 943 l 422 1034 l 616 1034 l 616 1027 l 395 835 l 248 835 l 26 1028 l 26 1034 l 222 1034 l 322 943 z "},"\u0472":{"ha":960,"x_min":58,"x_max":921,"o":"m 921 473 q 867 217 921 328 q 715 46 814 106 q 490 -14 617 -14 q 267 45 364 -14 q 114 212 169 103 q 58 461 60 320 l 58 513 q 111 770 58 659 q 263 941 164 880 q 489 1001 361 1001 q 713 941 614 1001 q 866 771 812 881 q 921 518 920 661 l 921 473 m 490 172 q 624 240 575 172 q 678 435 672 307 l 300 435 q 354 240 307 307 q 490 172 401 172 m 489 814 q 301 564 316 814 l 677 564 q 621 751 669 688 q 489 814 572 814 z "},"\u0473":{"ha":781,"x_min":34,"x_max":742,"o":"m 34 374 q 77 569 34 484 q 199 701 119 655 q 387 747 279 747 q 647 645 552 747 q 742 368 742 543 l 742 359 q 647 87 742 188 q 389 -14 551 -14 q 137 80 231 -14 q 35 335 42 174 l 34 374 m 387 571 q 265 427 281 571 l 511 427 q 387 571 494 571 m 389 163 q 510 298 492 163 l 266 298 q 389 163 284 163 z "},"\u0474":{"ha":900,"x_min":4,"x_max":889,"o":"m 447 268 l 454 230 l 460 264 l 586 747 q 695 939 627 878 q 865 1000 763 1000 l 889 999 l 886 810 l 862 810 q 814 789 836 810 q 787 738 793 767 l 583 0 l 325 0 l 4 987 l 254 987 l 447 268 z "},"\u0475":{"ha":714,"x_min":0,"x_max":727,"o":"m 339 226 l 352 302 l 395 500 q 497 688 432 629 q 659 748 562 748 q 727 737 703 748 l 710 564 l 672 566 q 624 545 646 566 q 594 491 602 524 l 458 0 l 225 0 l 0 734 l 241 734 l 325 306 l 339 226 z "},"\u047a":{"ha":960,"x_min":58,"x_max":921,"o":"m 921 473 q 875 235 921 340 q 744 66 829 130 q 547 -10 659 3 l 547 -90 l 416 -90 l 416 -8 q 155 145 252 17 q 58 472 58 273 l 58 513 q 154 841 58 713 q 414 995 251 970 l 414 1065 l 545 1065 l 545 998 q 818 848 715 978 q 921 517 920 719 l 921 473 m 680 515 q 645 711 680 637 q 545 806 610 784 l 545 735 l 414 735 l 414 799 q 300 530 304 747 l 300 473 q 416 188 300 243 l 416 247 l 547 247 l 547 181 q 645 277 611 203 q 680 473 680 351 l 680 515 z "},"\u047b":{"ha":781,"x_min":35,"x_max":743,"o":"m 35 374 q 118 630 35 530 q 342 745 200 730 l 342 816 l 443 816 l 443 744 q 663 628 583 727 q 743 370 743 529 l 743 359 q 661 102 743 201 q 437 -11 579 3 l 437 -85 l 337 -85 l 337 -10 q 118 103 198 5 q 35 351 38 200 l 35 374 m 437 172 q 515 348 512 202 l 515 374 q 443 559 515 523 l 443 492 l 342 492 l 342 562 q 264 385 267 530 l 264 359 q 337 174 264 209 l 337 252 l 437 252 l 437 172 z "},"\u047c":{"ha":1369,"x_min":68,"x_max":1270,"o":"m 901 987 q 1168 896 1068 987 q 1270 648 1268 805 l 1270 330 q 1170 79 1270 172 q 901 -14 1070 -14 q 669 81 755 -14 q 437 -14 583 -14 q 171 77 271 -14 q 68 324 71 168 l 68 642 q 169 895 68 802 q 437 987 269 987 l 437 804 q 307 641 307 804 l 307 330 q 341 207 307 245 q 437 169 376 169 q 559 322 555 169 l 559 553 l 780 553 l 780 322 q 901 169 783 169 q 1032 332 1032 169 l 1032 642 q 901 804 1032 804 l 901 987 m 980 1147 l 980 1056 l 975 1056 q 865 1069 917 1056 q 707 1123 813 1083 q 641 1137 669 1137 q 572 1066 572 1137 l 572 1056 l 484 1056 l 484 1079 q 639 1228 484 1228 q 794 1187 694 1228 q 980 1147 895 1147 m 579 896 q 625 992 623 951 l 625 1063 l 740 1063 l 740 993 q 707 919 740 960 q 635 857 675 878 l 579 896 z "},"\u047d":{"ha":1158,"x_min":68,"x_max":1083,"o":"m 735 747 q 987 660 892 747 q 1083 422 1082 573 l 1083 313 q 997 74 1083 162 q 766 -14 910 -14 q 575 83 644 -14 q 385 -14 506 -14 q 154 73 241 -14 q 68 315 68 161 l 68 420 q 163 660 68 572 q 416 747 258 747 l 416 571 q 329 535 361 571 q 297 420 297 499 l 297 313 q 321 198 297 234 q 385 162 345 162 q 469 315 466 162 l 469 418 l 682 418 l 682 315 q 766 162 685 162 q 830 198 806 162 q 854 313 854 234 l 854 420 q 823 532 854 494 q 735 571 793 571 l 735 747 m 884 922 l 884 831 l 877 831 q 767 845 819 831 q 608 899 715 859 q 544 913 572 913 q 475 842 475 913 l 475 831 l 386 831 l 386 854 q 542 1004 386 1004 q 696 963 596 1004 q 884 922 797 922 m 489 679 q 535 775 533 734 l 535 846 l 650 846 l 650 776 q 617 702 650 743 q 545 640 585 661 l 489 679 z "},"\u047e":{"ha":1367,"x_min":68,"x_max":1285,"o":"m 1285 987 l 1285 332 q 1241 149 1285 227 q 1114 28 1197 71 q 922 -14 1031 -14 q 677 91 765 -14 q 437 -14 591 -14 q 171 78 271 -14 q 68 329 70 170 l 68 987 l 307 987 l 307 336 q 437 169 307 169 q 559 322 555 169 l 559 987 l 795 987 l 795 336 q 922 169 795 169 q 1047 324 1044 169 l 1047 987 l 1285 987 m 366 1144 l 366 1240 l 988 1240 l 989 1144 l 733 1144 l 733 1058 l 610 1058 l 610 1144 l 366 1144 z "},"\u047f":{"ha":1185,"x_min":60,"x_max":1143,"o":"m 1143 734 l 1143 320 q 1056 76 1141 166 q 821 -14 970 -14 q 604 82 681 -14 q 385 -14 526 -14 q 149 76 236 -14 q 60 320 62 165 l 60 734 l 289 734 l 289 313 q 385 162 292 162 q 465 201 439 162 q 490 327 490 240 l 490 734 l 720 734 l 720 327 q 744 201 720 240 q 821 162 768 162 q 891 201 869 162 q 913 327 913 240 l 913 734 l 1143 734 m 321 892 l 321 988 l 880 988 l 886 892 l 656 892 l 656 806 l 534 806 l 534 892 l 321 892 z "},"\u0480":{"ha":838,"x_min":51,"x_max":803,"o":"m 592 -239 l 355 -239 l 355 -7 q 132 122 214 17 q 51 392 51 228 l 51 598 q 98 809 51 718 q 232 951 144 901 q 433 1002 319 1002 q 709 913 616 1002 q 803 654 803 825 l 566 654 q 536 782 566 747 q 433 818 507 818 q 326 762 363 818 q 288 597 288 707 l 288 389 q 326 226 288 283 q 431 169 363 170 l 592 169 l 592 -239 z "},"\u0481":{"ha":741,"x_min":54,"x_max":709,"o":"m 558 -243 l 330 -243 l 330 -8 q 127 111 201 14 q 54 363 54 208 l 54 374 q 147 646 54 545 q 401 747 240 747 q 626 668 544 747 q 709 453 709 589 l 494 453 q 470 541 494 510 q 401 571 446 571 q 313 524 342 571 q 283 359 283 477 q 311 210 283 256 q 395 162 339 164 l 558 162 l 558 -243 z "},"\u0482":{"ha":861,"x_min":71,"x_max":791,"o":"m 406 304 l 602 188 l 553 101 l 356 216 l 233 0 l 115 0 l 267 270 l 71 386 l 119 473 l 318 357 l 455 601 l 258 717 l 308 805 l 505 689 l 631 910 l 747 910 l 593 635 l 791 519 l 740 433 l 545 549 l 406 304 z "},"\u0483":{"ha":0,"x_min":-607,"x_max":-117,"o":"m -487 890 l -487 804 l -607 805 l -606 966 l -236 966 l -237 1040 l -117 1039 l -117 890 l -487 890 z "},"\u0484":{"ha":0,"x_min":-609,"x_max":-92,"o":"m -254 1056 q -92 907 -92 1056 l -92 884 l -184 884 l -184 895 q -256 965 -184 965 q -322 951 -286 965 q -485 898 -429 912 q -609 884 -541 884 l -609 975 q -516 984 -556 975 q -402 1019 -475 993 q -303 1051 -328 1046 q -254 1056 -279 1056 z "},"\u0485":{"ha":0,"x_min":-401,"x_max":-233,"o":"m -401 1017 l -401 1120 l -272 1120 l -273 1005 l -233 934 l -288 888 l -401 1017 z "},"\u0486":{"ha":0,"x_min":-406,"x_max":-239,"o":"m -351 888 l -406 934 l -366 1005 l -367 1120 l -239 1120 l -239 1017 l -351 888 z "},"\u0488":{"ha":0,"x_min":-1001,"x_max":319,"o":"m -493 859 q -454 951 -493 916 q -351 987 -415 987 q -247 951 -286 987 q -208 859 -208 916 l -283 859 q -301 909 -283 890 q -351 928 -318 928 q -399 910 -382 928 q -416 859 -416 892 l -493 859 m -92 671 q -53 764 -92 728 q 50 799 -14 799 q 154 764 114 799 q 193 671 193 729 l 117 671 q 99 722 117 705 q 50 740 81 740 q 2 722 19 740 q -15 671 -15 704 l -92 671 m 34 330 q 74 423 34 388 q 176 458 113 458 q 280 422 241 458 q 319 330 319 387 l 243 330 q 225 381 243 363 q 176 399 208 399 q 128 380 145 399 q 111 330 111 361 l 34 330 m -99 -22 q -60 71 -99 35 q 43 106 -20 106 q 146 71 107 106 q 186 -22 186 35 l 110 -22 q 92 29 110 12 q 43 47 74 47 q -5 28 12 47 q -22 -22 -22 9 l -99 -22 m -490 -214 q -451 -122 -490 -157 q -347 -87 -412 -87 q -243 -122 -283 -87 q -204 -214 -204 -157 l -280 -214 q -297 -164 -280 -183 q -347 -146 -315 -146 q -396 -164 -378 -146 q -413 -214 -413 -183 l -490 -214 m -882 671 q -842 764 -882 728 q -739 799 -803 799 q -635 764 -674 799 q -595 671 -595 728 l -671 671 q -689 721 -671 703 q -739 740 -706 740 q -787 722 -770 740 q -804 671 -804 704 l -882 671 m -1001 330 q -961 423 -1001 388 q -859 458 -922 458 q -755 422 -794 458 q -715 330 -715 387 l -791 330 q -809 381 -791 363 q -859 399 -827 399 q -907 380 -890 399 q -924 330 -924 361 l -1001 330 m -888 -22 q -849 71 -888 36 q -746 106 -809 106 q -642 71 -682 106 q -602 -22 -602 36 l -679 -22 q -697 29 -679 12 q -746 47 -715 47 q -794 29 -777 47 q -811 -22 -811 11 l -888 -22 z "},"\u0489":{"ha":0,"x_min":-941,"x_max":317,"o":"m -245 -41 l -237 -50 l -320 -280 l -385 -280 l -338 -41 l -245 -41 m -377 764 l -385 773 l -302 1002 l -237 1002 l -285 764 l -377 764 m 82 428 l 91 436 l 317 352 l 317 286 l 82 334 l 82 428 m -707 294 l -715 286 l -941 370 l -941 436 l -707 388 l -707 294 m -80 680 l -79 690 l 138 794 l 184 748 l -14 612 l -80 680 m -544 14 l -545 3 l -762 -101 l -809 -54 l -610 81 l -544 14 m -639 583 l -650 585 l -751 806 l -707 852 l -572 650 l -639 583 m 13 109 l 24 108 l 125 -113 l 81 -161 l -52 42 l 13 109 z "},"\u048a":{"ha":1090,"x_min":61,"x_max":1054,"o":"m 654 987 l 892 987 l 892 0 l 654 0 l 654 623 l 299 0 l 61 0 l 61 987 l 299 987 l 299 364 l 654 987 m 729 1253 q 661 1103 729 1160 q 478 1045 592 1045 q 296 1103 364 1045 q 227 1253 227 1160 l 382 1253 q 408 1190 382 1213 q 478 1167 433 1167 q 548 1189 523 1167 q 572 1253 572 1211 l 729 1253 m 913 -289 l 798 -235 l 821 -189 q 871 -20 869 -100 l 871 149 l 1054 149 l 1053 2 q 1013 -157 1053 -76 q 913 -289 974 -237 z "},"\u048b":{"ha":926,"x_min":60,"x_max":884,"o":"m 491 734 l 720 734 l 720 0 l 491 0 l 491 427 l 290 0 l 60 0 l 60 734 l 290 734 l 290 308 l 491 734 m 646 1043 q 578 892 646 950 q 395 835 509 835 q 213 892 281 835 q 144 1043 144 950 l 300 1043 q 325 980 300 1002 q 395 957 351 957 q 465 979 440 957 q 490 1043 490 1001 l 646 1043 m 743 -289 l 628 -235 l 651 -189 q 701 -20 699 -100 l 701 149 l 884 149 l 883 2 q 843 -157 882 -76 q 743 -289 804 -237 z "},"\u048d":{"ha":785,"x_min":-14,"x_max":764,"o":"m 460 858 l 309 858 l 309 546 l 422 546 q 672 472 579 546 q 764 273 764 398 q 674 75 764 150 q 427 0 583 1 l 80 0 l 80 858 l -14 858 l -14 987 l 80 987 l 80 1086 l 309 1086 l 309 987 l 460 987 l 460 858 m 309 370 l 309 175 l 425 175 q 507 201 477 175 q 536 275 536 227 q 417 370 536 370 l 309 370 z "},"\u048e":{"ha":866,"x_min":75,"x_max":852,"o":"m 313 335 l 313 0 l 75 0 l 75 987 l 469 987 q 669 946 582 987 q 804 827 756 904 q 852 652 852 750 q 742 416 852 504 l 819 331 l 756 274 l 667 372 q 469 335 583 335 l 313 335 m 594 580 q 610 651 610 610 q 573 762 610 720 q 471 804 536 803 l 313 804 l 313 519 l 469 519 q 527 527 503 519 l 437 626 l 501 684 l 594 580 z "},"\u048f":{"ha":779,"x_min":66,"x_max":745,"o":"m 745 361 q 658 75 745 178 l 722 -2 l 656 -58 l 592 20 q 460 -14 532 -14 q 294 60 359 -14 l 294 -282 l 66 -282 l 66 734 l 279 734 l 286 666 q 459 747 352 747 q 670 647 595 747 q 745 372 745 547 l 745 361 m 517 376 q 403 571 517 571 q 294 513 321 571 l 294 224 q 404 163 324 163 q 460 180 437 163 l 380 277 l 445 333 l 506 259 q 517 376 517 304 z "},"\u0490":{"ha":776,"x_min":75,"x_max":753,"o":"m 753 812 l 742 812 l 742 804 l 313 804 l 313 0 l 75 0 l 75 987 l 525 987 l 525 1251 l 753 1251 l 753 812 z "},"\u0491":{"ha":652,"x_min":61,"x_max":618,"o":"m 618 557 l 290 557 l 290 0 l 61 0 l 61 734 l 390 734 l 390 949 l 618 949 l 618 557 z "},"\u0494":{"ha":871,"x_min":73,"x_max":833,"o":"m 741 804 l 311 804 l 311 568 l 419 568 q 725 464 618 568 q 833 168 833 359 q 783 -53 833 43 q 647 -196 734 -149 q 440 -243 559 -243 l 440 -77 q 604 154 604 -77 q 558 331 604 271 q 422 392 512 392 l 311 392 l 311 0 l 73 0 l 73 987 l 741 987 l 741 804 z "},"\u0495":{"ha":753,"x_min":61,"x_max":709,"o":"m 578 557 l 290 557 l 290 456 l 300 456 q 601 369 496 456 q 705 123 705 282 q 640 -61 709 26 q 459 -194 571 -149 l 352 -54 q 450 31 424 -9 q 477 123 477 72 q 298 279 478 279 l 290 279 l 290 0 l 61 0 l 61 734 l 578 734 l 578 557 z "},"\u0496":{"ha":1564,"x_min":7,"x_max":1558,"o":"m 973 386 l 852 386 l 852 0 l 616 0 l 616 386 l 493 386 l 303 0 l 7 0 l 305 539 l 16 987 l 317 987 l 519 600 l 616 600 l 616 987 l 852 987 l 852 600 l 949 600 l 1142 987 l 1442 987 l 1160 541 l 1452 0 l 1155 0 l 973 386 m 1558 -241 l 1329 -241 l 1329 151 l 1558 151 l 1558 -241 z "},"\u0497":{"ha":1341,"x_min":25,"x_max":1333,"o":"m 831 256 l 744 256 l 744 0 l 515 0 l 515 256 l 431 256 l 305 0 l 34 0 l 252 393 l 25 734 l 311 734 l 450 470 l 515 470 l 515 734 l 744 734 l 744 470 l 812 470 l 951 734 l 1237 734 l 1008 391 l 1015 395 l 1235 0 l 956 0 l 831 256 m 1333 -241 l 1104 -241 l 1104 151 l 1333 151 l 1333 -241 z "},"\u049a":{"ha":1060,"x_min":73,"x_max":1023,"o":"m 424 391 l 311 391 l 311 0 l 73 0 l 73 987 l 311 987 l 311 606 l 403 606 l 593 987 l 881 987 l 610 532 l 915 0 l 633 0 l 424 391 m 1023 -241 l 795 -241 l 795 151 l 1023 151 l 1023 -241 z "},"\u049b":{"ha":943,"x_min":79,"x_max":900,"o":"m 377 256 l 309 256 l 309 0 l 79 0 l 79 734 l 309 734 l 309 470 l 374 470 l 491 734 l 784 734 l 570 395 l 570 395 l 806 0 l 496 0 l 377 256 m 900 -241 l 671 -241 l 671 151 l 900 151 l 900 -241 z "},"\u049c":{"ha":941,"x_min":75,"x_max":972,"o":"m 946 987 l 692 545 l 695 547 l 972 0 l 667 0 l 507 387 l 481 387 l 481 235 l 364 235 l 364 387 l 314 387 l 314 0 l 75 0 l 75 987 l 314 987 l 314 601 l 364 601 l 364 777 l 481 777 l 481 601 l 493 601 l 646 987 l 946 987 z "},"\u049d":{"ha":863,"x_min":80,"x_max":861,"o":"m 856 734 l 673 392 l 861 0 l 567 0 l 488 256 l 457 256 l 457 146 l 357 146 l 357 256 l 309 256 l 309 0 l 80 0 l 80 734 l 309 734 l 309 470 l 357 470 l 357 594 l 457 594 l 457 470 l 492 470 l 563 734 l 856 734 z "},"\u04a0":{"ha":1150,"x_min":15,"x_max":1179,"o":"m 688 391 l 575 391 l 575 0 l 337 0 l 337 810 l 15 810 l 15 987 l 575 987 l 575 606 l 667 606 l 857 987 l 1145 987 l 873 532 l 1179 0 l 897 0 l 688 391 z "},"\u04a1":{"ha":1008,"x_min":37,"x_max":1025,"o":"m 596 256 l 528 256 l 528 0 l 298 0 l 298 557 l 37 557 l 37 734 l 528 734 l 528 470 l 593 470 l 709 734 l 1003 734 l 789 395 l 789 395 l 1025 0 l 715 0 l 596 256 z "},"\u04a2":{"ha":1102,"x_min":75,"x_max":1065,"o":"m 900 0 l 663 0 l 663 412 l 313 412 l 313 0 l 75 0 l 75 987 l 313 987 l 313 595 l 663 595 l 663 987 l 900 987 l 900 0 m 1065 -241 l 837 -241 l 837 151 l 1065 151 l 1065 -241 z "},"\u04a3":{"ha":927,"x_min":60,"x_max":884,"o":"m 718 0 l 488 0 l 488 272 l 288 272 l 288 0 l 60 0 l 60 734 l 288 734 l 288 448 l 488 448 l 488 734 l 718 734 l 718 0 m 884 -241 l 656 -241 l 656 151 l 884 151 l 884 -241 z "},"\u04a4":{"ha":1380,"x_min":75,"x_max":1324,"o":"m 313 595 l 663 595 l 663 987 l 1324 987 l 1324 811 l 901 811 l 900 812 l 900 0 l 663 0 l 663 412 l 313 412 l 313 0 l 75 0 l 75 987 l 313 987 l 313 595 z "},"\u04a5":{"ha":977,"x_min":61,"x_max":942,"o":"m 290 448 l 490 448 l 490 734 l 942 734 l 942 557 l 719 557 l 719 0 l 490 0 l 490 272 l 290 272 l 290 0 l 61 0 l 61 734 l 290 734 l 290 448 z "},"\u04a6":{"ha":1466,"x_min":73,"x_max":1428,"o":"m 904 566 l 1014 566 q 1320 462 1213 566 q 1428 165 1428 357 q 1378 -55 1428 41 q 1241 -198 1329 -151 q 1035 -245 1154 -245 l 1035 -79 q 1199 152 1199 -79 q 1153 329 1199 269 q 1017 390 1107 390 l 904 390 l 904 0 l 666 0 l 666 804 l 311 804 l 311 0 l 73 0 l 73 987 l 904 987 l 904 566 z "},"\u04a7":{"ha":1197,"x_min":61,"x_max":1174,"o":"m 721 463 l 751 463 q 1063 376 955 463 q 1171 130 1171 289 q 1105 -54 1174 33 q 924 -187 1036 -142 l 817 -47 q 916 38 889 -3 q 942 130 942 79 q 749 286 943 286 l 721 286 l 721 0 l 492 0 l 492 557 l 290 557 l 290 0 l 61 0 l 61 734 l 721 734 l 721 463 z "},"\u04a8":{"ha":1162,"x_min":58,"x_max":1090,"o":"m 1090 -5 q 808 39 937 -5 q 561 -14 696 -14 q 302 44 417 -14 q 123 208 187 103 q 58 444 58 313 l 58 599 q 106 805 58 712 q 241 950 155 899 q 435 1002 327 1002 l 435 810 q 347 752 380 810 q 313 597 313 694 l 313 444 q 381 250 313 323 q 562 176 448 176 l 574 176 l 587 177 q 457 508 457 311 l 457 630 q 495 821 457 735 q 601 955 533 907 q 753 1002 669 1002 q 925 949 850 1002 q 1042 800 1001 896 q 1084 584 1084 705 l 1084 489 q 980 177 1084 309 q 1090 168 1031 168 l 1090 -5 m 678 504 q 775 274 678 366 q 845 492 845 361 l 845 616 q 826 766 845 721 q 753 811 806 811 q 696 773 713 811 q 678 647 680 735 l 678 504 z "},"\u04a9":{"ha":927,"x_min":50,"x_max":888,"o":"m 888 -22 q 641 13 745 -22 q 461 -14 555 -14 q 249 33 343 -14 q 102 163 154 79 q 50 349 50 246 l 50 425 q 90 591 50 517 q 203 706 130 665 q 366 747 275 747 l 366 566 q 294 418 294 549 l 294 349 q 332 229 294 276 q 433 172 370 181 q 389 351 389 249 l 389 467 q 457 667 389 588 q 629 747 525 747 q 812 658 740 747 q 884 425 884 569 l 884 319 q 788 99 884 189 q 888 91 833 91 l 888 -22 m 541 337 q 587 203 541 261 q 656 338 656 249 l 656 446 q 639 532 656 499 q 598 565 623 565 q 558 536 574 565 q 541 460 541 507 l 541 337 z "},"\u04b2":{"ha":945,"x_min":3,"x_max":939,"o":"m 443 659 l 604 987 l 876 987 l 600 498 l 884 0 l 609 0 l 443 334 l 277 0 l 3 0 l 286 498 l 10 987 l 281 987 l 443 659 m 939 -241 l 711 -241 l 711 151 l 939 151 l 939 -241 z "},"\u04b3":{"ha":766,"x_min":7,"x_max":756,"o":"m 361 532 l 468 734 l 705 734 l 512 376 l 715 0 l 476 0 l 361 217 l 248 0 l 7 0 l 211 376 l 18 734 l 258 734 l 361 532 m 756 -241 l 528 -241 l 528 151 l 756 151 l 756 -241 z "},"\u04b4":{"ha":1237,"x_min":16,"x_max":1208,"o":"m 227 810 l 16 810 l 16 987 l 669 987 l 669 810 l 464 810 l 464 183 l 819 183 l 819 987 l 1057 987 l 1057 181 l 1208 181 l 1195 -238 l 970 -238 l 970 0 l 227 0 l 227 810 z "},"\u04b5":{"ha":964,"x_min":35,"x_max":948,"o":"m 168 557 l 35 557 l 35 734 l 515 734 l 515 557 l 396 557 l 396 176 l 598 176 l 598 734 l 827 734 l 827 175 l 948 175 l 935 -218 l 720 -218 l 720 0 l 168 0 l 168 557 z "},"\u04b6":{"ha":1096,"x_min":90,"x_max":1059,"o":"m 897 987 l 897 0 l 660 0 l 660 365 l 590 356 l 503 351 q 197 437 303 351 q 90 682 92 524 l 90 987 l 328 987 l 328 686 q 367 569 328 605 q 503 534 406 534 l 523 534 q 660 547 606 538 l 660 987 l 897 987 m 1059 -241 l 831 -241 l 831 151 l 1059 151 l 1059 -241 z "},"\u04b7":{"ha":925,"x_min":54,"x_max":883,"o":"m 716 0 l 486 0 l 486 220 q 418 214 447 214 q 146 284 237 214 q 54 494 55 354 l 54 734 l 283 734 l 283 492 q 311 411 283 433 q 418 390 339 390 q 486 396 452 390 l 486 734 l 716 734 l 716 0 m 883 -241 l 654 -241 l 654 151 l 883 151 l 883 -241 z "},"\u04b8":{"ha":943,"x_min":61,"x_max":869,"o":"m 299 987 l 299 687 q 325 584 299 618 q 402 540 350 551 l 402 729 l 518 729 l 518 535 q 631 547 583 538 l 631 987 l 869 987 l 869 0 l 631 0 l 631 365 q 518 353 570 355 l 518 197 l 402 197 l 402 353 q 151 452 240 368 q 61 683 62 536 l 61 987 l 299 987 z "},"\u04b9":{"ha":783,"x_min":62,"x_max":724,"o":"m 724 0 l 494 0 l 494 220 l 451 215 l 451 109 l 335 109 l 335 218 q 62 489 66 252 l 62 734 l 291 734 l 291 487 q 335 402 293 420 l 335 570 l 451 570 l 451 391 l 494 397 l 494 734 l 724 734 l 724 0 z "},"\u04ba":{"ha":983,"x_min":92,"x_max":899,"o":"m 92 0 l 92 987 l 330 987 l 330 623 q 488 637 418 637 q 792 550 686 637 q 899 304 898 464 l 899 0 l 662 0 l 662 302 q 623 418 662 382 q 488 454 584 454 l 467 453 q 330 440 382 449 l 330 0 l 92 0 z "},"\u04bc":{"ha":1036,"x_min":-54,"x_max":979,"o":"m 631 -16 q 287 98 410 -16 q 163 417 163 211 l 163 431 q 3 529 60 450 q -54 734 -54 608 l 95 734 q 163 597 95 630 q 221 805 165 711 q 373 949 276 898 q 587 1000 470 1001 q 876 876 772 1000 q 979 527 979 752 l 979 410 l 401 410 q 459 242 401 298 q 631 186 518 186 q 890 224 768 186 l 924 33 q 800 -1 884 14 q 631 -16 716 -16 m 587 798 q 452 743 501 798 q 401 598 402 688 l 742 598 l 742 619 q 702 751 742 705 q 587 798 662 798 z "},"\u04bd":{"ha":833,"x_min":-56,"x_max":844,"o":"m 534 -14 q 349 26 431 -14 q 217 138 267 66 q 159 303 168 211 q 0 396 56 322 q -56 586 -56 469 l 75 586 q 162 446 75 477 q 274 667 182 587 q 510 747 366 747 q 754 651 665 747 q 844 384 844 555 l 844 295 l 389 295 q 443 198 401 233 q 549 163 484 163 q 720 239 659 163 l 824 115 q 703 21 781 56 q 534 -14 625 -14 m 509 571 q 389 438 408 571 l 620 438 l 620 456 q 592 541 621 511 q 509 571 563 571 z "},"\u04c3":{"ha":914,"x_min":75,"x_max":900,"o":"m 588 558 q 819 432 738 533 q 900 164 900 331 q 849 -57 900 41 q 709 -203 798 -155 q 500 -250 619 -250 l 501 -77 q 662 149 662 -77 q 618 325 663 265 q 488 384 574 384 l 314 384 l 314 0 l 75 0 l 75 987 l 314 987 l 314 600 l 373 600 l 561 987 l 861 987 l 588 558 z "},"\u04c4":{"ha":810,"x_min":80,"x_max":784,"o":"m 571 401 q 727 286 675 363 q 779 100 779 210 q 751 -23 781 39 q 665 -135 722 -85 q 532 -216 609 -185 l 425 -76 q 522 7 494 -35 q 550 100 550 49 q 510 211 551 170 q 389 256 469 251 l 309 256 l 309 0 l 80 0 l 80 734 l 309 734 l 309 470 l 370 470 l 491 734 l 784 734 l 571 401 z "},"\u04c5":{"ha":1102,"x_min":24,"x_max":1065,"o":"m 905 987 l 905 0 l 667 0 l 667 804 l 446 804 l 429 472 q 382 198 419 300 q 276 48 345 96 q 88 0 207 1 l 24 0 l 24 183 l 58 186 q 161 274 129 197 q 202 533 193 351 l 219 987 l 905 987 m 925 -289 l 810 -235 l 833 -189 q 882 -20 880 -100 l 882 149 l 1065 149 l 1065 2 q 1025 -157 1064 -76 q 925 -289 985 -237 z "},"\u04c6":{"ha":926,"x_min":7,"x_max":884,"o":"m 720 734 l 720 0 l 491 0 l 491 557 l 354 557 l 342 333 q 267 83 329 166 q 81 0 204 1 l 9 0 l 7 175 l 31 178 q 98 238 76 183 q 126 406 120 294 l 140 734 l 720 734 m 743 -289 l 628 -235 l 651 -189 q 701 -20 699 -100 l 701 149 l 884 149 l 883 2 q 843 -157 882 -76 q 743 -289 804 -237 z "},"\u04c7":{"ha":977,"x_min":73,"x_max":904,"o":"m 311 987 l 311 576 l 666 576 l 666 987 l 904 987 l 904 -3 q 830 -220 904 -144 q 621 -296 755 -296 q 509 -285 562 -296 l 519 -105 q 587 -113 551 -113 q 666 -3 666 -113 l 666 393 l 311 393 l 311 0 l 73 0 l 73 987 l 311 987 z "},"\u04c8":{"ha":781,"x_min":61,"x_max":719,"o":"m 290 734 l 290 448 l 490 448 l 490 734 l 719 734 l 719 -8 q 646 -222 719 -147 q 441 -296 573 -296 q 332 -285 382 -296 l 342 -112 q 410 -120 377 -120 q 490 -8 490 -120 l 490 272 l 290 272 l 290 0 l 61 0 l 61 734 l 290 734 z "},"\u04c9":{"ha":1099,"x_min":75,"x_max":1062,"o":"m 900 0 l 663 0 l 663 412 l 313 412 l 313 0 l 75 0 l 75 987 l 313 987 l 313 595 l 663 595 l 663 987 l 900 987 l 900 0 m 922 -289 l 806 -235 l 829 -189 q 879 -20 877 -100 l 879 149 l 1062 149 l 1061 2 q 1021 -157 1061 -76 q 922 -289 982 -237 z "},"\u04ca":{"ha":924,"x_min":60,"x_max":882,"o":"m 718 0 l 488 0 l 488 272 l 288 272 l 288 0 l 60 0 l 60 734 l 288 734 l 288 448 l 488 448 l 488 734 l 718 734 l 718 0 m 741 -289 l 626 -235 l 649 -189 q 699 -20 696 -100 l 699 149 l 882 149 l 881 2 q 841 -157 880 -76 q 741 -289 802 -237 z "},"\u04cd":{"ha":1339,"x_min":75,"x_max":1303,"o":"m 387 987 l 608 300 l 827 987 l 1141 987 l 1141 0 l 902 0 l 902 231 l 925 703 l 686 0 l 529 0 l 290 703 l 313 231 l 313 0 l 75 0 l 75 987 l 387 987 m 1163 -289 l 1048 -235 l 1071 -189 q 1120 -20 1118 -100 l 1120 149 l 1303 149 l 1303 2 q 1263 -157 1302 -76 q 1163 -289 1223 -237 z "},"\u04ce":{"ha":1183,"x_min":79,"x_max":1141,"o":"m 524 252 l 690 734 l 977 734 l 977 0 l 748 0 l 748 407 l 600 0 l 448 0 l 309 385 l 309 0 l 79 0 l 79 734 l 360 734 l 524 252 m 1000 -289 l 885 -235 l 908 -189 q 958 -20 956 -100 l 958 149 l 1141 149 l 1140 2 q 1100 -157 1139 -76 q 1000 -289 1061 -237 z "},"\u04d8":{"ha":970,"x_min":47,"x_max":911,"o":"m 416 1002 q 780 881 649 1002 q 911 545 911 761 l 911 434 q 855 203 911 307 q 700 42 799 100 q 479 -14 600 -15 q 160 110 274 -14 q 47 459 47 234 l 47 574 l 673 574 q 601 743 666 686 q 416 800 536 800 q 142 761 271 800 l 109 952 l 122 957 q 416 1002 249 1002 m 479 187 q 608 239 558 187 q 671 387 659 290 l 283 387 l 283 366 q 334 235 283 282 q 479 187 384 187 z "},"\u04e0":{"ha":800,"x_min":46,"x_max":781,"o":"m 500 804 l 96 804 l 96 987 l 770 987 l 770 835 l 541 592 q 719 485 656 564 q 781 277 781 405 q 734 122 781 189 q 602 21 687 56 q 405 -14 516 -14 q 220 21 302 -14 q 92 121 137 56 q 46 274 46 185 l 284 274 q 318 198 284 227 q 405 169 351 169 q 506 201 468 169 q 544 282 544 233 q 500 419 544 378 q 371 460 456 460 l 285 460 l 285 594 l 500 804 z "},"\u04e1":{"ha":801,"x_min":48,"x_max":777,"o":"m 505 557 l 89 557 l 89 734 l 764 734 l 764 587 l 530 338 q 713 232 649 312 q 777 22 777 152 q 675 -189 777 -110 q 404 -268 574 -268 q 220 -232 302 -268 q 93 -132 137 -197 q 48 20 48 -68 l 277 20 q 312 -60 277 -28 q 404 -92 347 -92 q 509 -58 469 -92 q 549 28 549 -24 q 507 162 549 118 q 376 208 465 207 l 285 208 l 285 338 l 505 557 z "},"\u04fa":{"ha":839,"x_min":15,"x_max":805,"o":"m 805 804 l 376 804 l 376 0 l 138 0 l 138 987 l 805 987 l 805 804 m 510 441 l 15 441 l 15 571 l 510 571 l 510 441 m 588 201 l 588 -8 q 515 -222 588 -147 q 310 -296 442 -296 q 202 -285 252 -296 l 212 -112 q 279 -120 247 -120 q 358 -9 358 -120 l 358 201 l 588 201 z "},"\u04fb":{"ha":634,"x_min":-1,"x_max":630,"o":"m 630 557 l 341 557 l 341 0 l 112 0 l 112 734 l 630 734 l 630 557 m 494 322 l -1 322 l -1 452 l 494 452 l 494 322 m 522 195 l 522 -14 q 449 -228 522 -153 q 243 -302 376 -302 q 136 -291 185 -302 l 145 -118 q 213 -126 180 -126 q 292 -15 292 -126 l 292 195 l 522 195 z "},"\u04fc":{"ha":1008,"x_min":3,"x_max":1002,"o":"m 443 659 l 604 987 l 876 987 l 600 498 l 884 0 l 609 0 l 443 334 l 277 0 l 3 0 l 286 498 l 10 987 l 281 987 l 443 659 m 1002 201 l 1002 -8 q 929 -222 1002 -147 q 724 -296 857 -296 q 616 -285 666 -296 l 626 -112 q 694 -120 661 -120 q 772 -9 772 -120 l 772 201 l 1002 201 z "},"\u04fd":{"ha":828,"x_min":7,"x_max":819,"o":"m 361 532 l 468 734 l 705 734 l 512 376 l 715 0 l 476 0 l 361 217 l 248 0 l 7 0 l 211 376 l 18 734 l 258 734 l 361 532 m 819 201 l 819 -8 q 746 -222 819 -147 q 541 -296 673 -296 q 433 -285 483 -296 l 443 -112 q 511 -120 478 -120 q 589 -9 589 -120 l 589 201 l 819 201 z "},"\u0500":{"ha":865,"x_min":44,"x_max":800,"o":"m 562 669 l 562 987 l 800 987 l 800 0 l 439 0 q 233 42 323 0 q 94 161 143 85 q 44 334 44 238 q 93 506 44 429 q 230 625 142 582 q 431 669 318 667 l 562 669 m 562 183 l 562 486 l 439 486 q 326 443 369 486 q 283 336 283 400 q 326 226 283 269 q 437 183 368 184 l 562 183 z "},"\u0502":{"ha":1316,"x_min":87,"x_max":1241,"o":"m 481 0 q 276 42 366 0 q 137 161 186 85 q 87 334 87 237 q 136 506 87 430 q 273 625 185 583 q 474 669 361 667 l 604 669 l 604 987 l 842 987 l 842 184 l 884 184 q 1002 363 992 186 q 993 509 1004 416 q 965 652 982 602 l 962 662 l 1194 662 q 1227 512 1213 607 q 1240 363 1241 416 q 1144 95 1236 189 q 885 0 1052 0 l 481 0 m 604 183 l 604 486 l 481 486 q 368 443 412 486 q 325 336 325 401 q 368 225 325 268 q 483 183 412 183 l 604 183 z "},"\u0503":{"ha":1179,"x_min":58,"x_max":1139,"o":"m 58 366 q 135 644 58 540 q 345 747 211 747 q 498 671 435 747 l 498 1058 l 727 1058 l 727 264 q 745 191 727 218 q 793 165 764 165 q 877 218 848 166 q 909 359 906 269 q 867 632 911 486 l 1092 632 l 1107 572 q 1137 359 1139 448 q 1092 161 1136 245 q 969 31 1048 76 q 793 -14 891 -14 q 536 110 603 -17 q 343 -14 466 -14 q 135 85 211 -14 q 58 356 58 184 l 58 366 m 498 527 q 403 571 463 571 q 317 518 346 571 q 288 351 288 465 q 316 208 288 253 q 401 162 345 162 q 505 208 469 162 q 498 262 499 233 l 498 527 z "},"\u0504":{"ha":1090,"x_min":48,"x_max":1041,"o":"m 119 395 l 119 582 l 262 582 q 385 613 347 582 q 422 707 422 644 q 286 801 422 798 l 48 801 l 48 987 l 286 987 q 564 913 467 985 q 660 705 660 842 q 450 477 660 543 q 657 275 652 441 l 657 221 q 665 186 656 201 q 687 172 673 172 q 770 222 742 173 q 802 359 799 272 q 761 632 805 486 l 994 632 q 1026 497 1012 566 q 1040 359 1041 429 q 991 160 1038 245 q 860 31 943 75 q 671 -14 777 -14 q 419 221 432 -20 l 419 267 q 386 361 418 327 q 299 395 353 395 l 119 395 z "},"\u0505":{"ha":889,"x_min":29,"x_max":895,"o":"m 550 187 q 591 119 549 119 q 644 163 625 120 q 665 284 663 207 q 625 500 668 388 l 848 500 q 887 366 879 410 q 895 284 895 323 q 813 63 892 144 q 606 -18 734 -18 q 397 19 466 -21 q 321 145 329 58 l 321 194 q 281 253 321 250 l 88 253 l 87 418 l 217 418 q 290 481 290 420 q 210 556 290 556 l 33 556 l 29 734 l 220 734 q 439 675 360 732 q 519 515 519 619 q 417 361 519 412 q 550 216 547 331 l 550 187 z "},"\u0506":{"ha":850,"x_min":39,"x_max":821,"o":"m 74 378 l 73 555 l 260 555 q 406 677 406 555 q 368 774 406 738 q 261 811 331 811 l 45 811 l 39 987 l 258 987 q 534 908 434 987 q 635 691 635 829 q 475 470 635 540 q 604 387 564 445 q 646 237 645 330 l 646 178 l 821 178 l 821 31 q 781 -128 820 -47 q 681 -260 741 -209 l 566 -206 l 604 -128 q 637 0 633 -63 l 460 0 q 417 164 420 31 l 417 232 q 274 378 417 376 l 74 378 z "},"\u0507":{"ha":818,"x_min":69,"x_max":791,"o":"m 652 -268 l 536 -214 l 576 -131 q 608 0 605 -67 l 410 0 q 402 146 402 14 q 290 248 402 245 l 101 248 l 99 395 l 286 395 q 360 416 333 395 q 387 473 387 437 q 358 534 387 509 q 286 559 330 559 l 78 559 l 69 734 l 283 734 q 527 668 437 734 q 617 492 617 602 q 514 324 617 385 q 630 170 620 282 l 791 170 l 791 23 q 752 -134 790 -54 q 652 -268 713 -215 z "},"\u0508":{"ha":1337,"x_min":42,"x_max":1313,"o":"m 667 801 l 463 801 l 446 472 q 399 199 436 300 q 294 49 363 97 q 105 0 224 1 l 42 0 l 42 183 l 75 186 q 178 274 146 197 q 220 533 210 351 l 236 987 l 904 987 l 904 279 q 966 172 904 170 q 1044 222 1017 172 q 1074 359 1072 273 q 1032 632 1077 482 l 1266 632 q 1298 497 1284 566 q 1312 359 1313 429 q 1266 161 1310 245 q 1143 31 1221 76 q 966 -14 1065 -14 q 745 54 821 -14 q 667 258 669 123 l 667 801 z "},"\u0509":{"ha":1206,"x_min":41,"x_max":1137,"o":"m 505 554 l 389 554 l 378 343 q 302 85 366 170 q 115 0 239 0 l 45 0 l 41 175 l 66 178 q 133 237 111 183 q 161 406 155 290 l 175 734 l 734 734 l 734 264 q 755 192 734 219 q 815 165 777 165 q 881 210 858 165 q 905 331 903 254 q 864 589 907 454 l 1088 589 l 1101 541 q 1135 331 1137 415 q 1093 148 1133 226 q 979 28 1052 70 q 815 -14 907 -14 q 585 55 664 -14 q 505 260 506 123 l 505 554 z "},"\u050a":{"ha":1375,"x_min":75,"x_max":1312,"o":"m 903 987 l 903 262 q 919 197 903 222 q 963 172 935 172 q 1042 222 1015 173 q 1072 359 1069 272 q 1031 632 1075 486 l 1265 632 l 1280 572 q 1310 359 1312 448 q 1265 161 1309 245 q 1142 31 1221 77 q 963 -14 1063 -14 q 747 53 823 -17 q 665 265 672 123 l 665 393 l 313 393 l 313 0 l 75 0 l 75 987 l 313 987 l 313 576 l 665 576 l 665 987 l 903 987 z "},"\u050b":{"ha":1143,"x_min":45,"x_max":1112,"o":"m 481 281 l 274 281 l 274 0 l 45 0 l 45 734 l 274 734 l 274 460 l 481 460 l 481 734 l 711 734 l 711 262 q 732 192 709 219 q 791 165 755 165 q 857 210 834 166 q 882 331 880 254 q 841 589 884 450 l 1065 589 q 1097 461 1082 526 q 1110 331 1112 397 q 1068 148 1109 225 q 956 28 1028 70 q 791 -14 883 -14 q 569 51 647 -17 q 481 262 491 119 l 481 281 z "},"\u050c":{"ha":889,"x_min":32,"x_max":857,"o":"m 476 -14 q 246 40 348 -14 q 88 190 144 94 q 32 404 32 286 l 32 583 q 88 798 32 701 q 246 948 144 894 q 476 1002 348 1002 q 720 941 627 1002 l 677 769 q 476 815 585 815 q 327 749 384 815 q 270 581 270 683 l 270 405 q 327 237 270 303 q 476 172 384 172 q 581 208 545 173 q 618 304 616 242 q 585 533 621 401 l 817 533 l 844 421 q 856 304 857 362 q 749 71 853 156 q 476 -14 644 -14 z "},"\u050d":{"ha":746,"x_min":38,"x_max":722,"o":"m 421 165 q 476 183 462 166 q 492 232 490 201 q 479 364 492 304 l 703 364 q 721 232 722 281 q 639 51 718 115 q 421 -14 559 -14 q 144 89 250 -14 q 38 361 38 192 l 38 381 q 84 568 38 484 q 214 700 130 652 q 408 747 298 747 q 599 703 534 747 l 568 529 q 408 568 503 568 q 305 516 343 568 q 267 376 267 464 l 267 353 q 309 217 267 269 q 421 165 351 165 z "},"\u050e":{"ha":976,"x_min":20,"x_max":943,"o":"m 297 801 l 20 801 l 20 987 l 801 987 l 801 801 l 534 801 l 534 265 q 550 198 534 224 q 595 172 567 172 q 675 222 647 173 q 705 359 703 272 q 664 632 707 483 l 897 632 q 929 495 916 563 q 942 359 943 428 q 897 161 941 245 q 774 31 853 77 q 595 -14 695 -14 q 297 265 313 -20 l 297 801 z "},"\u050f":{"ha":882,"x_min":43,"x_max":855,"o":"m 223 556 l 43 556 l 43 734 l 659 734 l 659 556 l 452 556 l 452 262 q 472 192 451 220 q 532 165 494 165 q 623 288 619 168 q 583 477 626 380 l 807 477 l 822 437 q 853 288 855 348 q 762 67 850 149 q 532 -14 674 -14 q 309 52 387 -17 q 223 262 231 121 l 223 556 z "},"\u0510":{"ha":894,"x_min":55,"x_max":859,"o":"m 55 277 q 100 420 55 362 q 232 507 146 479 q 112 596 155 541 q 70 720 70 652 q 177 927 70 853 q 470 1002 283 1002 q 661 965 574 1002 q 797 865 749 929 q 846 718 846 800 l 608 718 q 569 791 608 764 q 470 818 530 818 q 352 790 396 818 q 309 713 309 762 q 448 592 309 596 l 599 592 l 599 416 l 458 416 q 335 386 377 416 q 292 282 292 355 q 341 200 292 232 q 470 169 390 169 q 578 198 534 169 q 622 274 622 228 l 859 274 q 810 123 859 189 q 670 21 762 57 q 470 -14 578 -14 q 168 64 281 -14 q 55 277 55 143 z "},"\u0512":{"ha":1168,"x_min":24,"x_max":1132,"o":"m 905 987 l 905 0 l 667 0 l 667 804 l 446 804 l 429 472 q 382 198 419 300 q 276 48 345 96 q 88 0 207 1 l 24 0 l 24 183 l 58 186 q 161 274 129 197 q 202 533 193 351 l 219 987 l 905 987 m 1132 201 l 1132 -8 q 1059 -222 1132 -147 q 854 -296 986 -296 q 746 -285 795 -296 l 755 -112 q 823 -120 791 -120 q 902 -9 902 -120 l 902 201 l 1132 201 z "},"\u0513":{"ha":992,"x_min":7,"x_max":949,"o":"m 720 734 l 720 0 l 491 0 l 491 557 l 354 557 l 342 333 q 267 83 329 166 q 81 0 204 1 l 9 0 l 7 175 l 31 178 q 98 238 76 183 q 126 406 120 294 l 140 734 l 720 734 m 949 201 l 949 -8 q 877 -222 949 -147 q 671 -296 804 -296 q 564 -285 613 -296 l 573 -112 q 641 -120 608 -120 q 720 -9 720 -120 l 720 201 l 949 201 z "},"\u2000":{"ha":708,"x_min":0,"x_max":0,"o":""},"\u2001":{"ha":1417,"x_min":0,"x_max":0,"o":""},"\u2002":{"ha":708,"x_min":0,"x_max":0,"o":""},"\u2003":{"ha":1417,"x_min":0,"x_max":0,"o":""},"\u2004":{"ha":473,"x_min":0,"x_max":0,"o":""},"\u2005":{"ha":354,"x_min":0,"x_max":0,"o":""},"\u2006":{"ha":236,"x_min":0,"x_max":0,"o":""},"\u2007":{"ha":781,"x_min":0,"x_max":0,"o":""},"\u2008":{"ha":380,"x_min":0,"x_max":0,"o":""},"\u2009":{"ha":283,"x_min":0,"x_max":0,"o":""},"\u200a":{"ha":142,"x_min":0,"x_max":0,"o":""},"\u200b":{"ha":0,"x_min":0,"x_max":0,"o":""},"\u2010":{"ha":625,"x_min":103,"x_max":511,"o":"m 511 337 l 103 337 l 103 514 l 511 514 l 511 337 z "},"\u2011":{"ha":625,"x_min":103,"x_max":511,"o":"m 511 337 l 103 337 l 103 514 l 511 514 l 511 337 z "},"\u2013":{"ha":859,"x_min":100,"x_max":815,"o":"m 815 392 l 100 392 l 100 571 l 815 571 l 815 392 z "},"\u2014":{"ha":1045,"x_min":59,"x_max":1013,"o":"m 1013 392 l 59 392 l 59 571 l 1013 571 l 1013 392 z "},"\u2017":{"ha":611,"x_min":0,"x_max":612,"o":"m 612 -283 l 0 -283 l 0 -180 l 612 -180 l 612 -283 m 612 -102 l 0 -102 l 0 0 l 612 0 l 612 -102 z "},"\u2018":{"ha":347,"x_min":73,"x_max":298,"o":"m 197 1069 l 298 1015 q 240 827 242 914 l 240 707 l 73 707 l 73 819 q 110 951 74 880 q 197 1069 146 1022 z "},"\u2019":{"ha":337,"x_min":45,"x_max":269,"o":"m 145 678 l 45 732 q 102 924 101 830 l 102 1042 l 269 1042 l 269 931 q 233 797 269 868 q 145 678 197 725 z "},"\u201a":{"ha":377,"x_min":56,"x_max":281,"o":"m 157 -210 l 56 -156 q 106 34 105 -71 l 106 169 l 281 169 l 281 40 q 244 -93 280 -22 q 157 -210 208 -163 z "},"\u201b":{"ha":294,"x_min":47,"x_max":271,"o":"m 214 1042 l 214 924 q 271 732 215 830 l 171 678 q 83 796 119 724 q 47 930 47 868 l 47 1042 l 214 1042 z "},"\u201c":{"ha":593,"x_min":78,"x_max":541,"o":"m 202 1069 l 302 1015 q 245 827 247 914 l 245 707 l 78 707 l 78 819 q 115 951 79 880 q 202 1069 151 1022 m 440 1069 l 541 1015 q 483 827 485 914 l 483 707 l 316 707 l 316 819 q 353 951 317 880 q 440 1069 389 1022 z "},"\u201d":{"ha":597,"x_min":54,"x_max":524,"o":"m 155 678 l 54 732 q 112 924 111 830 l 112 1042 l 279 1042 l 279 931 q 242 797 279 868 q 155 678 206 725 m 400 678 l 300 732 q 357 924 356 830 l 357 1042 l 524 1042 l 524 931 q 488 797 524 868 q 400 678 452 725 z "},"\u201e":{"ha":594,"x_min":56,"x_max":527,"o":"m 164 -224 l 56 -170 q 106 33 105 -79 l 106 182 l 281 182 l 281 42 q 248 -99 281 -24 q 164 -224 216 -174 m 402 -224 l 294 -170 q 351 32 349 -66 l 351 182 l 527 182 l 526 38 q 490 -100 525 -27 q 402 -224 454 -174 z "},"\u2020":{"ha":738,"x_min":34,"x_max":705,"o":"m 705 551 l 482 551 l 482 0 l 254 0 l 254 551 l 34 551 l 34 734 l 254 734 l 254 987 l 482 987 l 482 734 l 705 734 l 705 551 z "},"\u2021":{"ha":809,"x_min":70,"x_max":741,"o":"m 741 0 l 518 0 l 518 -282 l 289 -282 l 289 0 l 70 0 l 70 176 l 289 176 l 289 557 l 70 557 l 70 734 l 289 734 l 289 987 l 518 987 l 518 734 l 741 734 l 741 557 l 518 557 l 518 176 l 741 176 l 741 0 z "},"\u2022":{"ha":513,"x_min":91,"x_max":435,"o":"m 91 517 q 138 635 91 590 q 262 681 186 681 q 387 637 340 681 q 435 521 433 593 l 435 492 q 388 375 435 420 q 263 331 341 331 q 139 375 186 331 q 91 489 92 418 l 91 517 z "},"\u2025":{"ha":759,"x_min":87,"x_max":671,"o":"m 213 222 q 303 190 267 222 q 339 107 339 157 q 303 25 339 57 q 213 -7 267 -7 q 122 25 158 -7 q 87 107 87 58 q 122 189 87 157 q 213 222 158 222 m 545 222 q 635 190 599 222 q 671 107 671 157 q 635 25 671 57 q 545 -7 599 -7 q 454 25 490 -7 q 418 107 418 58 q 454 189 418 157 q 545 222 490 222 z "},"\u2026":{"ha":1076,"x_min":87,"x_max":1002,"o":"m 213 222 q 303 190 267 222 q 339 107 339 157 q 303 25 339 57 q 213 -7 267 -7 q 122 25 158 -7 q 87 107 87 58 q 122 189 87 157 q 213 222 158 222 m 545 222 q 635 190 599 222 q 671 107 671 157 q 635 25 671 57 q 545 -7 599 -7 q 454 25 490 -7 q 418 107 418 58 q 454 189 418 157 q 545 222 490 222 m 876 222 q 966 190 930 222 q 1002 107 1002 157 q 966 25 1002 57 q 876 -7 930 -7 q 785 25 821 -7 q 749 107 749 58 q 785 189 749 157 q 876 222 821 222 z "},"\u2027":{"ha":408,"x_min":77,"x_max":330,"o":"m 77 427 q 86 471 77 451 q 112 507 95 492 q 152 530 129 522 q 203 538 175 538 q 255 530 232 538 q 295 507 278 522 q 321 471 312 492 q 330 427 330 451 q 321 382 330 402 q 295 347 312 361 q 255 323 278 332 q 203 315 232 315 q 152 323 175 315 q 112 347 129 332 q 86 382 95 361 q 77 427 77 402 z "},"\u2030":{"ha":1337,"x_min":68,"x_max":1297,"o":"m 549 242 q 611 388 549 330 q 768 446 672 446 q 923 377 869 446 q 1077 446 979 446 q 1236 389 1175 446 q 1297 237 1297 332 l 1297 190 q 1236 44 1297 101 q 1078 -14 1175 -14 q 923 54 979 -14 q 770 -14 869 -14 q 611 44 673 -14 q 549 193 549 101 l 549 242 m 68 797 q 125 943 68 886 q 273 1001 182 1001 q 431 943 370 1001 q 492 793 492 886 l 492 745 q 431 600 492 657 q 274 543 370 543 q 126 600 184 543 q 68 750 68 657 l 68 797 m 333 74 l 227 127 l 709 899 l 815 846 l 333 74 m 696 190 q 717 134 696 158 q 770 110 739 110 q 841 172 836 110 l 842 242 q 822 300 842 278 q 768 322 802 322 q 715 300 735 322 q 696 240 696 278 l 696 190 m 1004 190 q 1026 134 1004 158 q 1078 110 1047 110 q 1149 172 1144 110 l 1150 242 q 1131 300 1150 278 q 1077 322 1111 322 q 1024 300 1044 322 q 1004 240 1004 278 l 1004 190 m 200 745 q 220 688 200 710 q 274 666 239 666 q 326 688 307 666 q 346 744 345 709 l 346 797 q 326 854 346 831 q 273 878 307 878 q 200 787 200 878 l 200 745 z "},"\u2039":{"ha":441,"x_min":73,"x_max":397,"o":"m 240 349 l 397 79 l 258 79 l 73 343 l 73 356 l 258 621 l 397 621 l 240 349 z "},"\u203a":{"ha":420,"x_min":52,"x_max":376,"o":"m 192 620 l 376 355 l 376 342 l 192 78 l 52 78 l 209 349 l 52 620 l 192 620 z "},"\u2044":{"ha":612,"x_min":10,"x_max":599,"o":"m 117 74 l 10 127 l 492 899 l 599 846 l 117 74 z "},"\u2074":{"ha":521,"x_min":37,"x_max":479,"o":"m 425 680 l 479 680 l 479 559 l 425 559 l 425 452 l 273 452 l 273 559 l 47 559 l 37 657 l 273 987 l 425 987 l 425 680 m 179 680 l 273 680 l 273 809 l 262 793 l 179 680 z "},"\u207f":{"ha":577,"x_min":47,"x_max":528,"o":"m 172 987 l 193 903 q 347 994 245 994 q 528 795 524 994 l 528 444 l 373 444 l 373 734 q 352 834 373 806 q 289 863 331 863 q 202 814 227 863 l 202 444 l 47 444 l 47 987 l 172 987 z "},"\u20a4":{"ha":833,"x_min":72,"x_max":800,"o":"m 587 317 l 424 317 l 425 304 q 385 183 425 227 l 797 183 l 797 0 l 72 0 l 72 183 l 142 183 q 182 253 180 193 l 183 289 l 182 317 l 74 317 l 74 433 l 178 433 l 176 502 l 74 502 l 74 616 l 173 616 l 170 705 q 253 922 170 844 q 478 1000 336 1000 q 715 922 630 1000 q 800 711 800 844 l 576 711 q 484 817 576 817 q 408 705 408 817 l 411 616 l 587 616 l 587 502 l 416 502 l 419 433 l 587 433 l 587 317 z "},"\u20a6":{"ha":1143,"x_min":28,"x_max":1115,"o":"m 983 680 l 1115 680 l 1115 572 l 983 572 l 983 456 l 1115 456 l 1115 348 l 983 348 l 983 0 l 746 0 l 548 348 l 397 348 l 397 0 l 159 0 l 159 348 l 28 348 l 28 456 l 159 456 l 159 572 l 28 572 l 28 680 l 159 680 l 159 987 l 397 987 l 571 680 l 746 680 l 746 987 l 983 987 l 983 680 m 699 456 l 746 456 l 746 572 l 633 572 l 699 456 m 397 456 l 486 456 l 421 572 l 397 572 l 397 456 z "},"\u20a7":{"ha":1223,"x_min":88,"x_max":1158,"o":"m 1147 575 l 1026 575 l 1026 239 q 1042 181 1026 197 q 1101 165 1057 165 q 1158 170 1135 165 l 1158 6 q 1029 -14 1096 -14 q 854 42 911 -14 q 798 211 798 98 l 798 575 l 743 575 q 616 402 713 465 q 372 338 519 338 l 332 338 l 332 0 l 88 0 l 88 987 l 373 987 q 626 920 526 987 q 749 734 726 852 l 798 734 l 798 916 l 1026 916 l 1026 734 l 1147 734 l 1147 575 m 332 532 l 373 532 q 474 570 438 532 q 511 669 511 609 q 475 758 511 723 q 377 794 440 793 l 332 794 l 332 532 z "},"\u20a8":{"ha":1526,"x_min":75,"x_max":1484,"o":"m 441 349 l 313 349 l 313 0 l 75 0 l 75 987 l 463 987 q 738 909 639 987 q 837 689 837 831 q 795 518 837 586 q 665 408 753 450 l 871 10 l 871 0 l 616 0 l 441 349 m 313 532 l 463 532 q 565 568 531 532 q 600 667 600 604 q 565 767 600 731 q 463 804 530 804 l 313 804 l 313 532 m 1262 206 q 1232 253 1262 235 q 1116 290 1201 271 q 975 339 1030 309 q 890 414 919 370 q 861 515 861 458 q 944 682 861 616 q 1162 747 1027 747 q 1396 682 1308 747 q 1484 509 1484 616 l 1255 509 q 1162 597 1255 597 q 1101 577 1126 597 q 1077 527 1077 557 q 1107 477 1077 496 q 1202 446 1137 458 q 1317 417 1267 434 q 1482 213 1482 360 q 1393 50 1482 113 q 1162 -14 1304 -14 q 994 20 1068 -14 q 879 113 920 54 q 838 235 838 171 l 1051 235 q 1085 161 1053 184 q 1168 138 1118 138 q 1239 157 1215 138 q 1262 206 1262 176 z "},"\u20a9":{"ha":1175,"x_min":28,"x_max":1147,"o":"m 705 829 l 814 829 l 835 987 l 1070 987 l 1041 829 l 1147 829 l 1147 721 l 1021 721 l 1007 646 l 1147 646 l 1147 538 l 987 538 l 888 0 l 642 0 l 584 380 l 526 0 l 281 0 l 180 538 l 28 538 l 28 646 l 161 646 l 146 721 l 28 721 l 28 829 l 127 829 l 98 987 l 334 987 l 355 829 l 462 829 l 484 987 l 684 987 l 705 829 m 731 646 l 791 646 l 800 721 l 721 721 l 731 646 m 378 646 l 437 646 l 447 721 l 368 721 l 378 646 m 747 538 l 762 423 l 777 538 l 747 538 m 392 538 l 406 424 l 422 538 l 392 538 z "},"\u20aa":{"ha":1278,"x_min":66,"x_max":1211,"o":"m 637 734 q 794 707 736 734 q 879 621 852 680 q 906 452 906 562 l 906 251 l 676 251 l 676 463 q 610 555 673 546 l 573 557 l 294 557 l 294 0 l 66 0 l 66 734 l 637 734 m 372 0 l 372 484 l 600 484 l 600 176 l 866 176 l 911 178 q 982 271 979 186 l 982 734 l 1211 734 l 1211 279 q 1153 139 1211 202 q 983 38 1095 77 q 741 0 871 0 l 372 0 z "},"\u20ac":{"ha":804,"x_min":58,"x_max":754,"o":"m 620 345 l 408 345 q 457 212 412 255 q 606 170 502 170 q 725 190 673 170 l 754 7 q 576 -13 664 -13 q 284 82 393 -13 q 170 345 175 177 l 58 345 l 58 453 l 170 453 l 170 536 l 58 536 l 58 644 l 172 644 q 298 906 184 812 q 597 1000 411 1000 q 754 979 669 1000 l 725 796 q 612 817 672 817 q 469 775 518 817 q 410 644 419 732 l 620 644 l 620 536 l 408 536 l 408 453 l 620 453 l 620 345 z "},"\u20b1":{"ha":1045,"x_min":28,"x_max":1017,"o":"m 370 335 l 370 0 l 132 0 l 132 526 l 28 526 l 28 634 l 132 634 l 132 672 l 28 672 l 28 781 l 132 781 l 132 987 l 526 987 q 749 933 654 987 q 884 781 844 880 l 1017 781 l 1017 672 l 908 672 l 909 652 l 908 634 l 1017 634 l 1017 526 l 884 526 q 753 386 845 437 q 526 335 662 335 l 370 335 m 668 651 l 667 672 l 370 672 l 370 634 l 667 634 l 668 651 m 370 781 l 609 781 q 529 804 576 803 l 370 804 l 370 781 m 580 526 l 370 526 l 370 519 l 526 519 q 580 526 557 519 z "},"\u20b9":{"ha":736,"x_min":26,"x_max":709,"o":"m 671 845 l 534 845 q 572 736 564 797 l 708 736 l 671 594 l 571 594 q 499 440 555 500 q 338 349 442 380 l 613 10 l 613 0 l 358 0 l 47 372 l 46 503 l 206 503 q 332 594 303 505 l 26 594 l 64 736 l 326 736 q 210 804 296 801 l 27 804 l 71 987 l 709 987 l 671 845 z "},"\u20ba":{"ha":845,"x_min":28,"x_max":798,"o":"m 798 516 l 798 471 q 742 216 798 327 q 589 46 687 105 q 363 -14 490 -14 q 131 0 239 -14 l 131 434 l 28 406 l 28 556 l 131 585 l 131 658 l 28 629 l 28 780 l 131 808 l 131 987 l 368 987 l 368 876 l 479 907 l 479 756 l 368 725 l 368 652 l 479 683 l 479 532 l 368 501 l 368 172 q 508 249 460 174 q 557 469 556 323 l 557 516 l 798 516 z "},"\u20bc":{"ha":964,"x_min":38,"x_max":926,"o":"m 596 582 q 836 418 747 543 q 926 116 924 294 l 926 0 l 697 0 l 697 106 q 596 382 697 302 l 596 0 l 368 0 l 368 383 q 267 105 267 307 l 267 0 l 38 0 l 38 115 q 79 332 39 234 q 194 494 119 429 q 368 583 268 558 l 368 734 l 596 734 l 596 582 z "},"\u20bd":{"ha":1008,"x_min":43,"x_max":955,"o":"m 628 115 l 416 115 l 416 0 l 178 0 l 178 115 l 43 115 l 43 298 l 178 298 l 178 335 l 43 335 l 43 519 l 178 519 l 178 987 l 570 987 q 771 946 683 987 q 907 828 859 905 q 955 656 955 752 q 849 421 955 507 q 565 335 744 335 l 416 335 l 416 298 l 628 298 l 628 115 m 416 519 l 562 519 q 713 654 713 519 q 675 762 713 721 q 572 803 637 802 l 416 803 l 416 519 z "},"\u2105":{"ha":1017,"x_min":60,"x_max":970,"o":"m 472 724 q 416 593 472 644 q 267 543 361 543 q 117 597 174 543 q 60 749 60 652 l 60 798 q 115 945 60 889 q 265 1002 171 1002 q 416 951 361 1002 q 472 819 472 900 l 325 819 q 309 861 325 843 q 265 878 292 878 q 206 787 206 878 l 206 745 q 222 689 206 711 q 267 666 238 666 q 309 683 292 666 q 325 724 325 700 l 472 724 m 530 242 q 590 390 530 334 q 750 446 650 446 q 911 391 851 446 q 970 237 970 336 l 970 190 q 911 42 970 98 q 751 -14 852 -14 q 591 42 652 -14 q 530 193 530 97 l 530 242 m 677 190 q 699 134 677 158 q 751 110 720 110 q 823 172 817 110 l 823 242 q 804 300 823 278 q 750 322 784 322 q 698 301 718 322 q 677 245 678 281 l 677 190 m 311 74 l 205 127 l 687 899 l 793 846 l 311 74 z "},"\u2113":{"ha":698,"x_min":5,"x_max":659,"o":"m 514 -14 q 225 65 325 -14 q 125 295 125 145 l 125 304 q 5 297 61 297 l 5 424 q 125 433 65 424 l 125 672 q 200 914 125 827 q 407 1002 275 1002 q 589 935 520 1002 q 659 756 659 869 l 659 730 q 578 534 659 633 q 370 375 497 435 l 370 349 q 405 233 370 268 q 514 197 440 197 l 514 -14 m 370 538 q 460 734 460 621 l 460 759 q 447 800 460 783 q 414 818 433 818 q 370 709 370 818 l 370 538 z "},"\u2116":{"ha":1397,"x_min":75,"x_max":1331,"o":"m 1291 285 l 894 285 l 894 385 l 1291 385 l 1291 285 m 861 751 q 926 929 861 860 q 1095 998 991 998 q 1265 929 1200 998 q 1331 746 1331 861 l 1331 712 q 1266 534 1331 604 q 1097 465 1201 465 q 926 535 991 465 q 861 716 861 604 l 861 751 m 979 712 q 1011 605 979 646 q 1097 564 1042 564 q 1181 605 1150 564 q 1212 715 1212 646 l 1212 751 q 1180 857 1212 817 q 1095 898 1149 898 q 1011 857 1042 898 q 979 748 979 817 l 979 712 m 789 0 l 538 0 l 307 601 l 307 0 l 75 0 l 75 987 l 328 987 l 559 387 l 559 987 l 789 987 l 789 0 z "},"\u2122":{"ha":880,"x_min":84,"x_max":800,"o":"m 701 848 l 635 619 l 578 619 l 513 850 l 513 619 l 413 619 l 413 987 l 535 987 l 607 745 l 686 987 l 800 987 l 800 619 l 701 619 l 701 848 m 368 909 l 286 909 l 286 622 l 172 622 l 172 909 l 84 909 l 84 987 l 368 987 l 368 909 z "},"\u212e":{"ha":876,"x_min":99,"x_max":790,"o":"m 705 64 q 454 -14 581 -14 q 273 40 356 -14 q 145 180 191 93 q 99 367 99 267 q 148 552 99 464 q 281 693 197 640 q 454 747 365 747 q 622 700 545 747 q 743 571 699 653 q 790 391 788 488 l 790 349 l 269 349 l 269 126 q 454 52 350 52 q 704 134 587 52 l 705 64 m 454 684 q 269 601 352 684 l 269 413 l 635 413 l 635 607 q 454 684 557 684 z "},"\u215b":{"ha":1098,"x_min":72,"x_max":1034,"o":"m 342 438 l 191 438 l 191 800 l 72 775 l 72 888 l 330 971 l 342 971 l 342 438 m 319 74 l 213 127 l 695 899 l 802 846 l 319 74 m 1023 390 q 947 275 1023 312 q 1034 149 1034 235 q 978 34 1034 75 q 821 -7 922 -7 q 663 34 720 -7 q 606 149 606 75 q 693 275 606 236 q 618 390 618 315 q 672 502 618 460 q 819 543 726 543 q 968 503 913 543 q 1023 390 1023 462 m 882 164 q 819 213 882 213 q 759 164 759 213 q 776 126 759 140 q 821 112 793 112 q 866 126 849 112 q 882 164 882 140 m 869 380 q 819 424 869 424 q 770 380 770 424 q 821 332 770 332 q 869 380 869 332 z "},"\u215c":{"ha":1201,"x_min":40,"x_max":1139,"o":"m 200 769 l 260 769 q 328 825 328 769 q 311 859 328 846 q 263 871 294 871 q 221 863 239 871 q 203 837 203 854 l 51 837 q 109 948 51 906 q 258 991 166 991 q 421 949 363 991 q 480 837 480 907 q 387 722 480 755 q 491 598 491 694 q 427 484 491 528 q 258 440 363 440 q 100 487 160 440 q 40 611 40 534 l 194 611 q 214 575 194 591 q 269 559 234 559 q 322 576 307 559 q 338 614 338 593 q 264 673 338 672 l 200 673 l 200 769 m 408 74 l 302 127 l 784 899 l 890 846 l 408 74 m 1128 390 q 1053 275 1128 312 q 1139 149 1139 235 q 1083 34 1139 75 q 926 -7 1027 -7 q 768 34 825 -7 q 711 149 711 75 q 798 275 711 236 q 723 390 723 315 q 777 502 723 460 q 924 543 831 543 q 1073 503 1019 543 q 1128 390 1128 462 m 987 164 q 924 213 987 213 q 864 164 864 213 q 881 126 864 140 q 926 112 899 112 q 971 126 954 112 q 987 164 987 140 m 975 380 q 924 424 975 424 q 876 380 876 424 q 926 332 876 332 q 975 380 975 332 z "},"\u215d":{"ha":1183,"x_min":56,"x_max":1122,"o":"m 68 710 l 106 987 l 454 987 l 454 872 l 229 872 l 215 787 q 303 805 268 805 q 440 761 394 805 q 486 634 486 717 q 428 498 486 552 q 273 445 370 445 q 120 491 183 445 q 56 606 56 537 l 210 606 q 273 564 209 564 q 334 634 334 564 q 262 705 334 705 q 189 681 213 705 l 68 710 m 399 74 l 293 127 l 775 899 l 882 846 l 399 74 m 1111 390 q 1036 275 1111 312 q 1122 149 1122 235 q 1066 34 1122 75 q 909 -7 1010 -7 q 751 34 808 -7 q 694 149 694 75 q 781 275 694 236 q 706 390 706 315 q 760 502 706 460 q 907 543 814 543 q 1056 503 1002 543 q 1111 390 1111 462 m 970 164 q 907 213 970 213 q 847 164 847 213 q 864 126 847 140 q 909 112 882 112 q 954 126 937 112 q 970 164 970 140 m 958 380 q 907 424 958 424 q 859 380 859 424 q 909 332 859 332 q 958 380 958 332 z "},"\u215e":{"ha":1236,"x_min":64,"x_max":1093,"o":"m 503 896 l 284 444 l 123 444 l 344 859 l 64 859 l 64 979 l 503 979 l 503 896 m 354 74 l 248 127 l 730 899 l 836 846 l 354 74 m 1082 390 q 1006 275 1082 312 q 1093 149 1093 235 q 1037 34 1093 75 q 880 -7 981 -7 q 722 34 779 -7 q 665 149 665 75 q 752 275 665 236 q 677 390 677 315 q 731 502 677 460 q 878 543 785 543 q 1027 503 972 543 q 1082 390 1082 462 m 941 164 q 878 213 941 213 q 818 164 818 213 q 835 126 818 140 q 880 112 852 112 q 925 126 908 112 q 941 164 941 140 m 928 380 q 878 424 928 424 q 829 380 829 424 q 880 332 829 332 q 928 380 928 332 z "},"\u2202":{"ha":796,"x_min":55,"x_max":764,"o":"m 380 707 q 563 634 486 707 q 483 814 538 753 q 349 876 429 876 q 248 861 286 876 l 200 841 l 159 994 l 191 1010 q 368 1048 273 1048 q 652 911 548 1048 q 764 523 755 774 l 764 448 q 721 207 764 313 q 597 43 677 100 q 409 -14 516 -14 q 150 84 245 -14 q 55 351 55 182 l 55 360 q 142 612 55 517 q 380 707 229 707 m 410 530 q 283 353 286 530 l 283 332 q 409 162 283 162 q 536 373 536 162 l 536 457 q 410 530 488 530 z "},"\u220f":{"ha":955,"x_min":110,"x_max":854,"o":"m 854 -183 l 624 -183 l 624 817 l 340 817 l 340 -183 l 110 -183 l 110 987 l 854 987 l 854 -183 z "},"\u2211":{"ha":900,"x_min":34,"x_max":852,"o":"m 646 396 l 351 -7 l 852 -7 l 852 -183 l 34 -183 l 34 -81 l 406 409 l 34 886 l 34 987 l 845 987 l 845 811 l 355 811 l 646 421 l 646 396 z "},"\u2212":{"ha":760,"x_min":92,"x_max":688,"o":"m 688 392 l 92 392 l 92 571 l 688 571 l 688 392 z "},"\u221a":{"ha":753,"x_min":35,"x_max":745,"o":"m 399 205 l 578 987 l 745 987 l 506 0 l 304 0 l 195 329 l 35 329 l 35 507 l 319 507 l 399 205 z "},"\u221e":{"ha":1472,"x_min":64,"x_max":1408,"o":"m 1408 361 q 1363 166 1408 253 q 1236 33 1318 80 q 1049 -14 1154 -14 q 871 39 951 -14 q 735 188 790 91 q 597 37 677 88 q 422 -14 518 -14 q 162 91 260 -14 q 64 372 64 195 q 109 567 64 480 q 234 700 153 653 q 420 747 315 747 q 735 555 617 747 q 872 698 791 649 q 1050 747 953 747 q 1310 642 1212 747 q 1408 361 1408 537 m 285 361 q 326 221 285 273 q 437 170 368 170 q 595 290 530 170 q 623 366 620 337 l 623 381 q 591 459 619 412 q 435 564 529 564 q 326 512 368 564 q 285 361 285 459 m 1186 372 q 1145 511 1186 457 q 1036 564 1105 564 q 880 459 942 564 q 848 381 852 412 l 848 366 q 883 277 852 331 q 953 196 914 223 q 1034 170 991 170 q 1145 222 1103 170 q 1186 372 1186 274 z "},"\u222b":{"ha":425,"x_min":-69,"x_max":491,"o":"m 316 -17 q 244 -224 316 -153 q 39 -296 172 -296 q -69 -285 -20 -296 l -59 -112 q 1 -120 -29 -120 q 87 -25 85 -120 l 87 793 q 162 988 87 919 q 377 1057 237 1057 q 491 1042 423 1057 l 475 873 q 406 880 442 880 q 316 790 316 880 l 316 -17 z "},"\u2248":{"ha":810,"x_min":68,"x_max":724,"o":"m 68 622 q 146 675 101 656 q 235 694 191 694 q 308 686 273 694 q 406 646 342 677 q 502 606 470 614 q 572 597 534 597 q 724 683 656 597 l 724 513 q 658 460 692 479 q 580 441 625 441 q 510 450 542 441 q 414 490 477 458 q 315 530 350 522 q 243 538 281 538 q 148 514 196 538 q 68 452 99 490 l 68 622 m 68 337 q 227 409 138 409 q 357 381 292 410 l 445 338 q 564 313 503 313 q 724 398 656 313 l 724 229 q 572 157 655 157 q 502 165 534 157 q 406 205 470 173 q 308 245 342 237 q 235 253 273 254 q 146 231 191 253 q 68 168 101 208 l 68 337 z "},"\u2260":{"ha":813,"x_min":87,"x_max":715,"o":"m 715 192 l 332 192 l 260 52 l 173 94 l 223 192 l 87 192 l 87 368 l 314 368 l 376 490 l 87 490 l 87 666 l 467 666 l 536 799 l 623 756 l 576 666 l 715 666 l 715 490 l 486 490 l 423 368 l 715 368 l 715 192 z "},"\u2264":{"ha":709,"x_min":31,"x_max":637,"o":"m 260 517 l 631 405 l 631 217 l 31 437 l 31 599 l 631 819 l 631 632 l 260 517 m 637 37 l 41 37 l 41 216 l 637 216 l 637 37 z "},"\u2265":{"ha":713,"x_min":75,"x_max":673,"o":"m 444 520 l 75 633 l 75 820 l 671 600 l 671 438 l 75 218 l 75 405 l 444 520 m 673 37 l 77 37 l 77 216 l 673 216 l 673 37 z "},"\u25ca":{"ha":710,"x_min":18,"x_max":697,"o":"m 256 987 l 458 987 l 697 493 l 458 0 l 256 0 l 18 493 l 256 987 m 358 756 l 243 493 l 357 231 l 471 493 l 358 756 z "},"\uee01":{"ha":408,"x_min":77,"x_max":330,"o":"m 203 350 q 294 318 258 350 q 330 235 330 286 q 294 153 330 185 q 203 121 258 121 q 113 153 149 121 q 77 235 77 186 q 113 317 77 285 q 203 350 149 350 m 203 891 q 294 859 258 891 q 330 777 330 827 q 294 694 330 726 q 203 662 258 662 q 113 694 149 662 q 77 777 77 727 q 113 859 77 826 q 203 891 149 891 z "},"\uee02":{"ha":440,"x_min":54,"x_max":380,"o":"m 170 450 l 54 450 l 54 733 l 170 733 l 170 450 m 380 450 l 264 450 l 264 733 l 380 733 l 380 450 z "},"\uf6c3":{"ha":300,"x_min":23,"x_max":227,"o":"m 131 -99 l 23 -45 l 41 -14 q 75 133 75 50 l 75 193 l 227 193 l 227 143 q 200 17 227 85 q 131 -99 174 -50 z "},"\ufb01":{"ha":883,"x_min":11,"x_max":808,"o":"m 117 0 l 117 575 l 11 575 l 11 734 l 117 734 l 117 758 q 214 983 119 905 q 464 1056 303 1056 q 703 1017 565 1056 l 671 836 l 633 846 q 477 866 559 866 q 347 747 347 866 l 347 734 l 490 734 l 490 575 l 347 575 l 347 0 l 117 0 m 808 0 l 578 0 l 578 734 l 808 734 l 808 0 z "},"\ufb02":{"ha":880,"x_min":8,"x_max":805,"o":"m 575 875 q 477 880 517 880 q 344 776 344 880 l 344 734 l 487 734 l 487 575 l 344 575 l 344 0 l 115 0 l 115 575 l 8 575 l 8 734 l 115 734 l 115 781 q 200 984 115 913 q 441 1056 284 1056 q 805 1042 553 1056 l 805 0 l 575 0 l 575 875 z "},"\ufb03":{"ha":1341,"x_min":8,"x_max":1265,"o":"m 115 0 l 115 575 l 8 575 l 8 734 l 115 734 l 115 792 q 189 987 115 918 q 396 1056 262 1056 q 503 1042 445 1056 l 504 873 q 448 880 483 880 q 344 790 344 880 l 344 734 l 575 734 l 575 758 q 671 983 577 905 q 922 1056 761 1056 q 1161 1017 1022 1056 l 1129 836 l 1091 846 q 936 866 1017 866 q 805 747 805 866 l 805 734 l 948 734 l 948 575 l 805 575 l 805 0 l 575 0 l 575 575 l 344 575 l 344 0 l 115 0 m 1265 0 l 1036 0 l 1036 734 l 1265 734 l 1265 0 z "},"\ufb04":{"ha":1341,"x_min":8,"x_max":1265,"o":"m 115 0 l 115 575 l 8 575 l 8 734 l 115 734 l 115 792 q 189 987 115 918 q 396 1056 262 1056 q 503 1042 445 1056 l 504 873 q 448 880 483 880 q 344 790 344 880 l 344 734 l 575 734 l 575 779 q 674 995 575 923 q 903 1056 759 1056 q 1265 1042 1014 1056 l 1265 0 l 1036 0 l 1036 875 q 938 880 978 880 q 805 777 805 880 l 805 734 l 947 734 l 947 575 l 805 575 l 805 0 l 575 0 l 575 575 l 344 575 l 344 0 l 115 0 z "},"\ufeff":{"ha":0,"x_min":0,"x_max":0,"o":""},"\ufffc":{"ha":1415,"x_min":58,"x_max":1373,"o":"m 555 317 q 512 210 555 251 q 400 169 468 169 q 288 210 331 169 q 243 314 244 250 l 243 393 q 286 500 243 458 q 399 542 328 542 q 511 501 467 542 q 555 397 554 460 l 555 317 m 601 171 l 601 543 l 728 543 q 833 518 795 543 q 872 441 872 494 q 815 363 872 385 q 867 330 849 354 q 884 276 884 307 q 743 171 884 171 l 601 171 m 493 393 q 468 467 493 440 q 399 493 443 493 q 330 467 355 493 q 305 393 305 440 l 305 317 q 330 244 305 271 q 400 218 355 218 q 468 244 444 218 q 493 317 493 271 l 493 393 m 1140 545 l 1202 545 l 1202 288 q 1167 204 1202 235 q 1076 172 1131 172 q 979 200 1016 172 q 942 283 942 227 l 1005 283 q 1076 222 1005 222 q 1122 240 1103 222 q 1140 288 1140 258 l 1140 545 m 58 -270 l 58 -56 l 134 -56 l 134 -193 l 267 -193 l 267 -270 l 58 -270 m 1162 -270 l 1162 -193 l 1297 -193 l 1297 -56 l 1373 -56 l 1373 -270 l 1162 -270 m 58 793 l 58 986 l 267 986 l 267 907 l 134 907 l 134 793 l 58 793 m 1162 907 l 1162 986 l 1373 986 l 1373 793 l 1297 793 l 1297 907 l 1162 907 m 665 336 l 665 222 l 751 222 q 821 278 821 222 q 754 336 821 334 l 665 336 m 892 907 l 892 986 l 1080 986 l 1080 907 l 892 907 m 621 907 l 621 986 l 809 986 l 809 907 l 621 907 m 351 907 l 351 986 l 538 986 l 538 907 l 351 907 m 892 -270 l 892 -193 l 1080 -193 l 1080 -270 l 892 -270 m 621 -270 l 621 -193 l 809 -193 l 809 -270 l 621 -270 m 351 -270 l 351 -193 l 538 -193 l 538 -270 l 351 -270 m 665 384 l 728 384 q 808 438 808 384 q 789 476 808 466 q 728 486 769 486 l 665 486 l 665 384 m 134 282 l 58 282 l 58 453 l 134 453 l 134 282 m 134 538 l 58 538 l 58 708 l 134 708 l 134 538 m 134 28 l 58 28 l 58 197 l 134 197 l 134 28 m 1373 282 l 1297 282 l 1297 453 l 1373 453 l 1373 282 m 1373 538 l 1297 538 l 1297 708 l 1373 708 l 1373 538 m 1373 28 l 1297 28 l 1297 197 l 1373 197 l 1373 28 z "},"\ufffd":{"ha":1425,"x_min":62,"x_max":1361,"o":"m 711 1097 l 1361 436 l 711 -225 l 62 436 l 711 1097 m 767 273 q 777 332 767 312 q 812 368 787 351 q 893 440 862 394 q 924 536 924 486 q 868 674 924 623 q 710 725 811 725 q 558 678 612 725 q 503 545 504 631 l 640 545 q 661 597 642 579 q 710 614 681 614 q 768 593 749 614 q 787 536 787 571 q 724 431 787 471 q 646 355 662 387 q 630 273 630 324 l 767 273 m 767 211 l 630 211 l 630 96 l 767 96 l 767 211 m 716 -374 l 719 -374 l 719 -376 l 716 -376 l 716 -374 m 715 1467 l 718 1467 l 718 1464 l 715 1464 l 715 1467 z "},"\xa0":{"ha":346,"x_min":0,"x_max":0,"o":""},"\xad":{"ha":625,"x_min":103,"x_max":511,"o":"m 511 337 l 103 337 l 103 514 l 511 514 l 511 337 z "},"\u0110":{"ha":918,"x_min":-20,"x_max":871,"o":"m 95 0 l 95 431 l -20 431 l -20 560 l 95 560 l 95 987 l 413 987 q 648 928 544 987 q 811 761 753 869 q 871 518 870 652 l 871 473 q 813 230 871 337 q 652 61 756 122 q 420 0 548 1 l 95 0 m 475 431 l 333 431 l 333 183 l 416 183 q 573 256 518 183 q 628 473 628 329 l 628 515 q 573 731 628 659 q 413 804 518 804 l 333 804 l 333 560 l 475 560 l 475 431 z "},"\xd0":{"ha":918,"x_min":-20,"x_max":871,"o":"m 95 0 l 95 431 l -20 431 l -20 560 l 95 560 l 95 987 l 413 987 q 648 928 544 987 q 811 761 753 869 q 871 518 870 652 l 871 473 q 813 230 871 337 q 652 61 756 122 q 420 0 548 1 l 95 0 m 475 431 l 333 431 l 333 183 l 416 183 q 573 256 518 183 q 628 473 628 329 l 628 515 q 573 731 628 659 q 413 804 518 804 l 333 804 l 333 560 l 475 560 l 475 431 z "},"\u0127":{"ha":804,"x_min":-41,"x_max":741,"o":"m 454 821 l 308 821 l 308 655 q 495 747 381 747 q 678 675 616 747 q 741 463 740 604 l 741 0 l 512 0 l 512 458 q 488 544 512 516 q 408 571 465 571 q 308 526 337 571 l 308 0 l 79 0 l 79 821 l -41 821 l -41 951 l 79 951 l 79 1042 l 308 1042 l 308 951 l 454 951 l 454 821 z "},"\u0166":{"ha":876,"x_min":24,"x_max":850,"o":"m 662 490 l 553 490 l 553 0 l 315 0 l 315 490 l 167 490 l 167 620 l 315 620 l 315 804 l 24 804 l 24 987 l 850 987 l 850 804 l 553 804 l 553 620 l 662 620 l 662 490 z "},"\u0167":{"ha":477,"x_min":-24,"x_max":471,"o":"m 330 916 l 330 734 l 451 734 l 451 575 l 330 575 l 330 473 l 471 473 l 471 344 l 330 344 l 330 239 q 345 182 330 198 q 404 165 360 165 q 461 170 438 165 l 461 6 q 332 -14 399 -14 q 160 40 217 -14 q 102 203 104 94 l 102 344 l -24 344 l -24 473 l 102 473 l 102 575 l 8 575 l 8 734 l 102 734 l 102 916 l 330 916 z "},"\xc0":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 583 1039 l 397 1039 l 206 1252 l 448 1252 l 583 1039 z "},"\xc1":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 503 1252 l 745 1252 l 556 1039 l 370 1039 l 503 1252 z "},"\xc2":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 762 1061 l 762 1053 l 582 1053 l 474 1145 l 366 1053 l 190 1053 l 190 1064 l 409 1252 l 540 1252 l 762 1061 z "},"\xc3":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 736 1246 q 691 1115 736 1168 q 579 1061 646 1061 q 479 1089 534 1061 q 391 1118 425 1118 q 354 1103 369 1118 q 338 1057 338 1088 l 212 1063 q 257 1194 212 1139 q 368 1249 302 1249 q 456 1224 401 1249 q 526 1196 511 1199 q 557 1192 541 1192 q 594 1207 578 1192 q 610 1253 610 1222 l 736 1246 z "},"\xc4":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 195 1136 q 224 1200 195 1173 q 297 1226 254 1226 q 370 1200 340 1226 q 399 1136 399 1173 q 370 1072 399 1099 q 297 1046 340 1046 q 224 1072 254 1046 q 195 1136 195 1099 m 547 1136 q 576 1200 547 1173 q 649 1226 606 1226 q 722 1200 692 1226 q 751 1136 751 1173 q 722 1072 751 1099 q 649 1046 692 1046 q 576 1072 606 1046 q 547 1136 547 1099 z "},"\xc5":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 323 1173 q 368 1271 323 1231 q 476 1310 412 1310 q 584 1271 539 1310 q 628 1173 628 1231 q 584 1076 628 1115 q 476 1038 541 1038 q 367 1076 411 1038 q 323 1173 323 1115 m 476 1102 q 527 1122 509 1102 q 546 1173 546 1143 q 527 1223 546 1202 q 476 1244 509 1244 q 424 1223 443 1244 q 406 1173 406 1202 q 424 1122 406 1143 q 476 1102 443 1102 z "},"\u01fa":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 557 1369 l 755 1369 l 557 1223 l 414 1223 l 557 1369 m 473 938 q 368 975 409 938 q 326 1067 326 1012 q 369 1160 326 1122 q 473 1198 411 1198 q 576 1160 534 1198 q 618 1067 618 1122 q 577 975 618 1012 q 473 938 536 938 m 411 1067 q 429 1023 411 1040 q 473 1006 446 1006 q 516 1023 500 1006 q 532 1067 532 1040 q 516 1112 532 1095 q 473 1129 500 1129 q 429 1112 446 1129 q 411 1067 411 1095 z "},"\xc7":{"ha":911,"x_min":47,"x_max":876,"o":"m 873 334 q 818 152 869 231 q 675 30 767 73 q 465 -14 583 -14 q 159 113 271 -14 q 47 471 47 240 l 47 520 q 97 774 47 665 q 243 942 148 883 q 463 1002 338 1002 q 751 907 642 1002 q 876 646 861 812 l 638 646 q 593 776 635 736 q 463 815 550 815 q 332 749 374 815 q 289 536 291 682 l 289 467 q 329 241 289 309 q 465 173 368 173 q 591 212 547 173 q 637 334 634 250 l 873 334 m 555 7 l 548 -35 q 650 -152 650 -54 q 583 -275 650 -231 q 396 -320 515 -320 l 391 -194 q 451 -142 451 -194 q 430 -106 451 -116 q 360 -92 408 -96 l 381 7 l 555 7 z "},"\xc8":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 545 1039 l 359 1039 l 168 1252 l 410 1252 l 545 1039 z "},"\xc9":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 465 1252 l 707 1252 l 518 1039 l 332 1039 l 465 1252 z "},"\xca":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 724 1061 l 724 1053 l 544 1053 l 436 1145 l 328 1053 l 152 1053 l 152 1064 l 371 1252 l 502 1252 l 724 1061 z "},"\xcb":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 157 1136 q 186 1200 157 1173 q 259 1226 216 1226 q 332 1200 302 1226 q 361 1136 361 1173 q 332 1072 361 1099 q 259 1046 302 1046 q 186 1072 216 1046 q 157 1136 157 1099 m 509 1136 q 538 1200 509 1173 q 611 1226 568 1226 q 684 1200 654 1226 q 713 1136 713 1173 q 684 1072 713 1099 q 611 1046 654 1046 q 538 1072 568 1046 q 509 1136 509 1099 z "},"\xcc":{"ha":419,"x_min":-58,"x_max":328,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 319 1039 l 133 1039 l -58 1252 l 183 1252 l 319 1039 z "},"\xcd":{"ha":419,"x_min":91,"x_max":479,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 238 1252 l 479 1252 l 291 1039 l 104 1039 l 238 1252 z "},"\xce":{"ha":419,"x_min":-75,"x_max":498,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 498 1061 l 498 1053 l 317 1053 l 210 1145 l 102 1053 l -75 1053 l -75 1064 l 144 1252 l 275 1252 l 498 1061 z "},"\xcf":{"ha":419,"x_min":-70,"x_max":487,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m -70 1136 q -40 1200 -70 1173 q 33 1226 -11 1226 q 105 1200 76 1226 q 135 1136 135 1173 q 105 1072 135 1099 q 33 1046 76 1046 q -40 1072 -11 1046 q -70 1136 -70 1099 m 282 1136 q 312 1200 282 1173 q 385 1226 341 1226 q 457 1200 428 1226 q 487 1136 487 1173 q 457 1072 487 1099 q 385 1046 428 1046 q 312 1072 341 1046 q 282 1136 282 1099 z "},"\xd1":{"ha":975,"x_min":75,"x_max":899,"o":"m 899 0 l 663 0 l 313 614 l 313 0 l 75 0 l 75 987 l 313 987 l 662 373 l 662 987 l 899 987 l 899 0 m 754 1246 q 709 1115 754 1168 q 597 1061 664 1061 q 498 1089 553 1061 q 409 1118 443 1118 q 372 1103 387 1118 q 357 1057 357 1088 l 230 1063 q 275 1194 230 1139 q 386 1249 320 1249 q 475 1224 420 1249 q 544 1196 530 1199 q 575 1192 559 1192 q 612 1207 597 1192 q 628 1253 628 1222 l 754 1246 z "},"\xd2":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 587 1039 l 401 1039 l 210 1252 l 451 1252 l 587 1039 z "},"\xd3":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 507 1252 l 748 1252 l 559 1039 l 373 1039 l 507 1252 z "},"\xd4":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 766 1061 l 766 1053 l 585 1053 l 477 1145 l 370 1053 l 193 1053 l 193 1064 l 412 1252 l 543 1252 l 766 1061 z "},"\xd5":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 739 1246 q 694 1115 739 1168 q 583 1061 649 1061 q 483 1089 538 1061 q 394 1118 428 1118 q 357 1103 372 1118 q 342 1057 342 1088 l 215 1063 q 260 1194 215 1139 q 371 1249 305 1249 q 460 1224 405 1249 q 529 1196 515 1199 q 560 1192 544 1192 q 597 1207 582 1192 q 613 1253 613 1222 l 739 1246 z "},"\xd6":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 198 1136 q 228 1200 198 1173 q 300 1226 257 1226 q 373 1200 344 1226 q 403 1136 403 1173 q 373 1072 403 1099 q 300 1046 344 1046 q 228 1072 257 1046 q 198 1136 198 1099 m 550 1136 q 579 1200 550 1173 q 652 1226 609 1226 q 725 1200 696 1226 q 755 1136 755 1173 q 725 1072 755 1099 q 652 1046 696 1046 q 579 1072 609 1046 q 550 1136 550 1099 z "},"\xd9":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 566 1039 l 380 1039 l 189 1252 l 431 1252 l 566 1039 z "},"\xda":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 486 1252 l 728 1252 l 539 1039 l 353 1039 l 486 1252 z "},"\xdb":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 745 1061 l 745 1053 l 565 1053 l 457 1145 l 349 1053 l 173 1053 l 173 1064 l 392 1252 l 523 1252 l 745 1061 z "},"\xdc":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 178 1136 q 207 1200 178 1173 q 280 1226 237 1226 q 353 1200 323 1226 q 382 1136 382 1173 q 353 1072 382 1099 q 280 1046 323 1046 q 207 1072 237 1046 q 178 1136 178 1099 m 530 1136 q 559 1200 530 1173 q 632 1226 589 1226 q 705 1200 675 1226 q 734 1136 734 1173 q 705 1072 734 1099 q 632 1046 675 1046 q 559 1072 589 1046 q 530 1136 530 1099 z "},"\xdd":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 m 465 1252 l 707 1252 l 518 1039 l 332 1039 l 465 1252 z "},"\xe0":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 471 829 l 286 829 l 94 1042 l 336 1042 l 471 829 z "},"\xe1":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 391 1042 l 633 1042 l 444 829 l 258 829 l 391 1042 z "},"\xe2":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 650 851 l 650 842 l 470 842 l 362 935 l 254 842 l 78 842 l 78 854 l 297 1042 l 428 1042 l 650 851 z "},"\xe3":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 624 1036 q 579 905 624 959 q 467 851 534 851 q 368 880 422 851 q 279 908 313 908 q 242 893 257 908 q 227 847 227 878 l 100 854 q 145 984 100 929 q 256 1039 190 1039 q 345 1014 290 1039 q 414 986 399 989 q 445 983 429 983 q 482 998 467 983 q 498 1044 498 1013 l 624 1036 z "},"\xe4":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 83 926 q 112 989 83 963 q 185 1016 142 1016 q 258 989 229 1016 q 288 926 288 963 q 258 862 288 888 q 185 836 229 836 q 112 862 142 836 q 83 926 83 888 m 435 926 q 464 989 435 963 q 537 1016 494 1016 q 610 989 581 1016 q 640 926 640 963 q 610 862 640 888 q 537 836 581 836 q 464 862 494 836 q 435 926 435 888 z "},"\xe5":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 212 962 q 256 1060 212 1021 q 364 1100 300 1100 q 472 1060 427 1100 q 516 962 516 1021 q 472 866 516 905 q 364 827 429 827 q 255 866 299 827 q 212 962 212 905 m 364 892 q 415 912 397 892 q 434 962 434 932 q 415 1013 434 992 q 364 1034 397 1034 q 312 1013 331 1034 q 294 962 294 992 q 312 912 294 932 q 364 892 331 892 z "},"\u01fb":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 445 1160 l 644 1160 l 446 1013 l 302 1013 l 445 1160 m 361 728 q 256 765 297 728 q 214 857 214 802 q 257 950 214 912 q 361 988 299 988 q 464 950 422 988 q 506 857 506 912 q 465 765 506 802 q 361 728 424 728 m 299 857 q 317 813 299 830 q 361 796 334 796 q 404 813 388 796 q 420 857 420 830 q 404 903 420 886 q 361 920 388 920 q 317 903 334 920 q 299 857 299 886 z "},"\xe7":{"ha":722,"x_min":35,"x_max":689,"o":"m 374 163 q 449 189 422 163 q 475 262 475 215 l 689 262 q 603 64 689 141 q 380 -14 516 -14 q 127 87 220 -14 q 35 365 35 187 l 35 374 q 76 571 35 486 q 195 702 117 656 q 378 747 272 747 q 605 668 521 747 q 689 453 689 589 l 475 453 q 447 541 475 510 q 372 571 419 571 q 269 458 283 571 q 264 359 264 422 q 290 205 264 248 q 374 163 317 163 m 473 7 l 467 -35 q 568 -152 568 -54 q 501 -275 568 -231 q 315 -320 434 -320 l 310 -194 q 370 -142 370 -194 q 348 -106 370 -116 q 279 -92 327 -96 l 300 7 l 473 7 z "},"\xe8":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 471 829 l 285 829 l 94 1042 l 335 1042 l 471 829 z "},"\xe9":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 391 1042 l 632 1042 l 444 829 l 257 829 l 391 1042 z "},"\xea":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 650 852 l 650 843 l 469 843 l 361 935 l 254 843 l 77 843 l 77 854 l 296 1042 l 427 1042 l 650 852 z "},"\xeb":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 82 926 q 112 990 82 964 q 184 1017 141 1017 q 257 990 228 1017 q 287 926 287 964 q 257 863 287 889 q 184 836 228 836 q 112 863 141 836 q 82 926 82 889 m 434 926 q 464 990 434 964 q 536 1017 493 1017 q 609 990 580 1017 q 639 926 639 964 q 609 863 639 889 q 536 836 580 836 q 464 863 493 836 q 434 926 434 889 z "},"\xec":{"ha":396,"x_min":-68,"x_max":313,"o":"m 313 0 l 83 0 l 83 734 l 313 734 l 313 0 m 309 815 l 123 815 l -68 1028 l 173 1028 l 309 815 z "},"\xed":{"ha":396,"x_min":83,"x_max":469,"o":"m 313 0 l 83 0 l 83 734 l 313 734 l 313 0 m 228 1028 l 469 1028 l 281 815 l 94 815 l 228 1028 z "},"\xee":{"ha":396,"x_min":-85,"x_max":488,"o":"m 313 0 l 83 0 l 83 734 l 313 734 l 313 0 m 488 838 l 488 829 l 307 829 l 199 921 l 92 829 l -85 829 l -85 840 l 134 1028 l 265 1028 l 488 838 z "},"\xef":{"ha":396,"x_min":-80,"x_max":477,"o":"m 313 0 l 83 0 l 83 734 l 313 734 l 313 0 m -80 912 q -51 976 -80 949 q 22 1002 -21 1002 q 95 976 66 1002 q 125 912 125 949 q 95 848 125 875 q 22 822 66 822 q -51 848 -21 822 q -80 912 -80 875 m 272 912 q 301 976 272 949 q 374 1002 331 1002 q 447 976 418 1002 q 477 912 477 949 q 447 848 477 875 q 374 822 418 822 q 301 848 331 822 q 272 912 272 875 z "},"\xf1":{"ha":783,"x_min":60,"x_max":721,"o":"m 274 734 l 281 648 q 491 747 357 747 q 662 679 606 747 q 721 473 719 610 l 721 0 l 492 0 l 492 463 q 469 545 492 519 q 388 571 447 571 q 288 518 321 571 l 288 0 l 60 0 l 60 734 l 274 734 m 653 1036 q 608 905 653 959 q 496 851 563 851 q 397 880 452 851 q 308 908 342 908 q 271 893 286 908 q 256 847 256 878 l 129 854 q 174 984 129 929 q 285 1039 219 1039 q 374 1014 319 1039 q 443 986 429 989 q 474 983 458 983 q 511 998 496 983 q 527 1044 527 1013 l 653 1036 z "},"\xf2":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 500 829 l 314 829 l 123 1042 l 364 1042 l 500 829 z "},"\xf3":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 420 1042 l 661 1042 l 473 829 l 286 829 l 420 1042 z "},"\xf4":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 679 851 l 679 842 l 498 842 l 391 935 l 283 842 l 106 842 l 106 854 l 326 1042 l 456 1042 l 679 851 z "},"\xf5":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 652 1036 q 607 905 652 959 q 496 851 562 851 q 396 880 451 851 q 307 908 341 908 q 270 893 286 908 q 255 847 255 878 l 128 854 q 173 984 128 929 q 284 1039 218 1039 q 373 1014 318 1039 q 443 986 428 989 q 473 983 457 983 q 511 998 495 983 q 526 1044 526 1013 l 652 1036 z "},"\xf6":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 111 926 q 141 989 111 963 q 214 1016 170 1016 q 287 989 257 1016 q 316 926 316 963 q 287 862 316 888 q 214 836 257 836 q 141 862 170 836 q 111 926 111 888 m 463 926 q 493 989 463 963 q 566 1016 522 1016 q 638 989 609 1016 q 668 926 668 963 q 638 862 668 888 q 566 836 609 836 q 493 862 522 836 q 463 926 463 888 z "},"\xf9":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 500 829 l 314 829 l 123 1042 l 364 1042 l 500 829 z "},"\xfa":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 420 1042 l 661 1042 l 473 829 l 286 829 l 420 1042 z "},"\xfb":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 679 851 l 679 842 l 498 842 l 391 935 l 283 842 l 106 842 l 106 854 l 326 1042 l 456 1042 l 679 851 z "},"\xfc":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 111 926 q 141 989 111 963 q 214 1016 170 1016 q 287 989 257 1016 q 316 926 316 963 q 287 862 316 888 q 214 836 257 836 q 141 862 170 836 q 111 926 111 888 m 463 926 q 493 989 463 963 q 566 1016 522 1016 q 638 989 609 1016 q 668 926 668 963 q 638 862 668 888 q 566 836 609 836 q 493 862 522 836 q 463 926 463 888 z "},"\xfd":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 387 1042 l 629 1042 l 440 829 l 254 829 l 387 1042 z "},"\xff":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 79 926 q 108 989 79 963 q 181 1016 138 1016 q 254 989 224 1016 q 283 926 283 963 q 254 862 283 888 q 181 836 224 836 q 108 862 138 836 q 79 926 79 888 m 431 926 q 460 989 431 963 q 533 1016 490 1016 q 606 989 576 1016 q 635 926 635 963 q 606 862 635 888 q 533 836 576 836 q 460 862 490 836 q 431 926 431 888 z "},"\u0100":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 709 1078 l 239 1078 l 239 1195 l 709 1195 l 709 1078 z "},"\u0101":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 597 868 l 127 868 l 127 985 l 597 985 l 597 868 z "},"\u0102":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 726 1253 q 657 1103 726 1160 q 475 1045 589 1045 q 292 1103 361 1045 q 224 1253 224 1160 l 379 1253 q 405 1190 379 1213 q 475 1167 430 1167 q 544 1189 519 1167 q 569 1253 569 1211 l 726 1253 z "},"\u0103":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 614 1043 q 545 892 614 950 q 363 835 477 835 q 180 892 249 835 q 112 1043 112 950 l 267 1043 q 293 980 267 1002 q 363 957 318 957 q 432 979 408 957 q 457 1043 457 1001 l 614 1043 z "},"\u0104":{"ha":946,"x_min":-2,"x_max":949,"o":"m 584 987 l 949 0 l 876 0 q 801 -51 823 -26 q 778 -109 778 -75 q 819 -151 778 -151 q 865 -139 839 -151 l 891 -253 q 779 -283 842 -283 q 659 -243 704 -283 q 614 -138 614 -204 q 691 7 614 -50 l 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 m 366 368 l 578 368 l 472 711 l 366 368 z "},"\u0105":{"ha":737,"x_min":31,"x_max":706,"o":"m 476 2 q 456 66 463 28 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 669 0 q 593 -51 616 -26 q 570 -109 570 -75 q 611 -151 570 -151 q 658 -139 631 -151 l 684 -253 q 571 -283 634 -283 q 451 -243 496 -283 q 406 -138 406 -204 q 476 2 406 -52 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 z "},"\u0106":{"ha":911,"x_min":47,"x_max":876,"o":"m 873 334 q 818 152 869 231 q 675 30 767 73 q 465 -14 583 -14 q 159 113 271 -14 q 47 471 47 240 l 47 520 q 97 774 47 665 q 243 942 148 883 q 463 1002 338 1002 q 751 907 642 1002 q 876 646 861 812 l 638 646 q 593 776 635 736 q 463 815 550 815 q 332 749 374 815 q 289 536 291 682 l 289 467 q 329 241 289 309 q 465 173 368 173 q 591 212 547 173 q 637 334 634 250 l 873 334 m 498 1252 l 740 1252 l 551 1039 l 365 1039 l 498 1252 z "},"\u0107":{"ha":722,"x_min":35,"x_max":689,"o":"m 374 163 q 449 189 422 163 q 475 262 475 215 l 689 262 q 603 64 689 141 q 380 -14 516 -14 q 127 87 220 -14 q 35 365 35 187 l 35 374 q 76 571 35 486 q 195 702 117 656 q 378 747 272 747 q 605 668 521 747 q 689 453 689 589 l 475 453 q 447 541 475 510 q 372 571 419 571 q 269 458 283 571 q 264 359 264 422 q 290 205 264 248 q 374 163 317 163 m 393 1042 l 634 1042 l 446 829 l 259 829 l 393 1042 z "},"\u0108":{"ha":911,"x_min":47,"x_max":876,"o":"m 873 334 q 818 152 869 231 q 675 30 767 73 q 465 -14 583 -14 q 159 113 271 -14 q 47 471 47 240 l 47 520 q 97 774 47 665 q 243 942 148 883 q 463 1002 338 1002 q 751 907 642 1002 q 876 646 861 812 l 638 646 q 593 776 635 736 q 463 815 550 815 q 332 749 374 815 q 289 536 291 682 l 289 467 q 329 241 289 309 q 465 173 368 173 q 591 212 547 173 q 637 334 634 250 l 873 334 m 758 1061 l 758 1053 l 577 1053 l 469 1145 l 361 1053 l 185 1053 l 185 1064 l 404 1252 l 535 1252 l 758 1061 z "},"\u0109":{"ha":722,"x_min":35,"x_max":689,"o":"m 374 163 q 449 189 422 163 q 475 262 475 215 l 689 262 q 603 64 689 141 q 380 -14 516 -14 q 127 87 220 -14 q 35 365 35 187 l 35 374 q 76 571 35 486 q 195 702 117 656 q 378 747 272 747 q 605 668 521 747 q 689 453 689 589 l 475 453 q 447 541 475 510 q 372 571 419 571 q 269 458 283 571 q 264 359 264 422 q 290 205 264 248 q 374 163 317 163 m 652 851 l 652 842 l 471 842 l 363 935 l 256 842 l 79 842 l 79 854 l 298 1042 l 429 1042 l 652 851 z "},"\u010a":{"ha":911,"x_min":47,"x_max":876,"o":"m 873 334 q 818 152 869 231 q 675 30 767 73 q 465 -14 583 -14 q 159 113 271 -14 q 47 471 47 240 l 47 520 q 97 774 47 665 q 243 942 148 883 q 463 1002 338 1002 q 751 907 642 1002 q 876 646 861 812 l 638 646 q 593 776 635 736 q 463 815 550 815 q 332 749 374 815 q 289 536 291 682 l 289 467 q 329 241 289 309 q 465 173 368 173 q 591 212 547 173 q 637 334 634 250 l 873 334 m 356 1160 q 388 1232 356 1204 q 469 1260 420 1260 q 549 1232 517 1260 q 581 1160 581 1204 q 549 1089 581 1117 q 469 1061 517 1061 q 388 1089 420 1061 q 356 1160 356 1117 z "},"\u010b":{"ha":722,"x_min":35,"x_max":689,"o":"m 374 163 q 449 189 422 163 q 475 262 475 215 l 689 262 q 603 64 689 141 q 380 -14 516 -14 q 127 87 220 -14 q 35 365 35 187 l 35 374 q 76 571 35 486 q 195 702 117 656 q 378 747 272 747 q 605 668 521 747 q 689 453 689 589 l 475 453 q 447 541 475 510 q 372 571 419 571 q 269 458 283 571 q 264 359 264 422 q 290 205 264 248 q 374 163 317 163 m 250 950 q 282 1022 250 994 q 363 1050 314 1050 q 443 1022 411 1050 q 475 950 475 994 q 443 879 475 907 q 363 851 411 851 q 282 879 314 851 q 250 950 250 907 z "},"\u010c":{"ha":911,"x_min":47,"x_max":876,"o":"m 873 334 q 818 152 869 231 q 675 30 767 73 q 465 -14 583 -14 q 159 113 271 -14 q 47 471 47 240 l 47 520 q 97 774 47 665 q 243 942 148 883 q 463 1002 338 1002 q 751 907 642 1002 q 876 646 861 812 l 638 646 q 593 776 635 736 q 463 815 550 815 q 332 749 374 815 q 289 536 291 682 l 289 467 q 329 241 289 309 q 465 173 368 173 q 591 212 547 173 q 637 334 634 250 l 873 334 m 469 1162 l 569 1253 l 764 1253 l 764 1245 l 543 1053 l 395 1053 l 173 1246 l 173 1253 l 370 1253 l 469 1162 z "},"\u010d":{"ha":722,"x_min":35,"x_max":689,"o":"m 374 163 q 449 189 422 163 q 475 262 475 215 l 689 262 q 603 64 689 141 q 380 -14 516 -14 q 127 87 220 -14 q 35 365 35 187 l 35 374 q 76 571 35 486 q 195 702 117 656 q 378 747 272 747 q 605 668 521 747 q 689 453 689 589 l 475 453 q 447 541 475 510 q 372 571 419 571 q 269 458 283 571 q 264 359 264 422 q 290 205 264 248 q 374 163 317 163 m 363 951 l 463 1042 l 658 1042 l 658 1035 l 437 843 l 290 843 l 67 1036 l 67 1042 l 264 1042 l 363 951 z "},"\u010e":{"ha":898,"x_min":31,"x_max":850,"o":"m 75 0 l 75 987 l 393 987 q 628 928 524 987 q 791 761 732 869 q 850 518 850 652 l 850 473 q 793 230 850 337 q 632 61 736 122 q 399 0 528 1 l 75 0 m 313 804 l 313 183 l 395 183 q 553 256 498 183 q 608 473 608 329 l 608 515 q 553 731 608 659 q 393 804 498 804 l 313 804 m 327 1162 l 427 1253 l 621 1253 l 621 1245 l 400 1053 l 253 1053 l 31 1246 l 31 1253 l 227 1253 l 327 1162 z "},"\u010f":{"ha":883,"x_min":35,"x_max":979,"o":"m 35 372 q 111 647 35 547 q 321 747 186 747 q 486 670 419 747 l 486 1042 l 715 1042 l 715 0 l 510 0 l 498 79 q 319 -14 428 -14 q 112 87 189 -14 q 35 372 35 187 m 264 358 q 378 163 264 163 q 486 227 454 163 l 486 506 q 379 571 455 571 q 264 400 273 571 l 264 358 m 883 750 l 775 804 l 793 836 q 827 982 827 899 l 827 1042 l 979 1042 l 979 992 q 952 866 979 934 q 883 750 926 799 z "},"\u0112":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 671 1078 l 201 1078 l 201 1195 l 671 1195 l 671 1078 z "},"\u0113":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 597 869 l 126 869 l 126 986 l 597 986 l 597 869 z "},"\u0114":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 688 1253 q 619 1103 688 1160 q 437 1045 551 1045 q 254 1103 323 1045 q 186 1253 186 1160 l 341 1253 q 367 1190 341 1213 q 437 1167 392 1167 q 506 1189 481 1167 q 531 1253 531 1211 l 688 1253 z "},"\u0115":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 613 1044 q 545 893 613 951 q 362 836 476 836 q 180 893 248 836 q 111 1044 111 951 l 267 1044 q 292 980 267 1003 q 362 958 317 958 q 432 980 407 958 q 456 1044 456 1002 l 613 1044 z "},"\u0116":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 323 1160 q 355 1232 323 1204 q 435 1260 387 1260 q 515 1232 484 1260 q 547 1160 547 1204 q 515 1089 547 1117 q 435 1061 484 1061 q 355 1089 387 1061 q 323 1160 323 1117 z "},"\u0117":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 248 951 q 280 1023 248 995 q 361 1050 312 1050 q 441 1023 409 1050 q 473 951 473 995 q 441 880 473 907 q 361 852 409 852 q 280 880 312 852 q 248 951 248 907 z "},"\u0118":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 623 0 q 547 -51 570 -26 q 524 -109 524 -75 q 565 -151 524 -151 q 612 -139 585 -151 l 637 -253 q 525 -283 588 -283 q 405 -243 450 -283 q 360 -138 360 -204 q 428 0 360 -54 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 z "},"\u0119":{"ha":756,"x_min":41,"x_max":728,"o":"m 709 115 q 595 24 670 60 l 597 24 q 521 -27 544 -3 q 498 -85 498 -51 q 539 -127 498 -127 q 586 -115 559 -127 l 612 -229 q 499 -259 562 -259 q 379 -220 425 -259 q 334 -114 334 -180 q 368 -11 334 -52 q 131 102 220 5 q 41 348 41 200 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 z "},"\u011a":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 436 1162 l 536 1253 l 730 1253 l 730 1245 l 509 1053 l 362 1053 l 140 1246 l 140 1253 l 336 1253 l 436 1162 z "},"\u011b":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 361 952 l 461 1043 l 656 1043 l 656 1036 l 435 844 l 288 844 l 65 1037 l 65 1043 l 262 1043 l 361 952 z "},"\u011c":{"ha":947,"x_min":56,"x_max":883,"o":"m 883 122 q 722 24 828 61 q 490 -14 616 -14 q 180 105 296 -14 q 56 435 64 224 l 56 521 q 107 775 56 667 q 255 943 159 884 q 477 1002 351 1002 q 763 917 661 1002 q 882 665 865 833 l 653 665 q 600 783 641 748 q 485 819 559 819 q 347 743 395 819 q 297 526 298 667 l 297 466 q 348 244 297 318 q 507 170 398 170 q 645 211 600 170 l 645 364 l 479 364 l 479 528 l 883 528 l 883 122 m 769 1061 l 769 1053 l 589 1053 l 481 1145 l 373 1053 l 197 1053 l 197 1064 l 416 1252 l 547 1252 l 769 1061 z "},"\u011d":{"ha":799,"x_min":37,"x_max":733,"o":"m 37 372 q 74 569 37 484 q 179 701 111 654 q 338 747 248 747 q 517 670 453 747 l 526 734 l 733 734 l 733 28 q 688 -141 733 -69 q 557 -251 643 -212 q 359 -289 472 -289 q 203 -258 279 -289 q 87 -179 127 -228 l 183 -45 q 351 -120 247 -120 q 503 36 503 -120 l 503 59 q 337 -14 437 -14 q 120 89 203 -14 q 37 364 37 192 l 37 372 m 267 358 q 300 215 267 268 q 395 163 334 163 q 503 212 469 163 l 503 521 q 397 571 470 571 q 301 516 336 571 q 267 358 267 462 m 663 851 l 663 842 l 483 842 l 375 935 l 267 842 l 91 842 l 91 854 l 310 1042 l 441 1042 l 663 851 z "},"\u011e":{"ha":947,"x_min":56,"x_max":883,"o":"m 883 122 q 722 24 828 61 q 490 -14 616 -14 q 180 105 296 -14 q 56 435 64 224 l 56 521 q 107 775 56 667 q 255 943 159 884 q 477 1002 351 1002 q 763 917 661 1002 q 882 665 865 833 l 653 665 q 600 783 641 748 q 485 819 559 819 q 347 743 395 819 q 297 526 298 667 l 297 466 q 348 244 297 318 q 507 170 398 170 q 645 211 600 170 l 645 364 l 479 364 l 479 528 l 883 528 l 883 122 m 732 1253 q 664 1103 732 1160 q 481 1045 595 1045 q 299 1103 368 1045 q 231 1253 231 1160 l 386 1253 q 411 1190 386 1213 q 481 1167 437 1167 q 551 1189 526 1167 q 576 1253 576 1211 l 732 1253 z "},"\u011f":{"ha":799,"x_min":37,"x_max":733,"o":"m 37 372 q 74 569 37 484 q 179 701 111 654 q 338 747 248 747 q 517 670 453 747 l 526 734 l 733 734 l 733 28 q 688 -141 733 -69 q 557 -251 643 -212 q 359 -289 472 -289 q 203 -258 279 -289 q 87 -179 127 -228 l 183 -45 q 351 -120 247 -120 q 503 36 503 -120 l 503 59 q 337 -14 437 -14 q 120 89 203 -14 q 37 364 37 192 l 37 372 m 267 358 q 300 215 267 268 q 395 163 334 163 q 503 212 469 163 l 503 521 q 397 571 470 571 q 301 516 336 571 q 267 358 267 462 m 627 1043 q 558 892 627 950 q 376 835 490 835 q 193 892 262 835 q 125 1043 125 950 l 280 1043 q 306 980 280 1002 q 376 957 331 957 q 445 979 420 957 q 470 1043 470 1001 l 627 1043 z "},"\u0120":{"ha":947,"x_min":56,"x_max":883,"o":"m 883 122 q 722 24 828 61 q 490 -14 616 -14 q 180 105 296 -14 q 56 435 64 224 l 56 521 q 107 775 56 667 q 255 943 159 884 q 477 1002 351 1002 q 763 917 661 1002 q 882 665 865 833 l 653 665 q 600 783 641 748 q 485 819 559 819 q 347 743 395 819 q 297 526 298 667 l 297 466 q 348 244 297 318 q 507 170 398 170 q 645 211 600 170 l 645 364 l 479 364 l 479 528 l 883 528 l 883 122 m 368 1160 q 399 1232 368 1204 q 480 1260 431 1260 q 560 1232 528 1260 q 592 1160 592 1204 q 560 1089 592 1117 q 480 1061 528 1061 q 399 1089 431 1061 q 368 1160 368 1117 z "},"\u0121":{"ha":799,"x_min":37,"x_max":733,"o":"m 37 372 q 74 569 37 484 q 179 701 111 654 q 338 747 248 747 q 517 670 453 747 l 526 734 l 733 734 l 733 28 q 688 -141 733 -69 q 557 -251 643 -212 q 359 -289 472 -289 q 203 -258 279 -289 q 87 -179 127 -228 l 183 -45 q 351 -120 247 -120 q 503 36 503 -120 l 503 59 q 337 -14 437 -14 q 120 89 203 -14 q 37 364 37 192 l 37 372 m 267 358 q 300 215 267 268 q 395 163 334 163 q 503 212 469 163 l 503 521 q 397 571 470 571 q 301 516 336 571 q 267 358 267 462 m 262 950 q 294 1022 262 994 q 374 1050 326 1050 q 454 1022 422 1050 q 486 950 486 994 q 454 879 486 907 q 374 851 422 851 q 294 879 326 851 q 262 950 262 907 z "},"\u0122":{"ha":947,"x_min":56,"x_max":883,"o":"m 883 122 q 722 24 828 61 q 490 -14 616 -14 q 180 105 296 -14 q 56 435 64 224 l 56 521 q 107 775 56 667 q 255 943 159 884 q 477 1002 351 1002 q 763 917 661 1002 q 882 665 865 833 l 653 665 q 600 783 641 748 q 485 819 559 819 q 347 743 395 819 q 297 526 298 667 l 297 466 q 348 244 297 318 q 507 170 398 170 q 645 211 600 170 l 645 364 l 479 364 l 479 528 l 883 528 l 883 122 m 474 -349 l 366 -295 l 384 -264 q 418 -117 418 -200 l 418 -57 l 570 -57 l 570 -107 q 543 -233 570 -165 q 474 -349 517 -300 z "},"\u0123":{"ha":799,"x_min":37,"x_max":733,"o":"m 37 372 q 74 569 37 484 q 179 701 111 654 q 338 747 248 747 q 517 670 453 747 l 526 734 l 733 734 l 733 28 q 688 -141 733 -69 q 557 -251 643 -212 q 359 -289 472 -289 q 203 -258 279 -289 q 87 -179 127 -228 l 183 -45 q 351 -120 247 -120 q 503 36 503 -120 l 503 59 q 337 -14 437 -14 q 120 89 203 -14 q 37 364 37 192 l 37 372 m 267 358 q 300 215 267 268 q 395 163 334 163 q 503 212 469 163 l 503 521 q 397 571 470 571 q 301 516 336 571 q 267 358 267 462 m 387 1173 l 501 1124 q 454 952 456 1029 l 452 855 l 292 855 l 292 937 q 387 1173 292 1116 z "},"\u0124":{"ha":976,"x_min":75,"x_max":900,"o":"m 900 0 l 663 0 l 663 412 l 313 412 l 313 0 l 75 0 l 75 987 l 313 987 l 313 595 l 663 595 l 663 987 l 900 987 l 900 0 m 781 1061 l 781 1053 l 601 1053 l 493 1145 l 385 1053 l 209 1053 l 209 1064 l 428 1252 l 559 1252 l 781 1061 z "},"\u0125":{"ha":784,"x_min":59,"x_max":721,"o":"m 288 655 q 475 747 361 747 q 658 675 596 747 q 721 463 720 604 l 721 0 l 492 0 l 492 458 q 468 544 492 516 q 387 571 444 571 q 288 526 317 571 l 288 0 l 59 0 l 59 1042 l 288 1042 l 288 655 m 651 1124 l 651 1116 l 471 1116 l 363 1208 l 255 1116 l 79 1116 l 79 1127 l 298 1315 l 429 1315 l 651 1124 z "},"\u0128":{"ha":419,"x_min":-53,"x_max":471,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 471 1246 q 426 1115 471 1168 q 315 1061 381 1061 q 215 1089 270 1061 q 126 1118 160 1118 q 89 1103 104 1118 q 74 1057 74 1088 l -53 1063 q -8 1194 -53 1139 q 103 1249 37 1249 q 192 1224 137 1249 q 261 1196 247 1199 q 292 1192 276 1192 q 330 1207 314 1192 q 345 1253 345 1222 l 471 1246 z "},"\u0129":{"ha":396,"x_min":-63,"x_max":461,"o":"m 313 0 l 83 0 l 83 734 l 313 734 l 313 0 m 461 1022 q 416 891 461 945 q 304 837 371 837 q 205 865 260 837 q 116 894 150 894 q 79 879 94 894 q 64 833 64 864 l -63 840 q -18 970 -63 915 q 93 1025 27 1025 q 182 1000 127 1025 q 251 972 237 975 q 282 968 266 968 q 319 983 304 968 q 335 1029 335 998 l 461 1022 z "},"\u012a":{"ha":419,"x_min":-26,"x_max":445,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 445 1078 l -26 1078 l -26 1195 l 445 1195 l 445 1078 z "},"\u012b":{"ha":396,"x_min":-36,"x_max":435,"o":"m 313 0 l 83 0 l 83 734 l 313 734 l 313 0 m 435 854 l -36 854 l -36 971 l 435 971 l 435 854 z "},"\u012c":{"ha":419,"x_min":-41,"x_max":461,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 461 1253 q 393 1103 461 1160 q 210 1045 324 1045 q 28 1103 96 1045 q -41 1253 -41 1160 l 115 1253 q 140 1190 115 1213 q 210 1167 165 1167 q 280 1189 255 1167 q 304 1253 304 1211 l 461 1253 z "},"\u012d":{"ha":396,"x_min":-51,"x_max":451,"o":"m 313 0 l 83 0 l 83 734 l 313 734 l 313 0 m 451 1029 q 382 879 451 937 q 200 821 314 821 q 18 879 86 821 q -51 1029 -51 937 l 104 1029 q 130 966 104 989 q 200 943 155 943 q 270 965 245 943 q 294 1029 294 987 l 451 1029 z "},"\u012e":{"ha":419,"x_min":17,"x_max":328,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 279 0 q 204 -51 227 -26 q 181 -109 181 -75 q 222 -151 181 -151 q 269 -139 242 -151 l 294 -253 q 182 -283 245 -283 q 62 -243 107 -283 q 17 -138 17 -204 q 153 41 17 -20 l 279 0 z "},"\u012f":{"ha":382,"x_min":5,"x_max":316,"o":"m 305 0 l 76 0 l 76 734 l 305 734 l 305 0 m 62 923 q 98 1003 62 972 q 189 1034 133 1034 q 281 1003 245 1034 q 316 923 316 972 q 281 843 316 874 q 189 812 245 812 q 98 843 133 812 q 62 923 62 874 m 268 0 q 192 -51 215 -26 q 170 -109 170 -75 q 210 -151 170 -151 q 257 -139 231 -151 l 283 -253 q 170 -283 233 -283 q 51 -243 96 -283 q 5 -138 5 -204 q 142 41 5 -20 l 268 0 z "},"\u0130":{"ha":419,"x_min":91,"x_max":328,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 96 1160 q 127 1232 96 1204 q 208 1260 159 1260 q 288 1232 256 1260 q 320 1160 320 1204 q 288 1089 320 1117 q 208 1061 256 1061 q 127 1089 159 1061 q 96 1160 96 1117 z "},"\u0132":{"ha":1200,"x_min":91,"x_max":1124,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 887 987 l 1124 987 l 1124 310 q 1081 142 1124 216 q 959 27 1037 68 q 784 -14 880 -14 q 533 68 623 -14 q 444 298 444 149 l 682 298 q 706 200 682 231 q 784 170 729 170 q 860 207 833 170 q 887 310 887 243 l 887 987 z "},"\u0133":{"ha":757,"x_min":62,"x_max":699,"o":"m 305 0 l 76 0 l 76 734 l 305 734 l 305 0 m 62 923 q 98 1003 62 972 q 189 1034 133 1034 q 281 1003 245 1034 q 316 923 316 972 q 281 843 316 874 q 189 812 245 812 q 98 843 133 812 q 62 923 62 874 m 692 734 l 692 -25 q 617 -226 691 -155 q 411 -296 543 -296 q 303 -285 354 -296 l 303 -112 q 368 -118 342 -118 q 463 -24 463 -118 l 463 734 l 692 734 m 446 923 q 481 1003 446 972 q 572 1034 516 1034 q 664 1003 629 1034 q 699 923 699 972 q 664 843 699 874 q 572 812 629 812 q 481 843 516 812 q 446 923 446 874 z "},"\u0134":{"ha":781,"x_min":24,"x_max":871,"o":"m 468 987 l 705 987 l 705 310 q 662 142 705 216 q 539 27 618 68 q 365 -14 461 -14 q 114 68 203 -14 q 24 298 24 149 l 263 298 q 287 200 263 231 q 365 170 310 170 q 441 207 414 170 q 468 310 468 243 l 468 987 m 871 1061 l 871 1053 l 690 1053 l 583 1145 l 475 1053 l 298 1053 l 298 1064 l 517 1252 l 648 1252 l 871 1061 z "},"\u0135":{"ha":410,"x_min":-97,"x_max":475,"o":"m 323 734 l 323 -9 q 250 -222 323 -147 q 45 -296 176 -296 q -62 -285 -13 -296 l -52 -112 q 14 -120 -18 -120 q 94 -7 94 -120 l 94 734 l 323 734 m 475 838 l 475 829 l 295 829 l 187 921 l 79 829 l -97 829 l -97 840 l 122 1028 l 253 1028 l 475 838 z "},"\u0136":{"ha":888,"x_min":75,"x_max":903,"o":"m 410 368 l 313 260 l 313 0 l 75 0 l 75 987 l 313 987 l 313 552 l 395 677 l 608 987 l 903 987 l 569 551 l 903 0 l 621 0 l 410 368 m 420 -313 l 313 -259 l 330 -228 q 364 -81 364 -164 l 364 -21 l 517 -21 l 517 -71 q 490 -197 516 -130 q 420 -313 463 -264 z "},"\u0137":{"ha":760,"x_min":66,"x_max":781,"o":"m 359 273 l 294 209 l 294 0 l 66 0 l 66 1042 l 294 1042 l 294 489 l 317 519 l 490 734 l 764 734 l 507 432 l 781 0 l 519 0 l 359 273 m 376 -328 l 269 -274 l 286 -243 q 320 -96 320 -179 l 320 -36 l 473 -36 l 473 -86 q 446 -212 472 -144 q 376 -328 419 -279 z "},"\u0139":{"ha":753,"x_min":75,"x_max":727,"o":"m 313 183 l 727 183 l 727 0 l 75 0 l 75 987 l 313 987 l 313 183 m 231 1252 l 472 1252 l 283 1039 l 97 1039 l 231 1252 z "},"\u013a":{"ha":382,"x_min":76,"x_max":461,"o":"m 305 0 l 76 0 l 76 1042 l 305 1042 l 305 0 m 220 1304 l 461 1304 l 273 1091 l 86 1091 l 220 1304 z "},"\u013b":{"ha":753,"x_min":75,"x_max":727,"o":"m 313 183 l 727 183 l 727 0 l 75 0 l 75 987 l 313 987 l 313 183 m 384 -342 l 276 -288 l 294 -257 q 328 -111 328 -193 l 328 -50 l 480 -50 l 480 -100 q 453 -226 479 -159 q 384 -342 427 -294 z "},"\u013c":{"ha":382,"x_min":65,"x_max":305,"o":"m 305 0 l 76 0 l 76 1042 l 305 1042 l 305 0 m 173 -342 l 65 -288 l 83 -257 q 117 -111 117 -193 l 117 -50 l 269 -50 l 269 -100 q 242 -226 269 -159 q 173 -342 216 -294 z "},"\u013d":{"ha":753,"x_min":75,"x_max":727,"o":"m 313 183 l 727 183 l 727 0 l 75 0 l 75 987 l 313 987 l 313 183 m 548 696 l 440 750 l 458 781 q 492 928 492 845 l 492 988 l 644 988 l 644 938 q 617 812 644 880 q 548 696 591 745 z "},"\u013e":{"ha":484,"x_min":76,"x_max":559,"o":"m 305 0 l 76 0 l 76 1042 l 305 1042 l 305 0 m 463 750 l 355 804 l 373 836 q 407 982 407 899 l 407 1042 l 559 1042 l 559 992 q 532 866 559 934 q 463 750 506 799 z "},"\u013f":{"ha":753,"x_min":75,"x_max":727,"o":"m 313 183 l 727 183 l 727 0 l 75 0 l 75 987 l 313 987 l 313 183 m 405 570 q 437 642 405 614 q 517 669 469 669 q 597 642 566 669 q 629 570 629 614 q 597 498 629 526 q 517 471 566 471 q 437 498 469 471 q 405 570 405 526 z "},"\u0140":{"ha":531,"x_min":76,"x_max":592,"o":"m 305 0 l 76 0 l 76 1042 l 305 1042 l 305 0 m 368 523 q 399 595 368 567 q 480 623 431 623 q 560 595 528 623 q 592 523 592 567 q 560 452 592 479 q 480 424 528 424 q 399 452 431 424 q 368 523 368 479 z "},"\u0143":{"ha":975,"x_min":75,"x_max":899,"o":"m 899 0 l 663 0 l 313 614 l 313 0 l 75 0 l 75 987 l 313 987 l 662 373 l 662 987 l 899 987 l 899 0 m 522 1252 l 763 1252 l 574 1039 l 388 1039 l 522 1252 z "},"\u0144":{"ha":783,"x_min":60,"x_max":721,"o":"m 274 734 l 281 648 q 491 747 357 747 q 662 679 606 747 q 721 473 719 610 l 721 0 l 492 0 l 492 463 q 469 545 492 519 q 388 571 447 571 q 288 518 321 571 l 288 0 l 60 0 l 60 734 l 274 734 m 420 1042 l 662 1042 l 473 829 l 287 829 l 420 1042 z "},"\u0145":{"ha":975,"x_min":75,"x_max":899,"o":"m 899 0 l 663 0 l 313 614 l 313 0 l 75 0 l 75 987 l 313 987 l 662 373 l 662 987 l 899 987 l 899 0 m 475 -349 l 367 -295 l 385 -264 q 418 -117 418 -200 l 418 -57 l 571 -57 l 571 -107 q 544 -233 570 -165 q 475 -349 517 -300 z "},"\u0146":{"ha":783,"x_min":60,"x_max":721,"o":"m 274 734 l 281 648 q 491 747 357 747 q 662 679 606 747 q 721 473 719 610 l 721 0 l 492 0 l 492 463 q 469 545 492 519 q 388 571 447 571 q 288 518 321 571 l 288 0 l 60 0 l 60 734 l 274 734 m 375 -342 l 267 -288 l 285 -257 q 319 -111 319 -193 l 319 -50 l 471 -50 l 471 -100 q 444 -226 471 -159 q 375 -342 418 -294 z "},"\u0147":{"ha":975,"x_min":75,"x_max":899,"o":"m 899 0 l 663 0 l 313 614 l 313 0 l 75 0 l 75 987 l 313 987 l 662 373 l 662 987 l 899 987 l 899 0 m 492 1162 l 592 1253 l 787 1253 l 787 1245 l 566 1053 l 418 1053 l 196 1246 l 196 1253 l 393 1253 l 492 1162 z "},"\u0148":{"ha":783,"x_min":60,"x_max":721,"o":"m 274 734 l 281 648 q 491 747 357 747 q 662 679 606 747 q 721 473 719 610 l 721 0 l 492 0 l 492 463 q 469 545 492 519 q 388 571 447 571 q 288 518 321 571 l 288 0 l 60 0 l 60 734 l 274 734 m 391 951 l 491 1042 l 686 1042 l 686 1035 l 465 843 l 317 843 l 95 1036 l 95 1042 l 292 1042 l 391 951 z "},"\u0149":{"ha":783,"x_min":-89,"x_max":721,"o":"m 274 734 l 281 648 q 491 747 357 747 q 662 679 606 747 q 721 473 719 610 l 721 0 l 492 0 l 492 463 q 469 545 492 519 q 388 571 447 571 q 288 518 321 571 l 288 0 l 60 0 l 60 734 l 274 734 m 19 749 l -89 803 l -71 834 q -37 981 -37 898 l -37 1041 l 115 1041 l 115 991 q 88 865 115 932 q 19 749 62 798 z "},"\u014c":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 713 1078 l 242 1078 l 242 1195 l 713 1195 l 713 1078 z "},"\u014d":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 626 868 l 155 868 l 155 985 l 626 985 l 626 868 z "},"\u014e":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 729 1253 q 661 1103 729 1160 q 478 1045 592 1045 q 296 1103 364 1045 q 227 1253 227 1160 l 382 1253 q 408 1190 382 1213 q 478 1167 433 1167 q 548 1189 523 1167 q 572 1253 572 1211 l 729 1253 z "},"\u014f":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 642 1043 q 574 892 642 950 q 391 835 505 835 q 209 892 277 835 q 140 1043 140 950 l 296 1043 q 321 980 296 1002 q 391 957 347 957 q 461 979 436 957 q 486 1043 486 1001 l 642 1043 z "},"\u0150":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 669 1251 l 857 1251 l 677 1048 l 516 1048 l 669 1251 m 387 1251 l 576 1251 l 415 1048 l 252 1048 l 387 1251 z "},"\u0151":{"ha":780,"x_min":35,"x_max":770,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 582 1041 l 770 1041 l 590 838 l 429 838 l 582 1041 m 300 1041 l 490 1041 l 328 838 l 165 838 l 300 1041 z "},"\u0154":{"ha":906,"x_min":75,"x_max":871,"o":"m 441 349 l 313 349 l 313 0 l 75 0 l 75 987 l 463 987 q 738 909 639 987 q 837 689 837 831 q 795 518 837 586 q 665 408 753 450 l 871 10 l 871 0 l 616 0 l 441 349 m 313 532 l 463 532 q 565 568 531 532 q 600 667 600 604 q 565 767 600 731 q 463 804 530 804 l 313 804 l 313 532 m 431 1252 l 672 1252 l 484 1039 l 297 1039 l 431 1252 z "},"\u0155":{"ha":526,"x_min":66,"x_max":550,"o":"m 508 527 l 433 532 q 294 465 325 532 l 294 0 l 66 0 l 66 734 l 280 734 l 288 640 q 448 747 345 747 q 512 739 485 747 l 508 527 m 309 1042 l 550 1042 l 361 829 l 175 829 l 309 1042 z "},"\u0156":{"ha":906,"x_min":75,"x_max":871,"o":"m 441 349 l 313 349 l 313 0 l 75 0 l 75 987 l 463 987 q 738 909 639 987 q 837 689 837 831 q 795 518 837 586 q 665 408 753 450 l 871 10 l 871 0 l 616 0 l 441 349 m 313 532 l 463 532 q 565 568 531 532 q 600 667 600 604 q 565 767 600 731 q 463 804 530 804 l 313 804 l 313 532 m 398 -342 l 290 -288 l 308 -257 q 342 -111 342 -193 l 342 -50 l 494 -50 l 494 -100 q 467 -226 494 -159 q 398 -342 441 -294 z "},"\u0157":{"ha":526,"x_min":54,"x_max":512,"o":"m 508 527 l 433 532 q 294 465 325 532 l 294 0 l 66 0 l 66 734 l 280 734 l 288 640 q 448 747 345 747 q 512 739 485 747 l 508 527 m 162 -342 l 54 -288 l 72 -257 q 106 -111 106 -193 l 106 -50 l 258 -50 l 258 -100 q 231 -226 258 -159 q 162 -342 205 -294 z "},"\u0158":{"ha":906,"x_min":75,"x_max":871,"o":"m 441 349 l 313 349 l 313 0 l 75 0 l 75 987 l 463 987 q 738 909 639 987 q 837 689 837 831 q 795 518 837 586 q 665 408 753 450 l 871 10 l 871 0 l 616 0 l 441 349 m 313 532 l 463 532 q 565 568 531 532 q 600 667 600 604 q 565 767 600 731 q 463 804 530 804 l 313 804 l 313 532 m 401 1162 l 501 1253 l 696 1253 l 696 1245 l 475 1053 l 328 1053 l 105 1246 l 105 1253 l 302 1253 l 401 1162 z "},"\u0159":{"ha":526,"x_min":-16,"x_max":574,"o":"m 508 527 l 433 532 q 294 465 325 532 l 294 0 l 66 0 l 66 734 l 280 734 l 288 640 q 448 747 345 747 q 512 739 485 747 l 508 527 m 280 951 l 380 1042 l 574 1042 l 574 1035 l 353 843 l 206 843 l -16 1036 l -16 1042 l 180 1042 l 280 951 z "},"\u015a":{"ha":869,"x_min":43,"x_max":822,"o":"m 584 262 q 547 344 584 315 q 417 404 510 373 q 265 465 324 435 q 73 724 73 559 q 121 868 73 806 q 256 966 169 931 q 453 1001 344 1001 q 644 963 559 1001 q 775 855 728 925 q 822 694 822 785 l 585 694 q 548 788 585 755 q 448 821 511 821 q 347 793 384 821 q 310 722 310 765 q 351 653 310 684 q 494 589 391 622 q 662 518 596 556 q 822 264 822 426 q 724 60 822 134 q 456 -14 627 -14 q 239 30 336 -14 q 93 148 142 73 q 43 320 43 222 l 282 320 q 323 203 282 241 q 456 165 364 165 q 550 191 515 165 q 584 262 584 216 m 478 1252 l 720 1252 l 531 1039 l 345 1039 l 478 1252 z "},"\u015b":{"ha":711,"x_min":24,"x_max":670,"o":"m 448 206 q 418 253 448 235 q 302 290 387 271 q 161 339 216 309 q 76 414 105 370 q 47 515 47 458 q 130 682 47 616 q 349 747 214 747 q 582 682 494 747 q 670 509 670 616 l 441 509 q 348 597 441 597 q 288 577 312 597 q 263 527 263 557 q 293 477 263 496 q 388 446 323 458 q 503 417 454 434 q 669 213 669 360 q 579 50 669 113 q 349 -14 490 -14 q 180 20 254 -14 q 65 113 106 54 q 24 235 24 171 l 237 235 q 271 161 239 184 q 355 138 304 138 q 425 157 401 138 q 448 206 448 176 m 374 1042 l 615 1042 l 427 829 l 240 829 l 374 1042 z "},"\u015c":{"ha":869,"x_min":43,"x_max":822,"o":"m 584 262 q 547 344 584 315 q 417 404 510 373 q 265 465 324 435 q 73 724 73 559 q 121 868 73 806 q 256 966 169 931 q 453 1001 344 1001 q 644 963 559 1001 q 775 855 728 925 q 822 694 822 785 l 585 694 q 548 788 585 755 q 448 821 511 821 q 347 793 384 821 q 310 722 310 765 q 351 653 310 684 q 494 589 391 622 q 662 518 596 556 q 822 264 822 426 q 724 60 822 134 q 456 -14 627 -14 q 239 30 336 -14 q 93 148 142 73 q 43 320 43 222 l 282 320 q 323 203 282 241 q 456 165 364 165 q 550 191 515 165 q 584 262 584 216 m 737 1061 l 737 1053 l 557 1053 l 449 1145 l 341 1053 l 165 1053 l 165 1064 l 384 1252 l 515 1252 l 737 1061 z "},"\u015d":{"ha":711,"x_min":24,"x_max":670,"o":"m 448 206 q 418 253 448 235 q 302 290 387 271 q 161 339 216 309 q 76 414 105 370 q 47 515 47 458 q 130 682 47 616 q 349 747 214 747 q 582 682 494 747 q 670 509 670 616 l 441 509 q 348 597 441 597 q 288 577 312 597 q 263 527 263 557 q 293 477 263 496 q 388 446 323 458 q 503 417 454 434 q 669 213 669 360 q 579 50 669 113 q 349 -14 490 -14 q 180 20 254 -14 q 65 113 106 54 q 24 235 24 171 l 237 235 q 271 161 239 184 q 355 138 304 138 q 425 157 401 138 q 448 206 448 176 m 633 851 l 633 842 l 453 842 l 345 935 l 237 842 l 61 842 l 61 854 l 280 1042 l 411 1042 l 633 851 z "},"\u015e":{"ha":869,"x_min":43,"x_max":822,"o":"m 584 262 q 547 344 584 315 q 417 404 510 373 q 265 465 324 435 q 73 724 73 559 q 121 868 73 806 q 256 966 169 931 q 453 1001 344 1001 q 644 963 559 1001 q 775 855 728 925 q 822 694 822 785 l 585 694 q 548 788 585 755 q 448 821 511 821 q 347 793 384 821 q 310 722 310 765 q 351 653 310 684 q 494 589 391 622 q 662 518 596 556 q 822 264 822 426 q 724 60 822 134 q 456 -14 627 -14 q 239 30 336 -14 q 93 148 142 73 q 43 320 43 222 l 282 320 q 323 203 282 241 q 456 165 364 165 q 550 191 515 165 q 584 262 584 216 m 537 7 l 530 -35 q 632 -152 632 -54 q 565 -275 632 -231 q 378 -320 498 -320 l 374 -194 q 433 -142 433 -194 q 412 -106 433 -116 q 342 -92 391 -96 l 363 7 l 537 7 z "},"\u015f":{"ha":711,"x_min":24,"x_max":670,"o":"m 448 206 q 418 253 448 235 q 302 290 387 271 q 161 339 216 309 q 76 414 105 370 q 47 515 47 458 q 130 682 47 616 q 349 747 214 747 q 582 682 494 747 q 670 509 670 616 l 441 509 q 348 597 441 597 q 288 577 312 597 q 263 527 263 557 q 293 477 263 496 q 388 446 323 458 q 503 417 454 434 q 669 213 669 360 q 579 50 669 113 q 349 -14 490 -14 q 180 20 254 -14 q 65 113 106 54 q 24 235 24 171 l 237 235 q 271 161 239 184 q 355 138 304 138 q 425 157 401 138 q 448 206 448 176 m 433 1 l 427 -41 q 528 -158 528 -60 q 461 -281 528 -237 q 275 -326 394 -326 l 270 -200 q 330 -148 330 -200 q 308 -112 330 -122 q 239 -98 287 -102 l 260 1 l 433 1 z "},"\u0218":{"ha":869,"x_min":43,"x_max":822,"o":"m 584 262 q 547 344 584 315 q 417 404 510 373 q 265 465 324 435 q 73 724 73 559 q 121 868 73 806 q 256 966 169 931 q 453 1001 344 1001 q 644 963 559 1001 q 775 855 728 925 q 822 694 822 785 l 585 694 q 548 788 585 755 q 448 821 511 821 q 347 793 384 821 q 310 722 310 765 q 351 653 310 684 q 494 589 391 622 q 662 518 596 556 q 822 264 822 426 q 724 60 822 134 q 456 -14 627 -14 q 239 30 336 -14 q 93 148 142 73 q 43 320 43 222 l 282 320 q 323 203 282 241 q 456 165 364 165 q 550 191 515 165 q 584 262 584 216 m 431 -349 l 323 -295 l 340 -264 q 374 -117 374 -200 l 374 -57 l 527 -57 l 527 -107 q 500 -233 526 -165 q 431 -349 473 -300 z "},"\u0219":{"ha":711,"x_min":24,"x_max":670,"o":"m 448 206 q 418 253 448 235 q 302 290 387 271 q 161 339 216 309 q 76 414 105 370 q 47 515 47 458 q 130 682 47 616 q 349 747 214 747 q 582 682 494 747 q 670 509 670 616 l 441 509 q 348 597 441 597 q 288 577 312 597 q 263 527 263 557 q 293 477 263 496 q 388 446 323 458 q 503 417 454 434 q 669 213 669 360 q 579 50 669 113 q 349 -14 490 -14 q 180 20 254 -14 q 65 113 106 54 q 24 235 24 171 l 237 235 q 271 161 239 184 q 355 138 304 138 q 425 157 401 138 q 448 206 448 176 m 327 -356 l 219 -302 l 237 -271 q 271 -124 271 -207 l 271 -64 l 423 -64 l 423 -114 q 396 -240 422 -172 q 327 -356 370 -307 z "},"\u0160":{"ha":869,"x_min":43,"x_max":822,"o":"m 584 262 q 547 344 584 315 q 417 404 510 373 q 265 465 324 435 q 73 724 73 559 q 121 868 73 806 q 256 966 169 931 q 453 1001 344 1001 q 644 963 559 1001 q 775 855 728 925 q 822 694 822 785 l 585 694 q 548 788 585 755 q 448 821 511 821 q 347 793 384 821 q 310 722 310 765 q 351 653 310 684 q 494 589 391 622 q 662 518 596 556 q 822 264 822 426 q 724 60 822 134 q 456 -14 627 -14 q 239 30 336 -14 q 93 148 142 73 q 43 320 43 222 l 282 320 q 323 203 282 241 q 456 165 364 165 q 550 191 515 165 q 584 262 584 216 m 449 1162 l 549 1253 l 743 1253 l 743 1245 l 522 1053 l 375 1053 l 153 1246 l 153 1253 l 349 1253 l 449 1162 z "},"\u0161":{"ha":711,"x_min":24,"x_max":670,"o":"m 448 206 q 418 253 448 235 q 302 290 387 271 q 161 339 216 309 q 76 414 105 370 q 47 515 47 458 q 130 682 47 616 q 349 747 214 747 q 582 682 494 747 q 670 509 670 616 l 441 509 q 348 597 441 597 q 288 577 312 597 q 263 527 263 557 q 293 477 263 496 q 388 446 323 458 q 503 417 454 434 q 669 213 669 360 q 579 50 669 113 q 349 -14 490 -14 q 180 20 254 -14 q 65 113 106 54 q 24 235 24 171 l 237 235 q 271 161 239 184 q 355 138 304 138 q 425 157 401 138 q 448 206 448 176 m 345 951 l 444 1042 l 639 1042 l 639 1035 l 418 843 l 271 843 l 48 1036 l 48 1042 l 245 1042 l 345 951 z "},"\u021a":{"ha":876,"x_min":24,"x_max":850,"o":"m 850 804 l 553 804 l 553 0 l 315 0 l 315 804 l 24 804 l 24 987 l 850 987 l 850 804 m 414 -342 l 306 -288 l 323 -257 q 357 -111 357 -193 l 357 -50 l 510 -50 l 510 -100 q 483 -226 509 -159 q 414 -342 456 -294 z "},"\u021b":{"ha":477,"x_min":8,"x_max":461,"o":"m 330 916 l 330 734 l 451 734 l 451 575 l 330 575 l 330 239 q 345 182 330 198 q 404 165 360 165 q 461 170 438 165 l 461 6 q 332 -14 399 -14 q 158 42 214 -14 q 102 211 102 98 l 102 575 l 8 575 l 8 734 l 102 734 l 102 916 l 330 916 m 268 -349 l 160 -295 l 178 -264 q 212 -117 212 -200 l 212 -57 l 364 -57 l 364 -107 q 337 -233 363 -165 q 268 -349 311 -300 z "},"\u0162":{"ha":876,"x_min":24,"x_max":850,"o":"m 850 804 l 553 804 l 553 0 l 315 0 l 315 804 l 24 804 l 24 987 l 850 987 l 850 804 m 520 14 l 513 -28 q 615 -145 615 -47 q 548 -269 615 -224 q 361 -313 481 -313 l 357 -187 q 416 -135 416 -187 q 395 -99 416 -109 q 326 -85 374 -89 l 347 14 l 520 14 z "},"\u0163":{"ha":477,"x_min":8,"x_max":469,"o":"m 330 916 l 330 734 l 451 734 l 451 575 l 330 575 l 330 239 q 345 182 330 198 q 404 165 360 165 q 461 170 438 165 l 461 6 q 332 -14 399 -14 q 158 42 214 -14 q 102 211 102 98 l 102 575 l 8 575 l 8 734 l 102 734 l 102 916 l 330 916 m 374 7 l 368 -35 q 469 -152 469 -54 q 402 -275 469 -231 q 216 -320 335 -320 l 211 -194 q 271 -142 271 -194 q 249 -106 271 -116 q 180 -92 228 -96 l 201 7 l 374 7 z "},"\u0164":{"ha":876,"x_min":24,"x_max":850,"o":"m 850 804 l 553 804 l 553 0 l 315 0 l 315 804 l 24 804 l 24 987 l 850 987 l 850 804 m 431 1162 l 531 1253 l 726 1253 l 726 1245 l 505 1053 l 357 1053 l 135 1246 l 135 1253 l 332 1253 l 431 1162 z "},"\u0165":{"ha":504,"x_min":8,"x_max":606,"o":"m 330 916 l 330 734 l 451 734 l 451 575 l 330 575 l 330 239 q 345 182 330 198 q 404 165 360 165 q 461 170 438 165 l 461 6 q 332 -14 399 -14 q 158 42 214 -14 q 102 211 102 98 l 102 575 l 8 575 l 8 734 l 102 734 l 102 916 l 330 916 m 509 840 l 401 894 l 419 925 q 453 1072 453 989 l 453 1132 l 606 1132 l 606 1082 q 578 956 605 1023 q 509 840 552 888 z "},"\u0168":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 719 1246 q 674 1115 719 1168 q 562 1061 629 1061 q 463 1089 517 1061 q 374 1118 408 1118 q 337 1103 352 1118 q 321 1057 321 1088 l 195 1063 q 240 1194 195 1139 q 351 1249 285 1249 q 439 1224 385 1249 q 509 1196 494 1199 q 540 1192 524 1192 q 577 1207 562 1192 q 593 1253 593 1222 l 719 1246 z "},"\u0169":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 652 1036 q 607 905 652 959 q 496 851 562 851 q 396 880 451 851 q 307 908 341 908 q 270 893 286 908 q 255 847 255 878 l 128 854 q 173 984 128 929 q 284 1039 218 1039 q 373 1014 318 1039 q 443 986 428 989 q 473 983 457 983 q 511 998 495 983 q 526 1044 526 1013 l 652 1036 z "},"\u016a":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 692 1078 l 222 1078 l 222 1195 l 692 1195 l 692 1078 z "},"\u016b":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 626 868 l 155 868 l 155 985 l 626 985 l 626 868 z "},"\u016c":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 709 1253 q 640 1103 709 1160 q 458 1045 572 1045 q 275 1103 344 1045 q 207 1253 207 1160 l 362 1253 q 388 1190 362 1213 q 458 1167 413 1167 q 527 1189 503 1167 q 552 1253 552 1211 l 709 1253 z "},"\u016d":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 642 1043 q 574 892 642 950 q 391 835 505 835 q 209 892 277 835 q 140 1043 140 950 l 296 1043 q 321 980 296 1002 q 391 957 347 957 q 461 979 436 957 q 486 1043 486 1001 l 642 1043 z "},"\u016e":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 307 1173 q 351 1271 307 1231 q 459 1310 395 1310 q 567 1271 522 1310 q 611 1173 611 1231 q 567 1076 611 1115 q 459 1038 524 1038 q 350 1076 394 1038 q 307 1173 307 1115 m 459 1102 q 510 1122 492 1102 q 529 1173 529 1143 q 510 1223 529 1202 q 459 1244 492 1244 q 407 1223 426 1244 q 389 1173 389 1202 q 407 1122 389 1143 q 459 1102 426 1102 z "},"\u016f":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 240 962 q 284 1060 240 1021 q 393 1100 329 1100 q 500 1060 456 1100 q 545 962 545 1021 q 501 866 545 905 q 393 827 457 827 q 284 866 328 827 q 240 962 240 905 m 393 892 q 444 912 425 892 q 463 962 463 932 q 444 1013 463 992 q 393 1034 425 1034 q 341 1013 359 1034 q 322 962 322 992 q 341 912 322 932 q 393 892 359 892 z "},"\u0170":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 648 1251 l 837 1251 l 656 1048 l 496 1048 l 648 1251 m 366 1251 l 556 1251 l 395 1048 l 232 1048 l 366 1251 z "},"\u0171":{"ha":783,"x_min":60,"x_max":770,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 582 1041 l 770 1041 l 590 838 l 429 838 l 582 1041 m 300 1041 l 490 1041 l 328 838 l 165 838 l 300 1041 z "},"\u0172":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 710 52 848 146 l 713 52 q 637 1 660 25 q 614 -58 614 -23 q 655 -100 614 -100 q 702 -87 675 -100 l 728 -201 q 615 -231 678 -231 q 495 -192 541 -231 q 450 -86 450 -153 q 465 -14 450 -46 q 175 82 279 -14 q 71 345 71 177 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 z "},"\u0173":{"ha":783,"x_min":60,"x_max":722,"o":"m 693 0 q 617 -51 640 -26 q 595 -109 595 -75 q 635 -151 595 -151 q 682 -139 656 -151 l 708 -253 q 595 -283 659 -283 q 476 -243 521 -283 q 431 -138 431 -204 q 507 7 431 -49 l 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 693 0 z "},"\u0174":{"ha":1207,"x_min":14,"x_max":1189,"o":"m 840 368 l 953 987 l 1189 987 l 979 0 l 732 0 l 600 563 l 471 0 l 224 0 l 14 987 l 251 987 l 364 368 l 500 987 l 702 987 l 840 368 m 893 1061 l 893 1053 l 713 1053 l 605 1145 l 497 1053 l 321 1053 l 321 1064 l 540 1252 l 671 1252 l 893 1061 z "},"\u0175":{"ha":1008,"x_min":15,"x_max":991,"o":"m 698 301 l 772 734 l 991 734 l 818 0 l 625 0 l 503 435 l 381 0 l 188 0 l 15 734 l 234 734 l 307 291 l 423 734 l 583 734 l 698 301 m 791 851 l 791 842 l 611 842 l 503 935 l 395 842 l 219 842 l 219 854 l 438 1042 l 569 1042 l 791 851 z "},"\u0176":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 m 724 1061 l 724 1053 l 544 1053 l 436 1145 l 328 1053 l 152 1053 l 152 1064 l 371 1252 l 502 1252 l 724 1061 z "},"\u0177":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 646 851 l 646 842 l 466 842 l 358 935 l 250 842 l 74 842 l 74 854 l 293 1042 l 424 1042 l 646 851 z "},"\u0178":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 m 157 1136 q 186 1200 157 1173 q 259 1226 216 1226 q 332 1200 302 1226 q 361 1136 361 1173 q 332 1072 361 1099 q 259 1046 302 1046 q 186 1072 216 1046 q 157 1136 157 1099 m 509 1136 q 538 1200 509 1173 q 611 1226 568 1226 q 684 1200 654 1226 q 713 1136 713 1173 q 684 1072 713 1099 q 611 1046 654 1046 q 538 1072 568 1046 q 509 1136 509 1099 z "},"\u0179":{"ha":847,"x_min":42,"x_max":814,"o":"m 342 183 l 814 183 l 814 0 l 45 0 l 45 125 l 515 804 l 42 804 l 42 987 l 809 987 l 809 865 l 342 183 m 460 1252 l 702 1252 l 513 1039 l 327 1039 l 460 1252 z "},"\u017a":{"ha":715,"x_min":45,"x_max":668,"o":"m 334 176 l 668 176 l 668 0 l 45 0 l 45 127 l 370 557 l 59 557 l 59 734 l 661 734 l 661 610 l 334 176 m 386 1042 l 627 1042 l 439 829 l 252 829 l 386 1042 z "},"\u017b":{"ha":847,"x_min":42,"x_max":814,"o":"m 342 183 l 814 183 l 814 0 l 45 0 l 45 125 l 515 804 l 42 804 l 42 987 l 809 987 l 809 865 l 342 183 m 318 1160 q 350 1232 318 1204 q 431 1260 382 1260 q 511 1232 479 1260 q 543 1160 543 1204 q 511 1089 543 1117 q 431 1061 479 1061 q 350 1089 382 1061 q 318 1160 318 1117 z "},"\u017c":{"ha":715,"x_min":45,"x_max":668,"o":"m 334 176 l 668 176 l 668 0 l 45 0 l 45 127 l 370 557 l 59 557 l 59 734 l 661 734 l 661 610 l 334 176 m 243 950 q 275 1022 243 994 q 356 1050 307 1050 q 436 1022 404 1050 q 468 950 468 994 q 436 879 468 907 q 356 851 404 851 q 275 879 307 851 q 243 950 243 907 z "},"\u017d":{"ha":847,"x_min":42,"x_max":814,"o":"m 342 183 l 814 183 l 814 0 l 45 0 l 45 125 l 515 804 l 42 804 l 42 987 l 809 987 l 809 865 l 342 183 m 431 1162 l 531 1253 l 726 1253 l 726 1245 l 505 1053 l 357 1053 l 135 1246 l 135 1253 l 332 1253 l 431 1162 z "},"\u017e":{"ha":715,"x_min":45,"x_max":668,"o":"m 334 176 l 668 176 l 668 0 l 45 0 l 45 127 l 370 557 l 59 557 l 59 734 l 661 734 l 661 610 l 334 176 m 357 951 l 456 1042 l 651 1042 l 651 1035 l 430 843 l 283 843 l 60 1036 l 60 1042 l 257 1042 l 357 951 z "},"\u01fc":{"ha":1306,"x_min":11,"x_max":1255,"o":"m 1255 0 l 647 0 l 637 223 l 378 223 l 275 0 l 11 0 l 509 987 l 1214 987 l 1214 808 l 842 808 l 850 594 l 1159 594 l 1159 415 l 858 415 l 868 179 l 1255 179 l 1255 0 m 463 406 l 630 406 l 616 736 l 463 406 m 662 1260 l 903 1260 l 715 1047 l 528 1047 l 662 1260 z "},"\u01fd":{"ha":1173,"x_min":41,"x_max":1143,"o":"m 840 -14 q 582 77 677 -14 q 471 9 537 33 q 328 -14 404 -14 q 117 48 193 -14 q 41 220 41 111 q 129 385 41 327 q 390 444 217 444 l 486 444 l 486 475 q 463 546 486 520 q 396 571 440 571 q 321 551 347 571 q 296 502 296 531 l 67 515 q 158 682 67 617 q 399 747 249 747 q 615 686 536 747 q 832 747 701 749 q 1059 657 976 747 q 1143 413 1143 567 l 1143 295 l 709 295 q 760 196 719 229 q 871 163 802 163 q 1022 190 956 163 l 1064 208 l 1119 68 q 996 10 1074 33 q 840 -14 918 -14 m 372 144 q 486 186 432 144 l 486 306 l 392 306 q 304 281 339 305 q 270 217 270 256 q 372 144 270 144 m 832 571 q 747 538 777 571 q 710 438 718 505 l 920 438 l 920 456 q 897 541 920 511 q 832 571 875 571 m 614 1042 l 856 1042 l 667 829 l 481 829 l 614 1042 z "},"\u01fe":{"ha":956,"x_min":55,"x_max":918,"o":"m 918 473 q 865 218 918 329 q 712 46 811 106 q 488 -14 614 -14 q 290 31 378 -14 l 235 -64 l 94 -64 l 190 102 q 55 479 55 237 l 55 513 q 108 770 55 659 q 260 941 161 880 q 486 1001 359 1001 q 681 958 593 1001 l 722 1029 l 863 1029 l 781 886 q 918 508 918 751 l 918 473 m 676 515 q 656 670 676 605 l 388 203 q 488 172 429 172 q 627 249 578 172 q 676 469 675 326 l 676 515 m 296 473 q 315 319 296 383 l 582 785 q 486 814 541 814 q 345 739 392 814 q 296 519 297 664 l 296 473 m 515 1302 l 756 1302 l 568 1089 l 381 1089 l 515 1302 z "},"\u01ff":{"ha":781,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 509 730 452 747 l 555 827 l 675 827 l 606 683 q 743 359 743 583 q 648 87 743 188 q 390 -14 553 -14 q 274 1 327 -14 l 226 -98 l 106 -98 l 176 47 q 35 374 35 147 m 264 359 q 276 253 264 294 l 428 565 q 389 571 410 571 q 264 401 274 571 l 264 359 m 515 374 q 503 473 515 431 l 355 167 q 390 163 370 163 q 515 351 512 163 l 515 374 m 394 1038 l 635 1038 l 447 825 l 260 825 l 394 1038 z "},"\u0386":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 64 1086 l 271 1086 l 142 852 l 7 852 l 64 1086 z "},"\u0388":{"ha":777,"x_min":-282,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m -224 1088 l -18 1088 l -146 853 l -282 853 l -224 1088 z "},"\u0389":{"ha":976,"x_min":-283,"x_max":900,"o":"m 900 0 l 663 0 l 663 412 l 313 412 l 313 0 l 75 0 l 75 987 l 313 987 l 313 595 l 663 595 l 663 987 l 900 987 l 900 0 m -226 1084 l -20 1084 l -148 850 l -283 850 l -226 1084 z "},"\u038a":{"ha":419,"x_min":-283,"x_max":328,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m -226 1088 l -20 1088 l -148 853 l -283 853 l -226 1088 z "},"\u038c":{"ha":972,"x_min":-146,"x_max":924,"o":"m 924 473 q 871 218 924 329 q 719 46 817 106 q 494 -14 620 -14 q 270 44 368 -14 q 118 210 172 102 q 60 458 63 318 l 60 513 q 114 769 60 659 q 266 941 167 880 q 492 1001 366 1001 q 716 941 618 1001 q 869 771 814 882 q 924 519 924 661 l 924 473 m 682 515 q 633 738 682 662 q 492 814 584 814 q 303 546 313 814 l 302 473 q 351 250 302 328 q 494 172 399 172 q 633 249 584 172 q 682 469 682 326 l 682 515 m -89 1086 l 117 1086 l -11 852 l -146 852 l -89 1086 z "},"\u038e":{"ha":940,"x_min":-259,"x_max":943,"o":"m 504 559 l 686 987 l 943 987 l 625 355 l 625 0 l 383 0 l 383 355 l 66 987 l 321 987 l 504 559 m -201 1086 l 5 1086 l -123 852 l -259 852 l -201 1086 z "},"\u038f":{"ha":950,"x_min":-123,"x_max":875,"o":"m 512 189 q 579 307 556 218 q 602 536 602 396 l 602 591 q 569 759 602 703 q 477 814 536 814 q 385 759 418 814 q 352 591 352 703 l 352 538 q 375 307 352 395 q 447 189 398 220 l 447 0 l 95 0 l 95 186 l 245 186 q 124 343 168 252 q 80 534 81 433 l 80 589 q 130 802 80 708 q 271 948 180 896 q 477 1000 361 1000 q 681 949 590 1000 q 822 805 771 898 q 875 596 873 712 l 875 538 q 806 298 875 410 q 711 186 767 235 l 859 186 l 859 0 l 512 0 l 512 189 m -66 1086 l 140 1086 l 12 852 l -123 852 l -66 1086 z "},"\u0390":{"ha":473,"x_min":-111,"x_max":526,"o":"m 302 734 l 301 245 q 316 188 301 204 q 375 172 331 172 q 432 176 409 172 l 432 12 q 303 -7 370 -7 q 128 49 184 -7 q 72 217 72 105 l 72 734 l 302 734 m 174 1193 l 372 1193 l 250 951 l 148 951 l 174 1193 m -111 911 q -81 975 -111 949 q -8 1002 -52 1002 q 65 975 35 1002 q 94 911 94 949 q 65 848 94 874 q -8 821 35 821 q -81 848 -52 821 q -111 911 -111 874 m 321 911 q 350 975 321 949 q 423 1002 380 1002 q 496 975 467 1002 q 526 911 526 949 q 496 848 526 874 q 423 821 467 821 q 350 848 380 821 q 321 911 321 874 z "},"\u0391":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 z "},"\u0392":{"ha":896,"x_min":75,"x_max":840,"o":"m 75 0 l 75 987 l 429 987 q 719 918 620 987 q 819 715 819 848 q 783 584 819 638 q 680 504 748 530 q 798 428 757 484 q 840 292 840 372 q 748 74 840 147 q 475 0 656 1 l 75 0 m 313 420 l 313 183 l 469 183 q 568 213 533 183 q 602 296 602 242 q 479 420 602 419 l 313 420 m 313 576 l 437 576 q 548 604 515 576 q 581 686 581 632 q 545 776 581 749 q 429 804 509 804 l 313 804 l 313 576 z "},"\u0395":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 z "},"\u0396":{"ha":847,"x_min":42,"x_max":814,"o":"m 342 183 l 814 183 l 814 0 l 45 0 l 45 125 l 515 804 l 42 804 l 42 987 l 809 987 l 809 865 l 342 183 z "},"\u0397":{"ha":976,"x_min":75,"x_max":900,"o":"m 900 0 l 663 0 l 663 412 l 313 412 l 313 0 l 75 0 l 75 987 l 313 987 l 313 595 l 663 595 l 663 987 l 900 987 l 900 0 z "},"\u0399":{"ha":419,"x_min":91,"x_max":328,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 z "},"\u039a":{"ha":888,"x_min":75,"x_max":903,"o":"m 410 368 l 313 260 l 313 0 l 75 0 l 75 987 l 313 987 l 313 552 l 395 677 l 608 987 l 903 987 l 569 551 l 903 0 l 621 0 l 410 368 z "},"\u039c":{"ha":1217,"x_min":75,"x_max":1141,"o":"m 387 987 l 608 300 l 827 987 l 1141 987 l 1141 0 l 902 0 l 902 231 l 925 703 l 686 0 l 529 0 l 290 703 l 313 231 l 313 0 l 75 0 l 75 987 l 387 987 z "},"\u039d":{"ha":975,"x_min":75,"x_max":899,"o":"m 899 0 l 663 0 l 313 614 l 313 0 l 75 0 l 75 987 l 313 987 l 662 373 l 662 987 l 899 987 l 899 0 z "},"\u039f":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 z "},"\u03a1":{"ha":904,"x_min":75,"x_max":852,"o":"m 313 335 l 313 0 l 75 0 l 75 987 l 469 987 q 669 946 582 987 q 804 827 756 904 q 852 652 852 750 q 748 421 852 508 q 465 335 645 335 l 313 335 m 313 519 l 469 519 q 574 553 538 519 q 610 651 610 588 q 573 762 610 720 q 471 804 536 803 l 313 804 l 313 519 z "},"\u03a4":{"ha":876,"x_min":24,"x_max":850,"o":"m 850 804 l 553 804 l 553 0 l 315 0 l 315 804 l 24 804 l 24 987 l 850 987 l 850 804 z "},"\u03a5":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 z "},"\u03a7":{"ha":886,"x_min":3,"x_max":884,"o":"m 443 659 l 604 987 l 876 987 l 600 498 l 884 0 l 609 0 l 443 334 l 277 0 l 3 0 l 286 498 l 10 987 l 281 987 l 443 659 z "},"\u03aa":{"ha":419,"x_min":-70,"x_max":487,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m -70 1136 q -40 1200 -70 1173 q 33 1226 -11 1226 q 105 1200 76 1226 q 135 1136 135 1173 q 105 1072 135 1099 q 33 1046 76 1046 q -40 1072 -11 1046 q -70 1136 -70 1099 m 282 1136 q 312 1200 282 1173 q 385 1226 341 1226 q 457 1200 428 1226 q 487 1136 487 1173 q 457 1072 487 1099 q 385 1046 428 1046 q 312 1072 341 1046 q 282 1136 282 1099 z "},"\u03ab":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 m 157 1136 q 186 1200 157 1173 q 259 1226 216 1226 q 332 1200 302 1226 q 361 1136 361 1173 q 332 1072 361 1099 q 259 1046 302 1046 q 186 1072 216 1046 q 157 1136 157 1099 m 509 1136 q 538 1200 509 1173 q 611 1226 568 1226 q 684 1200 654 1226 q 713 1136 713 1173 q 684 1072 713 1099 q 611 1046 654 1046 q 538 1072 568 1046 q 509 1136 509 1099 z "},"\u03ac":{"ha":781,"x_min":41,"x_max":781,"o":"m 706 734 l 706 239 q 753 163 708 163 q 764 165 760 163 l 781 0 q 696 -14 747 -14 q 505 100 561 -14 q 326 -14 440 -14 q 117 84 194 -14 q 41 366 41 182 q 117 644 41 540 q 328 747 193 747 q 490 650 430 747 l 506 734 l 706 734 m 271 351 q 299 209 271 254 q 384 163 327 163 q 477 205 446 163 l 477 521 q 385 571 446 571 q 271 351 271 571 m 392 1086 l 598 1086 l 470 852 l 334 852 l 392 1086 z "},"\u03ad":{"ha":786,"x_min":63,"x_max":751,"o":"m 291 228 q 322 171 291 193 q 406 149 354 149 q 494 169 466 149 q 522 217 522 189 l 751 217 q 658 49 751 112 q 421 -14 565 -14 q 162 48 261 -14 q 63 208 63 109 q 99 313 63 270 q 203 378 136 356 q 110 443 144 402 q 76 533 76 484 q 170 690 76 633 q 421 747 263 747 q 650 683 562 747 q 739 521 739 620 l 511 521 q 481 569 511 553 q 406 584 452 584 q 332 564 359 584 q 304 512 304 545 q 423 446 304 446 l 530 446 l 530 305 l 414 305 q 291 228 291 305 m 382 1086 l 588 1086 l 460 852 l 324 852 l 382 1086 z "},"\u03ae":{"ha":781,"x_min":61,"x_max":722,"o":"m 276 734 l 283 642 q 492 747 364 747 q 664 677 606 747 q 722 469 722 607 l 722 -282 l 492 -282 l 492 465 q 405 571 492 571 q 290 522 331 571 l 290 0 l 61 0 l 61 734 l 276 734 m 364 1086 l 570 1086 l 442 852 l 307 852 l 364 1086 z "},"\u03af":{"ha":473,"x_min":72,"x_max":432,"o":"m 302 734 l 301 245 q 316 188 301 204 q 375 172 331 172 q 432 176 409 172 l 432 12 q 303 -7 370 -7 q 128 49 184 -7 q 72 217 72 105 l 72 734 l 302 734 m 173 1072 l 379 1072 l 251 838 l 115 838 l 173 1072 z "},"\u03b0":{"ha":757,"x_min":67,"x_max":716,"o":"m 296 734 l 296 281 q 357 162 296 162 q 448 227 412 162 q 484 384 484 292 q 422 734 481 551 l 635 734 q 689 584 666 671 q 711 384 711 496 q 622 90 711 194 q 364 -14 533 -14 q 145 60 222 -14 q 67 274 68 134 l 67 734 l 296 734 m 364 1207 l 562 1207 l 440 966 l 338 966 l 364 1207 m 80 926 q 110 989 80 963 q 182 1016 139 1016 q 255 989 226 1016 q 285 926 285 963 q 255 862 285 888 q 182 836 226 836 q 110 862 139 836 q 80 926 80 888 m 511 926 q 541 989 511 963 q 614 1016 570 1016 q 687 989 657 1016 q 716 926 716 963 q 687 862 716 888 q 614 836 657 836 q 541 862 570 836 q 511 926 511 888 z "},"\u03ba":{"ha":842,"x_min":80,"x_max":821,"o":"m 390 256 l 309 256 l 309 0 l 80 0 l 80 734 l 309 734 l 309 470 l 370 470 l 522 734 l 815 734 l 583 391 l 821 0 l 526 0 l 390 256 z "},"\u03bf":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 z "},"\u03bc":{"ha":890,"x_min":90,"x_max":781,"o":"m 319 734 l 319 305 q 343 199 319 233 q 429 165 368 165 q 552 227 516 165 l 552 734 l 781 734 l 781 0 l 566 0 l 562 36 q 420 -14 502 -14 q 319 9 362 -14 l 319 -282 l 90 -282 l 90 734 l 319 734 z "},"\u03bd":{"ha":718,"x_min":1,"x_max":713,"o":"m 357 272 l 473 734 l 713 734 l 474 0 l 241 0 l 1 734 l 243 734 l 357 272 z "},"\u03c7":{"ha":715,"x_min":-9,"x_max":749,"o":"m 115 745 q 246 711 193 745 q 334 598 300 677 l 390 474 l 516 734 l 749 734 l 499 231 l 618 -35 q 692 -113 640 -97 q 726 -117 704 -117 l 720 -287 q 661 -293 693 -292 q 541 -271 579 -295 q 470 -199 502 -246 q 400 -52 438 -151 l 381 -8 l 245 -282 l 24 -282 l 275 235 l 156 507 q 41 568 132 568 q -3 564 12 568 l -9 728 q 115 745 64 745 z "},"\u03ca":{"ha":473,"x_min":-80,"x_max":477,"o":"m 302 734 l 301 245 q 316 188 301 204 q 375 172 331 172 q 432 176 409 172 l 432 12 q 303 -7 370 -7 q 128 49 184 -7 q 72 217 72 105 l 72 734 l 302 734 m -80 911 q -51 975 -80 949 q 22 1002 -21 1002 q 95 975 66 1002 q 125 911 125 949 q 95 848 125 874 q 22 821 66 821 q -51 848 -21 821 q -80 911 -80 874 m 272 911 q 301 975 272 949 q 374 1002 331 1002 q 447 975 418 1002 q 477 911 477 949 q 447 848 477 874 q 374 821 418 821 q 301 848 331 821 q 272 911 272 874 z "},"\u03cb":{"ha":757,"x_min":67,"x_max":711,"o":"m 296 734 l 296 281 q 357 162 296 162 q 448 227 412 162 q 484 384 484 292 q 422 734 481 551 l 635 734 q 689 584 666 671 q 711 384 711 496 q 622 90 711 194 q 364 -14 533 -14 q 145 60 222 -14 q 67 274 68 134 l 67 734 l 296 734 m 111 926 q 140 989 111 963 q 213 1016 170 1016 q 286 989 256 1016 q 315 926 315 963 q 286 862 315 888 q 213 836 256 836 q 140 862 170 836 q 111 926 111 888 m 463 926 q 492 989 463 963 q 565 1016 522 1016 q 638 989 608 1016 q 667 926 667 963 q 638 862 667 888 q 565 836 608 836 q 492 862 522 836 q 463 926 463 888 z "},"\u03cc":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 364 1086 l 570 1086 l 442 852 l 307 852 l 364 1086 z "},"\u03cd":{"ha":757,"x_min":67,"x_max":711,"o":"m 296 734 l 296 281 q 357 162 296 162 q 448 227 412 162 q 484 384 484 292 q 422 734 481 551 l 635 734 q 689 584 666 671 q 711 384 711 496 q 622 90 711 194 q 364 -14 533 -14 q 145 60 222 -14 q 67 274 68 134 l 67 734 l 296 734 m 363 1086 l 570 1086 l 441 852 l 306 852 l 363 1086 z "},"\u03ce":{"ha":1139,"x_min":44,"x_max":1099,"o":"m 361 734 q 273 384 277 553 q 295 219 273 276 q 360 163 318 163 q 450 347 450 163 l 450 591 l 694 591 l 694 347 q 784 163 694 163 q 848 220 825 163 q 871 384 871 277 q 781 734 866 557 l 994 734 q 1099 384 1099 577 q 1022 85 1099 183 q 791 -14 944 -14 q 572 123 644 -14 q 480 21 536 56 q 353 -14 425 -14 q 122 85 199 -14 q 44 384 44 183 q 150 734 44 577 l 361 734 m 541 1086 l 747 1086 l 618 852 l 483 852 l 541 1086 z "},"\u0401":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 157 1136 q 186 1200 157 1173 q 259 1226 216 1226 q 332 1200 302 1226 q 361 1136 361 1173 q 332 1072 361 1099 q 259 1046 302 1046 q 186 1072 216 1046 q 157 1136 157 1099 m 509 1136 q 538 1200 509 1173 q 611 1226 568 1226 q 684 1200 654 1226 q 713 1136 713 1173 q 684 1072 713 1099 q 611 1046 654 1046 q 538 1072 568 1046 q 509 1136 509 1099 z "},"\u0403":{"ha":774,"x_min":73,"x_max":741,"o":"m 741 804 l 311 804 l 311 0 l 73 0 l 73 987 l 741 987 l 741 804 m 443 1252 l 684 1252 l 496 1039 l 309 1039 l 443 1252 z "},"\u0405":{"ha":869,"x_min":43,"x_max":822,"o":"m 584 262 q 547 344 584 315 q 417 404 510 373 q 265 465 324 435 q 73 724 73 559 q 121 868 73 806 q 256 966 169 931 q 453 1001 344 1001 q 644 963 559 1001 q 775 855 728 925 q 822 694 822 785 l 585 694 q 548 788 585 755 q 448 821 511 821 q 347 793 384 821 q 310 722 310 765 q 351 653 310 684 q 494 589 391 622 q 662 518 596 556 q 822 264 822 426 q 724 60 822 134 q 456 -14 627 -14 q 239 30 336 -14 q 93 148 142 73 q 43 320 43 222 l 282 320 q 323 203 282 241 q 456 165 364 165 q 550 191 515 165 q 584 262 584 216 z "},"\u0406":{"ha":419,"x_min":91,"x_max":328,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 z "},"\u0407":{"ha":419,"x_min":-70,"x_max":487,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m -70 1136 q -40 1200 -70 1173 q 33 1226 -11 1226 q 105 1200 76 1226 q 135 1136 135 1173 q 105 1072 135 1099 q 33 1046 76 1046 q -40 1072 -11 1046 q -70 1136 -70 1099 m 282 1136 q 312 1200 282 1173 q 385 1226 341 1226 q 457 1200 428 1226 q 487 1136 487 1173 q 457 1072 487 1099 q 385 1046 428 1046 q 312 1072 341 1046 q 282 1136 282 1099 z "},"\u0408":{"ha":781,"x_min":24,"x_max":705,"o":"m 468 987 l 705 987 l 705 310 q 662 142 705 216 q 539 27 618 68 q 365 -14 461 -14 q 114 68 203 -14 q 24 298 24 149 l 263 298 q 287 200 263 231 q 365 170 310 170 q 441 207 414 170 q 468 310 468 243 l 468 987 z "},"\u041a":{"ha":899,"x_min":73,"x_max":915,"o":"m 424 391 l 311 391 l 311 0 l 73 0 l 73 987 l 311 987 l 311 606 l 403 606 l 593 987 l 881 987 l 610 532 l 915 0 l 633 0 l 424 391 z "},"\u040c":{"ha":888,"x_min":75,"x_max":903,"o":"m 410 368 l 313 260 l 313 0 l 75 0 l 75 987 l 313 987 l 313 552 l 395 677 l 608 987 l 903 987 l 569 551 l 903 0 l 621 0 l 410 368 m 431 1252 l 672 1252 l 484 1039 l 297 1039 l 431 1252 z "},"\u040e":{"ha":878,"x_min":3,"x_max":872,"o":"m 458 559 l 458 558 l 621 987 l 872 987 l 540 204 q 419 37 486 85 q 263 -14 353 -12 l 215 -14 l 178 -13 l 174 172 q 222 169 182 169 q 303 188 276 169 q 348 260 331 206 l 359 292 l 3 987 l 256 987 l 458 559 m 713 1253 q 644 1103 713 1160 q 462 1045 576 1045 q 279 1103 348 1045 q 211 1253 211 1160 l 366 1253 q 392 1190 366 1213 q 462 1167 417 1167 q 531 1189 507 1167 q 556 1253 556 1211 l 713 1253 z "},"\u0410":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 z "},"\u0412":{"ha":896,"x_min":75,"x_max":840,"o":"m 75 0 l 75 987 l 429 987 q 719 918 620 987 q 819 715 819 848 q 783 584 819 638 q 680 504 748 530 q 798 428 757 484 q 840 292 840 372 q 748 74 840 147 q 475 0 656 1 l 75 0 m 313 420 l 313 183 l 469 183 q 568 213 533 183 q 602 296 602 242 q 479 420 602 419 l 313 420 m 313 576 l 437 576 q 548 604 515 576 q 581 686 581 632 q 545 776 581 749 q 429 804 509 804 l 313 804 l 313 576 z "},"\u0413":{"ha":774,"x_min":73,"x_max":741,"o":"m 741 804 l 311 804 l 311 0 l 73 0 l 73 987 l 741 987 l 741 804 z "},"\u0415":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 z "},"\u0419":{"ha":962,"x_min":61,"x_max":892,"o":"m 654 987 l 892 987 l 892 0 l 654 0 l 654 623 l 299 0 l 61 0 l 61 987 l 299 987 l 299 364 l 654 987 m 729 1253 q 661 1103 729 1160 q 478 1045 592 1045 q 296 1103 364 1045 q 227 1253 227 1160 l 382 1253 q 408 1190 382 1213 q 478 1167 433 1167 q 548 1189 523 1167 q 572 1253 572 1211 l 729 1253 z "},"\u041c":{"ha":1217,"x_min":75,"x_max":1141,"o":"m 387 987 l 608 300 l 827 987 l 1141 987 l 1141 0 l 902 0 l 902 231 l 925 703 l 686 0 l 529 0 l 290 703 l 313 231 l 313 0 l 75 0 l 75 987 l 387 987 z "},"\u041d":{"ha":976,"x_min":75,"x_max":900,"o":"m 900 0 l 663 0 l 663 412 l 313 412 l 313 0 l 75 0 l 75 987 l 313 987 l 313 595 l 663 595 l 663 987 l 900 987 l 900 0 z "},"\u041e":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 z "},"\u041f":{"ha":977,"x_min":73,"x_max":904,"o":"m 904 0 l 666 0 l 666 804 l 311 804 l 311 0 l 73 0 l 73 987 l 904 987 l 904 0 z "},"\u0420":{"ha":904,"x_min":75,"x_max":852,"o":"m 313 335 l 313 0 l 75 0 l 75 987 l 469 987 q 669 946 582 987 q 804 827 756 904 q 852 652 852 750 q 748 421 852 508 q 465 335 645 335 l 313 335 m 313 519 l 469 519 q 574 553 538 519 q 610 651 610 588 q 573 762 610 720 q 471 804 536 803 l 313 804 l 313 519 z "},"\u0421":{"ha":911,"x_min":47,"x_max":876,"o":"m 873 334 q 818 152 869 231 q 675 30 767 73 q 465 -14 583 -14 q 159 113 271 -14 q 47 471 47 240 l 47 520 q 97 774 47 665 q 243 942 148 883 q 463 1002 338 1002 q 751 907 642 1002 q 876 646 861 812 l 638 646 q 593 776 635 736 q 463 815 550 815 q 332 749 374 815 q 289 536 291 682 l 289 467 q 329 241 289 309 q 465 173 368 173 q 591 212 547 173 q 637 334 634 250 l 873 334 z "},"\u0422":{"ha":876,"x_min":24,"x_max":850,"o":"m 850 804 l 553 804 l 553 0 l 315 0 l 315 804 l 24 804 l 24 987 l 850 987 l 850 804 z "},"\u0425":{"ha":886,"x_min":3,"x_max":884,"o":"m 443 659 l 604 987 l 876 987 l 600 498 l 884 0 l 609 0 l 443 334 l 277 0 l 3 0 l 286 498 l 10 987 l 281 987 l 443 659 z "},"\u0430":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 z "},"\u0435":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 z "},"\u0439":{"ha":779,"x_min":60,"x_max":720,"o":"m 491 734 l 720 734 l 720 0 l 491 0 l 491 427 l 290 0 l 60 0 l 60 734 l 290 734 l 290 308 l 491 734 m 646 1043 q 578 892 646 950 q 395 835 509 835 q 213 892 281 835 q 144 1043 144 950 l 300 1043 q 325 980 300 1002 q 395 957 351 957 q 465 979 440 957 q 490 1043 490 1001 l 646 1043 z "},"\u043e":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 z "},"\u0440":{"ha":782,"x_min":66,"x_max":745,"o":"m 745 361 q 668 89 745 191 q 460 -14 591 -14 q 294 60 359 -14 l 294 -282 l 66 -282 l 66 734 l 279 734 l 286 666 q 459 747 352 747 q 670 647 595 747 q 745 372 745 547 l 745 361 m 517 376 q 403 571 517 571 q 294 513 321 571 l 294 224 q 404 163 324 163 q 517 351 513 163 l 517 376 z "},"\u0441":{"ha":722,"x_min":35,"x_max":689,"o":"m 374 163 q 449 189 422 163 q 475 262 475 215 l 689 262 q 603 64 689 141 q 380 -14 516 -14 q 127 87 220 -14 q 35 365 35 187 l 35 374 q 76 571 35 486 q 195 702 117 656 q 378 747 272 747 q 605 668 521 747 q 689 453 689 589 l 475 453 q 447 541 475 510 q 372 571 419 571 q 269 458 283 571 q 264 359 264 422 q 290 205 264 248 q 374 163 317 163 z "},"\u0443":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 z "},"\u0445":{"ha":715,"x_min":7,"x_max":715,"o":"m 361 532 l 468 734 l 705 734 l 512 376 l 715 0 l 476 0 l 361 217 l 248 0 l 7 0 l 211 376 l 18 734 l 258 734 l 361 532 z "},"\u0451":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 82 926 q 112 990 82 964 q 184 1017 141 1017 q 257 990 228 1017 q 287 926 287 964 q 257 863 287 889 q 184 836 228 836 q 112 863 141 836 q 82 926 82 889 m 434 926 q 464 990 434 964 q 536 1017 493 1017 q 609 990 580 1017 q 639 926 639 964 q 609 863 639 889 q 536 836 580 836 q 464 863 493 836 q 434 926 434 889 z "},"\u0453":{"ha":581,"x_min":60,"x_max":578,"o":"m 578 557 l 289 557 l 289 0 l 60 0 l 60 734 l 578 734 l 578 557 m 316 1042 l 557 1042 l 369 829 l 182 829 l 316 1042 z "},"\u0455":{"ha":711,"x_min":24,"x_max":670,"o":"m 448 206 q 418 253 448 235 q 302 290 387 271 q 161 339 216 309 q 76 414 105 370 q 47 515 47 458 q 130 682 47 616 q 349 747 214 747 q 582 682 494 747 q 670 509 670 616 l 441 509 q 348 597 441 597 q 288 577 312 597 q 263 527 263 557 q 293 477 263 496 q 388 446 323 458 q 503 417 454 434 q 669 213 669 360 q 579 50 669 113 q 349 -14 490 -14 q 180 20 254 -14 q 65 113 106 54 q 24 235 24 171 l 237 235 q 271 161 239 184 q 355 138 304 138 q 425 157 401 138 q 448 206 448 176 z "},"\u0456":{"ha":382,"x_min":62,"x_max":316,"o":"m 305 0 l 76 0 l 76 734 l 305 734 l 305 0 m 62 923 q 98 1003 62 972 q 189 1034 133 1034 q 281 1003 245 1034 q 316 923 316 972 q 281 843 316 874 q 189 812 245 812 q 98 843 133 812 q 62 923 62 874 z "},"\u0457":{"ha":396,"x_min":-80,"x_max":477,"o":"m 313 0 l 83 0 l 83 734 l 313 734 l 313 0 m -80 912 q -51 976 -80 949 q 22 1002 -21 1002 q 95 976 66 1002 q 125 912 125 949 q 95 848 125 875 q 22 822 66 822 q -51 848 -21 822 q -80 912 -80 875 m 272 912 q 301 976 272 949 q 374 1002 331 1002 q 447 976 418 1002 q 477 912 477 949 q 447 848 477 875 q 374 822 418 822 q 301 848 331 822 q 272 912 272 875 z "},"\u0458":{"ha":375,"x_min":-79,"x_max":317,"o":"m 310 734 l 310 -25 q 235 -226 309 -155 q 29 -296 161 -296 q -79 -285 -28 -296 l -79 -112 q -14 -118 -39 -118 q 81 -24 81 -118 l 81 734 l 310 734 m 64 923 q 99 1003 64 972 q 191 1034 134 1034 q 282 1003 247 1034 q 317 923 317 972 q 282 843 317 874 q 191 812 247 812 q 99 843 134 812 q 64 923 64 874 z "},"\u045c":{"ha":796,"x_min":79,"x_max":806,"o":"m 377 256 l 309 256 l 309 0 l 79 0 l 79 734 l 309 734 l 309 470 l 374 470 l 491 734 l 784 734 l 570 395 l 570 395 l 806 0 l 496 0 l 377 256 m 436 1042 l 677 1042 l 489 829 l 302 829 l 436 1042 z "},"\u045e":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 610 1043 q 541 892 610 950 q 359 835 473 835 q 176 892 245 835 q 108 1043 108 950 l 263 1043 q 289 980 263 1002 q 359 957 314 957 q 428 979 404 957 q 453 1043 453 1001 l 610 1043 z "},"\u1e80":{"ha":1207,"x_min":14,"x_max":1189,"o":"m 840 368 l 953 987 l 1189 987 l 979 0 l 732 0 l 600 563 l 471 0 l 224 0 l 14 987 l 251 987 l 364 368 l 500 987 l 702 987 l 840 368 m 714 1039 l 528 1039 l 337 1252 l 578 1252 l 714 1039 z "},"\u1e81":{"ha":1008,"x_min":15,"x_max":991,"o":"m 698 301 l 772 734 l 991 734 l 818 0 l 625 0 l 503 435 l 381 0 l 188 0 l 15 734 l 234 734 l 307 291 l 423 734 l 583 734 l 698 301 m 612 829 l 427 829 l 235 1042 l 477 1042 l 612 829 z "},"\u1e82":{"ha":1207,"x_min":14,"x_max":1189,"o":"m 840 368 l 953 987 l 1189 987 l 979 0 l 732 0 l 600 563 l 471 0 l 224 0 l 14 987 l 251 987 l 364 368 l 500 987 l 702 987 l 840 368 m 634 1252 l 876 1252 l 687 1039 l 500 1039 l 634 1252 z "},"\u1e83":{"ha":1008,"x_min":15,"x_max":991,"o":"m 698 301 l 772 734 l 991 734 l 818 0 l 625 0 l 503 435 l 381 0 l 188 0 l 15 734 l 234 734 l 307 291 l 423 734 l 583 734 l 698 301 m 532 1042 l 774 1042 l 585 829 l 399 829 l 532 1042 z "},"\u1e84":{"ha":1207,"x_min":14,"x_max":1189,"o":"m 840 368 l 953 987 l 1189 987 l 979 0 l 732 0 l 600 563 l 471 0 l 224 0 l 14 987 l 251 987 l 364 368 l 500 987 l 702 987 l 840 368 m 326 1136 q 355 1200 326 1173 q 428 1226 385 1226 q 501 1200 471 1226 q 530 1136 530 1173 q 501 1072 530 1099 q 428 1046 471 1046 q 355 1072 385 1046 q 326 1136 326 1099 m 677 1136 q 707 1200 677 1173 q 780 1226 736 1226 q 853 1200 823 1226 q 882 1136 882 1173 q 853 1072 882 1099 q 780 1046 823 1046 q 707 1072 736 1046 q 677 1136 677 1099 z "},"\u1e85":{"ha":1008,"x_min":15,"x_max":991,"o":"m 698 301 l 772 734 l 991 734 l 818 0 l 625 0 l 503 435 l 381 0 l 188 0 l 15 734 l 234 734 l 307 291 l 423 734 l 583 734 l 698 301 m 224 926 q 253 989 224 963 q 326 1016 283 1016 q 399 989 370 1016 q 429 926 429 963 q 399 862 429 888 q 326 836 370 836 q 253 862 283 836 q 224 926 224 888 m 576 926 q 605 989 576 963 q 678 1016 635 1016 q 751 989 722 1016 q 781 926 781 963 q 751 862 781 888 q 678 836 722 836 q 605 862 635 836 q 576 926 576 888 z "},"\u1ef2":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 m 545 1039 l 359 1039 l 168 1252 l 410 1252 l 545 1039 z "},"\u1ef3":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 467 829 l 281 829 l 90 1042 l 332 1042 l 467 829 z "},"\u2032":{"ha":214,"x_min":29,"x_max":192,"o":"m 192 932 l 170 652 l 29 652 l 29 1042 l 192 1042 l 192 932 z "},"\u2033":{"ha":440,"x_min":17,"x_max":411,"o":"m 173 948 l 144 657 l 17 657 l 17 1042 l 173 1042 l 173 948 m 411 948 l 382 657 l 256 657 l 256 1042 l 411 1042 l 411 948 z "},"\u203c":{"ha":766,"x_min":70,"x_max":707,"o":"m 291 313 l 106 313 l 77 987 l 320 987 l 291 313 m 70 102 q 106 185 70 153 q 197 217 142 217 q 287 185 251 217 q 323 102 323 153 q 287 20 323 52 q 197 -12 251 -12 q 106 20 142 -12 q 70 102 70 52 m 674 313 l 489 313 l 460 987 l 703 987 l 674 313 m 453 102 q 489 185 453 153 q 580 217 526 217 q 670 185 634 217 q 707 102 707 153 q 670 20 707 52 q 580 -12 634 -12 q 489 20 526 -12 q 453 102 453 52 z "},"\u01f0":{"ha":410,"x_min":-109,"x_max":481,"o":"m 323 734 l 323 -9 q 250 -222 323 -147 q 45 -296 176 -296 q -62 -285 -13 -296 l -52 -112 q 14 -120 -18 -120 q 94 -7 94 -120 l 94 734 l 323 734 m 187 938 l 287 1029 l 481 1029 l 481 1021 l 260 829 l 113 829 l -109 1023 l -109 1029 l 87 1029 l 187 938 z "},"\u02bc":{"ha":337,"x_min":45,"x_max":269,"o":"m 145 678 l 45 732 q 102 924 101 830 l 102 1042 l 269 1042 l 269 931 q 233 797 269 868 q 145 678 197 725 z "},"\u1e3e":{"ha":1217,"x_min":75,"x_max":1141,"o":"m 387 987 l 608 300 l 827 987 l 1141 987 l 1141 0 l 902 0 l 902 231 l 925 703 l 686 0 l 529 0 l 290 703 l 313 231 l 313 0 l 75 0 l 75 987 l 387 987 m 635 1252 l 876 1252 l 688 1039 l 501 1039 l 635 1252 z "},"\u1e3f":{"ha":1196,"x_min":66,"x_max":1130,"o":"m 280 734 l 288 648 q 497 747 366 747 q 685 637 636 747 q 901 747 760 747 q 1130 477 1124 747 l 1130 0 l 901 0 l 901 463 q 882 545 901 519 q 812 571 863 571 q 711 511 745 571 l 712 501 l 712 0 l 483 0 l 483 462 q 465 545 483 519 q 395 571 446 571 q 294 511 329 571 l 294 0 l 66 0 l 66 734 l 280 734 m 642 1042 l 883 1042 l 694 829 l 508 829 l 642 1042 z "},"\u1e00":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 342 -146 q 381 -63 342 -96 q 474 -29 420 -29 q 566 -63 528 -29 q 604 -146 604 -96 q 567 -229 604 -197 q 474 -262 530 -262 q 380 -229 418 -262 q 342 -146 342 -196 m 427 -146 q 440 -181 427 -168 q 474 -194 454 -194 q 506 -181 494 -194 q 518 -146 518 -168 q 506 -111 518 -125 q 474 -98 494 -98 q 440 -111 454 -98 q 427 -146 427 -125 z "},"\u1e01":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 180 -138 q 218 -54 180 -87 q 311 -20 257 -20 q 403 -54 366 -20 q 441 -138 441 -87 q 404 -220 441 -188 q 311 -253 368 -253 q 218 -220 256 -253 q 180 -138 180 -187 m 264 -138 q 278 -172 264 -159 q 311 -185 291 -185 q 343 -172 331 -185 q 355 -138 355 -159 q 343 -102 355 -116 q 311 -89 331 -89 q 278 -102 291 -89 q 264 -138 264 -116 z "},"\u0400":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 545 1039 l 359 1039 l 168 1252 l 410 1252 l 545 1039 z "},"\u040d":{"ha":962,"x_min":61,"x_max":892,"o":"m 654 987 l 892 987 l 892 0 l 654 0 l 654 623 l 299 0 l 61 0 l 61 987 l 299 987 l 299 364 l 654 987 m 587 1039 l 401 1039 l 210 1252 l 451 1252 l 587 1039 z "},"\u0450":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 471 829 l 285 829 l 94 1042 l 335 1042 l 471 829 z "},"\u045d":{"ha":779,"x_min":60,"x_max":720,"o":"m 491 734 l 720 734 l 720 0 l 491 0 l 491 427 l 290 0 l 60 0 l 60 734 l 290 734 l 290 308 l 491 734 m 504 829 l 318 829 l 127 1042 l 368 1042 l 504 829 z "},"\u0470":{"ha":1036,"x_min":24,"x_max":1013,"o":"m 646 458 q 744 526 713 471 q 774 689 774 581 l 774 987 l 1013 987 l 1013 683 q 915 397 1011 505 q 646 273 818 290 l 646 0 l 408 0 l 408 271 q 125 394 226 286 q 24 686 25 503 l 24 987 l 262 987 l 262 677 q 408 458 266 489 l 408 987 l 646 987 l 646 458 z "},"\u0471":{"ha":1064,"x_min":39,"x_max":1024,"o":"m 641 734 l 641 176 q 757 254 718 197 q 795 412 795 310 q 728 734 793 555 l 932 734 q 1024 412 1024 590 q 925 123 1024 231 q 641 -7 825 16 l 641 -324 l 412 -324 l 412 -6 q 136 118 231 17 q 39 393 40 218 l 39 734 l 268 734 l 268 390 q 412 176 270 218 l 412 734 l 641 734 z "},"\u0476":{"ha":900,"x_min":4,"x_max":889,"o":"m 447 268 l 454 230 l 460 264 l 586 747 q 695 939 627 878 q 865 1000 763 1000 l 889 999 l 886 810 l 862 810 q 814 789 836 810 q 787 738 793 767 l 583 0 l 325 0 l 4 987 l 254 987 l 447 268 m 422 1059 l 238 1059 l 45 1240 l 256 1240 l 422 1059 m 680 1059 l 494 1059 l 328 1240 l 539 1240 l 680 1059 z "},"\u0477":{"ha":714,"x_min":-20,"x_max":727,"o":"m 339 226 l 352 302 l 395 500 q 497 688 432 629 q 659 748 562 748 q 727 737 703 748 l 710 564 l 672 566 q 624 545 646 566 q 594 491 602 524 l 458 0 l 225 0 l 0 734 l 241 734 l 325 306 l 339 226 m 357 849 l 173 849 l -20 1029 l 191 1029 l 357 849 m 614 849 l 429 849 l 262 1029 l 474 1029 l 614 849 z "},"\u0479":{"ha":1499,"x_min":35,"x_max":1504,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 1137 320 l 1259 734 l 1504 734 l 1205 -123 l 1192 -154 q 967 -296 1128 -296 q 873 -283 922 -296 l 873 -119 l 903 -119 q 976 -105 951 -119 q 1014 -56 1002 -92 l 1032 -7 l 777 734 l 1021 734 l 1137 320 z "},"\u0478":{"ha":1678,"x_min":47,"x_max":1683,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 1316 320 l 1438 734 l 1683 734 l 1384 -123 l 1371 -154 q 1146 -296 1308 -296 q 1052 -283 1101 -296 l 1052 -119 l 1082 -119 q 1155 -105 1130 -119 q 1193 -56 1181 -92 l 1211 -7 l 956 734 l 1200 734 l 1316 320 z "},"\u0498":{"ha":874,"x_min":42,"x_max":809,"o":"m 555 713 q 519 789 555 760 q 421 817 483 817 q 329 790 363 817 q 294 718 294 762 l 56 718 q 103 863 56 799 q 234 964 149 928 q 421 1000 319 1000 q 695 926 597 1000 q 793 720 793 852 q 754 596 793 652 q 644 507 714 540 q 767 421 724 479 q 809 277 809 363 q 703 65 809 144 q 421 -13 597 -13 q 150 64 258 -13 q 42 274 42 141 l 281 274 q 320 200 281 230 q 421 170 359 170 q 529 201 488 170 q 570 282 570 232 q 535 386 570 355 q 432 416 500 416 l 305 416 l 305 592 l 440 592 q 555 713 555 595 m 546 -338 l 317 -338 l 317 55 l 546 55 l 546 -338 z "},"\u0499":{"ha":718,"x_min":41,"x_max":686,"o":"m 444 512 q 368 584 444 584 q 281 521 281 584 l 52 521 q 136 684 52 621 q 353 747 220 747 q 587 691 502 747 q 673 533 673 635 q 643 443 673 484 q 560 378 614 402 q 686 208 686 334 q 595 47 686 107 q 353 -14 505 -14 q 128 49 216 -14 q 41 217 41 112 l 269 217 q 292 169 269 189 q 369 149 315 149 q 435 170 412 149 q 458 228 458 191 q 370 309 458 307 l 268 309 l 268 442 l 361 442 q 444 512 444 442 m 480 -337 l 252 -337 l 252 56 l 480 56 l 480 -337 z "},"\u04aa":{"ha":911,"x_min":47,"x_max":876,"o":"m 873 334 q 818 152 869 231 q 675 30 767 73 q 465 -14 583 -14 q 159 113 271 -14 q 47 471 47 240 l 47 520 q 97 774 47 665 q 243 942 148 883 q 463 1002 338 1002 q 751 907 642 1002 q 876 646 861 812 l 638 646 q 593 776 635 736 q 463 815 550 815 q 332 749 374 815 q 289 536 291 682 l 289 467 q 329 241 289 309 q 465 173 368 173 q 591 212 547 173 q 637 334 634 250 l 873 334 m 580 -331 l 351 -331 l 351 62 l 580 62 l 580 -331 z "},"\u04ab":{"ha":722,"x_min":35,"x_max":689,"o":"m 374 163 q 449 189 422 163 q 475 262 475 215 l 689 262 q 603 64 689 141 q 380 -14 516 -14 q 127 87 220 -14 q 35 365 35 187 l 35 374 q 76 571 35 486 q 195 702 117 656 q 378 747 272 747 q 605 668 521 747 q 689 453 689 589 l 475 453 q 447 541 475 510 q 372 571 419 571 q 269 458 283 571 q 264 359 264 422 q 290 205 264 248 q 374 163 317 163 m 498 -331 l 270 -331 l 270 62 l 498 62 l 498 -331 z "},"\u04ae":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 z "},"\u04af":{"ha":714,"x_min":0,"x_max":710,"o":"m 358 252 l 469 734 l 710 734 l 471 0 l 469 0 l 469 -283 l 240 -283 l 240 0 l 239 0 l 0 734 l 241 734 l 358 252 z "},"\u04c0":{"ha":419,"x_min":91,"x_max":328,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 z "},"\u04c1":{"ha":1449,"x_min":7,"x_max":1452,"o":"m 973 386 l 852 386 l 852 0 l 616 0 l 616 386 l 493 386 l 303 0 l 7 0 l 305 539 l 16 987 l 317 987 l 519 600 l 616 600 l 616 987 l 852 987 l 852 600 l 949 600 l 1142 987 l 1442 987 l 1160 541 l 1452 0 l 1155 0 l 973 386 m 977 1253 q 909 1103 977 1160 q 726 1045 840 1045 q 544 1103 612 1045 q 475 1253 475 1160 l 631 1253 q 656 1190 631 1213 q 726 1167 682 1167 q 796 1189 771 1167 q 821 1253 821 1211 l 977 1253 z "},"\u04c2":{"ha":1253,"x_min":25,"x_max":1237,"o":"m 831 256 l 744 256 l 744 0 l 515 0 l 515 256 l 431 256 l 305 0 l 34 0 l 252 393 l 25 734 l 311 734 l 450 470 l 515 470 l 515 734 l 744 734 l 744 470 l 812 470 l 951 734 l 1237 734 l 1008 391 l 1015 395 l 1235 0 l 956 0 l 831 256 m 890 1043 q 822 892 890 950 q 640 835 753 835 q 457 892 526 835 q 389 1043 389 950 l 544 1043 q 569 980 544 1002 q 640 957 595 957 q 709 979 684 957 q 734 1043 734 1001 l 890 1043 z "},"\u04cf":{"ha":419,"x_min":91,"x_max":328,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 z "},"\u04d0":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 726 1253 q 657 1103 726 1160 q 475 1045 589 1045 q 292 1103 361 1045 q 224 1253 224 1160 l 379 1253 q 405 1190 379 1213 q 475 1167 430 1167 q 544 1189 519 1167 q 569 1253 569 1211 l 726 1253 z "},"\u04d1":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 614 1043 q 545 892 614 950 q 363 835 477 835 q 180 892 249 835 q 112 1043 112 950 l 267 1043 q 293 980 267 1002 q 363 957 318 957 q 432 979 408 957 q 457 1043 457 1001 l 614 1043 z "},"\u04d2":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 195 1136 q 224 1200 195 1173 q 297 1226 254 1226 q 370 1200 340 1226 q 399 1136 399 1173 q 370 1072 399 1099 q 297 1046 340 1046 q 224 1072 254 1046 q 195 1136 195 1099 m 547 1136 q 576 1200 547 1173 q 649 1226 606 1226 q 722 1200 692 1226 q 751 1136 751 1173 q 722 1072 751 1099 q 649 1046 692 1046 q 576 1072 606 1046 q 547 1136 547 1099 z "},"\u04d3":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 83 926 q 112 989 83 963 q 185 1016 142 1016 q 258 989 229 1016 q 288 926 288 963 q 258 862 288 888 q 185 836 229 836 q 112 862 142 836 q 83 926 83 888 m 435 926 q 464 989 435 963 q 537 1016 494 1016 q 610 989 581 1016 q 640 926 640 963 q 610 862 640 888 q 537 836 581 836 q 464 862 494 836 q 435 926 435 888 z "},"\u04d4":{"ha":1306,"x_min":11,"x_max":1255,"o":"m 1255 0 l 647 0 l 637 223 l 378 223 l 275 0 l 11 0 l 509 987 l 1214 987 l 1214 808 l 842 808 l 850 594 l 1159 594 l 1159 415 l 858 415 l 868 179 l 1255 179 l 1255 0 m 463 406 l 630 406 l 616 736 l 463 406 z "},"\u04d5":{"ha":1173,"x_min":41,"x_max":1143,"o":"m 840 -14 q 582 77 677 -14 q 471 9 537 33 q 328 -14 404 -14 q 117 48 193 -14 q 41 220 41 111 q 129 385 41 327 q 390 444 217 444 l 486 444 l 486 475 q 463 546 486 520 q 396 571 440 571 q 321 551 347 571 q 296 502 296 531 l 67 515 q 158 682 67 617 q 399 747 249 747 q 615 686 536 747 q 832 747 701 749 q 1059 657 976 747 q 1143 413 1143 567 l 1143 295 l 709 295 q 760 196 719 229 q 871 163 802 163 q 1022 190 956 163 l 1064 208 l 1119 68 q 996 10 1074 33 q 840 -14 918 -14 m 372 144 q 486 186 432 144 l 486 306 l 392 306 q 304 281 339 305 q 270 217 270 256 q 372 144 270 144 m 832 571 q 747 538 777 571 q 710 438 718 505 l 920 438 l 920 456 q 897 541 920 511 q 832 571 875 571 z "},"\u04d6":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 688 1253 q 619 1103 688 1160 q 437 1045 551 1045 q 254 1103 323 1045 q 186 1253 186 1160 l 341 1253 q 367 1190 341 1213 q 437 1167 392 1167 q 506 1189 481 1167 q 531 1253 531 1211 l 688 1253 z "},"\u04d7":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 613 1044 q 545 893 613 951 q 362 836 476 836 q 180 893 248 836 q 111 1044 111 951 l 267 1044 q 292 980 267 1003 q 362 958 317 958 q 432 980 407 958 q 456 1044 456 1002 l 613 1044 z "},"\u04da":{"ha":970,"x_min":47,"x_max":911,"o":"m 416 1002 q 780 881 649 1002 q 911 545 911 761 l 911 434 q 855 203 911 307 q 700 42 799 100 q 479 -14 600 -15 q 160 110 274 -14 q 47 459 47 234 l 47 574 l 673 574 q 601 743 666 686 q 416 800 536 800 q 142 761 271 800 l 109 952 l 122 957 q 416 1002 249 1002 m 479 187 q 608 239 558 187 q 671 387 659 290 l 283 387 l 283 366 q 334 235 283 282 q 479 187 384 187 m 175 1104 q 204 1168 175 1141 q 277 1194 234 1194 q 350 1168 321 1194 q 380 1104 380 1141 q 350 1040 380 1067 q 277 1014 321 1014 q 204 1040 234 1014 q 175 1104 175 1067 m 527 1104 q 556 1168 527 1141 q 629 1194 586 1194 q 702 1168 673 1194 q 732 1104 732 1141 q 702 1040 732 1067 q 629 1014 673 1014 q 556 1040 586 1014 q 527 1104 527 1067 z "},"\u04d9":{"ha":734,"x_min":45,"x_max":703,"o":"m 347 748 q 603 649 504 748 q 703 385 703 549 l 703 366 q 611 89 703 193 q 363 -13 520 -14 q 130 76 214 -13 q 45 323 45 165 l 45 439 l 469 439 q 417 536 457 501 q 315 572 377 572 q 165 547 229 572 l 113 526 l 59 666 q 185 725 107 702 q 347 748 262 748 m 363 163 q 470 296 454 163 l 268 296 l 268 279 q 363 163 268 163 z "},"\u04db":{"ha":734,"x_min":45,"x_max":703,"o":"m 347 748 q 603 649 504 748 q 703 385 703 549 l 703 366 q 611 89 703 193 q 363 -13 520 -14 q 130 76 214 -13 q 45 323 45 165 l 45 439 l 469 439 q 417 536 457 501 q 315 572 377 572 q 165 547 229 572 l 113 526 l 59 666 q 185 725 107 702 q 347 748 262 748 m 363 163 q 470 296 454 163 l 268 296 l 268 279 q 363 163 268 163 m 87 926 q 116 990 87 964 q 189 1017 146 1017 q 262 990 233 1017 q 292 926 292 964 q 262 863 292 889 q 189 836 233 836 q 116 863 146 836 q 87 926 87 889 m 439 926 q 468 990 439 964 q 541 1017 498 1017 q 614 990 585 1017 q 644 926 644 964 q 614 863 644 889 q 541 836 585 836 q 468 863 498 836 q 439 926 439 889 z "},"\u04dc":{"ha":1449,"x_min":7,"x_max":1452,"o":"m 973 386 l 852 386 l 852 0 l 616 0 l 616 386 l 493 386 l 303 0 l 7 0 l 305 539 l 16 987 l 317 987 l 519 600 l 616 600 l 616 987 l 852 987 l 852 600 l 949 600 l 1142 987 l 1442 987 l 1160 541 l 1452 0 l 1155 0 l 973 386 m 446 1136 q 476 1200 446 1173 q 549 1226 505 1226 q 622 1200 592 1226 q 651 1136 651 1173 q 622 1072 651 1099 q 549 1046 592 1046 q 476 1072 505 1046 q 446 1136 446 1099 m 798 1136 q 828 1200 798 1173 q 901 1226 857 1226 q 974 1200 944 1226 q 1003 1136 1003 1173 q 974 1072 1003 1099 q 901 1046 944 1046 q 828 1072 857 1046 q 798 1136 798 1099 z "},"\u04dd":{"ha":1253,"x_min":25,"x_max":1237,"o":"m 831 256 l 744 256 l 744 0 l 515 0 l 515 256 l 431 256 l 305 0 l 34 0 l 252 393 l 25 734 l 311 734 l 450 470 l 515 470 l 515 734 l 744 734 l 744 470 l 812 470 l 951 734 l 1237 734 l 1008 391 l 1015 395 l 1235 0 l 956 0 l 831 256 m 359 926 q 389 989 359 963 q 462 1016 418 1016 q 535 989 505 1016 q 564 926 564 963 q 535 862 564 888 q 462 836 505 836 q 389 862 418 836 q 359 926 359 888 m 711 926 q 741 989 711 963 q 814 1016 770 1016 q 887 989 857 1016 q 916 926 916 963 q 887 862 916 888 q 814 836 857 836 q 741 862 770 836 q 711 926 711 888 z "},"\u04de":{"ha":874,"x_min":42,"x_max":809,"o":"m 555 713 q 519 789 555 760 q 421 817 483 817 q 329 790 363 817 q 294 718 294 762 l 56 718 q 103 863 56 799 q 234 964 149 928 q 421 1000 319 1000 q 695 926 597 1000 q 793 720 793 852 q 754 596 793 652 q 644 507 714 540 q 767 421 724 479 q 809 277 809 363 q 703 65 809 144 q 421 -13 597 -13 q 150 64 258 -13 q 42 274 42 141 l 281 274 q 320 200 281 230 q 421 170 359 170 q 529 201 488 170 q 570 282 570 232 q 535 386 570 355 q 432 416 500 416 l 305 416 l 305 592 l 440 592 q 555 713 555 595 m 145 1136 q 175 1200 145 1173 q 248 1226 204 1226 q 320 1200 291 1226 q 350 1136 350 1173 q 320 1072 350 1099 q 248 1046 291 1046 q 175 1072 204 1046 q 145 1136 145 1099 m 497 1136 q 527 1200 497 1173 q 600 1226 556 1226 q 672 1200 643 1226 q 702 1136 702 1173 q 672 1072 702 1099 q 600 1046 643 1046 q 527 1072 556 1046 q 497 1136 497 1099 z "},"\u04df":{"ha":718,"x_min":41,"x_max":686,"o":"m 444 512 q 368 584 444 584 q 281 521 281 584 l 52 521 q 136 684 52 621 q 353 747 220 747 q 587 691 502 747 q 673 533 673 635 q 643 443 673 484 q 560 378 614 402 q 686 208 686 334 q 595 47 686 107 q 353 -14 505 -14 q 128 49 216 -14 q 41 217 41 112 l 269 217 q 292 169 269 189 q 369 149 315 149 q 435 170 412 149 q 458 228 458 191 q 370 309 458 307 l 268 309 l 268 442 l 361 442 q 444 512 444 442 m 87 926 q 116 989 87 963 q 189 1016 146 1016 q 262 989 233 1016 q 292 926 292 963 q 262 862 292 888 q 189 836 233 836 q 116 862 146 836 q 87 926 87 888 m 439 926 q 468 989 439 963 q 541 1016 498 1016 q 614 989 585 1016 q 644 926 644 963 q 614 862 644 888 q 541 836 585 836 q 468 862 498 836 q 439 926 439 888 z "},"\u04e2":{"ha":962,"x_min":61,"x_max":892,"o":"m 654 987 l 892 987 l 892 0 l 654 0 l 654 623 l 299 0 l 61 0 l 61 987 l 299 987 l 299 364 l 654 987 m 713 1078 l 242 1078 l 242 1195 l 713 1195 l 713 1078 z "},"\u04e3":{"ha":779,"x_min":60,"x_max":720,"o":"m 491 734 l 720 734 l 720 0 l 491 0 l 491 427 l 290 0 l 60 0 l 60 734 l 290 734 l 290 308 l 491 734 m 630 868 l 159 868 l 159 985 l 630 985 l 630 868 z "},"\u04e4":{"ha":962,"x_min":61,"x_max":892,"o":"m 654 987 l 892 987 l 892 0 l 654 0 l 654 623 l 299 0 l 61 0 l 61 987 l 299 987 l 299 364 l 654 987 m 198 1136 q 228 1200 198 1173 q 300 1226 257 1226 q 373 1200 344 1226 q 403 1136 403 1173 q 373 1072 403 1099 q 300 1046 344 1046 q 228 1072 257 1046 q 198 1136 198 1099 m 550 1136 q 579 1200 550 1173 q 652 1226 609 1226 q 725 1200 696 1226 q 755 1136 755 1173 q 725 1072 755 1099 q 652 1046 696 1046 q 579 1072 609 1046 q 550 1136 550 1099 z "},"\u04e5":{"ha":779,"x_min":60,"x_max":720,"o":"m 491 734 l 720 734 l 720 0 l 491 0 l 491 427 l 290 0 l 60 0 l 60 734 l 290 734 l 290 308 l 491 734 m 115 926 q 145 989 115 963 q 218 1016 174 1016 q 291 989 261 1016 q 320 926 320 963 q 291 862 320 888 q 218 836 261 836 q 145 862 174 836 q 115 926 115 888 m 467 926 q 497 989 467 963 q 570 1016 526 1016 q 643 989 613 1016 q 672 926 672 963 q 643 862 672 888 q 570 836 613 836 q 497 862 526 836 q 467 926 467 888 z "},"\u04e6":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 198 1136 q 228 1200 198 1173 q 300 1226 257 1226 q 373 1200 344 1226 q 403 1136 403 1173 q 373 1072 403 1099 q 300 1046 344 1046 q 228 1072 257 1046 q 198 1136 198 1099 m 550 1136 q 579 1200 550 1173 q 652 1226 609 1226 q 725 1200 696 1226 q 755 1136 755 1173 q 725 1072 755 1099 q 652 1046 696 1046 q 579 1072 609 1046 q 550 1136 550 1099 z "},"\u04e7":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 111 926 q 141 989 111 963 q 214 1016 170 1016 q 287 989 257 1016 q 316 926 316 963 q 287 862 316 888 q 214 836 257 836 q 141 862 170 836 q 111 926 111 888 m 463 926 q 493 989 463 963 q 566 1016 522 1016 q 638 989 609 1016 q 668 926 668 963 q 638 862 668 888 q 566 836 609 836 q 493 862 522 836 q 463 926 463 888 z "},"\u04e8":{"ha":960,"x_min":58,"x_max":921,"o":"m 921 473 q 867 217 921 328 q 715 46 814 106 q 490 -14 617 -14 q 267 45 364 -14 q 114 212 169 103 q 58 461 60 320 l 58 513 q 111 770 58 659 q 263 941 164 880 q 489 1001 361 1001 q 713 941 614 1001 q 866 771 812 881 q 921 518 920 661 l 921 473 m 490 172 q 624 240 575 172 q 678 435 672 307 l 300 435 q 354 240 307 307 q 490 172 401 172 m 489 814 q 301 564 316 814 l 677 564 q 621 751 669 688 q 489 814 572 814 z "},"\u04e9":{"ha":781,"x_min":34,"x_max":742,"o":"m 34 374 q 77 569 34 484 q 199 701 119 655 q 387 747 279 747 q 647 645 552 747 q 742 368 742 543 l 742 359 q 647 87 742 188 q 389 -14 551 -14 q 137 80 231 -14 q 35 335 42 174 l 34 374 m 387 571 q 265 427 281 571 l 511 427 q 387 571 494 571 m 389 163 q 510 298 492 163 l 266 298 q 389 163 284 163 z "},"\u04ea":{"ha":960,"x_min":58,"x_max":921,"o":"m 921 473 q 867 217 921 328 q 715 46 814 106 q 490 -14 617 -14 q 267 45 364 -14 q 114 212 169 103 q 58 461 60 320 l 58 513 q 111 770 58 659 q 263 941 164 880 q 489 1001 361 1001 q 713 941 614 1001 q 866 771 812 881 q 921 518 920 661 l 921 473 m 490 172 q 624 240 575 172 q 678 435 672 307 l 300 435 q 354 240 307 307 q 490 172 401 172 m 489 814 q 301 564 316 814 l 677 564 q 621 751 669 688 q 489 814 572 814 m 213 1136 q 242 1200 213 1173 q 315 1226 272 1226 q 388 1200 359 1226 q 418 1136 418 1173 q 388 1072 418 1099 q 315 1046 359 1046 q 242 1072 272 1046 q 213 1136 213 1099 m 565 1136 q 594 1200 565 1173 q 667 1226 624 1226 q 740 1200 711 1226 q 770 1136 770 1173 q 740 1072 770 1099 q 667 1046 711 1046 q 594 1072 624 1046 q 565 1136 565 1099 z "},"\u04eb":{"ha":781,"x_min":34,"x_max":742,"o":"m 34 374 q 77 569 34 484 q 199 701 119 655 q 387 747 279 747 q 647 645 552 747 q 742 368 742 543 l 742 359 q 647 87 742 188 q 389 -14 551 -14 q 137 80 231 -14 q 35 335 42 174 l 34 374 m 387 571 q 265 427 281 571 l 511 427 q 387 571 494 571 m 389 163 q 510 298 492 163 l 266 298 q 389 163 284 163 m 108 926 q 137 989 108 963 q 210 1016 167 1016 q 283 989 254 1016 q 313 926 313 963 q 283 862 313 888 q 210 836 254 836 q 137 862 167 836 q 108 926 108 888 m 460 926 q 489 989 460 963 q 562 1016 519 1016 q 635 989 606 1016 q 665 926 665 963 q 635 862 665 888 q 562 836 606 836 q 489 862 519 836 q 460 926 460 888 z "},"\u04ec":{"ha":883,"x_min":10,"x_max":838,"o":"m 249 334 q 420 168 254 168 q 548 222 505 168 q 599 402 591 275 l 326 402 l 326 586 l 599 586 q 545 763 589 708 q 423 817 501 817 q 293 777 336 817 q 247 646 250 736 l 10 646 q 134 906 25 812 q 423 1001 243 1001 q 641 943 547 1001 q 787 775 736 884 q 838 519 838 665 l 838 466 q 726 113 838 239 q 420 -14 614 -14 q 211 29 302 -14 q 68 151 120 72 q 12 334 17 230 l 249 334 m 151 1136 q 181 1200 151 1173 q 254 1226 210 1226 q 327 1200 297 1226 q 356 1136 356 1173 q 327 1072 356 1099 q 254 1046 297 1046 q 181 1072 210 1046 q 151 1136 151 1099 m 503 1136 q 533 1200 503 1173 q 606 1226 562 1226 q 679 1200 649 1226 q 708 1136 708 1173 q 679 1072 708 1099 q 606 1046 649 1046 q 533 1072 562 1046 q 503 1136 503 1099 z "},"\u04ed":{"ha":708,"x_min":31,"x_max":686,"o":"m 337 571 q 245 473 245 571 l 31 473 q 116 670 31 593 q 337 747 201 747 q 592 647 498 747 q 686 368 686 547 l 686 359 q 592 87 686 188 q 338 -14 498 -14 q 114 65 197 -14 q 31 281 31 143 l 245 281 q 269 194 245 226 q 338 163 293 163 q 454 306 441 163 l 292 306 l 292 430 l 454 430 q 337 571 441 571 m 68 926 q 97 989 68 963 q 170 1016 127 1016 q 243 989 214 1016 q 273 926 273 963 q 243 862 273 888 q 170 836 214 836 q 97 862 127 836 q 68 926 68 888 m 420 926 q 449 989 420 963 q 522 1016 479 1016 q 595 989 566 1016 q 625 926 625 963 q 595 862 625 888 q 522 836 566 836 q 449 862 479 836 q 420 926 420 888 z "},"\u04ee":{"ha":878,"x_min":3,"x_max":872,"o":"m 458 559 l 458 558 l 621 987 l 872 987 l 540 204 q 419 37 486 85 q 263 -14 353 -12 l 215 -14 l 178 -13 l 174 172 q 222 169 182 169 q 303 188 276 169 q 348 260 331 206 l 359 292 l 3 987 l 256 987 l 458 559 m 696 1078 l 226 1078 l 226 1195 l 696 1195 l 696 1078 z "},"\u04ef":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 593 868 l 123 868 l 123 985 l 593 985 l 593 868 z "},"\u04f0":{"ha":878,"x_min":3,"x_max":872,"o":"m 458 559 l 458 558 l 621 987 l 872 987 l 540 204 q 419 37 486 85 q 263 -14 353 -12 l 215 -14 l 178 -13 l 174 172 q 222 169 182 169 q 303 188 276 169 q 348 260 331 206 l 359 292 l 3 987 l 256 987 l 458 559 m 182 1136 q 211 1200 182 1173 q 284 1226 241 1226 q 357 1200 328 1226 q 387 1136 387 1173 q 357 1072 387 1099 q 284 1046 328 1046 q 211 1072 241 1046 q 182 1136 182 1099 m 534 1136 q 563 1200 534 1173 q 636 1226 593 1226 q 709 1200 680 1226 q 739 1136 739 1173 q 709 1072 739 1099 q 636 1046 680 1046 q 563 1072 593 1046 q 534 1136 534 1099 z "},"\u04f1":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 79 926 q 108 989 79 963 q 181 1016 138 1016 q 254 989 224 1016 q 283 926 283 963 q 254 862 283 888 q 181 836 224 836 q 108 862 138 836 q 79 926 79 888 m 431 926 q 460 989 431 963 q 533 1016 490 1016 q 606 989 576 1016 q 635 926 635 963 q 606 862 635 888 q 533 836 576 836 q 460 862 490 836 q 431 926 431 888 z "},"\u04f2":{"ha":878,"x_min":3,"x_max":872,"o":"m 458 559 l 458 558 l 621 987 l 872 987 l 540 204 q 419 37 486 85 q 263 -14 353 -12 l 215 -14 l 178 -13 l 174 172 q 222 169 182 169 q 303 188 276 169 q 348 260 331 206 l 359 292 l 3 987 l 256 987 l 458 559 m 652 1251 l 841 1251 l 661 1048 l 500 1048 l 652 1251 m 370 1251 l 560 1251 l 399 1048 l 236 1048 l 370 1251 z "},"\u04f3":{"ha":720,"x_min":-3,"x_max":738,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 549 1041 l 738 1041 l 557 838 l 397 838 l 549 1041 m 267 1041 l 457 1041 l 296 838 l 133 838 l 267 1041 z "},"\u04f4":{"ha":970,"x_min":90,"x_max":897,"o":"m 897 987 l 897 0 l 660 0 l 660 365 l 590 356 l 503 351 q 197 437 303 351 q 90 682 92 524 l 90 987 l 328 987 l 328 686 q 367 569 328 605 q 503 534 406 534 l 523 534 q 660 547 606 538 l 660 987 l 897 987 m 254 1136 q 284 1200 254 1173 q 357 1226 313 1226 q 430 1200 400 1226 q 459 1136 459 1173 q 430 1072 459 1099 q 357 1046 400 1046 q 284 1072 313 1046 q 254 1136 254 1099 m 606 1136 q 636 1200 606 1173 q 709 1226 665 1226 q 782 1200 752 1226 q 811 1136 811 1173 q 782 1072 811 1099 q 709 1046 752 1046 q 636 1072 665 1046 q 606 1136 606 1099 z "},"\u04f5":{"ha":774,"x_min":54,"x_max":716,"o":"m 716 0 l 486 0 l 486 220 q 418 214 447 214 q 146 284 237 214 q 54 494 55 354 l 54 734 l 283 734 l 283 492 q 311 411 283 433 q 418 390 339 390 q 486 396 452 390 l 486 734 l 716 734 l 716 0 m 129 926 q 158 989 129 963 q 231 1016 188 1016 q 304 989 275 1016 q 334 926 334 963 q 304 862 334 888 q 231 836 275 836 q 158 862 188 836 q 129 926 129 888 m 481 926 q 510 989 481 963 q 583 1016 540 1016 q 656 989 627 1016 q 686 926 686 963 q 656 862 686 888 q 583 836 627 836 q 510 862 540 836 q 481 926 481 888 z "},"\u04f8":{"ha":1211,"x_min":75,"x_max":1139,"o":"m 313 648 l 436 648 q 644 608 553 648 q 782 495 734 568 q 831 328 831 422 q 723 91 831 182 q 432 0 614 0 l 75 0 l 75 987 l 313 987 l 313 648 m 313 465 l 313 183 l 435 183 q 550 224 508 183 q 593 329 593 264 q 551 427 593 390 q 434 465 509 465 l 313 465 m 1139 0 l 902 0 l 902 987 l 1139 987 l 1139 0 m 336 1136 q 365 1200 336 1173 q 438 1226 395 1226 q 511 1200 481 1226 q 541 1136 541 1173 q 511 1072 541 1099 q 438 1046 481 1046 q 365 1072 395 1046 q 336 1136 336 1099 m 688 1136 q 717 1200 688 1173 q 790 1226 747 1226 q 863 1200 833 1226 q 892 1136 892 1173 q 863 1072 892 1099 q 790 1046 833 1046 q 717 1072 747 1046 q 688 1136 688 1099 z "},"\u04f9":{"ha":1184,"x_min":79,"x_max":1103,"o":"m 309 532 l 427 532 q 606 499 528 532 q 724 405 683 466 q 764 263 764 344 q 672 72 764 144 q 422 0 581 0 l 79 0 l 79 734 l 309 734 l 309 532 m 309 357 l 309 175 l 425 175 q 507 199 477 175 q 536 264 536 223 q 510 331 536 305 q 425 357 484 357 l 309 357 m 1103 0 l 873 0 l 873 734 l 1103 734 l 1103 0 m 325 926 q 354 989 325 963 q 427 1016 384 1016 q 500 989 471 1016 q 530 926 530 963 q 500 862 530 888 q 427 836 471 836 q 354 862 384 836 q 325 926 325 888 m 677 926 q 706 989 677 963 q 779 1016 736 1016 q 852 989 823 1016 q 882 926 882 963 q 852 862 882 888 q 779 836 823 836 q 706 862 736 836 q 677 926 677 888 z "},"\u0501":{"ha":781,"x_min":35,"x_max":715,"o":"m 35 372 q 111 647 35 547 q 321 747 186 747 q 486 670 419 747 l 486 1042 l 715 1042 l 715 0 l 510 0 l 498 79 q 319 -14 428 -14 q 112 87 189 -14 q 35 372 35 187 m 264 358 q 378 163 264 163 q 486 227 454 163 l 486 506 q 379 571 455 571 q 264 400 273 571 l 264 358 z "},"\u1ea0":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 350 -150 q 386 -77 350 -106 q 477 -49 422 -49 q 567 -77 531 -49 q 604 -150 604 -106 q 567 -222 604 -194 q 477 -251 531 -251 q 386 -222 422 -251 q 350 -150 350 -194 z "},"\u1ea1":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 187 -141 q 223 -68 187 -97 q 314 -40 260 -40 q 405 -68 368 -40 q 441 -141 441 -97 q 405 -214 441 -185 q 314 -242 368 -242 q 223 -214 260 -242 q 187 -141 187 -185 z "},"\u1ea2":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 385 1069 l 370 1155 q 463 1198 463 1159 q 372 1242 463 1242 l 376 1341 q 589 1305 517 1341 q 661 1207 661 1270 q 634 1144 661 1169 q 559 1112 607 1118 l 559 1069 l 385 1069 z "},"\u1ea3":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 273 860 l 258 945 q 351 988 351 949 q 260 1033 351 1033 l 264 1131 q 477 1096 406 1131 q 549 998 549 1061 q 522 934 549 960 q 448 902 495 909 l 448 860 l 273 860 z "},"\u1ea4":{"ha":946,"x_min":-2,"x_max":951,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 416 1184 l 528 1184 l 718 1036 l 569 1036 l 472 1115 l 374 1036 l 227 1036 l 416 1184 m 787 1303 l 951 1303 l 788 1116 l 669 1116 l 787 1303 z "},"\u1ea5":{"ha":737,"x_min":31,"x_max":839,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 304 975 l 416 975 l 606 827 l 457 827 l 360 905 l 262 827 l 115 827 l 304 975 m 675 1093 l 839 1093 l 676 907 l 557 907 l 675 1093 z "},"\u1ea6":{"ha":946,"x_min":-3,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 720 1036 l 572 1036 l 475 1115 l 378 1036 l 229 1036 l 419 1184 l 530 1184 l 720 1036 m 278 1116 l 159 1116 l -3 1303 l 159 1303 l 278 1116 z "},"\u1ea7":{"ha":737,"x_min":-115,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 608 827 l 460 827 l 363 905 l 266 827 l 117 827 l 307 975 l 418 975 l 608 827 m 166 907 l 47 907 l -115 1093 l 47 1093 l 166 907 z "},"\u1ea8":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 718 1036 l 568 1036 l 473 1115 l 378 1036 l 227 1036 l 418 1184 l 527 1184 l 718 1036 m 654 1120 l 640 1192 q 718 1227 718 1196 q 697 1258 718 1250 q 642 1265 676 1265 l 646 1347 q 802 1318 749 1347 q 854 1236 854 1289 q 831 1182 854 1204 q 769 1155 808 1160 l 770 1120 l 654 1120 z "},"\u1ea9":{"ha":737,"x_min":31,"x_max":742,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 606 827 l 456 827 l 361 905 l 266 827 l 115 827 l 307 975 l 415 975 l 606 827 m 542 910 l 528 982 q 606 1017 606 986 q 585 1048 606 1040 q 530 1056 564 1056 l 534 1137 q 690 1108 637 1137 q 742 1026 742 1079 q 719 972 742 994 q 657 945 696 951 l 658 910 l 542 910 z "},"\u1eaa":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 720 1036 l 570 1036 l 475 1115 l 380 1036 l 229 1036 l 418 1184 l 532 1184 l 720 1036 m 650 1323 q 626 1248 650 1278 q 567 1218 602 1218 q 490 1239 536 1218 q 420 1260 445 1260 q 395 1213 395 1260 l 320 1234 q 342 1310 320 1279 q 400 1340 365 1340 q 475 1319 425 1340 q 547 1299 525 1299 q 572 1352 572 1299 l 650 1323 z "},"\u1eab":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 608 827 l 458 827 l 363 905 l 268 827 l 117 827 l 306 975 l 420 975 l 608 827 m 538 1114 q 514 1038 538 1068 q 455 1008 490 1008 q 378 1029 424 1008 q 309 1050 333 1050 q 283 1003 283 1050 l 208 1025 q 231 1100 208 1069 q 288 1131 253 1131 q 363 1110 313 1131 q 435 1089 413 1089 q 460 1142 460 1089 l 538 1114 z "},"\u1eac":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 762 1061 l 762 1053 l 582 1053 l 474 1145 l 366 1053 l 190 1053 l 190 1064 l 409 1252 l 540 1252 l 762 1061 m 350 -150 q 386 -77 350 -106 q 477 -49 422 -49 q 567 -77 531 -49 q 604 -150 604 -106 q 567 -222 604 -194 q 477 -251 531 -251 q 386 -222 422 -251 q 350 -150 350 -194 z "},"\u1ead":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 650 851 l 650 842 l 470 842 l 362 935 l 254 842 l 78 842 l 78 854 l 297 1042 l 428 1042 l 650 851 m 187 -141 q 223 -68 187 -97 q 314 -40 260 -40 q 405 -68 368 -40 q 441 -141 441 -97 q 405 -214 441 -185 q 314 -242 368 -242 q 223 -214 260 -242 q 187 -141 187 -185 z "},"\u1eae":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 723 1201 q 655 1082 723 1128 q 473 1037 587 1037 q 291 1082 359 1037 q 222 1201 222 1128 l 363 1201 q 392 1145 363 1165 q 473 1125 421 1125 q 553 1145 524 1125 q 582 1201 582 1165 l 723 1201 m 500 1322 l 652 1322 l 530 1198 l 411 1198 l 500 1322 z "},"\u1eaf":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 611 991 q 543 872 611 918 q 361 827 475 827 q 179 872 247 827 q 111 991 111 918 l 251 991 q 280 935 251 955 q 361 915 309 915 q 441 935 412 915 q 470 991 470 955 l 611 991 m 388 1112 l 541 1112 l 418 987 l 299 987 l 388 1112 z "},"\u1eb0":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 723 1203 q 655 1084 723 1130 q 473 1039 587 1039 q 291 1084 359 1039 q 222 1203 222 1130 l 363 1203 q 392 1147 363 1167 q 473 1127 421 1127 q 553 1147 524 1127 q 582 1203 582 1167 l 723 1203 m 298 1322 l 451 1322 l 540 1198 l 421 1198 l 298 1322 z "},"\u1eb1":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 611 993 q 543 874 611 920 q 361 829 475 829 q 179 874 247 829 q 111 993 111 920 l 251 993 q 280 937 251 957 q 361 917 309 917 q 441 937 412 917 q 470 993 470 957 l 611 993 m 186 1112 l 339 1112 l 428 987 l 309 987 l 186 1112 z "},"\u1eb2":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 727 1188 q 659 1071 727 1116 q 471 1026 590 1026 q 284 1070 354 1026 q 215 1188 215 1115 l 359 1188 q 388 1136 359 1155 q 471 1117 416 1117 q 553 1136 524 1117 q 583 1188 583 1154 l 727 1188 m 395 1212 l 379 1279 q 471 1312 471 1282 q 380 1347 471 1347 l 385 1424 q 571 1397 509 1424 q 633 1320 633 1369 q 606 1269 633 1289 q 534 1244 579 1249 l 534 1212 l 395 1212 z "},"\u1eb3":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 615 979 q 547 861 615 906 q 359 817 478 817 q 173 861 242 817 q 103 979 103 905 l 247 979 q 276 926 247 945 q 359 907 304 907 q 441 926 412 907 q 471 979 471 945 l 615 979 m 283 1002 l 267 1069 q 359 1102 359 1072 q 269 1137 359 1137 l 273 1215 q 459 1187 397 1215 q 522 1110 522 1160 q 494 1060 522 1080 q 422 1035 467 1040 l 422 1002 l 283 1002 z "},"\u1eb4":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 723 1190 q 654 1070 723 1116 q 472 1025 585 1025 q 290 1070 359 1025 q 221 1190 221 1116 l 361 1190 q 390 1138 361 1156 q 472 1119 419 1119 q 553 1138 525 1119 q 581 1190 581 1156 l 723 1190 m 670 1377 q 638 1290 670 1325 q 560 1254 606 1254 q 473 1276 521 1254 q 397 1298 426 1298 q 368 1281 380 1298 q 357 1240 357 1265 l 263 1266 q 295 1353 263 1316 q 373 1389 326 1389 q 455 1367 403 1389 q 536 1345 507 1345 q 564 1362 552 1345 q 576 1403 576 1379 l 670 1377 z "},"\u1eb5":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 611 981 q 542 861 611 906 q 360 815 473 815 q 178 861 248 815 q 109 981 109 906 l 250 981 q 278 928 250 947 q 360 909 307 909 q 441 928 413 909 q 469 981 469 947 l 611 981 m 558 1167 q 526 1080 558 1116 q 448 1044 494 1044 q 361 1066 409 1044 q 286 1088 314 1088 q 256 1072 268 1088 q 245 1031 245 1055 l 151 1057 q 183 1143 151 1107 q 261 1179 214 1179 q 343 1158 291 1179 q 424 1136 395 1136 q 452 1153 440 1136 q 464 1194 464 1169 l 558 1167 z "},"\u1eb6":{"ha":946,"x_min":-2,"x_max":949,"o":"m 635 184 l 309 184 l 252 0 l -2 0 l 360 987 l 584 987 l 949 0 l 693 0 l 635 184 m 366 368 l 578 368 l 472 711 l 366 368 m 726 1253 q 657 1103 726 1160 q 475 1045 589 1045 q 292 1103 361 1045 q 224 1253 224 1160 l 379 1253 q 405 1190 379 1213 q 475 1167 430 1167 q 544 1189 519 1167 q 569 1253 569 1211 l 726 1253 m 350 -150 q 386 -77 350 -106 q 477 -49 422 -49 q 567 -77 531 -49 q 604 -150 604 -106 q 567 -222 604 -194 q 477 -251 531 -251 q 386 -222 422 -251 q 350 -150 350 -194 z "},"\u1eb7":{"ha":737,"x_min":31,"x_max":706,"o":"m 477 0 q 456 66 465 22 q 279 -14 393 -14 q 103 49 176 -14 q 31 207 31 112 q 119 387 31 326 q 375 448 207 448 l 446 448 l 446 487 q 358 588 446 588 q 277 508 277 588 l 48 508 q 139 681 48 614 q 370 747 229 747 q 591 679 510 747 q 675 491 673 610 l 675 166 q 706 12 676 65 l 706 0 l 477 0 m 334 149 q 405 168 377 149 q 446 209 433 186 l 446 326 l 379 326 q 260 219 260 326 q 281 169 260 188 q 334 149 302 149 m 614 1043 q 545 892 614 950 q 363 835 477 835 q 180 892 249 835 q 112 1043 112 950 l 267 1043 q 293 980 267 1002 q 363 957 318 957 q 432 979 408 957 q 457 1043 457 1001 l 614 1043 m 187 -141 q 223 -68 187 -97 q 314 -40 260 -40 q 405 -68 368 -40 q 441 -141 441 -97 q 405 -214 441 -185 q 314 -242 368 -242 q 223 -214 260 -242 q 187 -141 187 -185 z "},"\u1eb8":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 313 -149 q 350 -77 313 -105 q 440 -48 386 -48 q 531 -77 494 -48 q 567 -149 567 -105 q 531 -222 567 -193 q 440 -250 494 -250 q 350 -222 386 -250 q 313 -149 313 -193 z "},"\u1eb9":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 260 -156 q 297 -83 260 -112 q 387 -55 333 -55 q 478 -83 441 -55 q 514 -156 514 -112 q 478 -229 514 -200 q 387 -257 441 -257 q 297 -229 333 -257 q 260 -156 260 -200 z "},"\u1eba":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 347 1069 l 332 1155 q 425 1198 425 1159 q 334 1242 425 1242 l 338 1341 q 551 1305 479 1341 q 623 1207 623 1270 q 596 1144 623 1169 q 522 1112 569 1118 l 522 1069 l 347 1069 z "},"\u1ebb":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 273 861 l 258 946 q 351 989 351 950 q 259 1034 351 1034 l 264 1132 q 477 1097 405 1132 q 549 998 549 1061 q 522 935 549 960 q 447 903 494 909 l 447 861 l 273 861 z "},"\u1ebc":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 698 1246 q 653 1115 698 1168 q 541 1061 608 1061 q 441 1089 496 1061 q 353 1118 387 1118 q 316 1103 331 1118 q 300 1057 300 1088 l 174 1063 q 219 1194 174 1139 q 330 1249 264 1249 q 418 1224 363 1249 q 488 1196 473 1199 q 519 1192 503 1192 q 556 1207 541 1192 q 572 1253 572 1222 l 698 1246 z "},"\u1ebd":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 623 1037 q 578 906 623 960 q 467 852 533 852 q 367 880 422 852 q 278 909 312 909 q 241 894 256 909 q 226 848 226 879 l 99 854 q 144 985 99 930 q 255 1040 189 1040 q 344 1015 289 1040 q 413 987 399 990 q 444 983 428 983 q 481 998 466 983 q 497 1044 497 1013 l 623 1037 z "},"\u1ebe":{"ha":777,"x_min":75,"x_max":913,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 378 1184 l 490 1184 l 680 1036 l 531 1036 l 434 1115 l 336 1036 l 189 1036 l 378 1184 m 749 1303 l 913 1303 l 750 1116 l 631 1116 l 749 1303 z "},"\u1ebf":{"ha":756,"x_min":41,"x_max":838,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 303 975 l 415 975 l 605 827 l 456 827 l 359 906 l 262 827 l 114 827 l 303 975 m 675 1094 l 838 1094 l 675 907 l 556 907 l 675 1094 z "},"\u1ec0":{"ha":777,"x_min":-41,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 682 1036 l 534 1036 l 437 1115 l 340 1036 l 191 1036 l 381 1184 l 492 1184 l 682 1036 m 240 1116 l 121 1116 l -41 1303 l 121 1303 l 240 1116 z "},"\u1ec1":{"ha":756,"x_min":-116,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 607 827 l 460 827 l 362 906 l 265 827 l 116 827 l 307 975 l 418 975 l 607 827 m 165 907 l 46 907 l -116 1094 l 47 1094 l 165 907 z "},"\u1ec2":{"ha":777,"x_min":75,"x_max":816,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 680 1036 l 530 1036 l 435 1115 l 340 1036 l 189 1036 l 380 1184 l 489 1184 l 680 1036 m 616 1120 l 602 1192 q 680 1227 680 1196 q 659 1258 680 1250 q 604 1265 638 1265 l 608 1347 q 764 1318 711 1347 q 816 1236 816 1289 q 793 1182 816 1204 q 731 1155 770 1160 l 732 1120 l 616 1120 z "},"\u1ec3":{"ha":756,"x_min":41,"x_max":741,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 605 827 l 455 827 l 360 906 l 265 827 l 114 827 l 306 975 l 414 975 l 605 827 m 541 911 l 528 983 q 606 1018 606 987 q 585 1049 606 1041 q 529 1057 564 1057 l 534 1138 q 689 1109 637 1138 q 741 1027 741 1080 q 719 973 741 995 q 656 946 696 951 l 657 911 l 541 911 z "},"\u1ec4":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 682 1036 l 532 1036 l 437 1115 l 342 1036 l 191 1036 l 380 1184 l 494 1184 l 682 1036 m 612 1323 q 588 1248 612 1278 q 529 1218 564 1218 q 452 1239 498 1218 q 382 1260 407 1260 q 357 1213 357 1260 l 282 1234 q 304 1310 282 1279 q 362 1340 327 1340 q 437 1319 387 1340 q 509 1299 487 1299 q 534 1352 534 1299 l 612 1323 z "},"\u1ec5":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 607 827 l 457 827 l 362 906 l 267 827 l 116 827 l 305 975 l 419 975 l 607 827 m 537 1114 q 513 1039 537 1069 q 454 1009 490 1009 q 378 1030 423 1009 q 308 1051 332 1051 q 283 1004 283 1051 l 208 1025 q 230 1101 208 1070 q 288 1131 252 1131 q 362 1111 312 1131 q 434 1090 412 1090 q 460 1143 460 1090 l 537 1114 z "},"\u1ec6":{"ha":777,"x_min":75,"x_max":756,"o":"m 687 418 l 313 418 l 313 183 l 755 183 l 755 0 l 75 0 l 75 987 l 756 987 l 756 804 l 313 804 l 313 595 l 687 595 l 687 418 m 724 1061 l 724 1053 l 544 1053 l 436 1145 l 328 1053 l 152 1053 l 152 1064 l 371 1252 l 502 1252 l 724 1061 m 313 -149 q 350 -77 313 -105 q 440 -48 386 -48 q 531 -77 494 -48 q 567 -149 567 -105 q 531 -222 567 -193 q 440 -250 494 -250 q 350 -222 386 -250 q 313 -149 313 -193 z "},"\u1ec7":{"ha":756,"x_min":41,"x_max":728,"o":"m 419 -14 q 146 87 250 -14 q 41 349 41 188 l 41 368 q 83 567 41 481 q 205 700 125 653 q 395 747 285 747 q 639 651 549 747 q 728 384 728 555 l 728 295 l 274 295 q 328 198 286 233 q 435 163 369 163 q 604 239 543 163 l 709 115 q 588 21 666 56 q 419 -14 509 -14 m 393 571 q 274 438 293 571 l 505 438 l 505 456 q 477 541 506 511 q 393 571 448 571 m 650 852 l 650 843 l 469 843 l 361 935 l 254 843 l 77 843 l 77 854 l 296 1042 l 427 1042 l 650 852 m 260 -156 q 297 -83 260 -112 q 387 -55 333 -55 q 478 -83 441 -55 q 514 -156 514 -112 q 478 -229 514 -200 q 387 -257 441 -257 q 297 -229 333 -257 q 260 -156 260 -200 z "},"\u1ec8":{"ha":419,"x_min":91,"x_max":396,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 120 1069 l 105 1155 q 198 1198 198 1159 q 106 1242 198 1242 l 111 1341 q 324 1305 252 1341 q 396 1207 396 1270 q 369 1144 396 1169 q 294 1112 342 1118 l 294 1069 l 120 1069 z "},"\u1ec9":{"ha":396,"x_min":83,"x_max":386,"o":"m 313 0 l 83 0 l 83 734 l 313 734 l 313 0 m 110 846 l 95 931 q 188 974 188 935 q 96 1019 188 1019 l 101 1117 q 314 1082 242 1117 q 386 983 386 1046 q 359 920 386 945 q 284 888 332 895 l 284 846 l 110 846 z "},"\u1eca":{"ha":419,"x_min":83,"x_max":337,"o":"m 328 0 l 91 0 l 91 987 l 328 987 l 328 0 m 83 -156 q 120 -83 83 -112 q 210 -55 156 -55 q 301 -83 264 -55 q 337 -156 337 -112 q 301 -229 337 -200 q 210 -257 264 -257 q 120 -229 156 -257 q 83 -156 83 -200 z "},"\u1ecb":{"ha":382,"x_min":62,"x_max":318,"o":"m 305 0 l 76 0 l 76 734 l 305 734 l 305 0 m 62 923 q 98 1003 62 972 q 189 1034 133 1034 q 281 1003 245 1034 q 316 923 316 972 q 281 843 316 874 q 189 812 245 812 q 98 843 133 812 q 62 923 62 874 m 64 -149 q 101 -77 64 -105 q 191 -48 137 -48 q 282 -77 245 -48 q 318 -149 318 -105 q 282 -222 318 -193 q 191 -250 245 -250 q 101 -222 137 -250 q 64 -149 64 -193 z "},"\u1ecc":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 357 -156 q 393 -83 357 -112 q 484 -55 429 -55 q 574 -83 538 -55 q 610 -156 610 -112 q 574 -229 610 -200 q 484 -257 538 -257 q 393 -229 429 -257 q 357 -156 357 -200 z "},"\u1ecd":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 263 -162 q 299 -90 263 -118 q 390 -61 336 -61 q 480 -90 444 -61 q 517 -162 517 -118 q 480 -235 517 -206 q 390 -263 444 -263 q 299 -235 336 -263 q 263 -162 263 -206 z "},"\u1ece":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 389 1069 l 374 1155 q 467 1198 467 1159 q 375 1242 467 1242 l 380 1341 q 593 1305 521 1341 q 665 1207 665 1270 q 637 1144 665 1169 q 563 1112 610 1118 l 563 1069 l 389 1069 z "},"\u1ecf":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 302 860 l 287 945 q 380 988 380 949 q 288 1033 380 1033 l 293 1131 q 506 1096 434 1131 q 578 998 578 1061 q 551 934 578 960 q 476 902 524 909 l 476 860 l 302 860 z "},"\u1ed0":{"ha":959,"x_min":47,"x_max":954,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 419 1184 l 531 1184 l 721 1036 l 572 1036 l 475 1115 l 378 1036 l 230 1036 l 419 1184 m 791 1303 l 954 1303 l 791 1116 l 672 1116 l 791 1303 z "},"\u1ed1":{"ha":780,"x_min":35,"x_max":867,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 332 975 l 444 975 l 634 827 l 486 827 l 389 905 l 291 827 l 143 827 l 332 975 m 704 1093 l 867 1093 l 705 907 l 585 907 l 704 1093 z "},"\u1ed2":{"ha":959,"x_min":0,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 723 1036 l 576 1036 l 478 1115 l 381 1036 l 232 1036 l 422 1184 l 534 1184 l 723 1036 m 281 1116 l 162 1116 l 0 1303 l 163 1303 l 281 1116 z "},"\u1ed3":{"ha":780,"x_min":-87,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 636 827 l 489 827 l 391 905 l 294 827 l 145 827 l 336 975 l 447 975 l 636 827 m 195 907 l 75 907 l -87 1093 l 76 1093 l 195 907 z "},"\u1ed4":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 721 1036 l 571 1036 l 476 1115 l 381 1036 l 230 1036 l 422 1184 l 530 1184 l 721 1036 m 657 1120 l 644 1192 q 722 1227 722 1196 q 701 1258 722 1250 q 645 1265 680 1265 l 650 1347 q 805 1318 753 1347 q 857 1236 857 1289 q 834 1182 857 1204 q 772 1155 812 1160 l 773 1120 l 657 1120 z "},"\u1ed5":{"ha":780,"x_min":35,"x_max":770,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 634 827 l 484 827 l 389 905 l 294 827 l 143 827 l 335 975 l 444 975 l 634 827 m 570 910 l 557 982 q 635 1017 635 986 q 614 1048 635 1040 q 558 1056 593 1056 l 563 1137 q 718 1108 666 1137 q 770 1026 770 1079 q 748 972 770 994 q 686 945 725 951 l 686 910 l 570 910 z "},"\u1ed6":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 723 1036 l 573 1036 l 478 1115 l 383 1036 l 232 1036 l 421 1184 l 535 1184 l 723 1036 m 653 1323 q 629 1248 653 1278 q 570 1218 606 1218 q 494 1239 539 1218 q 424 1260 448 1260 q 399 1213 399 1260 l 323 1234 q 346 1310 323 1279 q 404 1340 368 1340 q 478 1319 428 1340 q 550 1299 528 1299 q 576 1352 576 1299 l 653 1323 z "},"\u1ed7":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 636 827 l 486 827 l 391 905 l 296 827 l 145 827 l 334 975 l 448 975 l 636 827 m 566 1114 q 543 1038 566 1068 q 484 1008 519 1008 q 407 1029 452 1008 q 337 1050 361 1050 q 312 1003 312 1050 l 237 1025 q 259 1100 237 1069 q 317 1131 281 1131 q 391 1110 341 1131 q 463 1089 441 1089 q 489 1142 489 1089 l 566 1114 z "},"\u1ed8":{"ha":959,"x_min":47,"x_max":911,"o":"m 911 473 q 857 218 911 329 q 705 46 804 106 q 480 -14 606 -14 q 256 44 354 -14 q 104 210 159 102 q 47 458 50 318 l 47 513 q 100 769 47 659 q 253 941 153 880 q 479 1001 352 1001 q 703 941 604 1001 q 856 771 801 882 q 911 519 910 661 l 911 473 m 669 515 q 620 738 669 662 q 479 814 570 814 q 290 546 300 814 l 289 473 q 337 250 289 328 q 480 172 385 172 q 619 249 570 172 q 669 469 668 326 l 669 515 m 766 1061 l 766 1053 l 585 1053 l 477 1145 l 370 1053 l 193 1053 l 193 1064 l 412 1252 l 543 1252 l 766 1061 m 357 -156 q 393 -83 357 -112 q 484 -55 429 -55 q 574 -83 538 -55 q 610 -156 610 -112 q 574 -229 610 -200 q 484 -257 538 -257 q 393 -229 429 -257 q 357 -156 357 -200 z "},"\u1ed9":{"ha":780,"x_min":35,"x_max":743,"o":"m 35 374 q 78 569 35 484 q 201 701 121 655 q 389 747 281 747 q 648 645 553 747 q 743 368 743 543 l 743 359 q 648 87 743 188 q 390 -14 553 -14 q 138 80 233 -14 q 36 335 43 174 l 35 374 m 264 359 q 296 210 264 258 q 390 163 328 163 q 515 351 512 163 l 515 374 q 389 571 515 571 q 264 401 274 571 l 264 359 m 679 851 l 679 842 l 498 842 l 391 935 l 283 842 l 106 842 l 106 854 l 326 1042 l 456 1042 l 679 851 m 263 -162 q 299 -90 263 -118 q 390 -61 336 -61 q 480 -90 444 -61 q 517 -162 517 -118 q 480 -235 517 -206 q 390 -263 444 -263 q 299 -235 336 -263 q 263 -162 263 -206 z "},"\u1eda":{"ha":986,"x_min":49,"x_max":1006,"o":"m 913 473 q 859 217 913 328 q 706 46 805 106 q 481 -14 608 -14 q 258 45 355 -14 q 105 212 160 103 q 49 461 51 320 l 49 513 q 102 770 49 659 q 254 941 155 880 q 480 1001 353 1001 q 658 966 577 1001 q 797 864 739 930 q 851 920 833 877 q 868 1055 868 963 l 1006 1055 q 861 764 1006 818 q 913 516 912 656 l 913 473 m 671 515 q 621 738 671 662 q 480 814 572 814 q 292 546 302 814 l 291 473 q 339 250 291 328 q 481 172 387 172 q 621 249 572 172 q 671 469 670 326 l 671 515 m 510 1257 l 751 1257 l 563 1044 l 376 1044 l 510 1257 z "},"\u1edb":{"ha":812,"x_min":34,"x_max":815,"o":"m 34 374 q 77 569 34 484 q 199 701 119 655 q 387 747 279 747 q 648 644 554 747 q 690 798 690 684 l 815 798 q 703 562 815 622 q 742 359 742 477 q 647 87 742 188 q 389 -14 551 -14 q 137 80 231 -14 q 35 335 42 174 l 34 374 m 262 359 q 294 210 262 258 q 389 163 326 163 q 513 351 511 163 l 513 374 q 387 571 513 571 q 263 401 273 571 l 262 359 m 419 1042 l 661 1042 l 472 829 l 286 829 l 419 1042 z "},"\u1edc":{"ha":986,"x_min":49,"x_max":1006,"o":"m 913 473 q 859 217 913 328 q 706 46 805 106 q 481 -14 608 -14 q 258 45 355 -14 q 105 212 160 103 q 49 461 51 320 l 49 513 q 102 770 49 659 q 254 941 155 880 q 480 1001 353 1001 q 658 966 577 1001 q 797 864 739 930 q 851 920 833 877 q 868 1055 868 963 l 1006 1055 q 861 764 1006 818 q 913 516 912 656 l 913 473 m 671 515 q 621 738 671 662 q 480 814 572 814 q 292 546 302 814 l 291 473 q 339 250 291 328 q 481 172 387 172 q 621 249 572 172 q 671 469 670 326 l 671 515 m 590 1044 l 404 1044 l 213 1257 l 454 1257 l 590 1044 z "},"\u1edd":{"ha":812,"x_min":34,"x_max":815,"o":"m 34 374 q 77 569 34 484 q 199 701 119 655 q 387 747 279 747 q 648 644 554 747 q 690 798 690 684 l 815 798 q 703 562 815 622 q 742 359 742 477 q 647 87 742 188 q 389 -14 551 -14 q 137 80 231 -14 q 35 335 42 174 l 34 374 m 262 359 q 294 210 262 258 q 389 163 326 163 q 513 351 511 163 l 513 374 q 387 571 513 571 q 263 401 273 571 l 262 359 m 499 829 l 313 829 l 122 1042 l 363 1042 l 499 829 z "},"\u1ede":{"ha":986,"x_min":49,"x_max":1006,"o":"m 913 473 q 859 217 913 328 q 706 46 805 106 q 481 -14 608 -14 q 258 45 355 -14 q 105 212 160 103 q 49 461 51 320 l 49 513 q 102 770 49 659 q 254 941 155 880 q 480 1001 353 1001 q 658 966 577 1001 q 797 864 739 930 q 851 920 833 877 q 868 1055 868 963 l 1006 1055 q 861 764 1006 818 q 913 516 912 656 l 913 473 m 671 515 q 621 738 671 662 q 480 814 572 814 q 292 546 302 814 l 291 473 q 339 250 291 328 q 481 172 387 172 q 621 249 572 172 q 671 469 670 326 l 671 515 m 392 1074 l 377 1160 q 470 1202 470 1164 q 378 1247 470 1247 l 383 1345 q 596 1310 524 1345 q 668 1212 668 1275 q 641 1148 668 1174 q 566 1116 614 1123 l 566 1074 l 392 1074 z "},"\u1edf":{"ha":812,"x_min":34,"x_max":815,"o":"m 34 374 q 77 569 34 484 q 199 701 119 655 q 387 747 279 747 q 648 644 554 747 q 690 798 690 684 l 815 798 q 703 562 815 622 q 742 359 742 477 q 647 87 742 188 q 389 -14 551 -14 q 137 80 231 -14 q 35 335 42 174 l 34 374 m 262 359 q 294 210 262 258 q 389 163 326 163 q 513 351 511 163 l 513 374 q 387 571 513 571 q 263 401 273 571 l 262 359 m 301 860 l 286 945 q 379 988 379 949 q 288 1033 379 1033 l 292 1131 q 505 1096 433 1131 q 577 998 577 1061 q 550 934 577 960 q 475 902 523 909 l 475 860 l 301 860 z "},"\u1ee0":{"ha":986,"x_min":49,"x_max":1006,"o":"m 913 473 q 859 217 913 328 q 706 46 805 106 q 481 -14 608 -14 q 258 45 355 -14 q 105 212 160 103 q 49 461 51 320 l 49 513 q 102 770 49 659 q 254 941 155 880 q 480 1001 353 1001 q 658 966 577 1001 q 797 864 739 930 q 851 920 833 877 q 868 1055 868 963 l 1006 1055 q 861 764 1006 818 q 913 516 912 656 l 913 473 m 671 515 q 621 738 671 662 q 480 814 572 814 q 292 546 302 814 l 291 473 q 339 250 291 328 q 481 172 387 172 q 621 249 572 172 q 671 469 670 326 l 671 515 m 743 1251 q 697 1119 743 1173 q 586 1065 652 1065 q 486 1094 541 1065 q 397 1122 431 1122 q 360 1107 376 1122 q 345 1061 345 1093 l 218 1068 q 263 1198 218 1143 q 374 1253 309 1253 q 463 1229 408 1253 q 533 1200 518 1204 q 564 1197 547 1197 q 601 1212 585 1197 q 616 1258 616 1227 l 743 1251 z "},"\u1ee1":{"ha":812,"x_min":34,"x_max":815,"o":"m 34 374 q 77 569 34 484 q 199 701 119 655 q 387 747 279 747 q 648 644 554 747 q 690 798 690 684 l 815 798 q 703 562 815 622 q 742 359 742 477 q 647 87 742 188 q 389 -14 551 -14 q 137 80 231 -14 q 35 335 42 174 l 34 374 m 262 359 q 294 210 262 258 q 389 163 326 163 q 513 351 511 163 l 513 374 q 387 571 513 571 q 263 401 273 571 l 262 359 m 652 1036 q 607 905 652 959 q 495 851 562 851 q 395 880 450 851 q 307 908 340 908 q 270 893 285 908 q 254 847 254 878 l 127 854 q 173 984 127 929 q 283 1039 218 1039 q 372 1014 317 1039 q 442 986 427 989 q 473 983 456 983 q 510 998 494 983 q 526 1044 526 1013 l 652 1036 z "},"\u1ee2":{"ha":986,"x_min":49,"x_max":1006,"o":"m 913 473 q 859 217 913 328 q 706 46 805 106 q 481 -14 608 -14 q 258 45 355 -14 q 105 212 160 103 q 49 461 51 320 l 49 513 q 102 770 49 659 q 254 941 155 880 q 480 1001 353 1001 q 658 966 577 1001 q 797 864 739 930 q 851 920 833 877 q 868 1055 868 963 l 1006 1055 q 861 764 1006 818 q 913 516 912 656 l 913 473 m 671 515 q 621 738 671 662 q 480 814 572 814 q 292 546 302 814 l 291 473 q 339 250 291 328 q 481 172 387 172 q 621 249 572 172 q 671 469 670 326 l 671 515 m 334 -156 q 370 -83 334 -112 q 460 -55 406 -55 q 551 -83 515 -55 q 587 -156 587 -112 q 551 -229 587 -200 q 460 -257 515 -257 q 370 -229 406 -257 q 334 -156 334 -200 z "},"\u1ee3":{"ha":812,"x_min":34,"x_max":815,"o":"m 34 374 q 77 569 34 484 q 199 701 119 655 q 387 747 279 747 q 648 644 554 747 q 690 798 690 684 l 815 798 q 703 562 815 622 q 742 359 742 477 q 647 87 742 188 q 389 -14 551 -14 q 137 80 231 -14 q 35 335 42 174 l 34 374 m 262 359 q 294 210 262 258 q 389 163 326 163 q 513 351 511 163 l 513 374 q 387 571 513 571 q 263 401 273 571 l 262 359 m 264 -162 q 300 -90 264 -118 q 391 -61 336 -61 q 481 -90 445 -61 q 517 -162 517 -118 q 481 -235 517 -206 q 391 -263 445 -263 q 300 -235 336 -263 q 264 -162 264 -206 z "},"\u1ee4":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 331 -156 q 367 -83 331 -112 q 458 -55 404 -55 q 548 -83 512 -55 q 585 -156 585 -112 q 548 -229 585 -200 q 458 -257 512 -257 q 367 -229 404 -257 q 331 -156 331 -200 z "},"\u1ee5":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 181 -156 q 217 -83 181 -112 q 308 -55 254 -55 q 398 -83 362 -55 q 435 -156 435 -112 q 398 -229 435 -200 q 308 -257 362 -257 q 217 -229 254 -257 q 181 -156 181 -200 z "},"\u1ee6":{"ha":923,"x_min":71,"x_max":849,"o":"m 849 987 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 368 1069 l 353 1155 q 446 1198 446 1159 q 355 1242 446 1242 l 359 1341 q 572 1305 500 1341 q 644 1207 644 1270 q 617 1144 644 1169 q 543 1112 590 1118 l 543 1069 l 368 1069 z "},"\u1ee7":{"ha":783,"x_min":60,"x_max":722,"o":"m 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 0 l 508 0 l 501 79 m 302 860 l 287 945 q 380 988 380 949 q 288 1033 380 1033 l 293 1131 q 506 1096 434 1131 q 578 998 578 1061 q 551 934 578 960 q 476 902 524 909 l 476 860 l 302 860 z "},"\u1ee8":{"ha":1000,"x_min":71,"x_max":1115,"o":"m 849 987 l 849 830 q 926 852 899 833 q 964 906 953 871 q 976 1042 976 941 l 1115 1042 q 1051 798 1115 871 q 849 719 987 724 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 522 1260 l 763 1260 l 574 1047 l 388 1047 l 522 1260 z "},"\u1ee9":{"ha":835,"x_min":60,"x_max":915,"o":"m 915 801 q 868 618 915 679 q 722 541 821 557 l 722 0 l 508 0 l 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 644 q 775 693 760 659 q 791 801 791 728 l 915 801 m 418 1028 l 660 1028 l 471 815 l 285 815 l 418 1028 z "},"\u1eea":{"ha":1000,"x_min":71,"x_max":1115,"o":"m 849 987 l 849 830 q 926 852 899 833 q 964 906 953 871 q 976 1042 976 941 l 1115 1042 q 1051 798 1115 871 q 849 719 987 724 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 602 1047 l 416 1047 l 224 1260 l 466 1260 l 602 1047 z "},"\u1eeb":{"ha":835,"x_min":60,"x_max":915,"o":"m 915 801 q 868 618 915 679 q 722 541 821 557 l 722 0 l 508 0 l 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 644 q 775 693 760 659 q 791 801 791 728 l 915 801 m 498 815 l 313 815 l 121 1028 l 363 1028 l 498 815 z "},"\u1eec":{"ha":1000,"x_min":71,"x_max":1115,"o":"m 849 987 l 849 830 q 926 852 899 833 q 964 906 953 871 q 976 1042 976 941 l 1115 1042 q 1051 798 1115 871 q 849 719 987 724 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 404 1078 l 389 1163 q 481 1206 481 1167 q 390 1251 481 1251 l 395 1349 q 608 1314 536 1349 q 680 1215 680 1278 q 652 1152 680 1177 q 578 1120 625 1126 l 578 1078 l 404 1078 z "},"\u1eed":{"ha":835,"x_min":60,"x_max":915,"o":"m 915 801 q 868 618 915 679 q 722 541 821 557 l 722 0 l 508 0 l 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 644 q 775 693 760 659 q 791 801 791 728 l 915 801 m 300 846 l 286 931 q 378 974 378 935 q 287 1019 378 1019 l 292 1117 q 505 1082 433 1117 q 576 983 576 1046 q 549 920 576 945 q 475 888 522 895 l 475 846 l 300 846 z "},"\u1eee":{"ha":1000,"x_min":71,"x_max":1115,"o":"m 849 987 l 849 830 q 926 852 899 833 q 964 906 953 871 q 976 1042 976 941 l 1115 1042 q 1051 798 1115 871 q 849 719 987 724 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 754 1254 q 709 1123 754 1177 q 597 1069 664 1069 q 498 1097 553 1069 q 409 1126 443 1126 q 372 1111 387 1126 q 357 1065 357 1096 l 230 1072 q 275 1202 230 1147 q 386 1257 320 1257 q 475 1232 420 1257 q 544 1204 530 1207 q 575 1200 559 1200 q 612 1215 597 1200 q 628 1261 628 1230 l 754 1254 z "},"\u1eef":{"ha":835,"x_min":60,"x_max":915,"o":"m 915 801 q 868 618 915 679 q 722 541 821 557 l 722 0 l 508 0 l 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 644 q 775 693 760 659 q 791 801 791 728 l 915 801 m 651 1022 q 606 891 651 945 q 494 837 561 837 q 395 865 450 837 q 306 894 340 894 q 269 879 284 894 q 254 833 254 864 l 127 840 q 172 970 127 915 q 283 1025 217 1025 q 372 1000 317 1025 q 441 972 427 975 q 472 968 456 968 q 509 983 494 968 q 525 1029 525 998 l 651 1022 z "},"\u1ef0":{"ha":1000,"x_min":71,"x_max":1115,"o":"m 849 987 l 849 830 q 926 852 899 833 q 964 906 953 871 q 976 1042 976 941 l 1115 1042 q 1051 798 1115 871 q 849 719 987 724 l 849 341 q 802 151 849 231 q 668 28 755 71 q 461 -14 581 -14 q 177 80 281 -14 q 71 336 73 174 l 71 987 l 311 987 l 311 332 q 461 170 315 170 q 573 210 535 170 q 611 342 611 251 l 611 987 l 849 987 m 366 -162 q 402 -90 366 -118 q 493 -61 439 -61 q 584 -90 547 -61 q 620 -162 620 -118 q 584 -235 620 -206 q 493 -263 547 -263 q 402 -235 439 -263 q 366 -162 366 -206 z "},"\u1ef1":{"ha":835,"x_min":60,"x_max":915,"o":"m 915 801 q 868 618 915 679 q 722 541 821 557 l 722 0 l 508 0 l 501 79 q 305 -14 429 -14 q 122 57 184 -14 q 60 258 60 127 l 60 734 l 289 734 l 289 257 q 380 163 289 163 q 492 219 459 163 l 492 734 l 722 734 l 722 644 q 775 693 760 659 q 791 801 791 728 l 915 801 m 264 -156 q 301 -83 264 -112 q 391 -55 337 -55 q 482 -83 446 -55 q 518 -156 518 -112 q 482 -229 518 -200 q 391 -257 446 -257 q 301 -229 337 -257 q 264 -156 264 -200 z "},"\u1ef4":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 m 308 -124 q 344 -52 308 -80 q 435 -23 380 -23 q 525 -52 489 -23 q 562 -124 562 -80 q 525 -197 562 -168 q 435 -225 489 -225 q 344 -197 380 -225 q 308 -124 308 -168 z "},"\u1ef5":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 444 -218 q 480 -145 444 -174 q 571 -117 517 -117 q 662 -145 625 -117 q 698 -218 698 -174 q 662 -290 698 -262 q 571 -319 625 -319 q 480 -290 517 -319 q 444 -218 444 -262 z "},"\u1ef6":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 m 347 1069 l 332 1155 q 425 1198 425 1159 q 334 1242 425 1242 l 338 1341 q 551 1305 479 1341 q 623 1207 623 1270 q 596 1144 623 1169 q 522 1112 569 1118 l 522 1069 l 347 1069 z "},"\u1ef7":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 269 860 l 254 945 q 347 988 347 949 q 256 1033 347 1033 l 260 1131 q 473 1096 401 1131 q 545 998 545 1061 q 518 934 545 960 q 444 902 491 909 l 444 860 l 269 860 z "},"\u1ef8":{"ha":872,"x_min":-2,"x_max":875,"o":"m 436 559 l 618 987 l 875 987 l 557 355 l 557 0 l 315 0 l 315 355 l -2 987 l 254 987 l 436 559 m 698 1246 q 653 1115 698 1168 q 541 1061 608 1061 q 441 1089 496 1061 q 353 1118 387 1118 q 316 1103 331 1118 q 300 1057 300 1088 l 174 1063 q 219 1194 174 1139 q 330 1249 264 1249 q 418 1224 363 1249 q 488 1196 473 1199 q 519 1192 503 1192 q 556 1207 541 1192 q 572 1253 572 1222 l 698 1246 z "},"\u1ef9":{"ha":720,"x_min":-3,"x_max":724,"o":"m 357 320 l 479 734 l 724 734 l 425 -123 l 412 -154 q 187 -296 349 -296 q 93 -283 142 -296 l 93 -119 l 123 -119 q 196 -105 171 -119 q 234 -56 222 -92 l 252 -7 l -3 734 l 241 734 l 357 320 m 620 1036 q 575 905 620 959 q 463 851 530 851 q 363 880 418 851 q 275 908 309 908 q 238 893 253 908 q 222 847 222 878 l 96 854 q 141 984 96 929 q 252 1039 186 1039 q 340 1014 286 1039 q 410 986 395 989 q 441 983 425 983 q 478 998 463 983 q 494 1044 494 1013 l 620 1036 z "},"\u20ab":{"ha":802,"x_min":35,"x_max":810,"o":"m 35 372 q 111 647 35 547 q 321 747 186 747 q 486 670 419 747 l 486 1042 l 715 1042 l 715 0 l 510 0 l 498 79 q 319 -14 428 -14 q 112 87 189 -14 q 35 372 35 187 m 264 358 q 378 163 264 163 q 486 227 454 163 l 486 506 q 379 571 455 571 q 264 400 273 571 l 264 358 m 810 824 l 315 824 l 315 954 l 810 954 l 810 824 m 709 -259 l 97 -259 l 97 -89 l 709 -89 l 709 -259 z "},"\u04ac":{"ha":876,"x_min":24,"x_max":850,"o":"m 850 804 l 553 804 l 553 0 l 315 0 l 315 804 l 24 804 l 24 987 l 850 987 l 850 804 m 689 -241 l 460 -241 l 460 151 l 689 151 l 689 -241 z "},"\u04ad":{"ha":728,"x_min":18,"x_max":707,"o":"m 707 559 l 475 559 l 475 0 l 245 0 l 245 559 l 18 559 l 18 734 l 707 734 l 707 559 m 642 -241 l 414 -241 l 414 151 l 642 151 l 642 -241 z "},"\u04cb":{"ha":970,"x_min":90,"x_max":897,"o":"m 897 987 l 897 0 l 660 0 l 660 365 l 590 356 l 503 351 q 197 437 303 351 q 90 682 92 524 l 90 987 l 328 987 l 328 686 q 367 569 328 605 q 503 534 406 534 l 523 534 q 660 547 606 538 l 660 987 l 897 987 m 718 -241 l 490 -241 l 490 151 l 718 151 l 718 -241 z "},"\u04cc":{"ha":774,"x_min":54,"x_max":716,"o":"m 716 0 l 486 0 l 486 220 q 418 214 447 214 q 146 284 237 214 q 54 494 55 354 l 54 734 l 283 734 l 283 492 q 311 411 283 433 q 418 390 339 390 q 486 396 452 390 l 486 734 l 716 734 l 716 0 m 542 -241 l 313 -241 l 313 151 l 542 151 l 542 -241 z "},"\u04f6":{"ha":774,"x_min":73,"x_max":741,"o":"m 741 804 l 311 804 l 311 0 l 73 0 l 73 987 l 741 987 l 741 804 m 474 -241 l 245 -241 l 245 151 l 474 151 l 474 -241 z "},"\u04f7":{"ha":581,"x_min":60,"x_max":578,"o":"m 578 557 l 289 557 l 289 0 l 60 0 l 60 734 l 578 734 l 578 557 m 456 -241 l 227 -241 l 227 151 l 456 151 l 456 -241 z "},"\u04be":{"ha":1036,"x_min":-54,"x_max":979,"o":"m 631 -16 q 287 98 410 -16 q 163 417 163 211 l 163 431 q 3 529 60 450 q -54 734 -54 608 l 95 734 q 163 597 95 630 q 221 805 165 711 q 373 949 276 898 q 587 1000 470 1001 q 876 876 772 1000 q 979 527 979 752 l 979 410 l 401 410 q 459 242 401 298 q 631 186 518 186 q 890 224 768 186 l 924 33 q 800 -1 884 14 q 631 -16 716 -16 m 587 798 q 452 743 501 798 q 401 598 402 688 l 742 598 l 742 619 q 702 751 742 705 q 587 798 662 798 m 741 -331 l 512 -331 l 512 62 l 741 62 l 741 -331 z "},"\u04bf":{"ha":833,"x_min":-56,"x_max":844,"o":"m 534 -14 q 349 26 431 -14 q 217 138 267 66 q 159 303 168 211 q 0 396 56 322 q -56 586 -56 469 l 75 586 q 162 446 75 477 q 274 667 182 587 q 510 747 366 747 q 754 651 665 747 q 844 384 844 555 l 844 295 l 389 295 q 443 198 401 233 q 549 163 484 163 q 720 239 659 163 l 824 115 q 703 21 781 56 q 534 -14 625 -14 m 509 571 q 389 438 408 571 l 620 438 l 620 456 q 592 541 621 511 q 509 571 563 571 m 604 -322 l 375 -322 l 375 71 l 604 71 l 604 -322 z "},"\u04bb":{"ha":784,"x_min":59,"x_max":721,"o":"m 288 655 q 475 747 361 747 q 658 675 596 747 q 721 463 720 604 l 721 0 l 492 0 l 492 458 q 468 544 492 516 q 387 571 444 571 q 288 526 317 571 l 288 0 l 59 0 l 59 1042 l 288 1042 l 288 655 z "},"\u048c":{"ha":865,"x_min":-24,"x_max":831,"o":"m 471 736 l 314 736 l 314 648 l 437 648 q 644 608 554 648 q 783 495 734 568 q 831 328 831 422 q 723 91 831 182 q 433 0 615 0 l 75 0 l 75 736 l -24 736 l -24 865 l 75 865 l 75 987 l 314 987 l 314 865 l 471 865 l 471 736 m 314 465 l 314 183 l 436 183 q 551 224 509 183 q 593 329 593 264 q 551 427 593 390 q 435 465 509 465 l 314 465 z "},"\u0462":{"ha":865,"x_min":-24,"x_max":831,"o":"m 471 736 l 314 736 l 314 648 l 437 648 q 644 608 554 648 q 783 495 734 568 q 831 328 831 422 q 723 91 831 182 q 433 0 615 0 l 75 0 l 75 736 l -24 736 l -24 865 l 75 865 l 75 987 l 314 987 l 314 865 l 471 865 l 471 736 m 314 465 l 314 183 l 436 183 q 551 224 509 183 q 593 329 593 264 q 551 427 593 390 q 435 465 509 465 l 314 465 z "},"\u0492":{"ha":774,"x_min":-25,"x_max":741,"o":"m 470 445 l 311 445 l 311 0 l 73 0 l 73 445 l -25 445 l -25 574 l 73 574 l 73 987 l 741 987 l 741 804 l 311 804 l 311 574 l 470 574 l 470 445 z "},"\u0493":{"ha":581,"x_min":-58,"x_max":578,"o":"m 437 302 l 289 302 l 289 0 l 60 0 l 60 302 l -58 302 l -58 432 l 60 432 l 60 734 l 578 734 l 578 557 l 289 557 l 289 432 l 437 432 l 437 302 z "},"\u049e":{"ha":912,"x_min":-50,"x_max":928,"o":"m 437 391 l 325 391 l 325 0 l 87 0 l 87 750 l -50 750 l -50 880 l 87 880 l 87 987 l 325 987 l 325 880 l 445 880 l 445 750 l 325 750 l 325 606 l 416 606 l 606 987 l 895 987 l 623 532 l 928 0 l 647 0 l 437 391 z "},"\u049f":{"ha":772,"x_min":-63,"x_max":779,"o":"m 351 292 l 308 292 l 308 0 l 79 0 l 79 819 l -63 819 l -63 948 l 79 948 l 79 1042 l 308 1042 l 308 948 l 432 948 l 432 819 l 308 819 l 308 465 l 346 465 l 494 734 l 758 734 l 536 401 l 779 0 l 517 0 l 351 292 z "},"\u04b0":{"ha":872,"x_min":-2,"x_max":875,"o":"m 691 348 l 557 348 l 557 0 l 315 0 l 315 348 l 196 348 l 196 477 l 254 477 l -2 987 l 254 987 l 436 559 l 618 987 l 875 987 l 618 477 l 691 477 l 691 348 z "},"\u04b1":{"ha":714,"x_min":0,"x_max":710,"o":"m 608 14 l 475 14 l 471 0 l 469 0 l 469 -283 l 240 -283 l 240 0 l 239 0 l 234 14 l 113 14 l 113 143 l 192 143 l 0 734 l 241 734 l 358 252 l 469 734 l 710 734 l 517 143 l 608 143 l 608 14 z "},"\u04fe":{"ha":886,"x_min":3,"x_max":884,"o":"m 693 441 l 632 441 l 884 0 l 609 0 l 443 334 l 277 0 l 3 0 l 254 441 l 198 441 l 198 571 l 244 571 l 10 987 l 281 987 l 443 659 l 604 987 l 876 987 l 642 571 l 693 571 l 693 441 z "},"\u04ff":{"ha":715,"x_min":7,"x_max":715,"o":"m 614 312 l 547 312 l 715 0 l 476 0 l 361 217 l 248 0 l 7 0 l 176 312 l 119 312 l 119 441 l 176 441 l 18 734 l 258 734 l 361 532 l 468 734 l 705 734 l 547 441 l 614 441 l 614 312 z "},"\u0511":{"ha":786,"x_min":63,"x_max":751,"o":"m 291 228 q 322 171 291 193 q 406 149 354 149 q 494 169 466 149 q 522 217 522 189 l 751 217 q 658 49 751 112 q 421 -14 565 -14 q 162 48 261 -14 q 63 208 63 109 q 99 313 63 270 q 203 378 136 356 q 110 443 144 402 q 76 533 76 484 q 170 690 76 633 q 421 747 263 747 q 650 683 562 747 q 739 521 739 620 l 511 521 q 481 569 511 553 q 406 584 452 584 q 332 564 359 584 q 304 512 304 545 q 423 446 304 446 l 530 446 l 530 305 l 414 305 q 291 228 291 305 z "},"\u20a3":{"ha":760,"x_min":-19,"x_max":735,"o":"m 696 393 l 313 393 l 313 0 l 75 0 l 75 987 l 735 987 l 735 804 l 313 804 l 313 576 l 696 576 l 696 393 m 476 136 l -19 136 l -19 266 l 476 266 l 476 136 z "},"\u2015":{"ha":1045,"x_min":59,"x_max":1013,"o":"m 1013 392 l 59 392 l 59 571 l 1013 571 l 1013 392 z "},"\u1f4d":{"ha":1006,"x_min":-335,"x_max":958,"o":"m 958 473 q 905 218 958 329 q 752 46 851 106 q 528 -14 654 -14 q 304 44 401 -14 q 152 210 206 102 q 94 458 97 318 l 94 513 q 148 769 94 659 q 300 941 201 880 q 526 1001 399 1001 q 750 941 652 1001 q 903 771 848 882 q 958 519 958 661 l 958 473 m 716 515 q 667 738 716 662 q 526 814 618 814 q 337 546 347 814 l 336 473 q 385 250 336 328 q 528 172 433 172 q 667 249 618 172 q 716 469 715 326 l 716 515 m -130 802 l -54 1014 l 89 1014 l 89 1000 l -67 783 l -130 783 l -130 802 m -335 1014 l -221 1014 l -221 950 q -170 835 -221 866 l -228 770 q -306 841 -278 794 q -335 944 -334 888 l -335 1014 z "}},"familyName":"Roboto Black","ascender":1289,"descender":-339,"underlinePosition":-102,"underlineThickness":68,"boundingBox":{"yMin":-376,"xMin":-1001,"yMax":1467,"xMax":1683},"resolution":1000,"original_font_information":{"format":0,"copyright":"Copyright 2011 Google Inc. All Rights Reserved.","fontFamily":"Roboto Black","fontSubfamily":"Regular","uniqueID":"Roboto Black","fullName":"Roboto Black","version":"Version 2.137; 2017","postScriptName":"Roboto-Black","trademark":"Roboto is a trademark of Google.","designer":"Google","manufacturerURL":"Google.com","designerURL":"Christian Robertson","licence":"Licensed under the Apache License, Version 2.0","licenceURL":"http://www.apache.org/licenses/LICENSE-2.0","preferredFamily":"Roboto","preferredSubfamily":"Black"},"cssFontWeight":"normal","cssFontStyle":"normal"}');function HG(){var e;return e="#396EB0",(0,cf.jsxs)(cf.Fragment,{children:[(0,cf.jsx)("group",{position:[120,90,1300],children:(0,cf.jsx)(xy,{top:!0,center:!0,children:(0,cf.jsxs)(Yy,{font:NG,size:10,height:3,lineHeight:.5,letterSpacing:-.025,children:["Content Creator.",(0,cf.jsx)("meshPhongMaterial",{attach:"material",color:e})]})})}),(0,cf.jsx)("group",{position:[-120,100,1360],children:(0,cf.jsx)(xy,{top:!0,center:!0,children:(0,cf.jsxs)(Yy,{font:NG,size:15,height:3,lineHeight:.5,letterSpacing:-.025,children:["Fullstack Web Developer!\n                ",(0,cf.jsx)("meshPhongMaterial",{attach:"material",color:e})]})})}),(0,cf.jsx)("group",{position:[120,50,1380],children:(0,cf.jsx)(xy,{top:!0,center:!0,children:(0,cf.jsxs)(Yy,{font:NG,size:10,height:3,lineHeight:.5,letterSpacing:-.025,children:[" Computer Science Graduate.\n                ",(0,cf.jsx)("meshPhongMaterial",{attach:"material",color:e})]})})}),(0,cf.jsx)("group",{position:[-120,40,1400],children:(0,cf.jsx)(xy,{top:!0,center:!0,children:(0,cf.jsxs)(Yy,{font:NG,size:15,height:3,lineHeight:.5,letterSpacing:-.025,children:["Egyptian.",(0,cf.jsx)("meshPhongMaterial",{attach:"material",color:e})]})})}),(0,cf.jsx)(KG,{modelPath:"/nefertiti_bust.glb",position:new Yi(-30,20,1400),scale:[80,80,80],rotation:[0,0,0]}),(0,cf.jsx)(KG,{modelPath:"/egyptian_shop.glb",position:new Yi(120,0,1350),scale:[.1,.1,.1],rotation:[0,180,0]}),(0,cf.jsx)(KG,{modelPath:"/antena.glb",position:new Yi(120,60,500),scale:[1,1,1],rotation:[.3,5,0]})]})}var MG=function(e){return function(t){e.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t)}))}},FG=["makeDefault"],LG=i.forwardRef((function(e,t){var n=e.makeDefault,a=Yd(e,FG),l=_h((function(e){return e.set})),r=_h((function(e){return e.camera})),o=_h((function(e){return e.size})),g=i.useRef(null);return i.useLayoutEffect((function(){a.manual||(g.current.aspect=o.width/o.height)}),[o,a]),i.useLayoutEffect((function(){g.current.updateProjectionMatrix()})),i.useLayoutEffect((function(){if(n){var e=r;return l((function(){return{camera:g.current}})),function(){return l((function(){return{camera:e}}))}}}),[g,n,l]),i.createElement("perspectiveCamera",rA({ref:MG([g,t])},a))}));function _G(e){var t=e.position,n=void 0===t?new Yi(0,0,0):t,i=e.positions,a=Jh(zy,"/b.glb"),l={fov:100,position:i.cameraPosition,aspect:window.innerWidth/window.innerHeight,near:1,far:1e4};return(0,cf.jsxs)("group",{position:n,scale:[.05,.05,.05],rotation:[0,0,-.4,0],children:[(0,cf.jsx)(LG,Kd({makeDefault:!0},l)),(0,cf.jsx)("primitive",{object:a.scene})]})}var TG=n(7248),EG=n(327),JG=n(4164);var UG=function(e){e()},DG=function(){return UG},PG=(0,i.createContext)(null);function QG(){return(0,i.useContext)(PG)}var OG=function(){throw new Error("uSES not initialized!")},jG=OG,$G=function(e,t){return e===t};function eB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PG,t=e===PG?QG:function(){return(0,i.useContext)(e)};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$G;var a=t(),l=a.store,r=a.subscription,o=a.getServerState,g=jG(r.addNestedSub,l.getState,o||l.getState,e,n);return(0,i.useDebugValue)(g),g}}var tB=eB();n(2110),n(6900);var nB={notify:function(){},get:function(){return[]}};function iB(e,t){var n,i=nB;function a(){r.onStateChange&&r.onStateChange()}function l(){n||(n=t?t.addNestedSub(a):e.subscribe(a),i=function(){var e=DG(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var i=!0,a=n={callback:e,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){i&&null!==t&&(i=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}())}var r={addNestedSub:function(e){return l(),i.subscribe(e)},notifyNestedSubs:function(){i.notify()},handleChangeWrapper:a,isSubscribed:function(){return Boolean(n)},trySubscribe:l,tryUnsubscribe:function(){n&&(n(),n=void 0,i.clear(),i=nB)},getListeners:function(){return i}};return r}var aB=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?i.useLayoutEffect:i.useEffect;var lB=function(e){var t=e.store,n=e.context,a=e.children,l=e.serverState,r=(0,i.useMemo)((function(){var e=iB(t);return{store:t,subscription:e,getServerState:l?function(){return l}:void 0}}),[t,l]),o=(0,i.useMemo)((function(){return t.getState()}),[t]);aB((function(){var e=r.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[r,o]);var g=n||PG;return i.createElement(g.Provider,{value:r},a)};function rB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PG,t=e===PG?QG:function(){return(0,i.useContext)(e)};return function(){return t().store}}var oB=rB();function gB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PG,t=e===PG?oB:rB(e);return function(){return t().dispatch}}var sB,uB=gB();function cB(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function IB(e){return!!e&&!!e[tZ]}function CB(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===nZ}(e)||Array.isArray(e)||!!e[eZ]||!!e.constructor[eZ]||bB(e)||vB(e))}function dB(e,t,n){void 0===n&&(n=!1),0===hB(e)?(n?Object.keys:iZ)(e).forEach((function(i){n&&"symbol"==typeof i||t(i,e[i],e)})):e.forEach((function(n,i){return t(i,n,e)}))}function hB(e){var t=e[tZ];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:bB(e)?2:vB(e)?3:0}function AB(e,t){return 2===hB(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function mB(e,t){return 2===hB(e)?e.get(t):e[t]}function pB(e,t,n){var i=hB(e);2===i?e.set(t,n):3===i?(e.delete(t),e.add(n)):e[t]=n}function fB(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function bB(e){return QB&&e instanceof Map}function vB(e){return OB&&e instanceof Set}function yB(e){return e.o||e.t}function GB(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=aZ(e);delete t[tZ];for(var n=iZ(t),i=0;i<n.length;i++){var a=n[i],l=t[a];!1===l.writable&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(t[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function BB(e,t){return void 0===t&&(t=!1),xB(e)||IB(e)||!CB(e)||(hB(e)>1&&(e.set=e.add=e.clear=e.delete=ZB),Object.freeze(e),t&&dB(e,(function(e,t){return BB(t,!0)}),!0)),e}function ZB(){cB(2)}function xB(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function wB(e){var t=lZ[e];return t||cB(18,e),t}function qB(e,t){lZ[e]||(lZ[e]=t)}function WB(){return DB}function SB(e,t){t&&(wB("Patches"),e.u=[],e.s=[],e.v=t)}function RB(e){VB(e),e.p.forEach(kB),e.p=null}function VB(e){e===DB&&(DB=e.l)}function XB(e){return DB={p:[],l:DB,h:e,m:!0,_:0}}function kB(e){var t=e[tZ];0===t.i||1===t.i?t.j():t.O=!0}function YB(e,t){t._=t.p.length;var n=t.p[0],i=void 0!==e&&e!==n;return t.h.g||wB("ES5").S(t,e,i),i?(n[tZ].P&&(RB(t),cB(4)),CB(e)&&(e=zB(t,e),t.l||NB(t,e)),t.u&&wB("Patches").M(n[tZ].t,e,t.u,t.s)):e=zB(t,n,[]),RB(t),t.u&&t.v(t.u,t.s),e!==$B?e:void 0}function zB(e,t,n){if(xB(t))return t;var i=t[tZ];if(!i)return dB(t,(function(a,l){return KB(e,i,t,a,l,n)}),!0),t;if(i.A!==e)return t;if(!i.P)return NB(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var a=4===i.i||5===i.i?i.o=GB(i.k):i.o;dB(3===i.i?new Set(a):a,(function(t,l){return KB(e,i,a,t,l,n)})),NB(e,a,!1),n&&e.u&&wB("Patches").R(i,n,e.u,e.s)}return i.o}function KB(e,t,n,i,a,l){if(IB(a)){var r=zB(e,a,l&&t&&3!==t.i&&!AB(t.D,i)?l.concat(i):void 0);if(pB(n,i,r),!IB(r))return;e.m=!1}if(CB(a)&&!xB(a)){if(!e.h.F&&e._<1)return;zB(e,a),t&&t.A.l||NB(e,a)}}function NB(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&BB(t,n)}function HB(e,t){var n=e[tZ];return(n?yB(n):e)[t]}function MB(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=Object.getPrototypeOf(n)}}function FB(e){e.P||(e.P=!0,e.l&&FB(e.l))}function LB(e){e.o||(e.o=GB(e.t))}function _B(e,t,n){var i=bB(t)?wB("MapSet").N(t,n):vB(t)?wB("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),i={i:n?1:0,A:t?t.A:WB(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=i,l=rZ;n&&(a=[i],l=oZ);var r=Proxy.revocable(a,l),o=r.revoke,g=r.proxy;return i.k=g,i.j=o,g}(t,n):wB("ES5").J(t,n);return(n?n.A:WB()).p.push(i),i}function TB(e){return IB(e)||cB(22,e),function e(t){if(!CB(t))return t;var n,i=t[tZ],a=hB(t);if(i){if(!i.P&&(i.i<4||!wB("ES5").K(i)))return i.t;i.I=!0,n=EB(t,a),i.I=!1}else n=EB(t,a);return dB(n,(function(t,a){i&&mB(i.t,t)===a||pB(n,t,e(a))})),3===a?new Set(n):n}(e)}function EB(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return GB(e)}function JB(){function e(e,t){var n=a[e];return n?n.enumerable=t:a[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[tZ];return rZ.get(t,e)},set:function(t){var n=this[tZ];rZ.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var a=e[t][tZ];if(!a.P)switch(a.i){case 5:i(a)&&FB(a);break;case 4:n(a)&&FB(a)}}}function n(e){for(var t=e.t,n=e.k,i=iZ(n),a=i.length-1;a>=0;a--){var l=i[a];if(l!==tZ){var r=t[l];if(void 0===r&&!AB(t,l))return!0;var o=n[l],g=o&&o[tZ];if(g?g.t!==r:!fB(o,r))return!0}}var s=!!t[tZ];return i.length!==iZ(t).length+(s?0:1)}function i(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var i=0;i<t.length;i++)if(!t.hasOwnProperty(i))return!0;return!1}var a={};qB("ES5",{J:function(t,n){var i=Array.isArray(t),a=function(t,n){if(t){for(var i=Array(n.length),a=0;a<n.length;a++)Object.defineProperty(i,""+a,e(a,!0));return i}var l=aZ(n);delete l[tZ];for(var r=iZ(l),o=0;o<r.length;o++){var g=r[o];l[g]=e(g,t||!!l[g].enumerable)}return Object.create(Object.getPrototypeOf(n),l)}(i,t),l={i:i?5:4,A:n?n.A:WB(),P:!1,I:!1,D:{},l:n,t:t,k:a,o:null,O:!1,C:!1};return Object.defineProperty(a,tZ,{value:l,writable:!0}),a},S:function(e,n,a){a?IB(n)&&n[tZ].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[tZ];if(n){var a=n.t,l=n.k,r=n.D,o=n.i;if(4===o)dB(l,(function(t){t!==tZ&&(void 0!==a[t]||AB(a,t)?r[t]||e(l[t]):(r[t]=!0,FB(n)))})),dB(a,(function(e){void 0!==l[e]||AB(l,e)||(r[e]=!1,FB(n))}));else if(5===o){if(i(n)&&(FB(n),r.length=!0),l.length<a.length)for(var g=l.length;g<a.length;g++)r[g]=!1;else for(var s=a.length;s<l.length;s++)r[s]=!0;for(var u=Math.min(l.length,a.length),c=0;c<u;c++)l.hasOwnProperty(c)||(r[c]=!0),void 0===r[c]&&e(l[c])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):i(e)}})}!function(e){jG=e}(EG.useSyncExternalStoreWithSelector),function(e){e}(TG.useSyncExternalStore),sB=JG.unstable_batchedUpdates,UG=sB;var UB,DB,PB="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),QB="undefined"!=typeof Map,OB="undefined"!=typeof Set,jB="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,$B=PB?Symbol.for("immer-nothing"):((UB={})["immer-nothing"]=!0,UB),eZ=PB?Symbol.for("immer-draftable"):"__$immer_draftable",tZ=PB?Symbol.for("immer-state"):"__$immer_state",nZ=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),iZ="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,aZ=Object.getOwnPropertyDescriptors||function(e){var t={};return iZ(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},lZ={},rZ={get:function(e,t){if(t===tZ)return e;var n=yB(e);if(!AB(n,t))return function(e,t,n){var i,a=MB(t,n);return a?"value"in a?a.value:null===(i=a.get)||void 0===i?void 0:i.call(e.k):void 0}(e,n,t);var i=n[t];return e.I||!CB(i)?i:i===HB(e.t,t)?(LB(e),e.o[t]=_B(e.A.h,i,e)):i},has:function(e,t){return t in yB(e)},ownKeys:function(e){return Reflect.ownKeys(yB(e))},set:function(e,t,n){var i=MB(yB(e),t);if(null==i?void 0:i.set)return i.set.call(e.k,n),!0;if(!e.P){var a=HB(yB(e),t),l=null==a?void 0:a[tZ];if(l&&l.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(fB(n,a)&&(void 0!==n||AB(e.t,t)))return!0;LB(e),FB(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==HB(e.t,t)||t in e.t?(e.D[t]=!1,LB(e),FB(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=yB(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:i.enumerable,value:n[t]}:i},defineProperty:function(){cB(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){cB(12)}},oZ={};dB(rZ,(function(e,t){oZ[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),oZ.deleteProperty=function(e,t){return oZ.set.call(this,e,t,void 0)},oZ.set=function(e,t,n){return rZ.set.call(this,e[0],t,n,e[0])};var gZ=function(){function e(e){var t=this;this.g=jB,this.F=!0,this.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var a=n;n=e;var l=t;return function(e){var t=this;void 0===e&&(e=a);for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return l.produce(e,(function(e){var i;return(i=n).call.apply(i,[t,e].concat(r))}))}}var r;if("function"!=typeof n&&cB(6),void 0!==i&&"function"!=typeof i&&cB(7),CB(e)){var o=XB(t),g=_B(t,e,void 0),s=!0;try{r=n(g),s=!1}finally{s?RB(o):VB(o)}return"undefined"!=typeof Promise&&r instanceof Promise?r.then((function(e){return SB(o,i),YB(e,o)}),(function(e){throw RB(o),e})):(SB(o,i),YB(r,o))}if(!e||"object"!=typeof e){if(void 0===(r=n(e))&&(r=e),r===$B&&(r=void 0),t.F&&BB(r,!0),i){var u=[],c=[];wB("Patches").M(e,r,u,c),i(u,c)}return r}cB(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var i=arguments.length,a=Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(a))}))};var i,a,l=t.produce(e,n,(function(e,t){i=e,a=t}));return"undefined"!=typeof Promise&&l instanceof Promise?l.then((function(e){return[e,i,a]})):[l,i,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){CB(e)||cB(8),IB(e)&&(e=TB(e));var t=XB(this),n=_B(this,e,void 0);return n[tZ].C=!0,VB(t),n},t.finishDraft=function(e,t){var n=(e&&e[tZ]).A;return SB(n,t),YB(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!jB&&cB(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));var a=wB("Patches").$;return IB(e)?a(e,t):this.produce(e,(function(e){return a(e,t)}))},e}(),sZ=new gZ,uZ=sZ.produce,cZ=(sZ.produceWithPatches.bind(sZ),sZ.setAutoFreeze.bind(sZ),sZ.setUseProxies.bind(sZ),sZ.applyPatches.bind(sZ),sZ.createDraft.bind(sZ),sZ.finishDraft.bind(sZ),uZ);function IZ(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var CZ="function"===typeof Symbol&&Symbol.observable||"@@observable",dZ=function(){return Math.random().toString(36).substring(7).split("").join(".")},hZ={INIT:"@@redux/INIT"+dZ(),REPLACE:"@@redux/REPLACE"+dZ(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+dZ()}};function AZ(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function mZ(e,t,n){var i;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(IZ(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(IZ(1));return n(mZ)(e,t)}if("function"!==typeof e)throw new Error(IZ(2));var a=e,l=t,r=[],o=r,g=!1;function s(){o===r&&(o=r.slice())}function u(){if(g)throw new Error(IZ(3));return l}function c(e){if("function"!==typeof e)throw new Error(IZ(4));if(g)throw new Error(IZ(5));var t=!0;return s(),o.push(e),function(){if(t){if(g)throw new Error(IZ(6));t=!1,s();var n=o.indexOf(e);o.splice(n,1),r=null}}}function I(e){if(!AZ(e))throw new Error(IZ(7));if("undefined"===typeof e.type)throw new Error(IZ(8));if(g)throw new Error(IZ(9));try{g=!0,l=a(l,e)}finally{g=!1}for(var t=r=o,n=0;n<t.length;n++){(0,t[n])()}return e}function C(e){if("function"!==typeof e)throw new Error(IZ(10));a=e,I({type:hZ.REPLACE})}function d(){var e,t=c;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(IZ(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}})[CZ]=function(){return this},e}return I({type:hZ.INIT}),(i={dispatch:I,subscribe:c,getState:u,replaceReducer:C})[CZ]=d,i}function pZ(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var a=t[i];0,"function"===typeof e[a]&&(n[a]=e[a])}var l,r=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:hZ.INIT}))throw new Error(IZ(12));if("undefined"===typeof n(void 0,{type:hZ.PROBE_UNKNOWN_ACTION()}))throw new Error(IZ(13))}))}(n)}catch(cy){l=cy}return function(e,t){if(void 0===e&&(e={}),l)throw l;for(var i=!1,a={},o=0;o<r.length;o++){var g=r[o],s=n[g],u=e[g],c=s(u,t);if("undefined"===typeof c){t&&t.type;throw new Error(IZ(14))}a[g]=c,i=i||c!==u}return(i=i||r.length!==Object.keys(e).length)?a:e}}function fZ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function bZ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),i=function(){throw new Error(IZ(15))},a={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map((function(e){return e(a)}));return i=fZ.apply(void 0,l)(n.dispatch),Kd(Kd({},n),{},{dispatch:i})}}}function vZ(e){return function(t){var n=t.dispatch,i=t.getState;return function(t){return function(a){return"function"===typeof a?a(n,i,e):t(a)}}}}var yZ=vZ();yZ.withExtraArgument=vZ;var GZ=yZ,BZ=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ZZ=function(e,t){for(var n=0,i=t.length,a=e.length;n<i;n++,a++)e[a]=t[n];return e},xZ=Object.defineProperty,wZ=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),qZ=Object.prototype.hasOwnProperty,WZ=Object.prototype.propertyIsEnumerable,SZ=function(e,t,n){return t in e?xZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},RZ=function(e,t){for(var n in t||(t={}))qZ.call(t,n)&&SZ(e,n,t[n]);if(wZ)for(var i=0,a=wZ(t);i<a.length;i++){n=a[i];WZ.call(t,n)&&SZ(e,n,t[n])}return e},VZ="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?fZ:fZ.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function XZ(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var kZ=function(e){function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e.apply(this,n)||this;return Object.setPrototypeOf(a,t.prototype),a}return BZ(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,ZZ([void 0],e[0].concat(this)))):new(t.bind.apply(t,ZZ([void 0],e.concat(this))))},t}(Array);function YZ(e){return CB(e)?cZ(e,(function(){})):e}function zZ(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,i=(e.immutableCheck,e.serializableCheck,new kZ);n&&(!function(e){return"boolean"===typeof e}(n)?i.push(GZ.withExtraArgument(n.extraArgument)):i.push(GZ));0;return i}(e)}}function KZ(e,t){function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(t){var a=t.apply(void 0,n);if(!a)throw new Error("prepareAction did not return an object");return RZ(RZ({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function NZ(e){var t,n={},i=[],a={addCase:function(e,t){var i="string"===typeof e?e:e.type;if(i in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[i]=t,a},addMatcher:function(e,t){return i.push({matcher:e,reducer:t}),a},addDefaultCase:function(e){return t=e,a}};return e(a),[n,i,t]}Object.assign;var HZ="listenerMiddleware";KZ(HZ+"/add"),KZ(HZ+"/removeAll"),KZ(HZ+"/remove");JB();var MZ,FZ=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,i="function"==typeof e.initialState?e.initialState:YZ(e.initialState),a=e.reducers||{},l=Object.keys(a),r={},o={},g={};function s(){var t="function"===typeof e.extraReducers?NZ(e.extraReducers):[e.extraReducers],n=t[0],a=void 0===n?{}:n,l=t[1],r=void 0===l?[]:l,g=t[2],s=void 0===g?void 0:g,u=RZ(RZ({},a),o);return function(e,t,n,i){void 0===n&&(n=[]);var a,l="function"===typeof t?NZ(t):[t,n,i],r=l[0],o=l[1],g=l[2];if(function(e){return"function"===typeof e}(e))a=function(){return YZ(e())};else{var s=YZ(e);a=function(){return s}}function u(e,t){void 0===e&&(e=a());var n=ZZ([r[t.type]],o.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[g]),n.reduce((function(e,n){if(n){var i;if(IB(e))return void 0===(i=n(e,t))?e:i;if(CB(e))return cZ(e,(function(e){return n(e,t)}));if(void 0===(i=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}return e}),e)}return u.getInitialState=a,u}(i,u,r,s)}return l.forEach((function(e){var n,i,l=a[e],s=t+"/"+e;"reducer"in l?(n=l.reducer,i=l.prepare):n=l,r[e]=n,o[s]=n,g[e]=i?KZ(s,i):KZ(s)})),{name:t,reducer:function(e,t){return n||(n=s()),n(e,t)},actions:g,caseReducers:r,getInitialState:function(){return n||(n=s()),n.getInitialState()}}}({name:"experience",initialState:{flag:!1,experience:{flag:!1}},reducers:{setExperience:function(e,t){console.log("hellodafuq"),console.log(t.payload),e.experience=Kd({},t.payload)}}}),LZ=FZ.actions.setExperience,_Z=FZ.reducer,TZ=[{from:"Nov 2021",to:"Now",title:"Software Engineer",company:"Egyptian Armed Forces",positionX:120,positionZ:1200,color:MZ="#396EB0",component:function(){return(0,cf.jsxs)(cf.Fragment,{children:[(0,cf.jsx)("p",{children:(0,cf.jsx)("strong",{children:"Air Defense Information System Center - Currently -"})}),(0,cf.jsx)("p",{children:"* Leading a team of software engineers to develop and refactor military-based apps."}),(0,cf.jsx)("p",{children:(0,cf.jsx)("strong",{children:"Innovation Center at Faculty Of Reserved Officers"})}),(0,cf.jsx)("p",{children:"* Created a smart glasses to help the visually impaired using computer vision algorithms (YOLO,HOG,OCR) and mapping techniques to describe the surroundings through voice commands."}),(0,cf.jsx)("p",{children:"* Managed to enhance the performance of the real-time mode from 3 fps to 28 fps through transferring the heavy computations from the raspberry pi to a server by Implementing WebSockets Client-Server Architecture using Python/Flask."})]})}},{from:"Sep 2021",to:"Nov 2021",title:"Software Engineer",company:"Spiritude",positionX:-120,positionZ:1100,color:MZ,component:function(){return(0,cf.jsxs)(cf.Fragment,{children:[(0,cf.jsx)("p",{children:"* Developed a generic form generator using React to generate complex forms easier and faster."}),(0,cf.jsx)("p",{children:"* Implemented an accounting module and integrated It with the other parts of the Company's off-the-shelf ERP."}),(0,cf.jsx)("p",{children:"* Created custom yet integrated ERP modules to provide clients with a tailored work cycles to fit with their business needs."})," ",(0,cf.jsx)("br",{}),(0,cf.jsx)("p",{children:(0,cf.jsx)("em",{children:"Using Node.js, React, MySQL and MongoDB."})})]})}},{from:"Aug 2020",to:"Sep 2021",title:"Full-Stack Web Developer",company:"Kernelz",positionX:120,positionZ:1e3,color:MZ,component:function(){return(0,cf.jsxs)(cf.Fragment,{children:[(0,cf.jsx)("p",{children:"* Started my own software house, Recruited another full-time full-stack web developer to accelerate the delivery time."}),(0,cf.jsx)("p",{children:"* Created an off-the-shelf ERP and POS web apps with a generic and easy to custom user interface using React and a generic back-end with a tolerant database design using Node.js and Sequelize."}),(0,cf.jsx)("p",{children:"* Our apps have been sold to eight various clients with a different business logic but thanks to the generic code design It wasn't that hard to cope with the differences."}),(0,cf.jsx)("br",{}),(0,cf.jsx)("p",{children:(0,cf.jsx)("em",{children:"Our Clients are Captain Ayman Driving School , Aluwalls , Taj Carpet , 2M Clothes Factory and ICS Gas Company."})})]})}},{from:"Dec 2019",to:"May 2020",title:"Full-Stack Web Developer",company:"Etgo",positionX:-120,positionZ:900,color:MZ,component:function(){return(0,cf.jsxs)("dev",{style:{textAlign:"left"},children:[(0,cf.jsx)("p",{children:"* Developed a customized point of sale web app using the PERN stack."}),(0,cf.jsx)("p",{children:"* Integrated it with the company's GraphQL API."}),(0,cf.jsx)("p",{children:"* Refactored some of the company's legacy code which was written using the MERN stack."}),(0,cf.jsx)("p",{children:"* Improved the overall performance of the app, Some end points responses times dropped from 6.1 seconds to 121 milliseconds."})]})}},{from:"Jan 2019",to:"Dec 2019",title:"Full-Stack Web Developer",company:"Freelance",positionX:120,positionZ:800,color:MZ,component:function(){return(0,cf.jsxs)("dev",{children:[(0,cf.jsx)("p",{children:"I had two major projects"}),(0,cf.jsx)("p",{children:(0,cf.jsxs)("strong",{children:["Custom Accounting and CRM web app for Egythai tourism company"," "]})}),(0,cf.jsx)("p",{children:"* The app delivers a custom detailed accounting and sales reports based on the day to day company's transactions It has been developed using Node.js,React and MySQL."}),(0,cf.jsx)("p",{children:(0,cf.jsx)("strong",{children:"ERP web app with booking features for Captain Ayman driving school"})}),(0,cf.jsx)("p",{children:"* The app achieved an easier yet effective way to manage a time sensitive booking process across all the branches of the school and delivers the needed reports,It has been developed using Node.js,React ,MySQL and MongoDB."}),(0,cf.jsx)("br",{}),(0,cf.jsx)("p",{children:(0,cf.jsx)("em",{children:"Both projects have been deployed on Ubuntu VPSs from Digital Ocean."})})]})}},{from:"Aug 2017",to:"Jan 2018",title:"Software Engineer Intern",company:"Pinerium",positionX:-120,positionZ:700,color:"#396EB0",component:function(){return(0,cf.jsxs)("dev",{style:{textAlign:"left"},children:[(0,cf.jsx)("p",{children:(0,cf.jsxs)("strong",{children:["* Participated in 'Egypt IoT Challenge' competition under the umbrella of the company."," "]})}),(0,cf.jsx)("p",{children:(0,cf.jsx)("strong",{children:"* Progammed a Smart traffic light control system my role was to develop the following"})}),(0,cf.jsx)("p",{children:"- A computer vision code which recognizes cars and counts them in each lane using Python, OpenCV."}),(0,cf.jsx)("p",{children:"- A code which connects each node to the central server over WebSockets protocol using Python and Tornado."}),(0,cf.jsx)("p",{children:"- An interface that communicates with users using Node.js and Express which has been deployed to a raspberry pi."})]})}}];function EZ(e){var t=e.from,n=e.to,a=e.title,l=e.company,r=e.positionX,o=e.positionZ,g=e.color,u=s((0,i.useState)(0),2),c=(u[0],u[1]),I=s((0,i.useState)(10),2),C=I[0],d=I[1];return(0,cf.jsxs)("group",{onClick:function(){c((function(e){return console.log(e),1==e?(d(10),!e):(d(12),!e)}))},children:[(0,cf.jsx)("group",{position:[r,50,o],children:(0,cf.jsx)(xy,{top:!0,center:!0,children:(0,cf.jsxs)(Yy,{font:NG,size:C,height:3,lineHeight:.5,letterSpacing:-.025,children:["".concat(t," - ").concat(n),(0,cf.jsx)("meshPhongMaterial",{attach:"material",color:g})]})})}),(0,cf.jsx)("group",{position:[r,35,o],children:(0,cf.jsx)(xy,{top:!0,center:!0,children:(0,cf.jsxs)(Yy,{font:NG,size:C-5,height:1,lineHeight:.5,letterSpacing:-.025,children:["".concat(a," @"),(0,cf.jsx)("meshPhongMaterial",{attach:"material",color:g})]})})}),(0,cf.jsx)("group",{position:[r,28,o],children:(0,cf.jsx)(xy,{top:!0,center:!0,children:(0,cf.jsxs)(Yy,{font:NG,size:C-5,height:1,lineHeight:.5,letterSpacing:-.025,children:["".concat(l),(0,cf.jsx)("meshPhongMaterial",{attach:"material",color:g})]})})})]})}function JZ(e){var t=e.scarabPosition,n=(e.setCurrentExperience,s((0,i.useState)([]),2)),a=n[0],l=n[1],r=uB();return(0,i.useState)((function(){l([]);var e=!1;r(LZ({flag:!1})),TZ.map((function(n){t.z-n.positionZ>5&&t.z-n.positionZ<200&&(e||r(LZ(Kd(Kd({},n),{},{flag:!0}))),e=!0,l((function(e){var t=e;return t.push(n),t})))}))}),[t]),(0,cf.jsx)(cf.Fragment,{children:a.map((function(e){return(0,cf.jsx)(cf.Fragment,{children:(0,cf.jsx)(EZ,Kd({},e))})}))})}function UZ(e){return(0,e.component)()}function DZ(e){var t=e.scarabPosition,n=tB((function(e){return e.experience.experience})),i=n.company,a=n.from,l=n.to,r=n.flag,o=n.color,g=n.title,s=n.positionZ,u=n.positionX,c=n.component,I=r&&t&&t.z-s<70,C=r&&t&&t.z-s<80;return(0,cf.jsx)(cf.Fragment,{children:(0,cf.jsxs)("div",{id:"experienceDev",style:{height:"400px",width:"500px",borderRadius:"5px",backgroundColor:o,padding:"20px",paddingTop:"4px",position:"absolute",right:-120==u&&C?100:null,left:120==u&&C?100:null,top:I?150:-500,opacity:.9,zIndex:5,color:"#fff"},children:[(0,cf.jsx)("div",{style:{textAlign:"center"},children:(0,cf.jsx)("img",{src:"/apy.png",style:{height:"40px",marginBottom:"5px"}})}),(0,cf.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,cf.jsx)("h4",{children:g}),(0,cf.jsx)("h5",{children:(0,cf.jsxs)("em",{children:["  ",i]})}),(0,cf.jsx)("h6",{children:(0,cf.jsx)("em",{children:(0,cf.jsxs)("strong",{children:[a," - ",l]})})})]}),c?(0,cf.jsx)(UZ,{component:c}):null]})})}function PZ(e){var t=e.positionX,n=e.positionZ,a=e.color,l=s((0,i.useState)(0),2),r=(l[0],l[1]),o=s((0,i.useState)(20),2),g=o[0],u=o[1];return(0,cf.jsx)("group",{onClick:function(){r((function(e){return console.log(e),1==e?(u(20),!e):(u(25),!e)}))},children:(0,cf.jsx)("group",{position:[t,50,n],children:(0,cf.jsx)(xy,{top:!0,center:!0,children:(0,cf.jsxs)(Yy,{font:NG,size:g,height:3,lineHeight:.5,letterSpacing:-.025,children:["Contact Me.",(0,cf.jsx)("meshPhongMaterial",{attach:"material",color:a})]})})})})}function QZ(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=QZ(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}var OZ=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=QZ(e))&&(i&&(i+=" "),i+=t);return i},jZ=["theme","type"],$Z=["delay","staleId"];function ex(e){return"number"===typeof e&&!isNaN(e)}function tx(e){return"boolean"===typeof e}function nx(e){return"string"===typeof e}function ix(e){return"function"===typeof e}function ax(e){return nx(e)||ix(e)?e:null}function lx(e){return null!=e}function rx(e){return(0,i.isValidElement)(e)||nx(e)||ix(e)||ex(e)}var ox={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},gx={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function sx(e){var t=e.enter,n=e.exit,a=e.appendPosition,l=void 0!==a&&a,r=e.collapse,o=void 0===r||r,g=e.collapseDuration,s=void 0===g?300:g;return function(e){var a=e.children,r=e.position,g=e.preventExitTransition,u=e.done,c=e.nodeRef,I=e.isIn,C=l?t+"--"+r:t,d=l?n+"--"+r:n,h=(0,i.useRef)(0);return(0,i.useLayoutEffect)((function(){var e=c.current,t=C.split(" "),n=function n(i){var a;i.target===c.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===h.current&&"animationcancel"!==i.type&&(a=e.classList).remove.apply(a,A(t)))};!function(){var i;(i=e.classList).add.apply(i,A(t)),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}()}),[]),(0,i.useEffect)((function(){var e=c.current,t=function t(){e.removeEventListener("animationend",t),o?function(e,t,n){void 0===n&&(n=300);var i=e.scrollHeight,a=e.style;requestAnimationFrame((function(){a.minHeight="initial",a.height=i+"px",a.transition="all "+n+"ms",requestAnimationFrame((function(){a.height="0",a.padding="0",a.margin="0",setTimeout(t,n)}))}))}(e,u,s):u()};I||(g?t():(h.current=1,e.className+=" "+d,e.addEventListener("animationend",t)))}),[I]),i.createElement(i.Fragment,null,a)}}function ux(e,t){return{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}}var cx={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){var t=arguments,n=this;this.list.has(e)&&this.list.get(e).forEach((function(i){var a=setTimeout((function(){i.apply(void 0,A([].slice.call(t,1)))}),0);n.emitQueue.has(e)||n.emitQueue.set(e,[]),n.emitQueue.get(e).push(a)}))}},Ix=function(e){var t=e.theme,n=e.type,a=Yd(e,jZ);return i.createElement("svg",Kd({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-"+n+")"},a))};var Cx={info:function(e){return i.createElement(Ix,Kd({},e),i.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return i.createElement(Ix,Kd({},e),i.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return i.createElement(Ix,Kd({},e),i.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return i.createElement(Ix,Kd({},e),i.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return i.createElement("div",{className:"Toastify__spinner"})}};function dx(e){var t=e.theme,n=e.type,a=e.isLoading,l=e.icon,r=null,o={theme:t,type:n};return!1===l||(ix(l)?r=l(o):(0,i.isValidElement)(l)?r=(0,i.cloneElement)(l,o):nx(l)||ex(l)?r=l:a?r=Cx.spinner():function(e){return e in Cx}(n)&&(r=Cx[n](o))),r}function hx(e){var t=(0,i.useReducer)((function(e){return e+1}),0),n=s(t,2)[1],a=s((0,i.useState)([]),2),l=a[0],r=a[1],o=(0,i.useRef)(null),g=(0,i.useRef)(new Map).current,u=function(e){return-1!==l.indexOf(e)},c=(0,i.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:u,getToast:function(e){return g.get(e)}}).current;function I(e){var t=e.containerId;!c.props.limit||t&&c.containerId!==t||(c.count-=c.queue.length,c.queue=[])}function C(e){r((function(t){return lx(e)?t.filter((function(t){return t!==e})):[]}))}function d(){var e=c.queue.shift();m(e.toastContent,e.toastProps,e.staleId)}function h(e,t){var a=t.delay,l=t.staleId,r=Yd(t,$Z);if(rx(e)&&!function(e){return!o.current||c.props.enableMultiContainer&&e.containerId!==c.props.containerId||g.has(e.toastId)&&null==e.updateId}(r)){var s=r.toastId,u=r.updateId,I=r.data,h=c.props,A=function(){return C(s)},p=null==u;p&&c.count++;var f,b,v={toastId:s,updateId:u,data:I,containerId:r.containerId,isLoading:r.isLoading,theme:r.theme||h.theme,icon:null!=r.icon?r.icon:h.icon,isIn:!1,key:r.key||c.toastKey++,type:r.type,closeToast:A,closeButton:r.closeButton,rtl:h.rtl,position:r.position||h.position,transition:r.transition||h.transition,className:ax(r.className||h.toastClassName),bodyClassName:ax(r.bodyClassName||h.bodyClassName),style:r.style||h.toastStyle,bodyStyle:r.bodyStyle||h.bodyStyle,onClick:r.onClick||h.onClick,pauseOnHover:tx(r.pauseOnHover)?r.pauseOnHover:h.pauseOnHover,pauseOnFocusLoss:tx(r.pauseOnFocusLoss)?r.pauseOnFocusLoss:h.pauseOnFocusLoss,draggable:tx(r.draggable)?r.draggable:h.draggable,draggablePercent:r.draggablePercent||h.draggablePercent,draggableDirection:r.draggableDirection||h.draggableDirection,closeOnClick:tx(r.closeOnClick)?r.closeOnClick:h.closeOnClick,progressClassName:ax(r.progressClassName||h.progressClassName),progressStyle:r.progressStyle||h.progressStyle,autoClose:!r.isLoading&&(f=r.autoClose,b=h.autoClose,!1===f||ex(f)&&f>0?f:b),hideProgressBar:tx(r.hideProgressBar)?r.hideProgressBar:h.hideProgressBar,progress:r.progress,role:r.role||h.role,deleteToast:function(){var e=ux(g.get(s),"removed");g.delete(s),cx.emit(4,e);var t=c.queue.length;if(c.count=lx(s)?c.count-1:c.count-c.displayedToast,c.count<0&&(c.count=0),t>0){var i=lx(s)?1:c.props.limit;if(1===t||1===i)c.displayedToast++,d();else{var a=i>t?t:i;c.displayedToast=a;for(var l=0;l<a;l++)d()}}else n()}};v.iconOut=dx(v),ix(r.onOpen)&&(v.onOpen=r.onOpen),ix(r.onClose)&&(v.onClose=r.onClose),v.closeButton=h.closeButton,!1===r.closeButton||rx(r.closeButton)?v.closeButton=r.closeButton:!0===r.closeButton&&(v.closeButton=!rx(h.closeButton)||h.closeButton);var y=e;(0,i.isValidElement)(e)&&!nx(e.type)?y=(0,i.cloneElement)(e,{closeToast:A,toastProps:v,data:I}):ix(e)&&(y=e({closeToast:A,toastProps:v,data:I})),h.limit&&h.limit>0&&c.count>h.limit&&p?c.queue.push({toastContent:y,toastProps:v,staleId:l}):ex(a)?setTimeout((function(){m(y,v,l)}),a):m(y,v,l)}}function m(e,t,n){var i=t.toastId;n&&g.delete(n);var a={content:e,props:t};g.set(i,a),r((function(e){return[].concat(A(e),[i]).filter((function(e){return e!==n}))})),cx.emit(4,ux(a,null==a.props.updateId?"added":"updated"))}return(0,i.useEffect)((function(){return c.containerId=e.containerId,cx.cancelEmit(3).on(0,h).on(1,(function(e){return o.current&&C(e)})).on(5,I).emit(2,c),function(){g.clear(),cx.emit(3,c)}}),[]),(0,i.useEffect)((function(){c.props=e,c.isToastActive=u,c.displayedToast=l.length})),{getToastToRender:function(t){var n=new Map,i=Array.from(g.values());return e.newestOnTop&&i.reverse(),i.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:o,isToastActive:u}}function Ax(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function mx(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function px(e){var t=s((0,i.useState)(!1),2),n=t[0],a=t[1],l=s((0,i.useState)(!1),2),r=l[0],o=l[1],g=(0,i.useRef)(null),u=(0,i.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,c=(0,i.useRef)(e),I=e.autoClose,C=e.pauseOnHover,d=e.closeToast,h=e.onClick,A=e.closeOnClick;function m(t){if(e.draggable){u.didMove=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",y),document.addEventListener("touchmove",v),document.addEventListener("touchend",y);var n=g.current;u.canCloseOnClick=!0,u.canDrag=!0,u.boundingRect=n.getBoundingClientRect(),n.style.transition="",u.x=Ax(t.nativeEvent),u.y=mx(t.nativeEvent),"x"===e.draggableDirection?(u.start=u.x,u.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(u.start=u.y,u.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function p(){if(u.boundingRect){var t=u.boundingRect,n=t.top,i=t.bottom,a=t.left,l=t.right;e.pauseOnHover&&u.x>=a&&u.x<=l&&u.y>=n&&u.y<=i?b():f()}}function f(){a(!0)}function b(){a(!1)}function v(t){var i=g.current;u.canDrag&&i&&(u.didMove=!0,n&&b(),u.x=Ax(t),u.y=mx(t),"x"===e.draggableDirection?u.delta=u.x-u.start:u.delta=u.y-u.start,u.start!==u.x&&(u.canCloseOnClick=!1),i.style.transform="translate"+e.draggableDirection+"("+u.delta+"px)",i.style.opacity=""+(1-Math.abs(u.delta/u.removalDistance)))}function y(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",y);var t=g.current;if(u.canDrag&&u.didMove&&t){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance)return o(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,i.useEffect)((function(){c.current=e})),(0,i.useEffect)((function(){return g.current&&g.current.addEventListener("d",f,{once:!0}),ix(e.onOpen)&&e.onOpen((0,i.isValidElement)(e.children)&&e.children.props),function(){var e=c.current;ix(e.onClose)&&e.onClose((0,i.isValidElement)(e.children)&&e.children.props)}}),[]),(0,i.useEffect)((function(){return e.pauseOnFocusLoss&&function(){document.hasFocus()||b();window.addEventListener("focus",f),window.addEventListener("blur",b)}(),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",f),window.removeEventListener("blur",b))}}),[e.pauseOnFocusLoss]);var G={onMouseDown:m,onTouchStart:m,onMouseUp:p,onTouchEnd:p};return I&&C&&(G.onMouseEnter=b,G.onMouseLeave=f),A&&(G.onClick=function(e){h&&h(e),u.canCloseOnClick&&d()}),{playToast:f,pauseToast:b,isRunning:n,preventExitTransition:r,toastRef:g,eventHandlers:G}}function fx(e){var t=e.closeToast,n=e.theme,a=e.ariaLabel,l=void 0===a?"close":a;return i.createElement("button",{className:"Toastify__close-button Toastify__close-button--"+n,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":l},i.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},i.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function bx(e){var t=e.delay,n=e.isRunning,a=e.closeToast,l=e.type,r=e.hide,o=e.className,g=e.style,s=e.controlledProgress,u=e.progress,c=e.rtl,I=e.isIn,C=e.theme,d=Kd(Kd({},g),{},{animationDuration:t+"ms",animationPlayState:n?"running":"paused",opacity:r?0:1});s&&(d.transform="scaleX("+u+")");var h=OZ("Toastify__progress-bar",s?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+C,"Toastify__progress-bar--"+l,w({},"Toastify__progress-bar--rtl",c)),A=ix(o)?o({rtl:c,type:l,defaultClassName:h}):OZ(h,o),m=w({},s&&u>=1?"onTransitionEnd":"onAnimationEnd",s&&u<1?null:function(){I&&a()});return i.createElement("div",Kd({role:"progressbar","aria-hidden":r?"true":"false","aria-label":"notification timer",className:A,style:d},m))}bx.defaultProps={type:gx.DEFAULT,hide:!1};var vx=function(e){var t=px(e),n=t.isRunning,a=t.preventExitTransition,l=t.toastRef,r=t.eventHandlers,o=e.closeButton,g=e.children,s=e.autoClose,u=e.onClick,c=e.type,I=e.hideProgressBar,C=e.closeToast,d=e.transition,h=e.position,A=e.className,m=e.style,p=e.bodyClassName,f=e.bodyStyle,b=e.progressClassName,v=e.progressStyle,y=e.updateId,G=e.role,B=e.progress,Z=e.rtl,x=e.toastId,q=e.deleteToast,W=e.isIn,S=e.isLoading,R=e.iconOut,V=e.theme,X=OZ("Toastify__toast","Toastify__toast-theme--"+V,"Toastify__toast--"+c,w({},"Toastify__toast--rtl",Z)),k=ix(A)?A({rtl:Z,position:h,type:c,defaultClassName:X}):OZ(X,A),Y=!!B,z={closeToast:C,type:c,theme:V},K=null;return!1===o||(K=ix(o)?o(z):i.isValidElement(o)?i.cloneElement(o,z):fx(z)),i.createElement(d,{isIn:W,done:q,position:h,preventExitTransition:a,nodeRef:l},i.createElement("div",Kd(Kd({id:x,onClick:u,className:k},r),{},{style:m,ref:l}),i.createElement("div",Kd(Kd({},W&&{role:G}),{},{className:ix(p)?p({type:c}):OZ("Toastify__toast-body",p),style:f}),null!=R&&i.createElement("div",{className:OZ("Toastify__toast-icon",w({},"Toastify--animate-icon Toastify__zoom-enter",!S))},R),i.createElement("div",null,g)),K,(s||Y)&&i.createElement(bx,Kd(Kd({},y&&!Y?{key:"pb-"+y}:{}),{},{rtl:Z,theme:V,delay:s,isRunning:n,isIn:W,closeToast:C,hide:I,type:c,style:v,className:b,controlledProgress:Y,progress:B}))))},yx=sx({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),Gx=(sx({enter:"Toastify--animate Toastify__slide-enter",exit:"Toastify--animate Toastify__slide-exit",appendPosition:!0}),sx({enter:"Toastify--animate Toastify__zoom-enter",exit:"Toastify--animate Toastify__zoom-exit"}),sx({enter:"Toastify--animate Toastify__flip-enter",exit:"Toastify--animate Toastify__flip-exit"}),(0,i.forwardRef)((function(e,t){var n=hx(e),a=n.getToastToRender,l=n.containerRef,r=n.isToastActive,o=e.className,g=e.style,s=e.rtl,u=e.containerId;function c(e){var t=OZ("Toastify__toast-container","Toastify__toast-container--"+e,w({},"Toastify__toast-container--rtl",s));return ix(o)?o({position:e,rtl:s,defaultClassName:t}):OZ(t,ax(o))}return(0,i.useEffect)((function(){t&&(t.current=l.current)}),[]),i.createElement("div",{ref:l,className:"Toastify",id:u},a((function(e,t){var n=t.length?Kd({},g):Kd(Kd({},g),{},{pointerEvents:"none"});return i.createElement("div",{className:c(e),style:n,key:"container-"+e},t.map((function(e,n){var a=e.content,l=e.props;return i.createElement(vx,Kd(Kd({},l),{},{isIn:r(l.toastId),style:Kd(Kd({},l.style),{},{"--nth":n+1,"--len":t.length}),key:"toast-"+l.key}),a)})))})))})));Gx.displayName="ToastContainer",Gx.defaultProps={position:ox.TOP_RIGHT,transition:yx,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:fx,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var Bx,Zx=new Map,xx=[];function wx(){return Math.random().toString(36).substring(2,9)}function qx(e){return e&&(nx(e.toastId)||ex(e.toastId))?e.toastId:wx()}function Wx(e,t){return Zx.size>0?cx.emit(0,e,t):xx.push({content:e,options:t}),t.toastId}function Sx(e,t){return Kd(Kd({},t),{},{type:t&&t.type||e,toastId:qx(t)})}function Rx(e){return function(t,n){return Wx(t,Sx(e,n))}}function Vx(e,t){return Wx(e,Sx(gx.DEFAULT,t))}Vx.loading=function(e,t){return Wx(e,Sx(gx.DEFAULT,Kd({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},Vx.promise=function(e,t,n){var i,a=t.pending,l=t.error,r=t.success;a&&(i=nx(a)?Vx.loading(a,n):Vx.loading(a.render,Kd(Kd({},n),a)));var o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null,delay:100},g=function(e,t,a){if(null!=t){var l=Kd(Kd(Kd({type:e},o),n),{},{data:a}),r=nx(t)?{render:t}:t;return i?Vx.update(i,Kd(Kd({},l),r)):Vx(r.render,Kd(Kd({},l),r)),a}Vx.dismiss(i)},s=ix(e)?e():e;return s.then((function(e){return g("success",r,e)})).catch((function(e){return g("error",l,e)})),s},Vx.success=Rx(gx.SUCCESS),Vx.info=Rx(gx.INFO),Vx.error=Rx(gx.ERROR),Vx.warning=Rx(gx.WARNING),Vx.warn=Vx.warning,Vx.dark=function(e,t){return Wx(e,Sx(gx.DEFAULT,Kd({theme:"dark"},t)))},Vx.dismiss=function(e){Zx.size>0?cx.emit(1,e):xx=xx.filter((function(t){return lx(e)&&t.options.toastId!==e}))},Vx.clearWaitingQueue=function(e){return void 0===e&&(e={}),cx.emit(5,e)},Vx.isActive=function(e){var t=!1;return Zx.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},Vx.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,i=Zx.get(n||Bx);return i?i.getToast(e):null}(e,t);if(n){var i=n.props,a=n.content,l=Kd(Kd(Kd({},i),t),{},{toastId:t.toastId||e,updateId:wx()});l.toastId!==e&&(l.staleId=e);var r=l.render||a;delete l.render,Wx(r,l)}}),0)},Vx.done=function(e){Vx.update(e,{progress:1})},Vx.onChange=function(e){return cx.on(4,e),function(){cx.off(4,e)}},Vx.POSITION=ox,Vx.TYPE=gx,cx.on(2,(function(e){Bx=e.containerId||e,Zx.set(Bx,e),xx.forEach((function(e){cx.emit(0,e.content,e.options)})),xx=[]})).on(3,(function(e){Zx.delete(e.containerId||e),0===Zx.size&&cx.off(0).off(1).off(5)}));var Xx=n(4569),kx=n.n(Xx)().create({baseURL:"http://localhost:5000",headers:{"Content-Type":"application/json",crossdomain:!0}}),Yx={position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0};function zx(e){var t=e.scarabPosition,n=e.color,a=function(){var e=p(q().mark((function e(){var t;return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},["name","email","phone","message"].map((function(e){var n=document.getElementById(e).value;t[e]=n})),e.next=6,kx.post("/");case 6:Vx("\ud83e\udd84 Thank you for contacting me!",Yx),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Vx.error("Something went wrong :(",Yx);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),l=s((0,i.useState)(null),2);l[0],l[1];return(0,cf.jsx)(cf.Fragment,{children:(0,cf.jsxs)("div",{id:"contactDev",style:{height:"400px",width:"450px",borderRadius:"10px",backgroundColor:n,padding:"20px",paddingTop:"40px",position:"absolute",left:100,top:t.z<300?150:-500,opacity:.9,zIndex:5,textAlign:"center"},children:[(0,cf.jsx)("input",{type:"text",placeholder:"Name",id:"name"}),(0,cf.jsx)("br",{}),(0,cf.jsx)("input",{type:"email",placeholder:"Email",id:"email"}),(0,cf.jsx)("br",{}),(0,cf.jsx)("input",{type:"text",placeholder:"Phone",id:"phone"}),(0,cf.jsx)("br",{}),(0,cf.jsx)("textarea",{placeholder:"Write your message.",id:"message"}),(0,cf.jsx)("br",{}),(0,cf.jsx)("button",{type:"submit",className:"button-54",onClick:function(){a()},children:"Send"}),(0,cf.jsx)("div",{style:{textAlign:"right",marginTop:"15px"},children:(0,cf.jsx)("img",{src:"/bird.png",style:{height:"50px"}})})]})})}function Kx(){return(0,cf.jsx)("div",{class:"main-container",children:(0,cf.jsxs)("div",{class:"sub-container",children:[(0,cf.jsx)("div",{id:"useArrows",className:"bounce-in",children:(0,cf.jsxs)("h5",{children:["Use Arrows,Space and Enter to move.",(0,cf.jsx)("i",{class:"fa-solid fa-rocket"})]})}),(0,cf.jsxs)("div",{class:"sky",children:[(0,cf.jsx)("div",{class:"stars"}),(0,cf.jsx)("div",{class:"stars2"}),(0,cf.jsx)("div",{class:"stars3"}),(0,cf.jsx)("div",{class:"comet"})]})]})})}function Nx(e){var t=e.positionX,n=e.positionZ,a=e.color,l=s((0,i.useState)(0),2),r=(l[0],l[1]),o=s((0,i.useState)(20),2),g=o[0],u=o[1];return(0,cf.jsxs)("group",{onClick:function(){r((function(e){return console.log(e),1==e?(u(20),!e):(u(25),!e)}))},children:[(0,cf.jsx)("group",{position:[t,50,n],children:(0,cf.jsx)(xy,{top:!0,center:!0,children:(0,cf.jsxs)(Yy,{font:NG,size:g,height:3,lineHeight:.5,letterSpacing:-.025,children:["Creation.",(0,cf.jsx)("meshPhongMaterial",{attach:"material",color:a})]})})}),(0,cf.jsx)(KG,{modelPath:"/egyptian_shop.glb",position:new Yi(-120,0,600),scale:[.1,.1,.1],rotation:[0,0,0]}),(0,cf.jsx)(KG,{modelPath:"/antena.glb",position:new Yi(65,50,500),scale:[1,1,1],rotation:[.3,5,0]})]})}function Hx(e){var t=e.scarabPosition,n=e.color,a=s((0,i.useState)(null),2);a[0],a[1];return(0,cf.jsx)(cf.Fragment,{children:(0,cf.jsxs)("div",{id:"contactDev",style:{height:"450px",width:"450px",borderRadius:"10px",backgroundColor:n,padding:"20px",paddingTop:"40px",position:"absolute",left:100,top:t.z<620&&t.z>480?150:-500,opacity:.9,zIndex:5,textAlign:"center"},children:[(0,cf.jsx)("div",{children:(0,cf.jsx)("iframe",{width:"300",height:"200",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",src:"https://www.youtube.com/embed/JiAxQ3WoRu8",allowfullscreen:!0,frameborder:"0"})}),(0,cf.jsx)("br",{}),(0,cf.jsx)("div",{style:{display:"inline-block",marginRight:"5px"},children:(0,cf.jsx)("iframe",{width:"200",height:"100",src:"https://www.youtube.com/embed/dVLyK7q9Wdc",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})}),(0,cf.jsx)("iframe",{width:"200",height:"100",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",src:"https://www.youtube.com/embed/e9E6fCoFDXk",allowfullscreen:!0,frameborder:"0"}),(0,cf.jsx)("div",{style:{textAlign:"right",marginTop:"15px"},children:(0,cf.jsx)("img",{src:"/bird.png",style:{height:"50px"}})})]})})}var Mx=0,Fx=Ld((function(e){return Qc.onStart=function(t,n,i){e({active:!0,item:t,loaded:n,total:i,progress:(n-Mx)/(i-Mx)*100})},Qc.onLoad=function(){e({active:!1})},Qc.onError=function(t){return e((function(e){return{errors:[].concat(A(e.errors),[t])}}))},Qc.onProgress=function(t,n,i){n===i&&(Mx=i),e({active:!0,item:t,loaded:n,total:i,progress:(n-Mx)/(i-Mx)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}}));function Lx(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=Fx().progress;return(0,cf.jsx)(cf.Fragment,{children:(0,cf.jsxs)("div",{class:"loader",children:[(0,cf.jsx)("span",{class:"loader__element"}),(0,cf.jsx)("span",{class:"loader__element"}),(0,cf.jsx)("span",{class:"loader__element"}),(0,cf.jsx)("p",{children:(0,cf.jsx)("strong",{children:(0,cf.jsxs)("em",{children:[t.toFixed(0)," %"]})})}),(0,cf.jsx)("p",{style:{position:"absolute",bottom:10},children:"@MAZOONIT"})]})})}function _x(e){var t=e.scarabPosition,n=function(e,t,n){return my("Plane",e,(function(){return[]}),t,n)}((function(){return{rotation:[-Math.PI/2,0,0]}}));s(n,1)[0];return(0,cf.jsxs)("mesh",{rotation:[-Math.PI/2,0,0],children:[(0,cf.jsx)("planeBufferGeometry",{attach:"geometry",args:[300,3e3]}),(0,cf.jsx)("meshLambertMaterial",{attach:"material",color:t.z>700?"lightblue":"lightgreen"})]})}!function(e){if(!zA){zA=!0;var t=lr.shadowmap_pars_fragment;t=t.replace("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP\n"+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.frustum,n=void 0===t?3.75:t,i=e.size,a=void 0===i?.005:i,l=e.near,r=void 0===l?9.5:l,o=e.samples,g=void 0===o?17:o,s=e.rings,u=void 0===s?11:s;return"#define LIGHT_WORLD_SIZE ".concat(a,"\n#define LIGHT_FRUSTUM_WIDTH ").concat(n,"\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\n#define NEAR_PLANE ").concat(r,"\n\n#define NUM_SAMPLES ").concat(g,"\n#define NUM_RINGS ").concat(u,"\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\n#define PCF_NUM_SAMPLES NUM_SAMPLES\n\nvec2 poissonDisk[NUM_SAMPLES];\n\nvoid initPoissonSamples(const in vec2 randomSeed) {\n  float ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\n  float INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\n  float angle = rand(randomSeed) * PI2;\n  float radius = INV_NUM_SAMPLES;\n  float radiusStep = radius;\n  for (int i = 0; i < NUM_SAMPLES; i++) {\n    poissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\n    radius += radiusStep;\n    angle += ANGLE_STEP;\n  }\n}\n\nfloat penumbraSize(const in float zReceiver, const in float zBlocker) { // Parallel plane estimation\n  return (zReceiver - zBlocker) / zBlocker;\n}\n\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver) {\n  float searchRadius = LIGHT_SIZE_UV * (zReceiver - NEAR_PLANE) / zReceiver;\n  float blockerDepthSum = 0.0;\n  int numBlockers = 0;\n  for (int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++) {\n    float shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\n    if (shadowMapDepth < zReceiver) {\n      blockerDepthSum += shadowMapDepth;\n      numBlockers++;\n    }\n  }\n  if (numBlockers == 0) return -1.0;\n  return blockerDepthSum / float(numBlockers);\n}\n\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\n  float sum = 0.0;\n  for (int i = 0; i < PCF_NUM_SAMPLES; i++) {\n    float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[ i ] * filterRadius));\n    if (zReceiver <= depth) sum += 1.0;\n  }\n  for (int i = 0; i < PCF_NUM_SAMPLES; i++) {\n    float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[ i ].yx * filterRadius));\n    if (zReceiver <= depth) sum += 1.0;\n  }\n  return sum / (2.0 * float(PCF_NUM_SAMPLES));\n}\n\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\n  vec2 uv = coords.xy;\n  float zReceiver = coords.z; // Assumed to be eye-space z in this code\n  initPoissonSamples(uv);\n  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\n  if (avgBlockerDepth == -1.0) return 1.0;\n  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n  float filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\n  return PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\n}")}(Kd({},e))),t=t.replace("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),lr.shadowmap_pars_fragment=t}}();var Tx=function(e,t){switch(t.type){case"MOVEBACK":return e.scarabPosition.z<1500&&(e.scarabPosition=e.scarabPosition.add(new Yi(0,0,2))),e;case"MOVEFORWARD":return e.scarabPosition.z>0&&(e.scarabPosition=e.scarabPosition.add(new Yi(0,0,-2))),e;case"MOVELEFT":return e.scarabPosition.x>=-138&&(e.scarabPosition=e.scarabPosition.add(new Yi(-2,0,0))),e;case"MOVERIGHT":return e.scarabPosition.x<=138&&(e.scarabPosition=e.scarabPosition.add(new Yi(2,0,0))),e;case"FLY":return e.scarabPosition.y<200&&(e.scarabPosition=e.scarabPosition.add(new Yi(0,10,0))),e;case"FALL":return e.scarabPosition.y>10&&(e.scarabPosition=e.scarabPosition.add(new Yi(0,-10,0))),e;default:return e}};function Ex(e){var t=e.loading,n=s((0,i.useState)({flag:!1}),2),a=n[0],l=n[1],r=s((0,i.useReducer)(Tx,{cameraPosition:new Yi(10,300,300),scarabPosition:new Yi(0,10,1500),scarabRotation:new ki(0,0,-.4,0)}),2),o=r[0],g=r[1],u=s((0,i.useState)(0),2),c=(u[0],u[1]);return(0,i.useEffect)((function(){var e=function(e){if(console.log(t),"ArrowDown"===e.key)document.getElementById("down").classList.add("pressed"),c((function(e){return e+1})),g({type:"MOVEBACK"});else if("ArrowUp"===e.key){document.getElementById("up").classList.add("pressed"),c((function(e){return e+1})),g({type:"MOVEFORWARD"})}else if("ArrowLeft"===e.key){document.getElementById("left").classList.add("pressed"),c((function(e){return e+1})),g({type:"MOVELEFT"})}else if("ArrowRight"===e.key){document.getElementById("right").classList.add("pressed"),c((function(e){return e+1})),g({type:"MOVERIGHT"})}else" "==e.key?(c((function(e){return e+1})),g({type:"FLY"})):"Enter"==e.key&&(c((function(e){return e+1})),g({type:"FALL"}))},n=function(){document.getElementById("up").classList.remove("pressed"),document.getElementById("down").classList.remove("pressed"),document.getElementById("left").classList.remove("pressed"),document.getElementById("right").classList.remove("pressed")};return window.addEventListener("keydown",e),window.addEventListener("keyup",n),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",n)}}),[]),(0,cf.jsxs)(cf.Fragment,{children:[(0,cf.jsx)(Hx,{scarabPosition:o.scarabPosition,color:"#42855B"}),(0,cf.jsx)(zx,{scarabPosition:o.scarabPosition,color:"#42855B"}),(0,cf.jsx)(DZ,{currentExperience:a,scarabPosition:o.scarabPosition}),(0,cf.jsx)(By,{}),(0,cf.jsxs)(YA,{shadowMap:!0,shadows:!0,colorManagement:!0,pixelRatio:window.devicePixelRatio,style:{position:"absolute",top:0},children:[(0,cf.jsx)(uf,{}),(0,cf.jsx)("pointLight",{position:[-10,0,-20],intensity:1}),(0,cf.jsx)("pointLight",{position:[0,10,0],intensity:10}),(0,cf.jsx)("ambientLight",{intensity:1}),(0,cf.jsx)("directionalLight",{castShadow:!0,position:[10,0,0],intensitry:1.6,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10}),(0,cf.jsx)("directionalLight",{castShadow:!0,position:[-500,-10,-500],intensitry:1.6,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10}),(0,cf.jsx)("directionalLight",{castShadow:!0,position:[5,500,10],intensitry:1.6,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":50,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10}),(0,cf.jsxs)(Gy,{children:[o.scarabPosition.z>1290?(0,cf.jsx)(HG,{}):null,o.scarabPosition.z<600?(0,cf.jsx)(PZ,{positionX:60,positionZ:200,color:"#42855B",scarabPosition:o.scarabPosition}):null,o.scarabPosition.z<820?(0,cf.jsx)(Nx,{positionX:0,positionZ:500,color:"#42855B",scarabPosition:o.scarabPosition}):null,(0,cf.jsx)(JZ,{scarabPosition:o.scarabPosition,setCurrentExperience:l}),(0,cf.jsx)(_G,{position:o.scarabPosition,positions:o}),(0,cf.jsx)(_x,{scarabPosition:o.scarabPosition})]}),(0,cf.jsx)(MA,{})]})]})}var Jx=function(){return(0,cf.jsxs)(cf.Fragment,{children:[(0,cf.jsx)(Kx,{}),(0,cf.jsx)(i.Suspense,{r3f:!0,fallback:(0,cf.jsx)(Lx,{}),children:(0,cf.jsx)(Ex,{})})]})},Ux=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,l=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),l(e),r(e)}))},Dx=function(e){var t,n=zZ(),i=e||{},a=i.reducer,l=void 0===a?void 0:a,r=i.middleware,o=void 0===r?n():r,g=i.devTools,s=void 0===g||g,u=i.preloadedState,c=void 0===u?void 0:u,I=i.enhancers,C=void 0===I?void 0:I;if("function"===typeof l)t=l;else{if(!XZ(l))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=pZ(l)}var d=o;"function"===typeof d&&(d=d(n));var h=bZ.apply(void 0,d),A=fZ;s&&(A=VZ(RZ({trace:!1},"object"===typeof s&&s)));var m=[h];return Array.isArray(C)?m=ZZ([h],C):"function"===typeof C&&(m=C(m)),mZ(t,c,A.apply(void 0,m))}({reducer:{experience:_Z},middleware:function(e){return e({serializableCheck:{ignoredActions:["experience/setExperience"],ignoredPaths:["experience.experience"]}})}});a.createRoot(document.getElementById("root")).render((0,cf.jsx)(lB,{store:Dx,children:(0,cf.jsxs)(i.StrictMode,{children:[(0,cf.jsx)(Jx,{}),(0,cf.jsx)(Gx,{})]})})),Ux()}()}();
//# sourceMappingURL=main.172d4924.js.map